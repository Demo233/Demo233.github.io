{"meta":{"title":"YIHAO'S BLOG","subtitle":null,"description":null,"author":"Yihao","url":"yihao.ml","root":"/"},"pages":[{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2019-06-30T11:27:45.560Z","updated":"2019-06-30T11:27:45.560Z","comments":false,"path":"/404.html","permalink":"yihao.ml//404.html","excerpt":"","text":""},{"title":"å…³äº","date":"2019-06-30T11:27:45.560Z","updated":"2019-06-30T11:27:45.560Z","comments":false,"path":"about/index.html","permalink":"yihao.ml/about/index.html","excerpt":"","text":"ä¸ªäººè¯¦ç»†ä»‹ç»"},{"title":"åˆ†ç±»","date":"2019-06-30T11:27:45.560Z","updated":"2019-06-30T11:27:45.560Z","comments":false,"path":"categories/index.html","permalink":"yihao.ml/categories/index.html","excerpt":"","text":""},{"title":"ä¹¦å•","date":"2019-06-30T11:57:52.224Z","updated":"2019-06-30T11:57:52.223Z","comments":false,"path":"books/index.html","permalink":"yihao.ml/books/index.html","excerpt":"","text":"ç®—æ³•"},{"title":"å‹æƒ…é“¾æ¥","date":"2019-06-30T11:27:45.559Z","updated":"2019-06-30T11:27:45.559Z","comments":true,"path":"links/index.html","permalink":"yihao.ml/links/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2019-06-30T11:27:45.561Z","updated":"2019-06-30T11:27:45.561Z","comments":false,"path":"repository/index.html","permalink":"yihao.ml/repository/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2019-06-30T11:27:45.559Z","updated":"2019-06-30T11:27:45.559Z","comments":false,"path":"tags/index.html","permalink":"yihao.ml/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Anaconda IDEA","slug":"2019-11-29-test","date":"2019-11-29T12:20:47.711Z","updated":"2019-11-29T12:20:47.711Z","comments":true,"path":"2019/11/29/2019-11-29-test/","link":"","permalink":"yihao.ml/2019/11/29/2019-11-29-test/","excerpt":"","text":"My new blog","categories":[{"name":"test","slug":"test","permalink":"yihao.ml/categories/test/"}],"tags":[{"name":"test","slug":"test","permalink":"yihao.ml/tags/test/"}]},{"title":"Anaconda IDEA","slug":"2019â€“11-12-Anacoda IDEA","date":"2019-11-11T16:06:13.903Z","updated":"2019-11-29T12:20:47.711Z","comments":true,"path":"2019/11/11/2019â€“11-12-Anacoda IDEA/","link":"","permalink":"yihao.ml/2019/11/11/2019â€“11-12-Anacoda IDEA/","excerpt":"","text":"å¥½çš„ä¼˜ç§€çš„IDEAå¯ä»¥æé«˜ç”Ÿäº§æ•ˆç‡ï¼Œä¸‹é¢ä»‹ç»ä¸€ä¸‹Pythonçš„å¸¸ç”¨IDEAã€‚PyCharmï¼šå¤æ‚å¤§å‹çš„ä¼ä¸šçº§åº”ç”¨ã€‚IDLEã€Sublime ï¼š 300+è¡Œçš„ä»£ç ç¨‹åºã€‚Anacondaï¼šé€‚åˆç§‘å­¦è®¡ç®—å’Œæ•°æ®åˆ†æã€‚ æ¦‚è¿°Anacodaå…è´¹å¼€æºã€æ”¯æŒ8000ä¸ªç¬¬ä¸‰æ–¹åº“ã€åŒ…å«å¤šä¸ªä¸»æµå·¥å…·ï¼Œé€‚åˆæ•°æ®è®¡ç®—é¢†åŸŸå¼€å‘ã€‚ä¸‹é¢äº†è§£ä¸€ä¸‹é‡Œé¢çš„åŸºæœ¬ç»„ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ä¸Šwww.continuum.ioä¸Šå®‰è£…æœ€æ–°çš„Anacoda IDEAã€‚å®ƒå¯ä»¥è£…åœ¨linuxã€winã€macä¸Šã€‚å®é™…ä¸Šï¼ŒAnacodaåªæ˜¯å¸®æˆ‘ä»¬é›†æˆå„ç±»pythonå·¥å…·ï¼Œæ¯”å¦‚ä¸‹é¢ä¸‰ä¸ªç»„ä»¶ï¼šCondaï¼š ä¸pipå’Œmavenç±»ä¼¼ï¼Œæ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·ç”¨äºç®¡ç†ç¬¬ä¸‰æ–¹åŒ…ã€‚Spyderï¼š å®ƒå¯ä»¥ç¼–å†™pythonä»£ç ï¼Œå¹¶ä¸”æ”¯æŒè°ƒè¯•è¿è¡Œã€‚IPythonï¼š æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„äº¤äº’å¼shellï¼Œç¼–å†™ä»£ç å˜å¾—æ›´æ–¹ä¾¿ï¼Œé€‚åˆè¿›è¡Œäº¤äº’å¼æ•°æ®å¯è§†åŒ–å’ŒGUIç›¸å…³åº”ç”¨å¼€å‘ï¼Œä¾¿äºåšæ•°æ®åˆ†æã€‚ condaå®‰è£…Anacoda ï¼Œæ‰“å¼€Anacoda Navigatorã€‚åœ¨Environmentsä¸€æ ä¸­å¯ä»¥çœ‹åˆ°é»˜è®¤çš„rootç¯å¢ƒç©ºé—´ï¼Œç©ºé—´ä¸­å·²ç»åŒ…å«äº†å¾ˆå¤šé»˜è®¤çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚å¦‚æœéœ€è¦å¯ä»¥ç»§ç»­åˆ›å»ºåˆ«çš„ç¯å¢ƒç©ºé—´ã€‚ SpyderSpyderæœ‰ä¸‰ä¸ªå·¥ä½œåŒºï¼Œåˆ†åˆ«ä¸ºç¼–è¾‘åŒºã€æ–‡æœ¬å¯¼èˆªå’Œå¸®åŠ©åŒºã€IPythonåŒºæ–‡æœ¬å¯¼èˆªå’Œå¸®åŠ©åŒºæˆ‘ä»¬ä¸ç»å¸¸ä½¿ç”¨ï¼Œå»ºè®®åˆ é™¤æ‰ç®€åŒ–å¼€å‘é¡µé¢ã€‚åœ¨tools -&gt; perference -&gt; syntax coloringä¸­å¯ä»¥è®¾ç½®ä¸»é¢˜ IPythonIn [num] : InæŒ‡çš„æ˜¯è¾“å…¥çš„å‘½ä»¤ï¼Œnumæ˜¯IPythonçš„è¡Œå·Out [num] : OutæŒ‡çš„æ˜¯è¾“å‡ºå€¼æˆ–ç»“æœä¸‹é¢ä»‹ç»ä¸€ä¸‹IPythonä¸­å¸¸ç”¨çš„ä¸¤ä¸ªæŒ‡ä»¤ï¼šï¼Ÿå’Œ%ï¼Ÿè·Ÿåœ¨å˜é‡çš„åé¢ï¼Œå¯ä»¥æ‰“å°æ›´å¤šçš„è¯¦ç»†ä¿¡æ¯ã€‚%run file.py å¯ä»¥è¿è¡Œä»»æ„ç›®å½•ä¸‹çš„file.pyæ–‡ä»¶ã€‚é™¤ä¸Šé¢å‘½ä»¤ä»¥å¤–ï¼ŒIPythonè¿˜æœ‰å¾ˆå¤šå…¶ä»–æŒ‡ä»¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š","categories":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"yihao.ml/categories/æœºå™¨å­¦ä¹ /"}],"tags":[{"name":"Anaconda","slug":"Anaconda","permalink":"yihao.ml/tags/Anaconda/"}]},{"title":"FlinkåŸºæœ¬æ¦‚å¿µï¼ˆä¸€ï¼‰","slug":"2019â€“11-08-FlinkåŸºæœ¬æ¦‚å¿µ","date":"2019-11-11T05:31:46.485Z","updated":"2019-11-29T12:20:47.710Z","comments":true,"path":"2019/11/11/2019â€“11-08-FlinkåŸºæœ¬æ¦‚å¿µ/","link":"","permalink":"yihao.ml/2019/11/11/2019â€“11-08-FlinkåŸºæœ¬æ¦‚å¿µ/","excerpt":"","text":"Flinkæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€å¯æ‹“å±•å¹¶è¡Œè®¡ç®—çš„æµå¼è®¡ç®—å¼•æ“ã€‚å¤§æ•°æ®ç”Ÿæ€ä¸­ï¼Œæµå¼è®¡ç®—å¼•æ“è¿˜çœŸä¸å°‘ï¼Œæ¯”å¦‚Sparkã€Stormï¼›ä»–ä»¬åœ¨å¤„ç†æ•°æ®æ—¶å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œé‚£ä¹ˆFlinkåœ¨æµå¤„ç†ä¸­ï¼Œæ€§èƒ½æ˜¯ä¸æ˜¯è¦ä¼˜äºå‰ä¸¤è€…ï¼Œä¸‹é¢é’ˆå¯¹å‡ ä¸ªæ–¹é¢æˆ‘ä»¬æ¥å¿«é€Ÿçš„å…¥ä¸ªé—¨ã€‚ä¸»è¦æè¿°Flinkä¸­çš„åŸºæœ¬æ¦‚å¿µã€‚ Job Managersã€Task Managersã€å®¢æˆ·ç«¯ï¼ˆClientsï¼‰ä¸‹é¢ç®€å•è¯´ä¸€è¯´Flinkä¸­æ¯”è¾ƒé‡è¦çš„ä¸‰ä¸ªç»„ä»¶ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯JobManagersï¼ŒTaskManagersï¼ŒClientã€‚ 1.ä»€ä¹ˆæ˜¯JobManagerï¼ŸJob Managersï¼Œæ˜¯æ•´ä¸ªåº”ç”¨çš„Masterã€‚å®ƒè´Ÿè´£è°ƒåº¦ä»»åŠ¡ï¼Œåè°ƒcheckpointï¼Œåè°ƒæ•…éšœæ¢å¤ç­‰ã€‚ä¸€ä¸ªJobè‡³å°‘ä¼šæœ‰ä¸€ä¸ªJob Managerã€‚é«˜å¯ç”¨éƒ¨ç½²ä¸‹ä¼šæœ‰å¤šä¸ªJobManagersï¼Œå…¶ä¸­ä¸€ä¸ªä½œä¸ºleaderï¼Œå…¶ä½™çš„å¤„äºstandbyçŠ¶æ€ã€‚ 2.ä»€ä¹ˆæ˜¯TaskManagersï¼ŸTaskManagersï¼Œæ˜¯æ•´ä¸ªåº”ç”¨çš„Workersã€‚å®ƒä¸»è¦æ‰§è¡Œdataflowä¸­çš„tasksï¼ˆæ›´å‡†ç¡®æ¥è¯´åº”è¯¥æ˜¯subtasksï¼‰ï¼Œå¹¶ä¸”ç¼“å­˜å’Œäº¤æ¢æ•°æ®streamsã€‚æ¯ä¸ªjobè‡³å°‘ä¼šæœ‰ä¸€ä¸ªtaskmanagerã€‚ 3.ä»€ä¹ˆæ˜¯clientï¼Ÿclientç”¨æˆ·ç«¯ä¸»è¦è´Ÿè´£æäº¤DataFlow åˆ°JobManagerï¼Œå–æ¶ˆæˆ–è€…æ›´æ–°Jobã€‚å®¢æˆ·ç«¯çš„ä»£ç ç”±Javaæˆ–è€…Scalaç¼–å†™ã€‚è¿è¡Œä»£ç æŒ‡ä»¤å¦‚ flink run xxx.jarâ€¦ 4.æ€ä¹ˆå¯åŠ¨JobManagerså’ŒTaskManagersJobManagerså’ŒTaskManagersæœ‰å¤šç§å¯åŠ¨æ–¹å¼ï¼šç›´æ¥åœ¨æœºå™¨ä¸Šå¯åŠ¨ï¼ˆstandalone clusterï¼‰ï¼›åœ¨å®¹å™¨æˆ–èµ„æºç®¡ç†æ¡†æ¶ä¸­å¯åŠ¨ï¼Œæ¯”å¦‚Mesosã€Yarnã€‚åç»­æˆ‘ä»¬ä¼šä½¿ç”¨Yarnå–å¯åŠ¨JobManager Task å’Œ SubTasksåˆ†å¸ƒå¼è®¡ç®—ä¸­ï¼ŒFlink å°†ç®—å­ï¼ˆoperatorï¼‰çš„ subtask é“¾æ¥ï¼ˆchainï¼‰æˆ taskã€‚æ¯ä¸ª task ç”±ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚æŠŠç®—å­é“¾æ¥æˆ tasks èƒ½å¤Ÿå‡å°‘çº¿ç¨‹é—´åˆ‡æ¢å’Œç¼“å†²çš„å¼€é”€ï¼Œåœ¨é™ä½å»¶è¿Ÿçš„åŒæ—¶æé«˜äº†æ•´ä½“ååé‡ã€‚é“¾æ¥æ“ä½œçš„é…ç½®è¯¦æƒ…å¯å‚è€ƒï¼šchaining docsä¸‹å›¾çš„ dataflow ç”±äº”ä¸ª subtasks æ‰§è¡Œï¼Œå› æ­¤å…·æœ‰äº”ä¸ªå¹¶è¡Œçº¿ç¨‹ã€‚ Task Slotså’Œèµ„æº 1.ä»€ä¹ˆæ˜¯slotsï¼ˆæ§½ï¼‰ï¼Ÿflinkä¸­ä¸€ä¸ªTaskManagerä¸­è‡³å°‘æœ‰ä¸€ä¸ªslotï¼ˆæ§½ï¼‰ï¼Œæ¯ä¸ªSlotä»£è¡¨äº†TasManagerçš„ä¸€ä»½å›ºå®šèµ„æºå­é›†ã€‚subtaskså®é™…è¿è¡Œåœ¨slotå†…ï¼Œåˆ’åˆ†èµ„æºæ„å‘³ç€subtaskä¹‹é—´ä¸ä¼šç«äº‰èµ„æºï¼Œä½†æ˜¯ä¹Ÿæ„å‘³ç€å®ƒä»¬åªæ‹¥æœ‰å›ºå®šçš„èµ„æºã€‚è¿™é‡Œæ²¡æœ‰CPUçš„éš”ç¦»ï¼Œåªæ˜¯åˆ’åˆ†ä»»åŠ¡çš„å†…å­˜èµ„æºã€‚ 2.substasksæ€ä¹ˆå…±äº«slotåœ¨ä»£ç ä¸­å¯ä»¥ä½¿ç”¨slotSharingGroupï¼ˆï¼‰å‡½æ•°æ¥è®¾ç½®å…±äº«æ§½ï¼Œå¦‚æœä¸è®¾ç½®é»˜è®¤ä¸ºdefaultã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒFlink å…è®¸ subtasks å…±äº« slotsï¼Œå³ä½¿å®ƒä»¬æ˜¯ä¸åŒ tasks çš„ subtasksï¼Œåªè¦å®ƒä»¬æ¥è‡ªåŒä¸€ä¸ª jobã€‚å› æ­¤ï¼Œä¸€ä¸ª slot å¯èƒ½ä¼šè´Ÿè´£è¿™ä¸ª job çš„æ•´ä¸ªç®¡é“ï¼ˆpipelineï¼‰ã€‚å…è®¸ slot sharing æœ‰ä¸¤ä¸ªå¥½å¤„ï¼šFlink é›†ç¾¤éœ€è¦ä¸ job ä¸­ä½¿ç”¨çš„æœ€é«˜å¹¶è¡Œåº¦ä¸€æ ·å¤šçš„ slotsã€‚è¿™æ ·ä¸éœ€è¦è®¡ç®—ä½œä¸šæ€»å…±åŒ…å«å¤šå°‘ä¸ª tasksï¼ˆå…·æœ‰ä¸åŒå¹¶è¡Œåº¦ï¼‰ã€‚æ›´å¥½çš„èµ„æºåˆ©ç”¨ç‡ã€‚åœ¨æ²¡æœ‰ slot sharing çš„æƒ…å†µä¸‹ï¼Œç®€å•çš„ subtasksï¼ˆsource/map()ï¼‰å°†ä¼šå ç”¨å’Œå¤æ‚çš„ subtasks ï¼ˆwindowï¼‰ä¸€æ ·å¤šçš„èµ„æºã€‚é€šè¿‡ slot sharingï¼Œå°†ç¤ºä¾‹ä¸­çš„å¹¶è¡Œåº¦ä» 2 å¢åŠ åˆ° 6 å¯ä»¥å……åˆ†åˆ©ç”¨ slot çš„èµ„æºï¼ŒåŒæ—¶ç¡®ä¿ç¹é‡çš„ subtask åœ¨ TaskManagers ä¹‹é—´å…¬å¹³åœ°è·å–èµ„æºã€‚å‚è€ƒèµ„æ–™:https://ci.apache.org/projects/flink/flink-docs-release-1.9/concepts/runtime.html åç»­æ€»ç»“Flink éƒ¨ç½²æ–¹å¼ï¼Œé‡ç‚¹Flink on yarnå¦‚ä½•å‘yarnç”³è¯·Flinkè¿è¡Œèµ„æºï¼ˆJobManagerï¼‰å¦‚ä½•æäº¤ä¸€ä¸ªç®€å•çš„Flinkç¨‹åº","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Flink","slug":"Flink","permalink":"yihao.ml/tags/Flink/"}]},{"title":"Kafkaæºç åˆ¨æä¹‹Produer Metadataæ›´æ–°æœºåˆ¶ï¼ˆäºŒï¼‰","slug":"2019-11-07-Kafkaæºç åˆ¨æä¹‹Produer Metadataæ›´æ–°æœºåˆ¶ï¼ˆäºŒï¼‰","date":"2019-11-07T12:01:15.067Z","updated":"2019-11-29T12:20:47.710Z","comments":true,"path":"2019/11/07/2019-11-07-Kafkaæºç åˆ¨æä¹‹Produer Metadataæ›´æ–°æœºåˆ¶ï¼ˆäºŒï¼‰/","link":"","permalink":"yihao.ml/2019/11/07/2019-11-07-Kafkaæºç åˆ¨æä¹‹Produer Metadataæ›´æ–°æœºåˆ¶ï¼ˆäºŒï¼‰/","excerpt":"","text":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œå·²ç»ä»‹ç»äº† Producer çš„å‘é€æ¨¡å‹ï¼ŒProducer dosend() æ–¹æ³•ä¸­çš„ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯è·å–ç›¸å…³çš„ topic çš„ metadataï¼Œä½†åœ¨ä¸Šç¯‡ä¸­å¹¶æ²¡æœ‰æ·±å…¥å±•å¼€ï¼Œå› ä¸ºè¿™éƒ¨åˆ†çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æœ¬æ–‡å•ç‹¬ä¸€ç¯‡æ–‡ç« è¿›è¡Œä»‹ç»ï¼Œæœ¬æ–‡ä¸»è¦æ¥è®²è¿°ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š1. metadata å†…å®¹æ˜¯ä»€ä¹ˆï¼› 2. Producer æ›´æ–° metadata çš„æµç¨‹ï¼› 3. Producer åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå»æ›´æ–° metadataï¼› Metadata å†…å®¹Metadata ä¿¡æ¯çš„å†…å®¹å¯ä»¥é€šè¿‡æºç çœ‹æ˜ç™½ï¼š1234567891011121314151617181920212223// è¿™ä¸ªç±»è¢« client çº¿ç¨‹å’Œåå° sender æ‰€å…±äº«,å®ƒåªä¿å­˜äº†æ‰€æœ‰ topic çš„éƒ¨åˆ†æ•°æ®,å½“æˆ‘ä»¬è¯·æ±‚ä¸€ä¸ªå®ƒä¸Šé¢æ²¡æœ‰çš„ topic meta æ—¶,å®ƒä¼šé€šè¿‡å‘é€ metadata update æ¥æ›´æ–° meta ä¿¡æ¯,// å¦‚æœ topic meta è¿‡æœŸç­–ç•¥æ˜¯å…è®¸çš„,é‚£ä¹ˆä»»ä½• topic è¿‡æœŸçš„è¯éƒ½ä¼šè¢«ä»é›†åˆä¸­ç§»é™¤,// ä½†æ˜¯ consumer æ˜¯ä¸å…è®¸ topic è¿‡æœŸçš„å› ä¸ºå®ƒæ˜ç¡®åœ°çŸ¥é“å®ƒéœ€è¦ç®¡ç†å“ªäº› topicpublic final class Metadata &#123; private static final Logger log = LoggerFactory.getLogger(Metadata.class); public static final long TOPIC_EXPIRY_MS = 5 * 60 * 1000; private static final long TOPIC_EXPIRY_NEEDS_UPDATE = -1L; private final long refreshBackoffMs; // metadata æ›´æ–°å¤±è´¥æ—¶,ä¸ºé¿å…é¢‘ç¹æ›´æ–° meta,æœ€å°çš„é—´éš”æ—¶é—´,é»˜è®¤ 100ms private final long metadataExpireMs; // metadata çš„è¿‡æœŸæ—¶é—´, é»˜è®¤ 60,000ms private int version; // æ¯æ›´æ–°æˆåŠŸ1æ¬¡ï¼Œversionè‡ªå¢1,ä¸»è¦æ˜¯ç”¨äºåˆ¤æ–­ metadata æ˜¯å¦æ›´æ–° private long lastRefreshMs; // æœ€è¿‘ä¸€æ¬¡æ›´æ–°æ—¶çš„æ—¶é—´ï¼ˆåŒ…å«æ›´æ–°å¤±è´¥çš„æƒ…å†µï¼‰ private long lastSuccessfulRefreshMs; // æœ€è¿‘ä¸€æ¬¡æˆåŠŸæ›´æ–°çš„æ—¶é—´ï¼ˆå¦‚æœæ¯æ¬¡éƒ½æˆåŠŸçš„è¯ï¼Œä¸å‰é¢çš„å€¼ç›¸ç­‰, å¦åˆ™ï¼ŒlastSuccessulRefreshMs &lt; lastRefreshMs) private Cluster cluster; // é›†ç¾¤ä¸­ä¸€äº› topic çš„ä¿¡æ¯ private boolean needUpdate; // æ˜¯éƒ½éœ€è¦æ›´æ–° metadata /* Topics with expiry time */ private final Map&lt;String, Long&gt; topics; // topic ä¸å…¶è¿‡æœŸæ—¶é—´çš„å¯¹åº”å…³ç³» private final List&lt;Listener&gt; listeners; // äº‹ä»¶ç›‘æ§è€… private final ClusterResourceListeners clusterResourceListeners; //å½“æ¥æ”¶åˆ° metadata æ›´æ–°æ—¶, ClusterResourceListenersçš„åˆ—è¡¨ private boolean needMetadataForAllTopics; // æ˜¯å¦å¼ºåˆ¶æ›´æ–°æ‰€æœ‰çš„ metadata private final boolean topicExpiryEnabled; // é»˜è®¤ä¸º true, Producer ä¼šå®šæ—¶ç§»é™¤è¿‡æœŸçš„ topic,consumer åˆ™ä¸ä¼šç§»é™¤&#125;å…³äº topic çš„è¯¦ç»†ä¿¡æ¯ï¼ˆleader æ‰€åœ¨èŠ‚ç‚¹ã€replica æ‰€åœ¨èŠ‚ç‚¹ã€isr åˆ—è¡¨ï¼‰éƒ½æ˜¯åœ¨Clusterå®ä¾‹ä¸­ä¿å­˜çš„ã€‚1234567891011121314151617181920212223242526// å¹¶ä¸æ˜¯ä¸€ä¸ªå…¨é›†,metadataçš„ä¸»è¦ç»„æˆéƒ¨åˆ†public final class Cluster &#123; // ä»å‘½åç›´æ¥å°±çœ‹å‡ºäº†å„ä¸ªå˜é‡çš„ç”¨é€” private final boolean isBootstrapConfigured; private final List&lt;Node&gt; nodes; // node åˆ—è¡¨ private final Set&lt;String&gt; unauthorizedTopics; // æœªè®¤è¯çš„ topic åˆ—è¡¨ private final Set&lt;String&gt; internalTopics; // å†…ç½®çš„ topic åˆ—è¡¨ private final Map&lt;TopicPartition, PartitionInfo&gt; partitionsByTopicPartition; // partition çš„è¯¦ç»†ä¿¡æ¯ private final Map&lt;String, List&lt;PartitionInfo&gt;&gt; partitionsByTopic; // topic ä¸ partition çš„å¯¹åº”å…³ç³» private final Map&lt;String, List&lt;PartitionInfo&gt;&gt; availablePartitionsByTopic; // å¯ç”¨ï¼ˆleader ä¸ä¸º nullï¼‰çš„ topic ä¸ partition çš„å¯¹åº”å…³ç³» private final Map&lt;Integer, List&lt;PartitionInfo&gt;&gt; partitionsByNode; // node ä¸ partition çš„å¯¹åº”å…³ç³» private final Map&lt;Integer, Node&gt; nodesById; // node ä¸ id çš„å¯¹åº”å…³ç³» private final ClusterResource clusterResource;&#125;// org.apache.kafka.common.PartitionInfo// topic-partition: åŒ…å« topicã€partitionã€leaderã€replicasã€isrpublic class PartitionInfo &#123; private final String topic; private final int partition; private final Node leader; private final Node[] replicas; private final Node[] inSyncReplicas;&#125;Cluster å®ä¾‹ä¸»è¦æ˜¯ä¿å­˜ï¼š1. ``broker.id`` ä¸ ``node`` çš„å¯¹åº”å…³ç³»ï¼› 2. topic ä¸ partition ï¼ˆ``PartitionInfo``ï¼‰çš„å¯¹åº”å…³ç³»ï¼› 3. node ä¸ partition ï¼ˆ``PartitionInfo``ï¼‰çš„å¯¹åº”å…³ç³»ã€‚ Producer çš„ Metadata æ›´æ–°æµç¨‹Producer åœ¨è°ƒç”¨ dosend() æ–¹æ³•æ—¶ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯é€šè¿‡ waitOnMetadata æ–¹æ³•è·å–è¯¥ topic çš„ metadata ä¿¡æ¯.123456789101112131415161718192021222324252627282930313233343536373839404142// ç­‰å¾… metadata çš„æ›´æ–°private ClusterAndWaitTime waitOnMetadata(String topic, Integer partition, long maxWaitMs) throws InterruptedException &#123; metadata.add(topic);// åœ¨ metadata ä¸­æ·»åŠ  topic å,å¦‚æœ metadata ä¸­æ²¡æœ‰è¿™ä¸ª topic çš„ metaï¼Œé‚£ä¹ˆ metadata çš„æ›´æ–°æ ‡å¿—è®¾ç½®ä¸ºäº† true Cluster cluster = metadata.fetch(); Integer partitionsCount = cluster.partitionCountForTopic(topic);// å¦‚æœ topic å·²ç»å­˜åœ¨ meta ä¸­,åˆ™è¿”å›è¯¥ topic çš„ partition æ•°,å¦åˆ™è¿”å› null // å½“å‰ metadata ä¸­å¦‚æœå·²ç»æœ‰è¿™ä¸ª topic çš„ meta çš„è¯,å°±ç›´æ¥è¿”å› if (partitionsCount != null &amp;&amp; (partition == null || partition &lt; partitionsCount)) return new ClusterAndWaitTime(cluster, 0); long begin = time.milliseconds(); long remainingWaitMs = maxWaitMs; long elapsed; // å‘é€ metadata è¯·æ±‚,ç›´åˆ°è·å–äº†è¿™ä¸ª topic çš„ metadata æˆ–è€…è¯·æ±‚è¶…æ—¶ do &#123; log.trace(&quot;Requesting metadata update for topic &#123;&#125;.&quot;, topic); int version = metadata.requestUpdate();// è¿”å›å½“å‰ç‰ˆæœ¬å·,åˆå§‹å€¼ä¸º0,æ¯æ¬¡æ›´æ–°æ—¶ä¼šè‡ªå¢,å¹¶å°† needUpdate è®¾ç½®ä¸º true sender.wakeup();// å”¤èµ· senderï¼Œå‘é€ metadata è¯·æ±‚ try &#123; metadata.awaitUpdate(version, remainingWaitMs);// ç­‰å¾… metadata çš„æ›´æ–° &#125; catch (TimeoutException ex) &#123; // Rethrow with original maxWaitMs to prevent logging exception with remainingWaitMs throw new TimeoutException(&quot;Failed to update metadata after &quot; + maxWaitMs + &quot; ms.&quot;); &#125; cluster = metadata.fetch(); elapsed = time.milliseconds() - begin; if (elapsed &gt;= maxWaitMs) throw new TimeoutException(&quot;Failed to update metadata after &quot; + maxWaitMs + &quot; ms.&quot;);// è¶…æ—¶ if (cluster.unauthorizedTopics().contains(topic))// è®¤è¯å¤±è´¥ï¼Œå¯¹å½“å‰ topic æ²¡æœ‰ Write æƒé™ throw new TopicAuthorizationException(topic); remainingWaitMs = maxWaitMs - elapsed; partitionsCount = cluster.partitionCountForTopic(topic); &#125; while (partitionsCount == null);// ä¸åœå¾ªç¯,ç›´åˆ° partitionsCount ä¸ä¸º nullï¼ˆå³ç›´åˆ° metadata ä¸­å·²ç»åŒ…å«äº†è¿™ä¸ª topic çš„ç›¸å…³ä¿¡æ¯ï¼‰ if (partition != null &amp;&amp; partition &gt;= partitionsCount) &#123; throw new KafkaException( String.format(&quot;Invalid partition given with record: %d is not in the range [0...%d).&quot;, partition, partitionsCount)); &#125; return new ClusterAndWaitTime(cluster, elapsed);&#125;å¦‚æœ metadata ä¸­ä¸å­˜åœ¨è¿™ä¸ª topic çš„ metadataï¼Œé‚£ä¹ˆå°±è¯·æ±‚æ›´æ–° metadataï¼Œå¦‚æœ metadata æ²¡æœ‰æ›´æ–°çš„è¯ï¼Œæ–¹æ³•å°±ä¸€ç›´å¤„åœ¨ do ... while çš„å¾ªç¯ä¹‹ä¸­ï¼Œåœ¨å¾ªç¯ä¹‹ä¸­ï¼Œä¸»è¦åšä»¥ä¸‹æ“ä½œï¼š1. ``metadata.requestUpdate()`` å°† metadata çš„ ``needUpdate`` å˜é‡è®¾ç½®ä¸º trueï¼ˆå¼ºåˆ¶æ›´æ–°ï¼‰ï¼Œå¹¶è¿”å›å½“å‰çš„ç‰ˆæœ¬å·ï¼ˆversionï¼‰ï¼Œé€šè¿‡ç‰ˆæœ¬å·æ¥åˆ¤æ–­ metadata æ˜¯å¦å®Œæˆæ›´æ–°ï¼› 2. ``sender.wakeup()`` å”¤é†’ sender çº¿ç¨‹ï¼Œsender çº¿ç¨‹åˆä¼šå»å”¤é†’ NetworkClient çº¿ç¨‹ï¼ŒNetworkClient çº¿ç¨‹è¿›è¡Œä¸€äº›å®é™…çš„æ“ä½œï¼ˆåé¢è¯¦ç»†ä»‹ç»ï¼‰ï¼› 3. ``metadata.awaitUpdate(version, remainingWaitMs)`` ç­‰å¾… metadata çš„æ›´æ–°ã€‚ 12345678910111213141516// æ›´æ–° metadata ä¿¡æ¯ï¼ˆæ ¹æ®å½“å‰ version å€¼æ¥åˆ¤æ–­ï¼‰public synchronized void awaitUpdate(final int lastVersion, final long maxWaitMs) throws InterruptedException &#123; if (maxWaitMs &lt; 0) &#123; throw new IllegalArgumentException(&quot;Max time to wait for metadata updates should not be &lt; 0 milli seconds&quot;); &#125; long begin = System.currentTimeMillis(); long remainingWaitMs = maxWaitMs; while (this.version &lt;= lastVersion) &#123;// ä¸æ–­å¾ªç¯,ç›´åˆ° metadata æ›´æ–°æˆåŠŸ,version è‡ªå¢ if (remainingWaitMs != 0) wait(remainingWaitMs);// é˜»å¡çº¿ç¨‹ï¼Œç­‰å¾… metadata çš„æ›´æ–° long elapsed = System.currentTimeMillis() - begin; if (elapsed &gt;= maxWaitMs)// timeout throw new TimeoutException(&quot;Failed to update metadata after &quot; + maxWaitMs + &quot; ms.&quot;); remainingWaitMs = maxWaitMs - elapsed; &#125;&#125;åœ¨ Metadata.awaitUpdate() æ–¹æ³•ä¸­ï¼Œçº¿ç¨‹ä¼šé˜»å¡åœ¨ while å¾ªç¯ä¸­ï¼Œç›´åˆ° metadata æ›´æ–°æˆåŠŸæˆ–è€… timeoutã€‚ä»å‰é¢å¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶ Producer çº¿ç¨‹ä¼šé˜»å¡åœ¨ä¸¤ä¸ª while å¾ªç¯ä¸­ï¼Œç›´åˆ° metadata ä¿¡æ¯æ›´æ–°ï¼Œé‚£ä¹ˆ metadata æ˜¯å¦‚ä½•æ›´æ–°çš„å‘¢ï¼Ÿå¦‚æœæœ‰å°è±¡çš„è¯ï¼Œå‰é¢åº”è¯¥å·²ç»ä»‹ç»è¿‡äº†ï¼Œä¸»è¦æ˜¯é€šè¿‡ sender.wakeup()æ¥å”¤é†’ sender çº¿ç¨‹ï¼Œé—´æ¥å”¤é†’ NetworkClient çº¿ç¨‹ï¼ŒNetworkClient çº¿ç¨‹æ¥è´Ÿè´£å‘é€ Metadata è¯·æ±‚ï¼Œå¹¶å¤„ç† Server ç«¯çš„å“åº”ã€‚åœ¨ Kafka æºç åˆ†æä¹‹ Producer å‘é€æ¨¡å‹ï¼ˆä¸€ï¼‰ ä¸­ä»‹ç» Producer å‘é€æ¨¡å‹æ—¶ï¼Œåœ¨ç¬¬äº”æ­¥ sender çº¿ç¨‹ä¼šè°ƒç”¨ NetworkClient.poll() æ–¹æ³•è¿›è¡Œå®é™…çš„æ“ä½œï¼Œå…¶æºç å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031public List&lt;ClientResponse&gt; poll(long timeout, long now) &#123; long metadataTimeout = metadataUpdater.maybeUpdate(now);// åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–° meta,å¦‚æœéœ€è¦å°±æ›´æ–°ï¼ˆè¯·æ±‚æ›´æ–° metadata çš„åœ°æ–¹ï¼‰ try &#123; this.selector.poll(Utils.min(timeout, metadataTimeout, requestTimeoutMs)); &#125; catch (IOException e) &#123; log.error(&quot;Unexpected error during I/O&quot;, e); &#125; // process completed actions long updatedNow = this.time.milliseconds(); List&lt;ClientResponse&gt; responses = new ArrayList&lt;&gt;(); handleAbortedSends(responses); handleCompletedSends(responses, updatedNow);// é€šè¿‡ selector ä¸­è·å– Server ç«¯çš„ response handleCompletedReceives(responses, updatedNow);// åœ¨è¿”å›çš„ handler ä¸­ï¼Œä¼šå¤„ç† metadata çš„æ›´æ–° handleDisconnections(responses, updatedNow); handleConnections(); handleInitiateApiVersionRequests(updatedNow); handleTimedOutRequests(responses, updatedNow); // invoke callbacks for (ClientResponse response : responses) &#123; try &#123; response.onComplete(); &#125; catch (Exception e) &#123; log.error(&quot;Uncaught error in request completion:&quot;, e); &#125; &#125; return responses; &#125; &#125;åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œä¸»è¦ä¼šä»¥ä¸‹æ“ä½œï¼šmetadataUpdater.maybeUpdate(now)ï¼šåˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–° Metadataï¼Œå¦‚æœéœ€è¦æ›´æ–°çš„è¯ï¼Œå…ˆä¸ Broker å»ºç«‹è¿æ¥ï¼Œç„¶åå‘é€æ›´æ–° metadata çš„è¯·æ±‚ï¼›å¤„ç† Server ç«¯çš„ä¸€äº›å“åº”ï¼Œè¿™é‡Œä¸»è¦è®¨è®ºçš„æ˜¯ handleCompletedReceives(responses, updatedNow) æ–¹æ³•ï¼Œå®ƒä¼šå¤„ç† Server ç«¯è¿”å›çš„ Metadata ç»“æœã€‚å…ˆçœ‹ä¸€ä¸‹ metadataUpdater.maybeUpdate() çš„å…·ä½“å®ç°ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566public long maybeUpdate(long now) &#123; // should we update our metadata? // metadata æ˜¯å¦åº”è¯¥æ›´æ–° long timeToNextMetadataUpdate = metadata.timeToNextUpdate(now);// metadata ä¸‹æ¬¡æ›´æ–°çš„æ—¶é—´ï¼ˆéœ€è¦åˆ¤æ–­æ˜¯å¼ºåˆ¶æ›´æ–°è¿˜æ˜¯ metadata è¿‡æœŸæ›´æ–°,å‰è€…æ˜¯ç«‹é©¬æ›´æ–°,åè€…æ˜¯è®¡ç®— metadata çš„è¿‡æœŸæ—¶é—´ï¼‰ // å¦‚æœä¸€æ¡ metadata çš„ fetch è¯·æ±‚è¿˜æœªä» server æ”¶åˆ°æ¢å¤,é‚£ä¹ˆæ—¶é—´è®¾ç½®ä¸º waitForMetadataFetchï¼ˆé»˜è®¤30sï¼‰ long waitForMetadataFetch = this.metadataFetchInProgress ? requestTimeoutMs : 0; long metadataTimeout = Math.max(timeToNextMetadataUpdate, waitForMetadataFetch); if (metadataTimeout &gt; 0) &#123;// æ—¶é—´æœªåˆ°æ—¶,ç›´æ¥è¿”å›ä¸‹æ¬¡åº”è¯¥æ›´æ–°çš„æ—¶é—´ return metadataTimeout; &#125; Node node = leastLoadedNode(now);// é€‰æ‹©ä¸€ä¸ªè¿æ¥æ•°æœ€å°çš„èŠ‚ç‚¹ if (node == null) &#123; log.debug(&quot;Give up sending metadata request since no node is available&quot;); return reconnectBackoffMs; &#125; return maybeUpdate(now, node); // å¯ä»¥å‘é€ metadata è¯·æ±‚çš„è¯,å°±å‘é€ metadata è¯·æ±‚ &#125; /** * Add a metadata request to the list of sends if we can make one */ // åˆ¤æ–­æ˜¯å¦å¯ä»¥å‘é€è¯·æ±‚,å¯ä»¥çš„è¯å°† metadata è¯·æ±‚åŠ å…¥åˆ°å‘é€åˆ—è¡¨ä¸­ private long maybeUpdate(long now, Node node) &#123; String nodeConnectionId = node.idString(); if (canSendRequest(nodeConnectionId)) &#123;// é€šé“å·²ç» ready å¹¶ä¸”æ”¯æŒå‘é€æ›´å¤šçš„è¯·æ±‚ this.metadataFetchInProgress = true; // å‡†å¤‡å¼€å§‹å‘é€æ•°æ®,å°† metadataFetchInProgress ç½®ä¸º true MetadataRequest.Builder metadataRequest; // åˆ›å»º metadata è¯·æ±‚ if (metadata.needMetadataForAllTopics())// å¼ºåˆ¶æ›´æ–°æ‰€æœ‰ topic çš„ metadataï¼ˆè™½ç„¶é»˜è®¤ä¸ä¼šæ›´æ–°æ‰€æœ‰ topic çš„ metadata ä¿¡æ¯ï¼Œä½†æ˜¯æ¯ä¸ª Broker ä¼šä¿å­˜æ‰€æœ‰ topic çš„ meta ä¿¡æ¯ï¼‰ metadataRequest = MetadataRequest.Builder.allTopics(); else // åªæ›´æ–° metadata ä¸­çš„ topics åˆ—è¡¨ï¼ˆåˆ—è¡¨ä¸­çš„ topics ç”± metadata.add() å¾—åˆ°ï¼‰ metadataRequest = new MetadataRequest.Builder(new ArrayList&lt;&gt;(metadata.topics())); log.debug(&quot;Sending metadata request &#123;&#125; to node &#123;&#125;&quot;, metadataRequest, node.id()); sendInternalMetadataRequest(metadataRequest, nodeConnectionId, now);/ å‘é€ metadata è¯·æ±‚ return requestTimeoutMs; &#125; // If there&apos;s any connection establishment underway, wait until it completes. This prevents // the client from unnecessarily connecting to additional nodes while a previous connection // attempt has not been completed. if (isAnyNodeConnecting()) &#123;// å¦‚æœ client æ­£åœ¨ä¸ä»»ä½•ä¸€ä¸ª node çš„è¿æ¥çŠ¶æ€æ˜¯ connecting,é‚£ä¹ˆå°±è¿›è¡Œç­‰å¾… // Strictly the timeout we should return here is &quot;connect timeout&quot;, but as we don&apos;t // have such application level configuration, using reconnect backoff instead. return reconnectBackoffMs; &#125; if (connectionStates.canConnect(nodeConnectionId, now)) &#123;// å¦‚æœæ²¡æœ‰è¿æ¥è¿™ä¸ª node,é‚£å°±åˆå§‹åŒ–è¿æ¥ // we don&apos;t have a connection to this node right now, make one log.debug(&quot;Initialize connection to node &#123;&#125; for sending metadata request&quot;, node.id()); initiateConnect(node, now);// åˆå§‹åŒ–è¿æ¥ return reconnectBackoffMs; &#125; return Long.MAX_VALUE; &#125; // å‘é€ Metadata è¯·æ±‚ private void sendInternalMetadataRequest(MetadataRequest.Builder builder, String nodeConnectionId, long now) &#123; ClientRequest clientRequest = newClientRequest(nodeConnectionId, builder, now, true);// åˆ›å»º metadata è¯·æ±‚ doSend(clientRequest, true, now);&#125;æ‰€ä»¥ï¼Œæ¯æ¬¡ Producer è¯·æ±‚æ›´æ–° metadata æ—¶ï¼Œä¼šæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š1. å¦‚æœ node å¯ä»¥å‘é€è¯·æ±‚ï¼Œåˆ™ç›´æ¥å‘é€è¯·æ±‚ï¼› 2. å¦‚æœè¯¥ node æ­£åœ¨å»ºç«‹è¿æ¥ï¼Œåˆ™ç›´æ¥è¿”å›ï¼› 3. å¦‚æœè¯¥ node è¿˜æ²¡å»ºç«‹è¿æ¥ï¼Œåˆ™å‘ broker åˆå§‹åŒ–é“¾æ¥ã€‚ è€Œ KafkaProducer çº¿ç¨‹ä¹‹å‰æ˜¯ä¸€ç›´é˜»å¡åœ¨ä¸¤ä¸ª while å¾ªç¯ä¸­ï¼Œç›´åˆ° metadata æ›´æ–°1. sender çº¿ç¨‹ç¬¬ä¸€æ¬¡è°ƒç”¨ ``poll()`` æ–¹æ³•æ—¶ï¼Œåˆå§‹åŒ–ä¸ node çš„è¿æ¥ï¼› 2. sender çº¿ç¨‹ç¬¬äºŒæ¬¡è°ƒç”¨ ``poll()`` æ–¹æ³•æ—¶ï¼Œå‘é€ ``Metadata`` è¯·æ±‚ï¼› 3. sender çº¿ç¨‹ç¬¬ä¸‰æ¬¡è°ƒç”¨ ``poll()`` æ–¹æ³•æ—¶ï¼Œè·å– ``metadataResponse``ï¼Œå¹¶æ›´æ–° metadataã€‚ ç»è¿‡ä¸Šè¿° sender çº¿ç¨‹ä¸‰æ¬¡è°ƒç”¨ poll()æ–¹æ³•ï¼Œæ‰€è¯·æ±‚çš„ metadata ä¿¡æ¯æ‰ä¼šå¾—åˆ°æ›´æ–°ï¼Œæ­¤æ—¶ Producer çº¿ç¨‹ä¹Ÿä¸ä¼šå†é˜»å¡ï¼Œå¼€å§‹å‘é€æ¶ˆæ¯ã€‚NetworkClient æ¥æ”¶åˆ° Server ç«¯å¯¹ Metadata è¯·æ±‚çš„å“åº”åï¼Œæ›´æ–° Metadata ä¿¡æ¯ã€‚12345678910111213141516171819202122232425262728293031323334// å¤„ç†ä»»ä½•å·²ç»å®Œæˆçš„æ¥æ”¶å“åº” private void handleCompletedReceives(List&lt;ClientResponse&gt; responses, long now) &#123; for (NetworkReceive receive : this.selector.completedReceives()) &#123; String source = receive.source(); InFlightRequest req = inFlightRequests.completeNext(source); AbstractResponse body = parseResponse(receive.payload(), req.header); log.trace(&quot;Completed receive from node &#123;&#125;, for key &#123;&#125;, received &#123;&#125;&quot;, req.destination, req.header.apiKey(), body); if (req.isInternalRequest &amp;&amp; body instanceof MetadataResponse)// å¦‚æœæ˜¯ meta å“åº” metadataUpdater.handleCompletedMetadataResponse(req.header, now, (MetadataResponse) body); else if (req.isInternalRequest &amp;&amp; body instanceof ApiVersionsResponse) handleApiVersionsResponse(responses, req, now, (ApiVersionsResponse) body); // å¦‚æœæ˜¯å…¶ä»–å“åº” else responses.add(req.completed(body, now)); &#125; &#125; // å¤„ç† Server ç«¯å¯¹ Metadata è¯·æ±‚å¤„ç†åçš„ response public void handleCompletedMetadataResponse(RequestHeader requestHeader, long now, MetadataResponse response) &#123; this.metadataFetchInProgress = false; Cluster cluster = response.cluster(); // check if any topics metadata failed to get updated Map&lt;String, Errors&gt; errors = response.errors(); if (!errors.isEmpty()) log.warn(&quot;Error while fetching metadata with correlation id &#123;&#125; : &#123;&#125;&quot;, requestHeader.correlationId(), errors); // don&apos;t update the cluster if there are no valid nodes...the topic we want may still be in the process of being // created which means we will get errors and no nodes until it exists if (cluster.nodes().size() &gt; 0) &#123; this.metadata.update(cluster, now);// æ›´æ–° meta ä¿¡æ¯ &#125; else &#123;// å¦‚æœ metadata ä¸­ node ä¿¡æ¯æ— æ•ˆ,åˆ™ä¸æ›´æ–° metadata ä¿¡æ¯ log.trace(&quot;Ignoring empty metadata response with correlation id &#123;&#125;.&quot;, requestHeader.correlationId()); this.metadata.failedUpdate(now); &#125; &#125;Producer Metadata çš„æ›´æ–°ç­–ç•¥Metadata ä¼šåœ¨ä¸‹é¢ä¸¤ç§æƒ…å†µä¸‹è¿›è¡Œæ›´æ–°1. KafkaProducer ç¬¬ä¸€æ¬¡å‘é€æ¶ˆæ¯æ—¶å¼ºåˆ¶æ›´æ–°ï¼Œå…¶ä»–æ—¶é—´å‘¨æœŸæ€§æ›´æ–°ï¼Œå®ƒä¼šé€šè¿‡ Metadata çš„ lastRefreshMs, lastSuccessfulRefreshMs è¿™2ä¸ªå­—æ®µæ¥å®ç°ï¼› 2. å¼ºåˆ¶æ›´æ–°ï¼š è°ƒç”¨ Metadata.requestUpdate() å°† needUpdate ç½®æˆäº† true æ¥å¼ºåˆ¶æ›´æ–°ã€‚ åœ¨ NetworkClient çš„ poll() æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå°±ä¼šå»æ£€æŸ¥è¿™ä¸¤ç§æ›´æ–°æœºåˆ¶ï¼Œåªè¦è¾¾åˆ°å…¶ä¸­ä¸€ç§ï¼Œå°±è¡Œè§¦å‘æ›´æ–°æ“ä½œã€‚Metadata çš„å¼ºåˆ¶æ›´æ–°ä¼šåœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä¸‹è¿›è¡Œï¼š1. initConnect æ–¹æ³•è°ƒç”¨æ—¶ï¼Œåˆå§‹åŒ–è¿æ¥ï¼› 2. ``poll()`` æ–¹æ³•ä¸­å¯¹ ``handleDisconnections()`` æ–¹æ³•è°ƒç”¨æ¥å¤„ç†è¿æ¥æ–­å¼€çš„æƒ…å†µï¼Œè¿™æ—¶ä¼šè§¦å‘å¼ºåˆ¶æ›´æ–°ï¼› 3. ``poll()`` æ–¹æ³•ä¸­å¯¹ ``handleTimedOutRequests()`` æ¥å¤„ç†è¯·æ±‚è¶…æ—¶æ—¶ï¼› 4. å‘é€æ¶ˆæ¯æ—¶ï¼Œå¦‚æœæ— æ³•æ‰¾åˆ° partition çš„ leaderï¼› 5. å¤„ç† Producer å“åº”ï¼ˆhandleProduceResponseï¼‰ï¼Œå¦‚æœè¿”å›å…³äº Metadata è¿‡æœŸçš„å¼‚å¸¸ï¼Œæ¯”å¦‚ï¼šæ²¡æœ‰ topic-partition çš„ç›¸å…³ meta æˆ–è€… client æ²¡æœ‰æƒé™è·å–å…¶ metadataã€‚ å¼ºåˆ¶æ›´æ–°ä¸»è¦æ˜¯ç”¨äºå¤„ç†å„ç§å¼‚å¸¸æƒ…å†µã€‚è½¬è‡ªï¼šhttps://zhuanlan.zhihu.com/p/66190242","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"kafka","slug":"kafka","permalink":"yihao.ml/tags/kafka/"}]},{"title":"Kafkaæºç åˆ¨æä¹‹Produerå‘é€æ¨¡å‹ï¼ˆä¸€ï¼‰","slug":"2019â€“11-07-KafkaProduceræºç åˆ¨æ","date":"2019-11-07T12:01:15.066Z","updated":"2019-11-29T12:20:47.709Z","comments":true,"path":"2019/11/07/2019â€“11-07-KafkaProduceræºç åˆ¨æ/","link":"","permalink":"yihao.ml/2019/11/07/2019â€“11-07-KafkaProduceræºç åˆ¨æ/","excerpt":"","text":"kafkaæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œç›®å‰åº”ç”¨ååˆ†å¹¿æ³›ã€‚çœ‹æºç ä¸ä»…å¯ä»¥äº†è§£å…¶åº•å±‚çš„ç»†èŠ‚ï¼ŒåŒæ—¶ï¼Œåœ¨çœ‹ä»£ç æ—¶ï¼Œä¹Ÿèƒ½è·Ÿç€å¤§ç¥ä»¬å­¦åˆ°å¾ˆå¤šçš„ç¼–ç¨‹æŠ€å·§ã€‚ KafkaProducerçš„ä½¿ç”¨åœ¨Kafkaä¸­ï¼ŒClientç«¯æ˜¯ç”±Javaå®ç°çš„ï¼ŒServerç«¯æ˜¯Scalaå®ç°çš„ã€‚ä¸‹é¢æˆ‘ä»¬ä»Clientç«¯å¼€å§‹ï¼Œåˆ†æä¸€ä¸‹Kafakaä¸­çš„Produceræ¨¡å‹ã€‚å¼€å§‹ä¹‹å‰æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æ€ä¹ˆå‘Topicä¸­ç”Ÿäº§æ•°æ®ã€‚123456789101112131415161718192021222324252627282930import org.apache.kafka.clients.producer.KafkaProducer;import org.apache.kafka.clients.producer.ProducerRecord;import org.apache.kafka.clients.producer.Producer;import java.util.Properties;/** * Created by matt on 16/7/26. */public class ProducerTest &#123; private static String topicName; private static int msgNum; private static int key; public static void main(String[] args) &#123; Properties props = new Properties(); props.put(&quot;bootstrap.servers&quot;, &quot;127.0.0.1:9092,127.0.0.2:9092&quot;); props.put(&quot;key.serializer&quot;,&quot;org.apache.kafka.common.serialization.StringSerializer&quot;); props.put(&quot;value.serializer&quot;,&quot;org.apache.kafka.common.serialization.StringSerializer&quot;); topicName = &quot;test&quot;; msgNum = 10; // å‘é€çš„æ¶ˆæ¯æ•° Producer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(props); for (int i = 0; i &lt; msgNum; i++) &#123; String msg = i + &quot; This is matt&apos;s blog.&quot;; producer.send(new ProducerRecord&lt;String, String&gt;(topicName, msg)); &#125; producer.close(); &#125;&#125;ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°å¦‚ä½•å‘Topicä¸­ç”Ÿäº§æ•°æ®ï¼ŒKafkaåœ¨è¿™æ–¹é¢å°è£…çš„å¾ˆå¥½ï¼Œåªéœ€è¦ä¸¤æ­¥å°±å¯ä»¥å®Œæˆæ“ä½œï¼š1. åˆå§‹åŒ–KafkaProducerç±» 2. è°ƒç”¨sendæ¥å£å‘é€æ•°æ® ä¸‹é¢å›´ç»•ç€sendæ¥å£å¼€å§‹å±•å¼€ã€‚ KafkaProducerä¸­çš„sendæ–¹æ³•ç”¨æˆ·ä½¿ç”¨producer.sendå‘é€æ•°æ®ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹send()çš„å®ç°1234567891011121314// å¼‚æ­¥å‘ä¸€ä¸ª topic å‘é€æ•°æ®@Overridepublic Future&lt;RecordMetadata&gt; send(ProducerRecord&lt;K, V&gt; record) &#123; return send(record, null);&#125;// å‘ topic å¼‚æ­¥åœ°å‘é€æ•°æ®ï¼Œå½“å‘é€ç¡®è®¤åå”¤èµ·å›è°ƒå‡½æ•°@Overridepublic Future&lt;RecordMetadata&gt; send(ProducerRecord&lt;K, V&gt; record, Callback callback) &#123; // intercept the record, which can be potentially modified; this method does not throw exceptions ProducerRecord&lt;K, V&gt; interceptedRecord = this.interceptors == null ? record : this.interceptors.onSend(record); return doSend(interceptedRecord, callback);&#125;æ¥å£æœ€åä¼šèµ°ä¸€ä¸ªdoSend()æ–¹æ³•ï¼Œæ¥ç€è¿½è¿›å»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172private Future&lt;RecordMetadata&gt; doSend(ProducerRecord&lt;K, V&gt; record, Callback callback) &#123; TopicPartition tp = null; try &#123; // 1.ç¡®è®¤æ•°æ®è¦å‘é€åˆ°çš„ topic çš„ metadata æ˜¯å¯ç”¨çš„ ClusterAndWaitTime clusterAndWaitTime = waitOnMetadata(record.topic(), record.partition(), maxBlockTimeMs); long remainingWaitMs = Math.max(0, maxBlockTimeMs - clusterAndWaitTime.waitedOnMetadataMs); Cluster cluster = clusterAndWaitTime.cluster; // 2.åºåˆ—åŒ– record çš„ key å’Œ value byte[] serializedKey; try &#123; serializedKey = keySerializer.serialize(record.topic(), record.key()); &#125; catch (ClassCastException cce) &#123; throw new SerializationException(&quot;Can&apos;t convert key of class &quot; + record.key().getClass().getName() + &quot; to class &quot; + producerConfig.getClass(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG).getName() + &quot; specified in key.serializer&quot;); &#125; byte[] serializedValue; try &#123; serializedValue = valueSerializer.serialize(record.topic(), record.value()); &#125; catch (ClassCastException cce) &#123; throw new SerializationException(&quot;Can&apos;t convert value of class &quot; + record.value().getClass().getName() + &quot; to class &quot; + producerConfig.getClass(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG).getName() + &quot; specified in value.serializer&quot;); &#125; // 3. è·å–è¯¥ record çš„ partition çš„å€¼ï¼ˆå¯ä»¥æŒ‡å®š,ä¹Ÿå¯ä»¥æ ¹æ®ç®—æ³•è®¡ç®—ï¼‰ int partition = partition(record, serializedKey, serializedValue, cluster); int serializedSize = Records.LOG_OVERHEAD + Record.recordSize(serializedKey, serializedValue); ensureValidRecordSize(serializedSize); // record çš„å­—èŠ‚è¶…å‡ºé™åˆ¶æˆ–å¤§äºå†…å­˜é™åˆ¶æ—¶,å°±ä¼šæŠ›å‡º RecordTooLargeException å¼‚å¸¸ tp = new TopicPartition(record.topic(), partition); long timestamp = record.timestamp() == null ? time.milliseconds() : record.timestamp(); // æ—¶é—´æˆ³ log.trace(&quot;Sending record &#123;&#125; with callback &#123;&#125; to topic &#123;&#125; partition &#123;&#125;&quot;, record, callback, record.topic(), partition); Callback interceptCallback = this.interceptors == null ? callback : new InterceptorCallback&lt;&gt;(callback, this.interceptors, tp); // 4. å‘ accumulator ä¸­è¿½åŠ æ•°æ® RecordAccumulator.RecordAppendResult result = accumulator.append(tp, timestamp, serializedKey, serializedValue,interceptCallback, remainingWaitMs); // 5. å¦‚æœ batch å·²ç»æ»¡äº†,å”¤é†’ sender çº¿ç¨‹å‘é€æ•°æ® if (result.batchIsFull || result.newBatchCreated) &#123; log.trace(&quot;Waking up the sender since topic &#123;&#125; partition &#123;&#125; is either full or getting a new batch&quot;,record.topic(),partition); this.sender.wakeup(); &#125; return result.future; &#125; catch (ApiException e) &#123; log.debug(&quot;Exception occurred during message send:&quot;, e); if (callback != null) callback.onCompletion(null, e); this.errors.record(); if (this.interceptors != null) this.interceptors.onSendError(record, tp, e); return new FutureFailure(e); &#125; catch (InterruptedException e) &#123; this.errors.record(); if (this.i nterceptors != null) this.interceptors.onSendError(record, tp, e); throw new InterruptException(e); &#125; catch (BufferExhaustedException e) &#123; this.errors.record(); this.metrics.sensor(&quot;buffer-exhausted-records&quot;).record(); if (this.interceptors != null) this.interceptors.onSendError(record, tp, e); throw e; &#125; catch (KafkaException e) &#123; this.errors.record(); if (this.interceptors != null) this.interceptors.onSendError(record, tp, e); throw e; &#125; catch (Exception e) &#123; if (this.interceptors != null) this.interceptors.onSendError(record, tp, e); throw e; &#125; &#125;&#125;åœ¨ dosend() æ–¹æ³•çš„å®ç°ä¸Šï¼Œä¸€æ¡ Record æ•°æ®çš„å‘é€ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹äº”æ­¥ï¼š1. ç¡®è®¤æ•°æ®è¦å‘é€åˆ°çš„ topic çš„ metadata æ˜¯å¯ç”¨çš„ï¼ˆå¦‚æœè¯¥ partition çš„ leader å­˜åœ¨åˆ™æ˜¯å¯ç”¨çš„ï¼Œå¦‚æœå¼€å¯æƒé™æ—¶ï¼Œclient æœ‰ç›¸åº”çš„æƒé™ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ topic çš„ metadata ä¿¡æ¯ï¼Œå°±éœ€è¦è·å–ç›¸åº”çš„ metadataï¼› 2. åºåˆ—åŒ– record çš„ key å’Œ valueï¼› 3. è·å–è¯¥ record è¦å‘é€åˆ°çš„ partitionï¼ˆå¯ä»¥æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æ ¹æ®ç®—æ³•è®¡ç®—ï¼‰ï¼› 4. å‘ accumulator ä¸­è¿½åŠ  record æ•°æ®ï¼Œæ•°æ®ä¼šå…ˆè¿›è¡Œç¼“å­˜ï¼› 5. å¦‚æœè¿½åŠ å®Œæ•°æ®åï¼Œå¯¹åº”çš„ RecordBatch å·²ç»è¾¾åˆ°äº† batch.size çš„å¤§å°ï¼ˆæˆ–è€…batch çš„å‰©ä½™ç©ºé—´ä¸è¶³ä»¥æ·»åŠ ä¸‹ä¸€æ¡ Recordï¼‰ï¼Œåˆ™å”¤é†’ sender çº¿ç¨‹å‘é€æ•°æ®ã€‚ æ•°æ®çš„å‘é€è¿‡ç¨‹ï¼Œå¯ä»¥ç®€å•æ€»ç»“ä¸ºä»¥ä¸Šäº”ç‚¹ï¼Œä¸‹é¢ä¼šè¿™å‡ éƒ¨åˆ†çš„å…·ä½“å®ç°è¿›è¡Œè¯¦ç»†åˆ†æã€‚ å‘é€çš„è¿‡ç¨‹è¯¦è§£ è·å– topic çš„ metadata ä¿¡æ¯Producer é€šè¿‡ waitOnMetadata() æ–¹æ³•æ¥è·å–å¯¹åº” topic çš„ metadata ä¿¡æ¯ï¼Œè¿™éƒ¨åˆ†åé¢ä¼šå•ç‹¬æŠ½å‡ºä¸€ç¯‡æ–‡ç« æ¥ä»‹ç»ï¼Œè¿™é‡Œå°±ä¸å†è¯¦è¿°ï¼Œæ€»ç»“èµ·æ¥å°±æ˜¯ï¼šåœ¨æ•°æ®å‘é€å‰ï¼Œéœ€è¦å…ˆè¯¥ topic æ˜¯å¯ç”¨çš„ã€‚ key å’Œ value çš„åºåˆ—åŒ–Producer ç«¯å¯¹ record çš„ key å’Œ value å€¼è¿›è¡Œåºåˆ—åŒ–æ“ä½œï¼Œåœ¨ Consumer ç«¯å†è¿›è¡Œç›¸åº”çš„ååºåˆ—åŒ–ï¼ŒKafka å†…éƒ¨æä¾›çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ç®—æ³•å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šNeed support? Please accept cookies and refresh the page ğŸ˜ƒKafka serialize &amp; deserializeå½“ç„¶æˆ‘ä»¬ä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰åºåˆ—åŒ–çš„å…·ä½“å®ç°ï¼Œä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒKafka å†…éƒ¨æä¾›çš„è¿™äº›æ–¹æ³•å·²ç»è¶³å¤Ÿä½¿ç”¨ã€‚ è·å– partition å€¼å…³äº partition å€¼çš„è®¡ç®—ï¼Œåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼šæŒ‡æ˜ partition çš„æƒ…å†µä¸‹ï¼Œç›´æ¥å°†æŒ‡æ˜çš„å€¼ç›´æ¥ä½œä¸º partiton å€¼ï¼›æ²¡æœ‰æŒ‡æ˜ partition å€¼ä½†æœ‰ key çš„æƒ…å†µä¸‹ï¼Œå°† key çš„ hash å€¼ä¸ topic çš„ partition æ•°è¿›è¡Œå–ä½™å¾—åˆ° partition å€¼ï¼›æ—¢æ²¡æœ‰ partition å€¼åˆæ²¡æœ‰ key å€¼çš„æƒ…å†µä¸‹ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶éšæœºç”Ÿæˆä¸€ä¸ªæ•´æ•°ï¼ˆåé¢æ¯æ¬¡è°ƒç”¨åœ¨è¿™ä¸ªæ•´æ•°ä¸Šè‡ªå¢ï¼‰ï¼Œå°†è¿™ä¸ªå€¼ä¸ topic å¯ç”¨çš„ partition æ€»æ•°å–ä½™å¾—åˆ° partition å€¼ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„ round-robin ç®—æ³•ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š12345678// å½“ record ä¸­æœ‰ partition å€¼æ—¶ï¼Œç›´æ¥è¿”å›ï¼Œæ²¡æœ‰çš„æƒ…å†µä¸‹è°ƒç”¨ partitioner çš„ç±»çš„ partition æ–¹æ³•å»è®¡ç®—ï¼ˆKafkaProducer.classï¼‰private int partition(ProducerRecord&lt;K, V&gt; record, byte[] serializedKey, byte[] serializedValue, Cluster cluster) &#123; Integer partition = record.partition(); return partition != null ? partition : partitioner.partition( record.topic(), record.key(), serializedKey, record.value(), serializedValue, cluster);&#125;Producer é»˜è®¤ä½¿ç”¨çš„partitioneræ˜¯org.apache.kafka.clients.producer.internals.DefaultPartitionerï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ partition çš„ç­–ç•¥ï¼Œä¸‹é¢æ˜¯è¿™ä¸ªç±»ä¸¤ä¸ªæ–¹æ³•çš„å…·ä½“å®ç°ï¼š12345678910111213141516171819202122232425262728293031public int partition(String topic, Object key, byte[] keyBytes, Object value, byte[] valueBytes, Cluster cluster) &#123; List&lt;PartitionInfo&gt; partitions = cluster.partitionsForTopic(topic); int numPartitions = partitions.size(); if (keyBytes == null) &#123;// æ²¡æœ‰æŒ‡å®š key çš„æƒ…å†µä¸‹ int nextValue = nextValue(topic); // ç¬¬ä¸€æ¬¡çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªéšæœºæ•´æ•°,åé¢æ¯æ¬¡è°ƒç”¨åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šè‡ªå¢; List&lt;PartitionInfo&gt; availablePartitions = cluster.availablePartitionsForTopic(topic); // leader ä¸ä¸º null,å³ä¸ºå¯ç”¨çš„ partition if (availablePartitions.size() &gt; 0) &#123; int part = Utils.toPositive(nextValue) % availablePartitions.size(); return availablePartitions.get(part).partition(); &#125; else &#123; return Utils.toPositive(nextValue) % numPartitions; &#125; &#125; else &#123;// æœ‰ key çš„æƒ…å†µä¸‹,ä½¿ç”¨ key çš„ hash å€¼è¿›è¡Œè®¡ç®— return Utils.toPositive(Utils.murmur2(keyBytes)) % numPartitions; // é€‰æ‹© key çš„ hash å€¼ &#125; &#125; // æ ¹æ® topic è·å–å¯¹åº”çš„æ•´æ•°å˜é‡ private int nextValue(String topic) &#123; AtomicInteger counter = topicCounterMap.get(topic); if (null == counter) &#123; // ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œéšæœºäº§ç”Ÿ counter = new AtomicInteger(new Random().nextInt()); AtomicInteger currentCounter = topicCounterMap.putIfAbsent(topic, counter); if (currentCounter != null) &#123; counter = currentCounter; &#125; &#125; return counter.getAndIncrement(); // åé¢å†è°ƒç”¨æ—¶ï¼Œæ ¹æ®ä¹‹å‰çš„ç»“æœè‡ªå¢ &#125;&#125;è¿™å°±æ˜¯ Producer ä¸­é»˜è®¤çš„ partitioner å®ç°ã€‚ å‘ accumulator å†™æ•°æ®Producer ä¼šå…ˆå°† record å†™å…¥åˆ° buffer ä¸­ï¼Œå½“è¾¾åˆ°ä¸€ä¸ª batch.size çš„å¤§å°æ—¶ï¼Œå†å”¤èµ· sender çº¿ç¨‹å»å‘é€ RecordBatchï¼ˆç¬¬äº”æ­¥ï¼‰ï¼Œè¿™é‡Œå…ˆè¯¦ç»†åˆ†æä¸€ä¸‹ Producer æ˜¯å¦‚ä½•å‘ buffer ä¸­å†™å…¥æ•°æ®çš„ã€‚Producer æ˜¯é€šè¿‡ RecordAccumulator å®ä¾‹è¿½åŠ æ•°æ®ï¼ŒRecordAccumulator æ¨¡å‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸€ä¸ªé‡è¦çš„å˜é‡å°±æ˜¯ ConcurrentMap&lt;TopicPartition, Deque&gt; batchesï¼Œæ¯ä¸ª TopicPartition éƒ½ä¼šå¯¹åº”ä¸€ä¸ª Dequeï¼Œå½“æ·»åŠ æ•°æ®æ—¶ï¼Œä¼šå‘å…¶ topic-partition å¯¹åº”çš„è¿™ä¸ª queue æœ€æ–°åˆ›å»ºçš„ä¸€ä¸ª RecordBatch ä¸­æ·»åŠ  recordï¼Œè€Œå‘é€æ•°æ®æ—¶ï¼Œåˆ™ä¼šå…ˆä» queue ä¸­æœ€è€çš„é‚£ä¸ª RecordBatch å¼€å§‹å‘é€ã€‚1![C89D1394-08D6-416D-814D-BC19D65091B2.jpeg](https://i.loli.net/2019/11/07/C6bS5ieDGfnAOsg.jpg)Producer RecordAccumulator æ¨¡å‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// org.apache.kafka.clients.producer.internals.RecordAccumulator // å‘ accumulator æ·»åŠ ä¸€æ¡ recordï¼Œå¹¶è¿”å›æ·»åŠ åçš„ç»“æœï¼ˆç»“æœä¸»è¦åŒ…å«: future metadataã€batch æ˜¯å¦æ»¡çš„æ ‡å¿—ä»¥åŠæ–° batch æ˜¯å¦åˆ›å»ºï¼‰å…¶ä¸­ï¼Œ maxTimeToBlock æ˜¯ buffer.memory çš„ block çš„æœ€å¤§æ—¶é—´ public RecordAppendResult append(TopicPartition tp, long timestamp, byte[] key, byte[] value, Callback callback, long maxTimeToBlock) throws InterruptedException &#123; appendsInProgress.incrementAndGet(); try &#123; Deque&lt;RecordBatch&gt; dq = getOrCreateDeque(tp);// æ¯ä¸ª topicPartition å¯¹åº”ä¸€ä¸ª queue synchronized (dq) &#123;// åœ¨å¯¹ä¸€ä¸ª queue è¿›è¡Œæ“ä½œæ—¶,ä¼šä¿è¯çº¿ç¨‹å®‰å…¨ if (closed) throw new IllegalStateException(&quot;Cannot send after the producer is closed.&quot;); RecordAppendResult appendResult = tryAppend(timestamp, key, value, callback, dq); // è¿½åŠ æ•°æ® if (appendResult != null)// è¿™ä¸ª topic-partition å·²ç»æœ‰è®°å½•äº† return appendResult; &#125; // ä¸º topic-partition åˆ›å»ºä¸€ä¸ªæ–°çš„ RecordBatch, éœ€è¦åˆå§‹åŒ–ç›¸åº”çš„ RecordBatchï¼Œè¦ä¸ºå…¶åˆ†é…çš„å¤§å°æ˜¯: maxï¼ˆbatch.size, åŠ ä¸Šå¤´æ–‡ä»¶çš„æœ¬æ¡æ¶ˆæ¯çš„å¤§å°ï¼‰ int size = Math.max(this.batchSize, Records.LOG_OVERHEAD + Record.recordSize(key, value)); log.trace(&quot;Allocating a new &#123;&#125; byte message buffer for topic &#123;&#125; partition &#123;&#125;&quot;, size, tp.topic(), tp.partition()); ByteBuffer buffer = free.allocate(size, maxTimeToBlock);// ç»™è¿™ä¸ª RecordBatch åˆå§‹åŒ–ä¸€ä¸ª buffer synchronized (dq) &#123; if (closed) throw new IllegalStateException(&quot;Cannot send after the producer is closed.&quot;); RecordAppendResult appendResult = tryAppend(timestamp, key, value, callback, dq); if (appendResult != null) &#123;// å¦‚æœçªç„¶å‘ç°è¿™ä¸ª queue å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆå°±é‡Šæ”¾è¿™ä¸ªå·²ç»åˆ†é…çš„ç©ºé—´ free.deallocate(buffer); return appendResult; &#125; // ç»™ topic-partition åˆ›å»ºä¸€ä¸ª RecordBatch MemoryRecordsBuilder recordsBuilder = MemoryRecords.builder(buffer, compression, TimestampType.CREATE_TIME, this.batchSize); RecordBatch batch = new RecordBatch(tp, recordsBuilder, time.milliseconds()); // å‘æ–°çš„ RecordBatch ä¸­è¿½åŠ æ•°æ® FutureRecordMetadata future = Utils.notNull(batch.tryAppend(timestamp, key, value, callback, time.milliseconds())); dq.addLast(batch);// å°† RecordBatch æ·»åŠ åˆ°å¯¹åº”çš„ queue ä¸­ incomplete.add(batch);// å‘æœª ack çš„ batch é›†åˆæ·»åŠ è¿™ä¸ª batch // å¦‚æœ dp.size()&gt;1 å°±è¯æ˜è¿™ä¸ª queue æœ‰ä¸€ä¸ª batch æ˜¯å¯ä»¥å‘é€äº† return new RecordAppendResult(future, dq.size() &gt; 1 || batch.isFull(), true); &#125; &#125; finally &#123; appendsInProgress.decrementAndGet(); &#125; &#125;æ€»ç»“ä¸€ä¸‹å…¶ record å†™å…¥çš„å…·ä½“æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šProducer RecordAccumulator record å†™å…¥æµç¨‹è·å–è¯¥ topic-partition å¯¹åº”çš„ queueï¼Œæ²¡æœ‰çš„è¯ä¼šåˆ›å»ºä¸€ä¸ªç©ºçš„ queueï¼›å‘ queue ä¸­è¿½åŠ æ•°æ®ï¼Œå…ˆè·å– queue ä¸­æœ€æ–°åŠ å…¥çš„é‚£ä¸ª RecordBatchï¼Œå¦‚æœä¸å­˜åœ¨æˆ–è€…å­˜åœ¨ä½†å‰©ä½™ç©ºä½™ä¸è¶³ä»¥æ·»åŠ æœ¬æ¡ record åˆ™è¿”å› nullï¼ŒæˆåŠŸå†™å…¥çš„è¯ç›´æ¥è¿”å›ç»“æœï¼Œå†™å…¥æˆåŠŸï¼›åˆ›å»ºä¸€ä¸ªæ–°çš„ RecordBatchï¼Œåˆå§‹åŒ–å†…å­˜å¤§å°æ ¹æ® max(batch.size, Records.LOG_OVERHEAD + Record.recordSize(key, value)) æ¥ç¡®å®šï¼ˆé˜²æ­¢å•æ¡ record è¿‡å¤§çš„æƒ…å†µï¼‰ï¼›å‘æ–°å»ºçš„ RecordBatch å†™å…¥ recordï¼Œå¹¶å°† RecordBatch æ·»åŠ åˆ° queue ä¸­ï¼Œè¿”å›ç»“æœï¼Œå†™å…¥æˆåŠŸã€‚ å‘é€ RecordBatchå½“ record å†™å…¥æˆåŠŸåï¼Œå¦‚æœå‘ç° RecordBatch å·²æ»¡è¶³å‘é€çš„æ¡ä»¶ï¼ˆé€šå¸¸æ˜¯ queue ä¸­æœ‰å¤šä¸ª batchï¼Œé‚£ä¹ˆæœ€å…ˆæ·»åŠ çš„é‚£äº› batch è‚¯å®šæ˜¯å¯ä»¥å‘é€äº†ï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šå”¤é†’ sender çº¿ç¨‹ï¼Œå‘é€ RecordBatchã€‚sender çº¿ç¨‹å¯¹ RecordBatch çš„å¤„ç†æ˜¯åœ¨ run() æ–¹æ³•ä¸­è¿›è¡Œçš„ï¼Œè¯¥æ–¹æ³•å…·ä½“å®ç°å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950void run(long now) &#123; Cluster cluster = metadata.fetch(); // è·å–é‚£äº›å·²ç»å¯ä»¥å‘é€çš„ RecordBatch å¯¹åº”çš„ nodes RecordAccumulator.ReadyCheckResult result = this.accumulator.ready(cluster, now); // å¦‚æœæœ‰ topic-partition çš„ leader æ˜¯æœªçŸ¥çš„,å°±å¼ºåˆ¶ metadata æ›´æ–° if (!result.unknownLeaderTopics.isEmpty()) &#123; for (String topic : result.unknownLeaderTopics) this.metadata.add(topic); this.metadata.requestUpdate(); &#125; // å¦‚æœä¸node æ²¡æœ‰è¿æ¥ï¼ˆå¦‚æœå¯ä»¥è¿æ¥,åŒæ—¶åˆå§‹åŒ–è¯¥è¿æ¥ï¼‰,å°±è¯æ˜è¯¥ node æš‚æ—¶ä¸èƒ½å‘é€æ•°æ®,æš‚æ—¶ç§»é™¤è¯¥ node Iterator&lt;Node&gt; iter = result.readyNodes.iterator(); long notReadyTimeout = Long.MAX_VALUE; while (iter.hasNext()) &#123; Node node = iter.next(); if (!this.client.ready(node, now)) &#123; iter.remove(); notReadyTimeout = Math.min(notReadyTimeout, this.client.connectionDelay(node, now)); &#125; &#125; // è¿”å›è¯¥ node å¯¹åº”çš„æ‰€æœ‰å¯ä»¥å‘é€çš„ RecordBatch ç»„æˆçš„ batchesï¼ˆkey æ˜¯ node.idï¼‰,å¹¶å°† RecordBatch ä»å¯¹åº”çš„ queue ä¸­ç§»é™¤ Map&lt;Integer, List&lt;RecordBatch&gt;&gt; batches = this.accumulator.drain(cluster, result.readyNodes, this.maxRequestSize, now); if (guaranteeMessageOrder) &#123; //è®°å½•å°†è¦å‘é€çš„ RecordBatch for (List&lt;RecordBatch&gt; batchList : batches.values()) &#123; for (RecordBatch batch : batchList) this.accumulator.mutePartition(batch.topicPartition); &#125; &#125; // å°†ç”±äºå…ƒæ•°æ®ä¸å¯ç”¨è€Œå¯¼è‡´å‘é€è¶…æ—¶çš„ RecordBatch ç§»é™¤ List&lt;RecordBatch&gt; expiredBatches = this.accumulator.abortExpiredBatches(this.requestTimeout, now); for (RecordBatch expiredBatch : expiredBatches) this.sensors.recordErrors(expiredBatch.topicPartition.topic(), expiredBatch.recordCount); sensors.updateProduceRequestMetrics(batches); long pollTimeout = Math.min(result.nextReadyCheckDelayMs, notReadyTimeout); if (!result.readyNodes.isEmpty()) &#123; log.trace(&quot;Nodes with data ready to send: &#123;&#125;&quot;, result.readyNodes); pollTimeout = 0; &#125; // å‘é€ RecordBatch sendProduceRequests(batches, now); this.client.poll(pollTimeout, now); // å…³äº socket çš„ä¸€äº›å®é™…çš„è¯»å†™æ“ä½œï¼ˆå…¶ä¸­åŒ…æ‹¬ meta ä¿¡æ¯çš„æ›´æ–°ï¼‰ &#125;è¿™æ®µä»£ç å‰é¢æœ‰å¾ˆå¤šæ˜¯å…¶ä»–çš„é€»è¾‘å¤„ç†ï¼Œå¦‚ï¼šç§»é™¤æš‚æ—¶ä¸å¯ç”¨çš„ nodeã€å¤„ç†ç”±äºå…ƒæ•°æ®ä¸å¯ç”¨å¯¼è‡´çš„è¶…æ—¶RecordBatchï¼ŒçœŸæ­£è¿›è¡Œå‘é€å‘é€RecordBatchçš„æ˜¯sendProduceRequests(batches, now)è¿™ä¸ªæ–¹æ³•ï¼Œå…·ä½“æ˜¯ï¼š123456789101112131415161718192021222324252627282930313233/** * Transfer the record batches into a list of produce requests on a per-node basis */private void sendProduceRequests(Map&lt;Integer, List&lt;RecordBatch&gt;&gt; collated, long now) &#123; for (Map.Entry&lt;Integer, List&lt;RecordBatch&gt;&gt; entry : collated.entrySet()) sendProduceRequest(now, entry.getKey(), acks, requestTimeout, entry.getValue());&#125;/** * Create a produce request from the given record batches */// å‘é€ produce è¯·æ±‚private void sendProduceRequest(long now, int destination, short acks, int timeout, List&lt;RecordBatch&gt; batches) &#123; Map&lt;TopicPartition, MemoryRecords&gt; produceRecordsByPartition = new HashMap&lt;&gt;(batches.size()); final Map&lt;TopicPartition, RecordBatch&gt; recordsByPartition = new HashMap&lt;&gt;(batches.size()); for (RecordBatch batch : batches) &#123; TopicPartition tp = batch.topicPartition; produceRecordsByPartition.put(tp, batch.records()); recordsByPartition.put(tp, batch); &#125; ProduceRequest.Builder requestBuilder = new ProduceRequest.Builder(acks, timeout, produceRecordsByPartition); RequestCompletionHandler callback = new RequestCompletionHandler() &#123; public void onComplete(ClientResponse response) &#123; handleProduceResponse(response, recordsByPartition, time.milliseconds()); &#125; &#125;; String nodeId = Integer.toString(destination); ClientRequest clientRequest = client.newClientRequest(nodeId, requestBuilder, now, acks != 0, callback); client.send(clientRequest, now); log.trace(&quot;Sent produce request to &#123;&#125;: &#123;&#125;&quot;, nodeId, requestBuilder);è¿™æ®µä»£ç å°±ç®€å•å¾ˆå¤šï¼Œæ€»æ¥èµ·æ¥å°±æ˜¯ï¼Œå°† batches ä¸­ leader ä¸ºåŒä¸€ä¸ª node çš„æ‰€æœ‰ RecordBatch æ”¾åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­è¿›è¡Œå‘é€ã€‚ æœ€åæœ¬æ–‡æ˜¯å¯¹ Kafka Producer ç«¯å‘é€æ¨¡å‹çš„ä¸€ä¸ªç®€å•åˆ†æï¼Œä¸‹ä¸€ç¯‡æ–‡ç« å°†ä¼šè¯¦ç»†ä»‹ç» metadata ç›¸å…³çš„å†…å®¹ï¼ŒåŒ…æ‹¬ metadata çš„å†…å®¹ä»¥åŠåœ¨ Producer ç«¯ metadata çš„æ›´æ–°æœºåˆ¶ã€‚è½¬è‡ªï¼šhttps://zhuanlan.zhihu.com/p/66190242","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"kafka","slug":"kafka","permalink":"yihao.ml/tags/kafka/"}]},{"title":"ç¦»èŒæ€»ç»“","slug":"2019â€“08-28-ç¦»èŒæ€»ç»“","date":"2019-08-28T09:46:53.557Z","updated":"2019-11-29T12:20:47.708Z","comments":true,"path":"2019/08/28/2019â€“08-28-ç¦»èŒæ€»ç»“/","link":"","permalink":"yihao.ml/2019/08/28/2019â€“08-28-ç¦»èŒæ€»ç»“/","excerpt":"","text":"æ˜¨å¤©æˆ‘æ‰“å¼€QQï¼Œçœ‹åˆ°äº†å¤§å­¦å®¤å‹XXXçš„åå­—ï¼Œå°±ä¼šæƒ³èµ·å½“æ—¶ä»–å‘ç”Ÿæ„å¤–çš„åœºæ™¯ï¼Œç”Ÿå‘½çœŸçš„å¤ªè„†å¼±ã€å¤ªçŸ­æš‚äº†ã€‚ä¸å¿˜åˆå¿ƒï¼Œæˆ‘èƒ½ç¡®åˆ‡çš„æ„Ÿå—åˆ°æˆ‘è¿˜æ´»ç€ã€‚å¦‚ä»Šå·²ç»å¿«è¦å¥”3äº†ï¼Œæˆ‘æƒ³è¶ç€è‡ªå·±è¿˜èƒ½æ‹¼åŠ¨ï¼ŒåŠªåŠ›å»é—¯ä¸€é—¯ã€‚å¸Œæœ›æœªæ¥çš„æˆ‘ä¸ä¼šåæ‚”ï¼Œå› ä¸ºåæ‚”äº†å®ƒå°±ä¼šåœ¨é‚£ï¼Œä¼šä¸€ç›´ä¼´éšç›´åˆ°ç»ˆè€ã€‚æˆ‘çš„ç¦»èŒå¾ˆå¤šäººåå¯¹ï¼Œæœ‹å‹è¯´åœ¨å…¬å¸é‚»è¿‘ä¸Šå¸‚ï¼Œå‘˜å·¥åˆ†å‘è‚¡æƒçš„æ—¶å€™ç¦»èŒæ˜¯ä¸æ˜æ™ºçš„é€‰æ‹©ã€‚å…¶å®äººç”Ÿä¼šç»å†å¾ˆå¤šè¿™æ ·çš„é€‰æ‹©ï¼Œåœ¨å²”è·¯ä¸Šåˆ°åº•é€‰å“ªæ¡è·¯å‘¢ï¼Ÿæºæ‚å¤ªå¤šç®—è®¡ï¼Œå¾€å¾€å¯èƒ½è¦åƒäºï¼Œå…¶å®æˆ‘åªéµå¾ªåªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯éšå¿ƒã€‚æœ‰äººè¯´é’±å¾ˆé‡è¦ï¼Œä½ ä¸èƒ½è·Ÿé’±è¿‡ä¸å»ï¼Œè¿™æ²¡å•¥æ¯›ç—…ï¼Œè°ä¼šå’Œé’±è¿‡ä¸å»å‘¢ï¼Ÿæˆ‘çš„è§‚ç‚¹åªæ˜¯å¦‚æœä¸€ä¸ªäººæŠŠé’±çœ‹çš„å¾ˆé‡ï¼Œä»–åº”è¯¥èµšä¸åˆ°é’±ã€‚æœ‰æ—¶å€™æˆ‘ä»¬ç®—é”™äº†ï¼Œå…¶å®åœ¨åšé€‰æ‹©æ—¶ï¼Œæ‹¿æ„Ÿå—ç®—è´¦æ‰æ˜¯æœ€æ­£ç¡®çš„ï¼Œåªè¦è‡ªå·±æ„Ÿè§‰å¿«ä¹å°±å¯ä»¥äº†ã€‚å‡å¦‚æˆ‘å¹²äº†æˆ‘å–œæ¬¢çš„äº‹ï¼Œè€Œä¸”æˆ‘è¿˜èƒ½å…»æ´»è‡ªå·±ï¼Œé‚£æˆ‘å°±å¾ˆå¿«ä¹ï¼Œå…¶ä»–çš„éƒ½æ— æ‰€è°“ã€‚å°±ç®—é€‰é”™äº†ï¼Œåˆæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Œå¸å–ç»éªŒï¼Œè¡¥é½è‡ªå·±çš„ä¸è¶³å°±è¡Œäº†ï¼Œå®ƒä¼šå°†æˆä¸ºæˆ‘äººç”Ÿçš„é˜…å†ã€‚åˆšæ¯•ä¸šçš„æˆ‘æ²¡æœ‰åƒå…¶ä»–äººé‚£æ ·,å¾ˆå¹¸è¿åœ°è¿›å…¥åˆ°ä¸€ä¸ªå¤§å…¬å¸ï¼Œä½†æ˜¯è¿™é‡Œä¸èƒ½å¦è®¤å°å…¬å¸å¯¹æˆé•¿çš„é‡è¦æ€§ã€‚å¤§å…¬å¸ä¹Ÿæ˜¯å°å…¬å¸æˆé•¿èµ·æ¥çš„ï¼Œæ­£æ˜¯å› ä¸ºè¿™æ¬¡çš„ç»å†ï¼Œè®©æˆ‘çŸ¥é“äº†å°å…¬å¸æˆé•¿çš„è¿‡ç¨‹ï¼Œä»¥åŠå…¶ä¸­çš„è¾›é…¸ï¼›è®©æˆ‘çŸ¥é“äº†åœ¨éæ ‡ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¦‚ä½•åº”å¯¹å„ç§é—®é¢˜ï¼›åŒæ ·ä¹Ÿè®©æˆ‘çŸ¥é“äº†æŠ‰æ‹©çš„é‡è¦æ€§ï¼Œå¯¹å…¬å¸èµ·ä»€ä¹ˆæ ·çš„ä½œç”¨ï¼›è¿™äº›ä¸œè¥¿ï¼Œåœ¨å¤§å…¬å¸ä¸­ï¼Œå¯¹äºç¨šå«©çš„æ¯•ä¸šç”Ÿæ¥è¯´æ˜¯å®Œå…¨ä¸å¯èƒ½æ¥è§¦åˆ°çš„ï¼Œè¿™ä»½å·¥ä½œç»å†å¯¹æˆ‘å½±å“è¿˜æ˜¯è›®å¤§çš„ã€‚é™¤äº†å¥½å¤„ï¼Œå°å…¬å¸ä¹Ÿæœ‰å¾ˆå¤šå¼Šç«¯ï¼Œå°å…¬å¸ä¸­æŠ€æœ¯å¾€å¾€éƒ½ä¸æ˜¯å¾ˆè®©äººæ»¡æ„ã€‚å…¬å¸ä¸­çš„éæ ‡å¤ªå¤šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ“¦äº®çœ¼ç›ï¼Œè®¤æ¸…æ¥šå“ªäº›æ˜¯å¯¹çš„ï¼Œå“ªäº›æ˜¯é”™çš„ã€‚åœ¨è¯•é”™ä¸­æˆé•¿ï¼Œä¹Ÿæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ä¸¤å¹´ï¼Œä»åˆšå…¥èŒåªèƒ½åšå°åŠŸèƒ½æ¨¡å—ï¼Œåˆ°ç°åœ¨çš„ç‹¬å½“ä¸€é¢ï¼Œè¿™å¾ˆæ˜¾ç„¶å°±æ˜¯è¿›æ­¥ã€‚å¤§å¤§å°å°çš„åŠŸèƒ½æ¨¡å—åŠæ¯å¤©ä¸åœçš„ç¼–ç ï¼Œè®©æˆ‘çš„å¯¹ä»£ç çš„è®¤çŸ¥ä¸Šå‡åˆ°äº†æ–°é«˜åº¦ã€åœ¨J2EEè¡Œä¸šä¸­æ²‰æ·€äº†å¤§é‡çš„ç»éªŒã€‚æˆ‘ä¸å†è¿½æ±‚å®ŒæˆåŠŸèƒ½ï¼Œåœ¨å®ŒæˆåŠŸèƒ½çš„åŒæ—¶ï¼Œä¹Ÿä¼šæ³¨é‡ä»£ç æ•´ä½“ç»“æ„çš„è®¾è®¡ï¼Œæƒ³ç€æ³•å­è®©ç®—æ³•ä¸åº”ç”¨ç›¸ç»“åˆä»¥æ­¤æ¥æé«˜ä»£ç çš„æ‰§è¡Œæ•ˆç‡ï¼Œæƒ³åŠæ³•ä¼˜é›…çš„å°è£…å®ç°ä»£ç çš„å¤ç”¨æ¥èŠ‚çº¦å¼€å‘å‘¨æœŸç­‰ï¼›å› ä¸ºå…¬å¸çš„ä¸šåŠ¡é‡ä¸æ˜¯å¾ˆå¤§ï¼Œå› æ­¤æˆ‘æœ‰æœºä¼šå­¦ä¹ ä¸€äº›æ–°ä¸œè¥¿ã€‚åœ¨è¿™ä¸¤å¹´é—´ï¼Œæˆ‘å­¦ä¹ å¹¶æ·±å…¥äº†è§£äº†å¤§æ•°æ®ç›¸å…³çš„çŸ¥è¯†ï¼Œæ¯”å¦‚MRã€Yarnã€Hiveã€Hbaseã€Stormã€Sparkç­‰ç­‰ï¼Œäº†è§£äº†æœºå™¨å­¦ä¹ åŠéƒ¨åˆ†ç®—æ³•knnã€è´å¶æ–¯ã€å›å½’ç­‰ç®—æ³•ï¼Œå·©å›ºäº†å¤§å­¦å­¦çš„æ•°æ®ç»“æ„ã€‚å­¦ä¹ äº†pythonã€scalaã€GOç­‰æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼ŒæŠ˜è…¾å‡ºäº†å¾ˆå¤šæœ‰è¶£çš„å°ç©æ„ï¼Œæ¯”å¦‚ï¼šè‡ªåŠ¨ä¸‹è½½å™¨ï¼ˆå®ç°ç™¾åº¦ç½‘ç›˜åˆ°ç§»åŠ¨ç¡¬ç›˜å†…å®¹çš„æ— ç¼å¯¹æ¥ï¼‰ã€äººè„¸è¯†åˆ«ï¼ˆä½¿ç”¨Raspberry PIå¾®å‹è®¡ç®—æœº+OpenCVï¼‰ã€å¤§æ•°æ®å®æ—¶æ—¥å¿—åˆ†æç³»ç»Ÿç­‰ã€‚å¥½äº†å°±è¿™æ ·äº†ã€‚å†™ç»™æœªæ¥çš„è‡ªå·±,ç»§ç»­åŠªåŠ›ï¼","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[]},{"title":"ç¥ç»ç½‘ç»œï¼šåŸºæœ¬åˆ†ç±»[è½¬]","slug":"2019â€“08-20-ç¥ç»ç½‘ç»œï¼šåŸºæœ¬åˆ†ç±»[è½¬]","date":"2019-08-20T22:39:00.000Z","updated":"2019-11-29T12:20:47.707Z","comments":true,"path":"2019/08/20/2019â€“08-20-ç¥ç»ç½‘ç»œï¼šåŸºæœ¬åˆ†ç±»[è½¬]/","link":"","permalink":"yihao.ml/2019/08/20/2019â€“08-20-ç¥ç»ç½‘ç»œï¼šåŸºæœ¬åˆ†ç±»[è½¬]/","excerpt":"","text":"ä»£ç å¼ä¾‹ï¼šRun in Gogle Colab / View source on Githubæœ¬æŒ‡å—è½¬è‡ªTensorFlowå®˜ç½‘ã€‚ä¸»è¦è®­ç»ƒäº†ä¸€ä¸ªç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œæ¥å¯¹æœè£…å›¾åƒè¿›è¡Œåˆ†ç±»ï¼Œä¾‹å¦‚è¿åŠ¨é‹å’Œè¡¬è¡«ã€‚å¦‚æœæ‚¨ä¸äº†è§£æ‰€æœ‰ç»†èŠ‚ä¹Ÿä¸éœ€è¦æ‹…å¿ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¯¹å®Œæ•´TensorFlowé¡¹ç›®çš„ç®€è¦æ¦‚è¿°ï¼Œç›¸å…³çš„ç»†èŠ‚ä¼šåœ¨éœ€è¦æ—¶è¿›è¡Œè§£é‡Šæœ¬æŒ‡å—ä½¿ç”¨tf.kerasï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºåœ¨TensorFlowä¸­æ„å»ºå’Œè®­ç»ƒæ¨¡å‹çš„é«˜çº§APIã€‚1234567891011from __future__ import absolute_import, division, print_function, unicode_literals# å¯¼å…¥TensorFlowå’Œtf.kerasimport tensorflow as tffrom tensorflow import keras# å¯¼å…¥è¾…åŠ©åº“import numpy as npimport matplotlib.pyplot as pltprint(tf.__version__)ç»“æœå¦‚ä¸‹12.0.0-beta1 å¯¼å…¥Fashion MNISTæ•°æ®é›†æœ¬æŒ‡å—ä½¿ç”¨Fashion MNIST æ•°æ®é›†ï¼Œå…¶ä¸­åŒ…å«äº†10ä¸ªç±»åˆ«ä¸­å…±70,000å¼ ç°åº¦å›¾åƒã€‚å›¾åƒåŒ…å«äº†ä½åˆ†è¾¨ç‡ï¼ˆ28 x 28åƒç´ ï¼‰çš„å•ä¸ªæœè£…ç‰©å“ï¼Œå¦‚ä¸‹æ‰€ç¤º:Fashion MNIST æ—¨åœ¨æ›¿ä»£ä¼ ç»Ÿçš„MNISTæ•°æ®é›† â€” å®ƒç»å¸¸è¢«ä½œä¸ºæœºå™¨å­¦ä¹ åœ¨è®¡ç®—æœºè§†è§‰æ–¹å‘çš„&quot;Hello, World&quot;ã€‚MNISTæ•°æ®é›†åŒ…å«æ‰‹å†™æ•°å­—ï¼ˆ0,1,2ç­‰ï¼‰çš„å›¾åƒï¼Œå…¶æ ¼å¼ä¸æˆ‘ä»¬åœ¨æ­¤å¤„ä½¿ç”¨çš„æœè£…ç›¸åŒã€‚æœ¬æŒ‡å—ä½¿ç”¨Fashion MNISTè¿›è¡Œå¤šæ ·åŒ–ï¼Œå› ä¸ºå®ƒæ¯”æ™®é€šçš„MNISTæ›´å…·æŒ‘æˆ˜æ€§ã€‚ä¸¤ä¸ªæ•°æ®é›†éƒ½ç›¸å¯¹è¾ƒå°ï¼Œç”¨äºéªŒè¯ç®—æ³•æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚å®ƒä»¬æ˜¯æµ‹è¯•å’Œè°ƒè¯•ä»£ç çš„è‰¯å¥½èµ·ç‚¹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨60,000å¼ å›¾åƒæ¥è®­ç»ƒç½‘ç»œå’Œ10,000å¼ å›¾åƒæ¥è¯„ä¼°ç½‘ç»œæ¨¡å‹å­¦ä¹ å›¾åƒåˆ†ç±»ä»»åŠ¡çš„å‡†ç¡®ç¨‹åº¦ã€‚æ‚¨å¯ä»¥ç›´æ¥ä»TensorFlowä½¿ç”¨Fashion MNISTï¼Œåªéœ€å¯¼å…¥å¹¶åŠ è½½æ•°æ®123fashion_mnist = keras.datasets.fashion_mnist(train_images, train_labels), (test_images, test_labels) = fashion_mnist.load_data()ç»“æœ:12345678Downloading data from https://storage.googleapis.com/tensorflow/tf-keras-datasets/train-labels-idx1-ubyte.gz32768/29515 [=================================] - 0s 0us/stepDownloading data from https://storage.googleapis.com/tensorflow/tf-keras-datasets/train-images-idx3-ubyte.gz26427392/26421880 [==============================] - 0s 0us/stepDownloading data from https://storage.googleapis.com/tensorflow/tf-keras-datasets/t10k-labels-idx1-ubyte.gz8192/5148 [===============================================] - 0s 0us/stepDownloading data from https://storage.googleapis.com/tensorflow/tf-keras-datasets/t10k-images-idx3-ubyte.gz4423680/4422102 [==============================] - 0s 0us/stepåŠ è½½æ•°æ®é›†å¹¶è¿”å›å››ä¸ªNumPyæ•°ç»„:train_imageså’Œtrain_labelsæ•°ç»„æ˜¯è®­ç»ƒé›†â€”è¿™æ˜¯æ¨¡å‹ç”¨æ¥å­¦ä¹ çš„æ•°æ®ã€‚æ¨¡å‹é€šè¿‡æµ‹è¯•é›†è¿›è¡Œæµ‹è¯•, å³test_imagesä¸ test_labelsä¸¤ä¸ªæ•°ç»„ã€‚å›¾åƒæ˜¯28x28 NumPyæ•°ç»„ï¼Œåƒç´ å€¼ä»‹äº0åˆ°255ä¹‹é—´ã€‚labelsæ˜¯ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œæ•°å€¼ä»‹äº0åˆ°9ä¹‹é—´ã€‚è¿™å¯¹åº”äº†å›¾åƒæ‰€ä»£è¡¨çš„æœè£…çš„ç±»åˆ«:æ ‡ç­¾ç±»åˆ«0T-shirt/top1Trouser2Pullover3Dress4Coat5Sandal6Shirt7Sneaker8Bag9Ankle bootæ¯ä¸ªå›¾åƒéƒ½æ˜ å°„åˆ°ä¸€ä¸ªæ ‡ç­¾ã€‚ç”±äºç±»åˆ«åç§°ä¸åŒ…å«åœ¨æ•°æ®é›†ä¸­,å› æ­¤æŠŠä»–ä»¬å­˜å‚¨åœ¨è¿™é‡Œä»¥ä¾¿åœ¨ç»˜åˆ¶å›¾åƒæ—¶ä½¿ç”¨:1class_names = ['T-shirt/top', 'Trouser', 'Pullover', 'Dress', 'Coat','Sandal', 'Shirt', 'Sneaker', 'Bag', 'Ankle boot'] æ¢ç´¢æ•°æ®è®©æˆ‘ä»¬åœ¨è®­ç»ƒæ¨¡å‹ä¹‹å‰æ¢ç´¢æ•°æ®é›†çš„æ ¼å¼ã€‚ä»¥ä¸‹æ˜¾ç¤ºè®­ç»ƒé›†ä¸­æœ‰60,000ä¸ªå›¾åƒï¼Œæ¯ä¸ªå›¾åƒè¡¨ç¤ºä¸º28 x 28åƒç´ :1train_images.shapeåŒæ ·ï¼Œè®­ç»ƒé›†ä¸­æœ‰60,000ä¸ªæ ‡ç­¾:1len(train_labels)æ¯ä¸ªæ ‡ç­¾éƒ½æ˜¯0åˆ°9ä¹‹é—´çš„æ•´æ•°:1train_labelsæµ‹è¯•é›†ä¸­æœ‰10,000ä¸ªå›¾åƒã€‚ åŒæ ·ï¼Œæ¯ä¸ªå›¾åƒè¡¨ç¤ºä¸º28Ã—28åƒç´ :1test_images.shapeæµ‹è¯•é›†åŒ…å«10,000ä¸ªå›¾åƒæ ‡ç­¾:1len(test_labels) æ•°æ®é¢„å¤„ç†åœ¨è®­ç»ƒç½‘ç»œä¹‹å‰å¿…é¡»å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ã€‚ å¦‚æœæ‚¨æ£€æŸ¥è®­ç»ƒé›†ä¸­çš„ç¬¬ä¸€ä¸ªå›¾åƒï¼Œæ‚¨å°†çœ‹åˆ°åƒç´ å€¼è½åœ¨0åˆ°255çš„èŒƒå›´å†…:12345plt.figure()plt.imshow(train_images[0])plt.colorbar()plt.grid(False)plt.show()åœ¨é¦ˆé€åˆ°ç¥ç»ç½‘ç»œæ¨¡å‹ä¹‹å‰ï¼Œæˆ‘ä»¬å°†è¿™äº›å€¼ç¼©æ”¾åˆ°0åˆ°1çš„èŒƒå›´ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åƒç´ å€¼å€¼é™¤ä»¥255ã€‚é‡è¦çš„æ˜¯ï¼Œå¯¹è®­ç»ƒé›†å’Œæµ‹è¯•é›†è¦ä»¥ç›¸åŒçš„æ–¹å¼è¿›è¡Œé¢„å¤„ç†:123train_images = train_images / 255.0test_images = test_images / 255.0æ˜¾ç¤ºè®­ç»ƒé›†ä¸­çš„å‰25ä¸ªå›¾åƒï¼Œå¹¶åœ¨æ¯ä¸ªå›¾åƒä¸‹æ–¹æ˜¾ç¤ºç±»åã€‚éªŒè¯æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œæˆ‘ä»¬æ˜¯å¦å·²å‡†å¤‡å¥½æ„å»ºå’Œè®­ç»ƒç½‘ç»œã€‚123456789plt.figure(figsize=(10,10))for i in range(25): plt.subplot(5,5,i+1) plt.xticks([]) plt.yticks([]) plt.grid(False) plt.imshow(train_images[i], cmap=plt.cm.binary) plt.xlabel(class_names[train_labels[i]])plt.show() æ„å»ºæ¨¡å‹æ„å»ºç¥ç»ç½‘ç»œéœ€è¦é…ç½®æ¨¡å‹çš„å±‚ï¼Œç„¶åç¼–è¯‘æ¨¡å‹ã€‚è®¾ç½®ç½‘ç»œå±‚ä¸€ä¸ªç¥ç»ç½‘ç»œæœ€åŸºæœ¬çš„ç»„æˆéƒ¨åˆ†ä¾¿æ˜¯ç½‘ç»œå±‚ã€‚ç½‘ç»œå±‚ä»æä¾›ç»™ä»–ä»¬çš„æ•°æ®ä¸­æå–è¡¨ç¤ºï¼Œå¹¶æœŸæœ›è¿™äº›è¡¨ç¤ºå¯¹å½“å‰çš„é—®é¢˜æ›´åŠ æœ‰æ„ä¹‰å¤§å¤šæ•°æ·±åº¦å­¦ä¹ æ˜¯ç”±ä¸²è¿åœ¨ä¸€èµ·çš„ç½‘ç»œå±‚æ‰€ç»„æˆã€‚å¤§å¤šæ•°ç½‘ç»œå±‚ï¼Œä¾‹å¦‚tf.keras.layers.Denseï¼Œå…·æœ‰åœ¨è®­ç»ƒæœŸé—´å­¦ä¹ çš„å‚æ•°ã€‚12345model = keras.Sequential([ keras.layers.Flatten(input_shape=(28, 28)), keras.layers.Dense(128, activation=tf.nn.relu), keras.layers.Dense(10, activation=tf.nn.softmax)])ç½‘ç»œä¸­çš„ç¬¬ä¸€å±‚, tf.keras.layers.Flatten, å°†å›¾åƒæ ¼å¼ä»ä¸€ä¸ªäºŒç»´æ•°ç»„(åŒ…å«ç€28x28ä¸ªåƒç´ )è½¬æ¢æˆä¸ºä¸€ä¸ªåŒ…å«ç€28 * 28 = 784ä¸ªåƒç´ çš„ä¸€ç»´æ•°ç»„ã€‚å¯ä»¥å°†è¿™ä¸ªç½‘ç»œå±‚è§†ä¸ºå®ƒå°†å›¾åƒä¸­æœªå †å çš„åƒç´ æ’åˆ—åœ¨ä¸€èµ·ã€‚è¿™ä¸ªç½‘ç»œå±‚æ²¡æœ‰éœ€è¦å­¦ä¹ çš„å‚æ•°;å®ƒä»…ä»…å¯¹æ•°æ®è¿›è¡Œæ ¼å¼åŒ–ã€‚åœ¨åƒç´ è¢«å±•å¹³ä¹‹åï¼Œç½‘ç»œç”±ä¸€ä¸ªåŒ…å«æœ‰ä¸¤ä¸ªtf.keras.layers.Denseç½‘ç»œå±‚çš„åºåˆ—ç»„æˆã€‚ä»–ä»¬è¢«ç§°ä½œç¨ å¯†é“¾æ¥å±‚æˆ–å…¨è¿æ¥å±‚ã€‚ ç¬¬ä¸€ä¸ªDenseç½‘ç»œå±‚åŒ…å«æœ‰128ä¸ªèŠ‚ç‚¹(æˆ–è¢«ç§°ä¸ºç¥ç»å…ƒ)ã€‚ç¬¬äºŒä¸ª(ä¹Ÿæ˜¯æœ€åä¸€ä¸ª)ç½‘ç»œå±‚æ˜¯ä¸€ä¸ªåŒ…å«10ä¸ªèŠ‚ç‚¹çš„softmaxå±‚â€”å®ƒå°†è¿”å›åŒ…å«10ä¸ªæ¦‚ç‡åˆ†æ•°çš„æ•°ç»„ï¼Œæ€»å’Œä¸º1ã€‚æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªåˆ†æ•°ï¼Œè¡¨ç¤ºå½“å‰å›¾åƒå±äº10ä¸ªç±»åˆ«ä¹‹ä¸€çš„æ¦‚ç‡ã€‚ç¼–è¯‘æ¨¡å‹åœ¨æ¨¡å‹å‡†å¤‡å¥½è¿›è¡Œè®­ç»ƒä¹‹å‰ï¼Œå®ƒè¿˜éœ€è¦ä¸€äº›é…ç½®ã€‚è¿™äº›æ˜¯åœ¨æ¨¡å‹çš„ç¼–è¯‘(compile)æ­¥éª¤ä¸­æ·»åŠ çš„:æŸå¤±å‡½æ•° â€”è¿™å¯ä»¥è¡¡é‡æ¨¡å‹åœ¨åŸ¹è®­è¿‡ç¨‹ä¸­çš„å‡†ç¡®ç¨‹åº¦ã€‚ æˆ‘ä»¬å¸Œæœ›å°†æ­¤å‡½æ•°æœ€å°åŒ–ä»¥&quot;é©±ä½¿&quot;æ¨¡å‹æœæ­£ç¡®çš„æ–¹å‘æ‹Ÿåˆã€‚ä¼˜åŒ–å™¨ â€”è¿™å°±æ˜¯æ¨¡å‹æ ¹æ®å®ƒçœ‹åˆ°çš„æ•°æ®åŠå…¶æŸå¤±å‡½æ•°è¿›è¡Œæ›´æ–°çš„æ–¹å¼ã€‚â€™è¯„ä»·æ–¹å¼ â€”ç”¨äºç›‘æ§è®­ç»ƒå’Œæµ‹è¯•æ­¥éª¤ã€‚ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨å‡†ç¡®ç‡(accuracy)ï¼Œå³æ­£ç¡®åˆ†ç±»çš„å›¾åƒçš„åˆ†æ•°ã€‚123model.compile(optimizer='adam', loss='sparse_categorical_crossentropy', metrics=['accuracy']) è®­ç»ƒæ¨¡å‹è®­ç»ƒç¥ç»ç½‘ç»œæ¨¡å‹éœ€è¦ä»¥ä¸‹æ­¥éª¤:1. å°†è®­ç»ƒæ•°æ®æä¾›ç»™æ¨¡å‹ - åœ¨æœ¬æ¡ˆä¾‹ä¸­ï¼Œä»–ä»¬æ˜¯train_imageså’Œtrain_labelsæ•°ç»„ã€‚ 2. æ¨¡å‹å­¦ä¹ å¦‚ä½•å°†å›¾åƒä¸å…¶æ ‡ç­¾å…³è” 3. æˆ‘ä»¬ä½¿ç”¨æ¨¡å‹å¯¹æµ‹è¯•é›†è¿›è¡Œé¢„æµ‹, åœ¨æœ¬æ¡ˆä¾‹ä¸­ä¸ºtest_imagesæ•°ç»„ã€‚æˆ‘ä»¬éªŒè¯é¢„æµ‹ç»“æœæ˜¯å¦åŒ¹é…test_labelsæ•°ç»„ä¸­ä¿å­˜çš„æ ‡ç­¾ã€‚ 4. é€šè¿‡è°ƒç”¨model.fitæ–¹æ³•æ¥è®­ç»ƒæ¨¡å‹ â€” æ¨¡å‹å¯¹è®­ç»ƒæ•°æ®è¿›è¡Œ&quot;æ‹Ÿåˆ&quot;ã€‚ 1model.fit(train_images, train_labels, epochs=5)ç»“æœ:123456789101112131415161718WARNING: Logging before flag parsing goes to stderr.W0703 00:57:16.227570 140360607328000 deprecation.py:323] From /tmpfs/src/tf_docs_env/lib/python3.5/site-packages/tensorflow/python/ops/math_grad.py:1250: add_dispatch_support.&lt;locals&gt;.wrapper (from tensorflow.python.ops.array_ops) is deprecated and will be removed in a future version.Instructions for updating:Use tf.where in 2.0, which has the same broadcast rule as np.whereTrain on 60000 samplesEpoch 1/560000/60000 [==============================] - 5s 85us/sample - loss: 0.4949 - accuracy: 0.8267Epoch 2/560000/60000 [==============================] - 6s 92us/sample - loss: 0.3753 - accuracy: 0.8641Epoch 3/560000/60000 [==============================] - 5s 89us/sample - loss: 0.3355 - accuracy: 0.8784Epoch 4/560000/60000 [==============================] - 4s 72us/sample - loss: 0.3136 - accuracy: 0.8855Epoch 5/560000/60000 [==============================] - 4s 69us/sample - loss: 0.2955 - accuracy: 0.8921&lt;tensorflow.python.keras.callbacks.History at 0x7fa81c2c1b38&gt;éšç€æ¨¡å‹è®­ç»ƒï¼Œå°†æ˜¾ç¤ºæŸå¤±å’Œå‡†ç¡®ç‡ç­‰æŒ‡æ ‡ã€‚è¯¥æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šè¾¾åˆ°çº¦0.88(æˆ–88ï¼…)çš„å‡†ç¡®åº¦ã€‚ è¯„ä¼°å‡†ç¡®ç‡æ¥ä¸‹æ¥ï¼Œæ¯”è¾ƒæ¨¡å‹åœ¨æµ‹è¯•æ•°æ®é›†ä¸Šçš„æ‰§è¡Œæƒ…å†µ:123test_loss, test_acc = model.evaluate(test_images, test_labels)print('Test accuracy:', test_acc)ç»“æœï¼š1210000/10000 [==============================] - 1s 53us/sample - loss: 0.3489 - accuracy: 0.8713Test accuracy: 0.8713äº‹å®è¯æ˜ï¼Œæµ‹è¯•æ•°æ®é›†çš„å‡†ç¡®æ€§ç•¥ä½äºè®­ç»ƒæ•°æ®é›†çš„å‡†ç¡®æ€§ã€‚è®­ç»ƒç²¾åº¦å’Œæµ‹è¯•ç²¾åº¦ä¹‹é—´çš„å·®è·æ˜¯è¿‡æ‹Ÿåˆçš„ä¸€ä¸ªä¾‹å­ã€‚è¿‡æ‹Ÿåˆæ˜¯æŒ‡æœºå™¨å­¦ä¹ æ¨¡å‹åœ¨æ–°æ•°æ®ä¸Šçš„è¡¨ç°æ¯”åœ¨è®­ç»ƒæ•°æ®ä¸Šè¡¨ç°æ›´å·®ã€‚ è¿›è¡Œé¢„æµ‹é€šè¿‡è®­ç»ƒæ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥é¢„æµ‹æŸäº›å›¾åƒã€‚1predictions = model.predict(test_images)åœ¨æ­¤ï¼Œæ¨¡å‹å·²ç»é¢„æµ‹äº†æµ‹è¯•é›†ä¸­æ¯ä¸ªå›¾åƒçš„æ ‡ç­¾ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ç¬¬ä¸€ä¸ªé¢„æµ‹:1predictions[0]ç»“æœï¼š123array([6.6858855e-05, 2.5964803e-07, 5.3627105e-06, 4.5019146e-06, 2.7420206e-06, 4.7881842e-02, 2.3233067e-04, 5.4705784e-02, 8.5581087e-05, 8.9701480e-01], dtype=float32)é¢„æµ‹æ˜¯10ä¸ªæ•°å­—çš„æ•°ç»„ã€‚è¿™äº›æè¿°äº†æ¨¡å‹çš„&quot;ä¿¡å¿ƒ&quot;ï¼Œå³å›¾åƒå¯¹åº”äº10ç§ä¸åŒæœè£…ä¸­çš„æ¯ä¸€ç§ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å“ªä¸ªæ ‡ç­¾å…·æœ‰æœ€é«˜çš„ç½®ä¿¡åº¦å€¼ï¼š1np.argmax(predictions[0])9å› æ­¤ï¼Œæ¨¡å‹æœ€æœ‰ä¿¡å¿ƒçš„æ˜¯è¿™ä¸ªå›¾åƒæ˜¯ankle bootï¼Œæˆ–è€… class_names[9]ã€‚ æˆ‘ä»¬å¯ä»¥æ£€æŸ¥æµ‹è¯•æ ‡ç­¾ï¼Œçœ‹çœ‹è¿™æ˜¯å¦æ­£ç¡®:1test_labels[0]9æˆ‘ä»¬å¯ä»¥ç”¨å›¾è¡¨æ¥æŸ¥çœ‹å…¨éƒ¨10ä¸ªç±»åˆ«123456789101112131415161718192021222324252627282930def plot_image(i, predictions_array, true_label, img): predictions_array, true_label, img = predictions_array[i], true_label[i], img[i] plt.grid(False) plt.xticks([]) plt.yticks([]) plt.imshow(img, cmap=plt.cm.binary) predicted_label = np.argmax(predictions_array) if predicted_label == true_label: color = 'blue' else: color = 'red' plt.xlabel(\"&#123;&#125; &#123;:2.0f&#125;% (&#123;&#125;)\".format(class_names[predicted_label], 100*np.max(predictions_array), class_names[true_label]), color=color)def plot_value_array(i, predictions_array, true_label): predictions_array, true_label = predictions_array[i], true_label[i] plt.grid(False) plt.xticks([]) plt.yticks([]) thisplot = plt.bar(range(10), predictions_array, color=\"#777777\") plt.ylim([0, 1]) predicted_label = np.argmax(predictions_array) thisplot[predicted_label].set_color('red') thisplot[true_label].set_color('blue')è®©æˆ‘ä»¬çœ‹çœ‹ç¬¬0ä¸ªå›¾åƒï¼Œé¢„æµ‹å’Œé¢„æµ‹æ•°ç»„ã€‚1234567i = 0plt.figure(figsize=(6,3))plt.subplot(1,2,1)plot_image(i, predictions, test_labels, test_images)plt.subplot(1,2,2)plot_value_array(i, predictions, test_labels)plt.show()1234567i = 12plt.figure(figsize=(6,3))plt.subplot(1,2,1)plot_image(i, predictions, test_labels, test_images)plt.subplot(1,2,2)plot_value_array(i, predictions, test_labels)plt.show()è®©æˆ‘ä»¬ç»˜åˆ¶å‡ ä¸ªå›¾åƒåŠå…¶é¢„æµ‹ç»“æœã€‚æ­£ç¡®çš„é¢„æµ‹æ ‡ç­¾æ˜¯è“è‰²çš„ï¼Œä¸æ­£ç¡®çš„é¢„æµ‹æ ‡ç­¾æ˜¯çº¢è‰²çš„ã€‚è¯¥æ•°å­—ç»™å‡ºäº†é¢„æµ‹æ ‡ç­¾çš„ç™¾åˆ†æ¯”(æ»¡åˆ†100)ã€‚è¯·æ³¨æ„ï¼Œå³ä½¿éå¸¸è‡ªä¿¡ï¼Œä¹Ÿå¯èƒ½å‡ºé”™ã€‚12345678910111213# ç»˜åˆ¶å‰Xä¸ªæµ‹è¯•å›¾åƒï¼Œé¢„æµ‹æ ‡ç­¾å’ŒçœŸå®æ ‡ç­¾# ä»¥è“è‰²æ˜¾ç¤ºæ­£ç¡®çš„é¢„æµ‹ï¼Œçº¢è‰²æ˜¾ç¤ºä¸æ­£ç¡®çš„é¢„æµ‹num_rows = 5num_cols = 3num_images = num_rows*num_colsplt.figure(figsize=(2*2*num_cols, 2*num_rows))for i in range(num_images): plt.subplot(num_rows, 2*num_cols, 2*i+1) plot_image(i, predictions, test_labels, test_images) plt.subplot(num_rows, 2*num_cols, 2*i+2) plot_value_array(i, predictions, test_labels)plt.show()æœ€åï¼Œä½¿ç”¨è®­ç»ƒçš„æ¨¡å‹å¯¹å•ä¸ªå›¾åƒè¿›è¡Œé¢„æµ‹ã€‚1234# ä»æµ‹è¯•æ•°æ®é›†ä¸­è·å–å›¾åƒimg = test_images[0]print(img.shape)(28, 28)tf.kerasæ¨¡å‹ç»è¿‡ä¼˜åŒ–ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å¯¹æ‰¹é‡,æˆ–è€…ä¸€ä¸ªé›†åˆçš„æ•°æ®è¿›è¡Œé¢„æµ‹ã€‚å› æ­¤ï¼Œå³ä½¿æˆ‘ä»¬ä½¿ç”¨å•ä¸ªå›¾åƒï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å°†å…¶æ·»åŠ åˆ°åˆ—è¡¨ä¸­:1234# å°†å›¾åƒæ·»åŠ åˆ°æ‰¹æ¬¡ä¸­ï¼Œå³ä½¿å®ƒæ˜¯å”¯ä¸€çš„æˆå‘˜ã€‚img = (np.expand_dims(img,0))print(img.shape)(1, 28, 28)ç°åœ¨æ¥é¢„æµ‹å›¾åƒ:123predictions_single = model.predict(img)print(predictions_single)ç»“æœï¼š12[[6.6858927e-05 2.5964729e-07 5.3627055e-06 4.5019060e-06 2.7420206e-06 4.7881793e-02 2.3233047e-04 5.4705758e-02 8.5581087e-05 8.9701480e-01]]123plot_value_array(0, predictions_single, test_labels)plt.xticks(range(10), class_names, rotation=45)plt.show()model.predictè¿”å›ä¸€ä¸ªåŒ…å«åˆ—è¡¨çš„åˆ—è¡¨ï¼Œæ¯ä¸ªå›¾åƒå¯¹åº”ä¸€ä¸ªåˆ—è¡¨çš„æ•°æ®ã€‚è·å–æ‰¹æ¬¡ä¸­æˆ‘ä»¬(ä»…æœ‰çš„)å›¾åƒçš„é¢„æµ‹:12prediction_result = np.argmax(predictions_single[0])print(prediction_result)9è€Œä¸”ï¼Œå’Œä¹‹å‰ä¸€æ ·ï¼Œæ¨¡å‹é¢„æµ‹æ ‡ç­¾ä¸º9ã€‚","categories":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"yihao.ml/categories/æœºå™¨å­¦ä¹ /"}],"tags":[]},{"title":"HiveSQLä¼˜åŒ–","slug":"2019â€“08-17-HiveSQLä¼˜åŒ–","date":"2019-08-17T21:54:00.000Z","updated":"2019-11-29T12:20:47.707Z","comments":true,"path":"2019/08/17/2019â€“08-17-HiveSQLä¼˜åŒ–/","link":"","permalink":"yihao.ml/2019/08/17/2019â€“08-17-HiveSQLä¼˜åŒ–/","excerpt":"","text":"ä¸‹é¢åˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„SQLä¼˜åŒ–æ–¹æ¡ˆ sqlå¼•èµ·çš„æ•°æ®å€¾æ–œæ•°æ®å€¾æ–œä¼šå¯¼è‡´æŸä¸ªReduceè¿è¡Œè¿‡æ…¢å½±å“åˆ°æ•´ä½“çš„è¿è¡Œæ—¶é•¿ã€‚é€šå¸¸åœ¨joinå’Œgroup byæ—¶ï¼Œä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜joinå¼•èµ·çš„æ•°æ®å€¾æ–œ,ä¸‹é¢æ“ä½œä¼šå°†ä¸€ä¸ªjobå˜ä¸ºä¸¤ä¸ªjobæ‰§è¡ŒHQL1234#å¦‚æœæ˜¯joinè¿‡ç¨‹å‡ºç°å€¾æ–œï¼Œåº”è¯¥è®¾ç½®ä¸ºtrueset hive.optimize.skewjoin=true;#è¿™ä¸ªæ˜¯joinçš„é”®å¯¹åº”çš„è®°å½•æ¡æ•°è¶…è¿‡è¿™ä¸ªå€¼åˆ™ä¼šè¿›è¡Œä¼˜åŒ–set hive.skewjoin.key=100000;group by keyå¼•èµ·çš„æ•°æ®å€¾æ–œ1234# å¦‚æœgroup byè¿‡ç¨‹å‡ºç°å€¾æ–œåº”è¯¥è®¾ç½®ä¸ºtrueset hive.groupby.skewindata=true;#è¿™ä¸ªæ˜¯groupçš„é”®å¯¹åº”çš„è®°å½•æ¡æ•°è¶…è¿‡è¿™ä¸ªå€¼åˆ™ä¼šè¿›è¡Œä¼˜åŒ–set hive.groupby.mapaggr.checkinterval=100000; mapjoin(mapç«¯æ‰§è¡Œjoinï¼‰é’ˆå¯¹åº”ç”¨åœºæ™¯åˆç†ä½¿ç”¨MapJoinä¹Ÿå¾ˆé‡è¦ã€‚Map Joinå¯ä»¥è§£å†³æ•°æ®å€¾æ–œé—®é¢˜ï¼Œå› ä¸ºæ²¡æœ‰Reduce Taskäº†;åªè¿è¡ŒMap Taskï¼Œç›¸æ¯”å¤šè¿è¡ŒReduce Taskæ¥è¯´çœæ—¶é—´ã€‚å¯åŠ¨æ–¹å¼ä¸€ï¼š(è‡ªåŠ¨)123set.hive.auto.convert.join = true;#é»˜è®¤å€¼æ˜¯25mbå°è¡¨å°äº25mbè‡ªåŠ¨å¯åŠ¨mapjoin hive.mapjoin.smalltable.filesize=25000000å¯åŠ¨æ–¹å¼äºŒï¼š(æ‰‹åŠ¨ï¼‰1select /*+mapjoin(A)*/ f.a,f.b from A t join B f on (f.a=t.a) bucketjoinåˆç†åˆ©ç”¨æ¡¶åˆ†åŒºå¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒå¯ä»¥é¿å…å…¨è¡¨æ£€ç´¢ï¼Œåœ¨å¤§æ•°æ®åœºæ™¯ä¸­å…¨è¡¨æ£€ç´¢æ„å‘³ç€ä»€ä¹ˆåº”è¯¥å¯ä»¥æƒ³è±¡â€¦åœ¨æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæƒ…å†µæ—¶ä½¿ç”¨ï¼š1.ä¸¤ä¸ªè¡¨ä»¥ç›¸åŒæ–¹å¼åˆ’åˆ†æ¡¶2.ä¸¤ä¸ªè¡¨çš„æ¡¶ä¸ªæ•°æ˜¯å€æ•°å…³ç³»1234create table order(cid int,price float) clustered by(cid) into 32 buckets;create table customer(id int,first string) clustered by(id) into 32/64 buckets;select price from order t join customer s on t.cid=s.id; whereæ¡ä»¶ä¼˜åŒ–å°½å¯èƒ½æ—©çš„ç­›æ‰æ›´å¤šçš„æ•°æ®ã€‚ä¼˜åŒ–å‰ï¼ˆå…³ç³»æ•°æ®åº“ä¸ç”¨è€ƒè™‘ä¼šè‡ªåŠ¨ä¼˜åŒ–ï¼‰ï¼š1select m.cid,u.id from order m join customer u on m.cid =u.id where m.dt='2019-08-18';ä¼˜åŒ–å(whereæ¡ä»¶åœ¨mapç«¯æ‰§è¡Œè€Œä¸æ˜¯åœ¨reduceç«¯æ‰§è¡Œï¼‰ï¼š1select m.cid,u.id from ï¼ˆselect * from order where dt='2019-08-18'ï¼‰ m join customer u on m.cid =u.id; count distinctä¼˜åŒ–åªæœ‰ä¸€ä¸ªreduceï¼Œå…ˆå»é‡å†countè´Ÿæ‹…æ¯”è¾ƒå¤§;è§£å†³æ–¹æ¡ˆæ˜¯ï¼šå¯åŠ¨ä¸¤ä¸ªjobï¼Œä¸€ä¸ªjobè´Ÿè´£å­æŸ¥è¯¢(å¯ä»¥æœ‰å¤šä¸ªreduce)ï¼Œå¦ä¸€ä¸ªjobè´Ÿè´£count(1)ä¼˜åŒ–å‰ï¼š1select count(distinct id) from tablename;ä¼˜åŒ–åï¼š12345select count(1) from (select distinct id from tablename) tmp;select count(1) from (select id from tablename group by id) tmp;set mapred.reduce.tasks=3; åˆç†ä½¿ç”¨union allä¼˜åŒ–å‰ï¼š1select a,sum(b),count(distinct c),count(distinct d) from test group by a;ä¼˜åŒ–åï¼š1234567select a,sum(b) as b,count(c) as c,count(d) as d fromï¼ˆselect a, 0 as b,c,null as d from test group by a,cunion allselect a,0 as b, null as c,d from test group by a,dunion allselect a, b,null as c ,null as d from test) tmp group by a;","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[]},{"title":"HDMIè¿æ¥Raspberry","slug":"2019â€“07-29-HDMIè¿æ¥Raspberry","date":"2019-07-29T22:26:00.000Z","updated":"2019-11-29T12:20:47.706Z","comments":true,"path":"2019/07/29/2019â€“07-29-HDMIè¿æ¥Raspberry/","link":"","permalink":"yihao.ml/2019/07/29/2019â€“07-29-HDMIè¿æ¥Raspberry/","excerpt":"","text":"é€šå¸¸æƒ…å†µä¸‹ï¼Œæ ‘è“æ´¾ä¼šè‡ªåŠ¨æ£€æµ‹æ˜¾ç¤ºå™¨çš„ç±»å‹å¹¶ä¿®æ”¹é…ç½®ã€‚ä½†æœ‰æ—¶ï¼Œè‡ªåŠ¨æ£€æµ‹çš„ç»“æœå¯èƒ½ä¸æ­£ç¡®ã€‚å¦‚æœä½ çš„æ ‘è“æ´¾è¿æ¥åˆ°ç”µè§†ä¸Šä½†æ²¡æœ‰ä»»ä½•æ˜¾ç¤ºçš„è¯ï¼Œä½ è¦è€ƒè™‘æ‰‹åŠ¨ä¿®æ”¹æ ‘è“æ´¾çš„æ˜¾ç¤ºé…ç½®äº†ä¸‹é¢æˆ‘ä»¬æ‰‹åŠ¨ä¿®æ”¹/boot/config.txtæ–‡ä»¶ã€‚è®°å¾—ä¿®æ”¹å‰å¤‡ä»½ä¸€ä¸ªï¼Œä»¥ä¸‹æ˜¯å‚æ•°æ–‡ä»¶ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162# For more options and information see# http://rpf.io/configtxt# Some settings may impact device functionality. See link above for details# uncomment if you get no picture on HDMI for a default \"safe\" mode#hdmi_safe=1# uncomment this if your display has a black border of unused pixels visible# and your display can output without overscandisable_overscan=1# uncomment the following to adjust overscan. Use positive numbers if console# goes off screen, and negative if there is too much border#overscan_left=16#overscan_right=16#overscan_top=16#overscan_bottom=16# uncomment to force a console size. By default it will be display's size minus# overscan.#framebuffer_width=1280#framebuffer_height=720# uncomment if hdmi display is not detected and composite is being outputhdmi_force_hotplug=1# uncomment to force a specific HDMI mode (this will force VGA)hdmi_group=1hdmi_mode=4# uncomment to force a HDMI mode rather than DVI. This can make audio work in# DMT (computer monitor) modeshdmi_drive=2# uncomment to increase signal to HDMI, if you have interference, blanking, or# no displayconfig_hdmi_boost=4# uncomment for composite PAL#sdtv_mode=2#uncomment to overclock the arm. 700 MHz is the default.#arm_freq=800# Uncomment some or all of these to enable the optional hardware interfaces#dtparam=i2c_arm=on#dtparam=i2s=on#dtparam=spi=on# Uncomment this to enable the lirc-rpi module#dtoverlay=lirc-rpi# Additional overlays and parameters are documented /boot/overlays/README# Enable audio (loads snd_bcm2835)dtparam=audio=onstart_x=1gpu_mem=128enable_uart=1#disable_camera_led=1hdmi_ignore_edid=0xa5000080çœ‹è¿™ä¸ªhttps://wenku.baidu.com/view/a8a1554e71fe910ef02df893.htmlï¼Œå­¦ä¸€ä¸‹å„ä¸ªå‚æ•°è¯¦è§£å­¦å®Œä¹‹åäº†è§£ä¸€ä¸‹æ€ä¹ˆè°ƒhdmi_modeè¿™ä¸ªå‚æ•°https://zhidao.baidu.com/question/519865882625562245.html","categories":[{"name":"ç‰©è”ç½‘","slug":"ç‰©è”ç½‘","permalink":"yihao.ml/categories/ç‰©è”ç½‘/"}],"tags":[]},{"title":"Google Colab","slug":"2019â€“07-23-Google Colab","date":"2019-07-23T23:34:00.000Z","updated":"2019-11-29T12:20:47.706Z","comments":true,"path":"2019/07/23/2019â€“07-23-Google Colab/","link":"","permalink":"yihao.ml/2019/07/23/2019â€“07-23-Google Colab/","excerpt":"","text":"è®­ç»ƒæ¨¡å‹å¤ªæ…¢æ€ä¹ˆåŠï¼Ÿè®­ç»ƒæ¨¡å‹çš„æ—¶é—´ï¼Œå¥½ç‚¹çš„ç”¨1å°æ—¶2å°æ—¶ï¼Œé‡åˆ°ç¨å¤æ‚çš„å¾—ç­‰1å¤©ç”šè‡³2å¤©ã€‚è®­ç»ƒåçš„æ¨¡å‹ï¼Œå¦‚æœä¸æ»¡è¶³è¦æ±‚ï¼Œè¿˜å¾—å†åå¤è°ƒæ•´ï¼Œå†æ¥ä¸€éâ€¦è¿™ç®€ç›´æ˜¯ä¸ªå™©æ¢¦æœ‰ä¹ˆæœ‰ã€‚å»æŸå®ã€JDä¸Šæœä¸€æœï¼Œä¸€å°ä¸Šä¸‡è°ä¹°çš„èµ·ã€‚å¯¹äºæˆ‘ä»¬è¿™äº›ç©·å¾—æ­ä¸å¼€é”…çš„è‹¦æ¯”å…šæ¥è¯´ï¼ŒGoogle Colabå¯ä»¥è¯´æ˜¯æˆ‘ä»¬çš„ç¦éŸ³ï¼ Google GolabColaboratory æ˜¯ä¸€æ¬¾ç ”ç©¶å·¥å…·ï¼Œç”¨äºè¿›è¡Œæœºå™¨å­¦ä¹ å’Œç ”ç©¶ã€‚å®ƒæ˜¯ä¸€ä¸ª Jupyter ç¬”è®°æœ¬ç¯å¢ƒï¼Œé‡ç‚¹æ˜¯å®ƒä¸éœ€è¦è¿›è¡Œä»»ä½•è®¾ç½®å°±å¯ä»¥è·‘ä»£ç ï¼Œè€Œä¸”æ€§èƒ½æ–¹é¢Googleæä¾›äº†Tesla K80 GPUï¼Œå¾ˆç»™åŠ›äº†ã€‚è€Œä¸”å®ƒè¿˜æ˜¯æ°¸ä¹…å…è´¹çš„ï¼Œä»¿ä½›å‘ç°äº†æ–°å¤§é™†ãƒ¾(â‰§Oâ‰¦)ã€ƒï¼Œè™½ç„¶ä¸çŸ¥é“æ€§èƒ½åˆ°åº•æ€ä¹ˆæ ·ï¼Œä½†æ˜¯è·Ÿæˆ‘è¿™ç”¨äº†5å¹´çš„çƒ‚æœ¬å­æ¯”ï¼Œå·²ç»ä¸çŸ¥é“å¥½åˆ°å“ªå»äº†ã€‚ å®˜ç½‘é¦–å…ˆè¿™æ˜¯Googleçš„ä¸œè¥¿ï¼Œæƒ³ç”¨è‚¯å®šå¾—FQï¼Œè¿™æ²¡å•¥è¯´çš„ï¼Œè®¿é—®ä¸‹é¢é“¾æ¥Google Colabã€‚Google Colab æ”¯æŒPython2å’ŒPython3è¯­è¨€;æƒ³ç”¨Rå’ŒScalaçš„å°ä¼™ä¼´å¾—å¿å¿äº†ï¼ŒGoogleæ–¹é¢æ­£åœ¨ç ”å‘å¯¹ä»–ä»¬çš„æ”¯æŒï¼Œåç»­ä¼šå¼€æ–¹ç›¸å…³åŠŸèƒ½ã€‚ è®°äº‹æœ¬å†™ä»£ç æˆ‘ä»¬éœ€è¦å…ˆå»ºä¸ªâ€œè®°äº‹æœ¬â€ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹æ³•å»ºç«‹:1.ç¬¬ä¸€æ¬¡è¿›å…¥ä¼šå¼¹å‡ºä¸€ä¸ªæ¡†ï¼Œç‚¹æ¡†ä¸‹é¢çš„ &quot;NEW PYTHON 3 NOTBOOK&quot;æ–°å»ºâ€œè®°äº‹æœ¬â€2.è¿™ä¸ªæ¡†å…³æ‰ä»¥åï¼Œå·¦ä¸Šè§’æ‰¾åˆ° File-&gt;New Python 3 Notbook ç”¨ä¾‹ç‚¹å‡»â€œCODEâ€åˆ›å»ºä¸€ä¸ªä»£ç ç‰‡æ®µï¼Œä½ å¯ä»¥åˆ›å»ºå¤šä¸ªä»£ç ç‰‡æ®µã€‚ä¸‹é¢ç”¨Python3 æµ‹è¯•ä¸€ä¸‹ç¯å¢ƒæ˜¯å¦æ­£å¸¸,è¯•ç€æ‰“å°tensorflowç‰ˆæœ¬å·ï¼š12import tensorflow as tfprint(tf.__version__)ç‚¹å‡»ç”»çš„çº¢è‰²æ¡†æ¡†è¿è¡Œä»£ç å‚è€ƒæ–‡æ¡£æ±‡æ€»:å®˜æ–¹é—®ç­”:https://research.google.com/colaboratory/faq.html#browsers","categories":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"yihao.ml/categories/æœºå™¨å­¦ä¹ /"}],"tags":[]},{"title":"å †æ’åºçš„åº”ç”¨-ä¼˜å…ˆé˜Ÿåˆ—","slug":"2019â€“07-18-å †æ’åºçš„åº”ç”¨-ä¼˜å…ˆé˜Ÿåˆ—","date":"2019-07-18T23:52:00.000Z","updated":"2019-11-29T12:20:47.706Z","comments":true,"path":"2019/07/18/2019â€“07-18-å †æ’åºçš„åº”ç”¨-ä¼˜å…ˆé˜Ÿåˆ—/","link":"","permalink":"yihao.ml/2019/07/18/2019â€“07-18-å †æ’åºçš„åº”ç”¨-ä¼˜å…ˆé˜Ÿåˆ—/","excerpt":"","text":"å †æ’åºåœ¨æ’åºå¤æ‚æ€§çš„ç ”ç©¶ä¸­æœ‰ç€é‡è¦çš„åœ°ä½ï¼Œå› ä¸ºå®ƒæ˜¯æˆ‘ä»¬æ‰€çŸ¥çš„å”¯ä¸€èƒ½å¤ŸåŒæ—¶æœ€ä¼˜çš„åˆ©ç”¨ç©ºé—´å’Œæ—¶é—´çš„æ–¹æ³•-åœ¨æœ€åçš„æƒ…å†µä¸‹å®ƒèƒ½ä¿è¯ä½¿ç”¨ï½2NlgNæ¬¡æ¯”è¾ƒå’Œæ’å®šçš„é¢å¤–ç©ºé—´ã€‚åœ¨å¼€å§‹äº†è§£ä¼˜å…ˆé˜Ÿåˆ—ä¹‹å‰æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹å †çš„ç‰¹æ€§ï¼šä¸€ä¸ªå¤§æ ¹å †æœ‰è¿™ä¹ˆä¸ªç‰¹æ€§ï¼Œå®ƒçš„çˆ¸çˆ¸æ€»æ˜¯æ¯”å®ƒçš„ä¿©å­©å­çš„å€¼å¤§;é™¤äº†è¿™ä¸ªæœ€åŸºæœ¬çš„ä»¥å¤–ï¼Œä½ è¿˜è¦çŸ¥é“ç¬¬kä¸ªå…ƒç´ çš„å·¦å­©å­æ˜¯2kï¼Œå³å­©å­æ˜¯2k+1;çŸ¥é“è¿™ä¸ªä»¥åï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼Œé«˜æ•ˆçš„åˆ é™¤æœ€å¤§å…ƒç´ å’Œæ’å…¥å…ƒç´ ã€‚å¦‚æœæ–°æ’å…¥ä¸€ä¸ªæ•°ï¼Œé‚£ä¹ˆæ ¹æ®å‰é¢çš„ç‰¹æ€§ï¼Œåªéœ€è¦ä¸æ–­å¾ªç¯çš„ç”¨è‡ªèº«å’Œè‡ªå·±çš„çˆ¸çˆ¸ï¼ˆk/2ï¼‰æ¯”è¾ƒå¤§å°ï¼Œæ ¹æ®æ¯”è¾ƒç»“æœåˆ¤æ–­æ˜¯å¦è¦äº¤æ¢ä½ç½®å³å¯;å¦‚æœè¦åˆ æ‰ä¸€ä¸ªæœ€å¤§çš„æ•°ï¼Œåªéœ€è¦å°†æ ¹ä¸æœ€åä¸€ä¸ªæ•°äº¤æ¢ä½ç½®(å› ä¸ºæ ¹æ˜¯å¤§æ ¹å †ä¸­æœ€å¤§çš„æ•°)ï¼Œå°†å…¶è„±ç¦»å †ç»“æ„ï¼Œç„¶åå°†æ ¹èŠ‚ç‚¹ä¸æ–­å’Œå®ƒçš„å­©å­ï¼ˆ2Kã€2K+1ï¼‰æ¯”è¾ƒå¤§å°ï¼Œä¸‹æ²‰åˆ°åˆé€‚ä½ç½®å³å¯ï¼›ä¸ºäº†æ»¡è¶³k,2k,2k+1çš„è¿™ç§å±‚çº§å…³ç³»ï¼Œåç»­å°†èˆå¼ƒæ•°ç»„ä¸‹æ ‡ä¸º0çš„ä½ç½®ï¼Œå› ä¸º2*0ä¼šå½±å“åˆ°è¿™ç§å±‚çº§å…³ç³»çš„åˆ¤æ–­ã€‚ä¸‹é¢æˆ‘ä»¬è¯´ä¸€ä¸‹ä¸‹æ²‰ï¼ˆsinkï¼‰å’Œä¸Šæµ®ï¼ˆswimï¼‰çš„å®ç°æ–¹æ³• ä¸Šæµ®å¦‚æœå †çš„æœ‰åºçŠ¶æ€å› ä¸ºæŸä¸ªèŠ‚ç‚¹æ¯”å®ƒçš„çˆ¶èŠ‚ç‚¹æ›´å¤§è€Œè¢«æ‰“ç ´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦é€šè¿‡äº¤æ¢å®ƒå’Œå®ƒçš„çˆ¶èŠ‚ç‚¹æ¥ä¿®å¤å †ã€‚12345678private void swim(int k)&#123; while(k &gt; 1 &amp;&amp; less(k/2,k))&#123; exch(k/2,k); k = k/2; &#125;&#125; ä¸‹æ²‰ä¸ä¸Šæµ®ç›¸åï¼Œå¦‚æœå †æœ‰åºè¢«æ‰“ç ´ï¼ŒkèŠ‚ç‚¹æƒ³è¦ä¸‹æ²‰åˆ°åˆé€‚çš„ä½ç½®ï¼Œä»£ç åº”è¯¥è¿™ä¹ˆå†™ã€‚12345678910private void sink(int k)&#123; while(2*k &lt;= N)&#123; int j = 2*k; if(j &lt; N &amp;&amp; less(j,j+1)) j++; if(!less(k,j)) break; exch(k,j); k = j; &#125;&#125; åŸºäºå †çš„ä¼˜å…ˆé˜Ÿåˆ—ä¸‹é¢æˆ‘ä»¬å®ç°ä¸€ä¸‹å †çš„ä¼˜å…ˆé˜Ÿåˆ—ã€‚ä¼˜å…ˆé˜Ÿåˆ—ç”±ä¸€ä¸ªåŸºäºå †çš„å®Œå…¨äºŒå‰æ ‘è¡¨ç¤ºï¼Œå­˜å‚¨äºæ•°ç»„pq[1â€¦N]ä¸­,pq[0]ä¸ç”¨ï¼Œä»£ç å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556public class MaxPQ&lt;Key extends Comparable&lt;Key&gt;&gt;&#123; private Key[] pq; private int N = 0; public MaxPQ(int maxN)&#123; pq = (Key[]) new Comparable[maxN + 1]; &#125; public boolean isEmpty()&#123; return N == 0; &#125; public int size ()&#123; return N; &#125; public void insert(Key v)&#123; pq[++N] = v; swim(N); &#125; public Key delMax()&#123; Key max = pq[1]; exch(1,N--); pq[N+1] = null; sink(1); return max; &#125; private boolean less(int i,int j)&#123; return pq[i] &lt; pq[j]; &#125; private void exch(i,j)&#123; Key t = pq[i]; pq[i] = pq[j]; pq[j] = t; &#125; private void swim(int k)&#123; ... &#125; private void sink(int k)&#123; ... &#125;&#125;åœ¨insert()ä¸­ï¼Œå°†NåŠ 1å¹¶æŠŠæ–°å…ƒç´ æ·»åŠ åˆ°æ•°ç»„æœ€åï¼Œç„¶åç”¨swim()æ¢å¤ç§©åºã€‚åœ¨delMax()ä¸­ã€‚ä»pq[1]ä¸­å¾—åˆ°éœ€è¦è¿”å›çš„å…ƒç´ ï¼Œç„¶åå°†pq[N]ç§»åŠ¨åˆ°pq[1],å°†Nå‡ä¸€å¹¶ç”¨sink()æ¢å¤å¯¹çš„ç§©åºã€‚å°†pq[N+1]è®¾ä¸ºnullï¼Œä»¥ä¾¿GCå›æ”¶å…¶æ‰€å ç©ºé—´ã€‚","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"Hiveè¿ç§»è€æ•°æ®-åŠ¨æ€åˆ†åŒº","slug":"2019â€“07-17-è¿ç§»è€æ•°æ®åŠ¨æ€åˆ†åŒº","date":"2019-07-18T11:18:55.000Z","updated":"2019-11-29T12:20:47.705Z","comments":true,"path":"2019/07/18/2019â€“07-17-è¿ç§»è€æ•°æ®åŠ¨æ€åˆ†åŒº/","link":"","permalink":"yihao.ml/2019/07/18/2019â€“07-17-è¿ç§»è€æ•°æ®åŠ¨æ€åˆ†åŒº/","excerpt":"","text":"ç°åœ¨æœ‰ä¸ªhiveè¡¨ dw_revisit_user_d ï¼Œåˆ›å»ºçš„æ—¶å€™æ²¡æœ‰åŠ partitioned by,ç°åœ¨æƒ³æ‹“å±•è¡¨ä¸­çš„datestrå½“åˆ†åŒºåˆ—ã€‚è¦æ€ä¹ˆä¿è¯åŸæ¥æ•°æ®ä¸ä¸¢ï¼Œå¹¶ä¸”è®©åŸæ¥çš„æ•°æ®æŒ‰datestråˆ†åŒºï¼Œä»¥åçš„æ•°æ®ä¹ŸæŒ‰datestråˆ†åŒºï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨selectâ€¦insert + åŠ¨æ€åˆ†åŒºè§£å†³é—®é¢˜ æ­¥éª¤123456789101112set hive.exec.dynamic.partition.mode=nonstrict;create table t_1(datestr string,u_id string,acc_cnt bigint);insert into table t_1 values('2019-07-17','1',22);insert into table t_1 values('2019-07-17','2',24);insert into table t_1 values('2019-07-16','3',255);insert overwrite table t_2 partition (datestr)select u_id,acc_cnt,datestr from t_1 where datestr = '2019-07-17';insert overwrite table t_2 partition (datestr)select u_id,acc_cnt,datestr from t_1 where datestr = '2019-07-16';åŠ ä¸Šä¸‹é¢è¿™å¥è¯ï¼Œä¸å¸¦whereç›´æ¥è‡ªåŠ¨åŒ¹é…datestr123set hive.exec.dynamici.partition=true;insert overwrite table t_2 partition (datestr)select u_id,acc_cnt,datestr from t_1;ä¹‹ååˆ æ‰t_1 ä¿®æ”¹t_2ä¸ºt_1å°±è¡Œäº†","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"hive","slug":"hive","permalink":"yihao.ml/tags/hive/"}]},{"title":"cephé›†ç¾¤æ­å»º","slug":"2019-07-17-ceph","date":"2019-07-17T17:43:17.000Z","updated":"2019-11-29T12:20:47.704Z","comments":true,"path":"2019/07/17/2019-07-17-ceph/","link":"","permalink":"yihao.ml/2019/07/17/2019-07-17-ceph/","excerpt":"","text":"ä½œè€…æ—æ–‡æ°ï¼›ç»“æ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤º 1ã€Selinuxã€é˜²ç«å¢™å’Œhostnameæ–‡ä»¶å°†/etc/selinux/configæ–‡ä»¶ä¸‹SELINUX=disabledå…³é—­é˜²ç«å¢™æˆ–è€…å¼€é€š6789å’Œ6800ï¼š7300çš„ç«¯å£1vim /etc/hostname 2ã€é…ç½®ç”¨æˆ·123456useradd -m bdipcephpasswd bdipceph#è®¾ç½®suæƒé™echo \"bdipceph ALL = (root) NOPASSWD:ALL\" | tee /etc/sudoers.d/bdipcephchmod 0440 /etc/sudoers.d/bdipceph 3ã€å°†å„èŠ‚ç‚¹å†™å…¥hosts123echo 192.168.140.130 ceph130 &gt;&gt; /etc/hostsecho 192.168.140.133 ceph133 &gt;&gt; /etc/hostsecho 192.168.140.134 ceph134 &gt;&gt; /etc/hosts 4ã€é…ç½®å…å¯†123456su bdipcephssh-keygen -t rsassh-copy-id ceph130ssh-copy-id ceph133ssh-copy-id ceph134 5ã€å®‰è£…ntpæœåŠ¡å’Œé…ç½®yumä»“åº“1vim /etc/yum.repo.d/CentOS-ceph.repoä¸‹é¢åšå‚è€ƒ1234567891011121314151617181920212223[Ceph]name=Ceph packages for $basearchbaseurl=https://mirrors.aliyun.com/ceph/rpm-jewel/el7/$basearchenabled=1gpgcheck=1type=rpm-mdgpgkey=https://mirrors.aliyun.com/ceph/keys/release.ascpriority=1[Ceph-noarch]name=Ceph noarch packagesbaseurl=https://mirrors.aliyun.com/ceph/rpm-jewel/el7/noarchenabled=1gpgcheck=1type=rpm-mdgpgkey=https://mirrors.aliyun.com/ceph/keys/release.ascpriority=1[ceph-source]name=Ceph source packagesbaseurl=https://mirrors.aliyun.com/ceph/rpm-jewel/el7/SRPMSenabled=1gpgcheck=1type=rpm-mdgpgkey=https://mirrors.aliyun.com/ceph/keys/release.asc 6ã€å®‰è£…å­˜å‚¨é›†ç¾¤12345678910111213yum install ceph-deploysu cephdmkdir ~/my-clusterceph-deploy new ceph133osd pool default size = 2ceph-deploy install ceph130 ceph133 ceph134ceph-deploy mon create-initialceph-deploy osd prepare ceph133:/var/local/osd0 ceph134:/var/local/osd1ceph-deploy osd activate ceph133:/var/local/osd0 ceph134:/var/local/osd1ceph-deploy admin ceph130 ceph133 ceph134chmod +r /etc/ceph/ceph.client.admin.keyringceph health 7ã€åˆ é™¤osd123456789ceph osd out 1systemctl stop ceph-osd@1ceph osd crush remove osd.1ceph auth del osd.1ceph osd rm osd.1#åˆ é™¤æ—§æ–‡ä»¶å¤¹rm -rf /var/local/osd1#è°ƒæ•´æƒé‡ceph osd crush reweight osd.1 0 8ã€é…ç½®æ–‡ä»¶ä¿®æ”¹å‘é€1ceph-deploy --overwrite-conf config push bdipceph104 bdipceph106 bdipceph108 9ã€é…ç½®æ–‡ä»¶å†…å®¹123456789#è®¾ç½®æ—¥å¿—æ–‡ä»¶å¤§å°osd journal size = 1024#è®¾ç½®èŠ‚ç‚¹æ•°é‡osd pool default size = 3#è®¾ç½®å‰¯æœ¬æ•°é‡osd pool default min size = 2#è®¾ç½®ext4èƒ½å¤Ÿä½¿ç”¨osd max object name len = 256osd max object namespace len = 64 10ã€åˆ›å»ºå—è®¾å¤‡1234567891011121314151617181920212223#åˆ›å»ºæ˜ åƒfooå¤§å°4Grbd create --size 4096 foo#æŸ¥è¯¢æ˜ åƒrbd ls#æŸ¥è¯¢å•ä¸ªæ˜ åƒä¿¡æ¯rbd info foo#æ‰©å¤§æ˜ åƒå¤§å°rbd resize --size 8192 fooresize2fs /dev/rbd0#å‡å°æ˜ åƒå¤§å°(ä¼šæŸåæ•°æ®)rbd resize --size 4096 foo --allow-shrink#åˆ é™¤æ˜ åƒrbd rm foo#linuxç¯å¢ƒéœ€è¦æ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤rbd feature disable foo exclusive-lock object-map fast-diff deep-flatten#æ˜ å°„å—è®¾å¤‡rbd map foo --name client.admin #æŸ¥çœ‹å·²æ˜ å°„å—è®¾å¤‡rbd showmapped#å–æ¶ˆå—è®¾å¤‡æ˜ å°„rbd unmap /dev/rbd0mkfs.ext4 /dev/rbd0 11ã€åˆ›å»ºå—è®¾å¤‡å¿«ç…§12345678910#åˆ›å»ºå¿«ç…§rbd snap create rbd/foo@snapfoo#ç½—åˆ—å¿«ç…§rbd snap ls rbd/foo#å›æ»šå¿«ç…§rbd snap rollback rbd/foo@snapfoo#åˆ é™¤å¿«ç…§rbd snap rm rbd/foo@snapfoo#æ¸…é™¤å¿«ç…§rbd snap purge rbd/foo","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"ceph","slug":"ceph","permalink":"yihao.ml/tags/ceph/"}],"author":"å¼ å¸…"},{"title":"Export requires a --table or a --call argument","slug":"2019â€“07-16-Export-requires-a--table-or-a--call-argument","date":"2019-07-16T11:03:59.000Z","updated":"2019-11-29T12:20:47.704Z","comments":true,"path":"2019/07/16/2019â€“07-16-Export-requires-a--table-or-a--call-argument/","link":"","permalink":"yihao.ml/2019/07/16/2019â€“07-16-Export-requires-a--table-or-a--call-argument/","excerpt":"","text":"å‚è€ƒå®˜æ–¹æ–‡æ¡£10. sqoop-exportä½¿ç”¨Sqoopå¯¼å…¥æ•°æ®åˆ°RDSMSæ•°æ®åº“ï¼Œç»“æœæŠ¥é”™ï¼›é”™è¯¯ä¹Ÿæ˜¯è®©äººæ‘¸ä¸ç€å¤´è„‘ï¼Œå‘½ä»¤ä¸­æ˜¯æœ‰è¿™äº›å‚æ•°çš„ã€‚ è§£å†³åŠæ³•åšä¸‹é¢ä¿®æ”¹ï¼Œåœ¨å€¼çš„å·¦å³åŠ ä¸ŠåŒå¼•å·å³å¯ã€‚1--connect \"jdbc:sqlserver://ip:port;database=database\" \\","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"åˆ†å¸ƒå¼å¹‚ç­‰æ€§è®¾è®¡","slug":"2019â€“07-15-åˆ†å¸ƒå¼å¹‚ç­‰æ€§è®¾è®¡","date":"2019-07-15T20:57:00.000Z","updated":"2019-11-29T12:20:47.704Z","comments":true,"path":"2019/07/15/2019â€“07-15-åˆ†å¸ƒå¼å¹‚ç­‰æ€§è®¾è®¡/","link":"","permalink":"yihao.ml/2019/07/15/2019â€“07-15-åˆ†å¸ƒå¼å¹‚ç­‰æ€§è®¾è®¡/","excerpt":"","text":"å¹‚ç­‰æ€§å¹‚ç­‰æ€§æŒ‡çš„æ˜¯ï¼Œè¯·æ±‚ä¸€æ¬¡æˆ–è€…æ˜¯å¤šæ¬¡èµ„æºåº”è¯¥å…·æœ‰ç›¸åŒçš„å‰¯ä½œç”¨ã€‚ é‡è¦æ€§åœ¨ä¸€äº›ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œå¹‚ç­‰æ€§æ˜¾å¾—å¾ˆé‡è¦ï¼›æ¯”å¦‚é‡‘èç³»ç»Ÿã€ç”µå•†ç³»ç»Ÿï¼Œè¿™äº›éƒ½æ˜¯å¾ˆæ•æ„Ÿçš„ç³»ç»Ÿï¼Œä½œä¸ºè½¯ä»¶å¼€å‘è€…ï¼Œæˆ‘ä»¬æœ‰å¿…è¦äº†è§£ä¸€ä¸‹å®ƒã€‚è®¢å•åˆ›å»ºæ¥å£ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨è¶…æ—¶äº†ï¼Œå¦‚æœå†è°ƒç”¨ä¸€æ¬¡ä¼šä¸ä¼šå†åˆ›å»ºä¸€ä¸ªè®¢å•ï¼Ÿè´­ä¹°å•†å“æ—¶ï¼Œå‡åº“å­˜æ¥å£è¶…æ—¶äº†ï¼Œå†è°ƒä¸€æ¬¡ä¼šä¸ä¼šæ‰£å‡2ä¸ªåº“å­˜ï¼Ÿå½“ä¸€ç¬”è®¢å•å¼€å§‹æ”¯ä»˜ï¼Œæ”¯ä»˜è¯·æ±‚å‘å‡ºåï¼ŒæœåŠ¡ç«¯å‘ç”Ÿäº†æ‰£é’±æ“ä½œï¼Œæ¥å£å“åº”è¶…æ—¶äº†ï¼Œè°ƒç”¨æ–¹å†é‡è¯•ä¸€æ¬¡ï¼Œä¼šä¸ä¼šå¤šæ‰£ä¸€ç¬”é’±ï¼Ÿä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹æ€ä¹ˆè§£å†³ä¸Šé¢æ‰€è¿°çš„é—®é¢˜ã€‚ è®¾è®¡é€šå¸¸æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ–¹æ³•æ¥ä¿è¯å¹‚ç­‰æ€§ã€‚ä¹Ÿå°±æ˜¯ä¸ç®¡è°ƒç”¨æ¥å£å¤šå°‘æ¬¡ï¼Œéƒ½è¦äº§ç”Ÿç›¸åŒçš„å‰¯ä½œç”¨ï¼šä¸‹æ¸¸åšä¸€ä¸ªæŸ¥è¯¢æ¥å£ï¼Œä¸Šæ¸¸ç³»ç»Ÿå‘ç°è¯·æ±‚è¶…æ—¶åï¼Œè°ƒç”¨æŸ¥è¯¢æ¥å£ã€‚å‘ç°æˆåŠŸäº†ï¼Œé€»è¾‘é‡Œé¢ä»€ä¹ˆéƒ½ä¸ç”¨åšï¼›å¦‚æœå‘ç°å¤±è´¥äº†ï¼Œèµ°å¤±è´¥æµç¨‹è¿›è¡Œåç»­å¤„ç†ä¿è¯æœ€ç»ˆç»“æœæ­£ç¡®ã€‚æŠŠè¿™ä¸ªæŸ¥è¯¢æ“ä½œäº¤ç»™ä¸‹æ¸¸ç³»ç»Ÿï¼Œä¸Šæ¸¸ç³»ç»Ÿåªè´Ÿè´£é‡è¯•ï¼Œä¸‹æ¸¸ç³»ç»Ÿè¦åœ¨ä»£ç ä¸Šä¿è¯ä¸€æ¬¡æˆ–å¤šæ¬¡è¯·æ±‚ç»“æœæ˜¯ä¸€æ ·çš„.ç¬¬ä¸€ç§æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå¾ˆå¥½å®ç°ï¼›ç¬¬äºŒç§åˆ™éœ€è¦åˆ©ç”¨ä¸€ä¸ªå…¨å±€IDæ¥è¾…åŠ©å®Œæˆã€‚ç”±äºæˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ï¼Œè¦åšåˆ°å…¨å±€å”¯ä¸€è²Œæœ‰ç‚¹å°éš¾åº¦ï¼Œåˆ†å¸ƒå¼ä¸­ï¼Œå­ç³»ç»Ÿå¾ˆå¤šã€‚è¯¥ç”±è°æ¥ç»´æŠ¤è¿™ä¸ªå…¨å±€IDï¼Ÿè¿™é‡Œä»‹ç»ä¸€ä¸‹Twitter çš„å¼€æºé¡¹ç›®Snowflakeã€‚å®ƒæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼IDçš„ç”Ÿæˆç®—æ³•ï¼Œå¯ä»¥å¸®æˆ‘ä»¬å®Œæˆè¿™ä¸ªå·¥ä½œï¼Œä½ å¯ä»¥é€šè¿‡é˜…è¯»ä¸‹é¢è¿™ä¸ªæ–‡ç« æ¥äº¤æ¥å®ƒhttps://www.cnblogs.com/haoxinyue/p/5208136.html","categories":[{"name":"åˆ†å¸ƒå¼","slug":"åˆ†å¸ƒå¼","permalink":"yihao.ml/categories/åˆ†å¸ƒå¼/"}],"tags":[]},{"title":"å¸Œå°”ã€å½’å¹¶ã€å †ã€å¿«é€Ÿæ’åº","slug":"2019â€“07-03-å¸Œå°”ã€å½’å¹¶ã€å †ã€å¿«é€Ÿæ’åº","date":"2019-07-08T19:34:38.000Z","updated":"2019-11-29T12:20:47.702Z","comments":true,"path":"2019/07/08/2019â€“07-03-å¸Œå°”ã€å½’å¹¶ã€å †ã€å¿«é€Ÿæ’åº/","link":"","permalink":"yihao.ml/2019/07/08/2019â€“07-03-å¸Œå°”ã€å½’å¹¶ã€å †ã€å¿«é€Ÿæ’åº/","excerpt":"","text":"ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆnlognï¼‰çš„æ—¶é—´å¤æ‚åº¦:å¸Œå°”æ’åºã€å½’å¹¶æ’åºã€å †æ’åºã€å¿«é€Ÿæ’åº å †æ’åºå°†0ï½ï¼ˆn-1ï¼‰çš„æ— åºåˆ—è¡¨ï¼Œæ˜ å°„ä¸ºå¤§æ ¹å †ï¼Œæ ¹æ®å¤§æ ¹å †çš„ç‰¹æ€§ï¼Œå †é¡¶ä¸ºæœ€å¤§å€¼;å°†å †é¡¶ä¸å †çš„æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ï¼Œå¹¶å°†å…¶è„±ç¦»å †ç»“æ„ï¼Œæ”¾åœ¨æ•°ç»„n-1ä½ç½®ä¸Š;é‡æ–°è°ƒæ•´å¤§æ ¹å †ï¼Œé‡å¤æ­¥éª¤2ï¼Œå¾—åˆ°ç¬¬n-2çš„æ•°ç›´åˆ°å †å…ƒç´ ä¸ªæ•°ä¸º1ï¼Œå³æ•´ä¸ªå †æ’åºå®Œæˆã€‚å›¾è§£æµç¨‹è®¿é—®ä¸‹é¢é“¾æ¥ä¸­çš„ Data Structure Visualizations å¸Œå°”æ’åºå¸Œå°”æ’åºæ˜¯æ’å…¥æ’åºçš„è¿›åŒ–ç‰ˆï¼Œæ’å…¥æ’åºçš„æ¯æ¬¡è¿ç§»æ­¥é•¿ä¸º1,è€Œå¸Œå°”æ’åºåˆ™é€šè¿‡åŠ¨æ€è°ƒæ•´æ­¥é•¿ï¼Œè¿›è€Œæé«˜æ’åºæ•ˆç‡ã€‚å‡å¦‚é€‰å®šæ­¥é•¿ä¸º3ä¸‹é¢è¯´ä¸€ä¸‹æ’åºè¿‡ç¨‹åœ¨0ï½ï¼ˆN-1ï¼‰çš„æ— åºåºåˆ—ä¸­ï¼Œæ•°ç»„ä¸­ä½ç½®0ã€1ã€2ä¸‰ä¸ªæ•°å°†è¢«ç›´æ¥è·³è¿‡ã€‚å–3ä½ç½®çš„æ•°ï¼ˆaï¼‰å’Œ0ä½ç½®ä¸Šçš„æ•°ï¼ˆbï¼‰æ¯”è¾ƒã€‚å¦‚æœb&gt;a,åˆ™ç»“æŸæ¯”è¾ƒ;å¦‚æœb&lt;a,åˆ™äº¤æ¢bå’Œaçš„ä½ç½®ï¼Œç»§ç»­ä½¿ç”¨bå’Œ-3ä½ç½®ä¸Šçš„æ•°æ¯”è¾ƒï¼Œå‘ç°-3æ•°ç»„è¶Šç•Œï¼Œç»“æŸæ¯”è¾ƒ;å–ä½ç½®4ä¸Šçš„æ•°å’Œä½ç½®1ä¸Šçš„æ•°æ¯”è¾ƒï¼Œé‡å¤ä¸Šé¢è¿‡ç¨‹;ä¸€ç›´åˆ°æœ€åä¸€ä¸ªä½ç½®nä¸n-3æ¯”è¾ƒåç»“æŸæ­¥é•¿ä¸º3çš„æ’åºè¿‡ç¨‹;è®©æ­¥é•¿å‡1ç»§ç»­å®Œæˆä¸Šé¢1ã€2ã€3çš„æ­¥éª¤ï¼ŒçŸ¥é“æ­¥é•¿=0,ç»“æŸæ•´ä¸ªå¸Œå°”æ’åºè¿‡ç¨‹;å›¾è§£æµç¨‹è®¿é—®ä¸‹é¢é“¾æ¥ä¸­çš„Shell Sort Data Structure Visualizations12345678910111213141516171819202122public void sort(Comparable[] a) &#123; // å¸Œå°”æ’åºå…¶å®æ˜¯æ’å…¥æ’åºçš„ä¸€ç§ä¼˜åŒ– int len = a.length; int w = 1; // è‡ªå®šä¹‰wçš„è§„åˆ™ while(w &lt; len / 3) &#123; w = 3*w + 1; &#125; //å¼€å§‹è¿›è¡Œæ’åº while(w &gt;= 1)&#123; for(int i = w ; i &lt; len ; i ++)&#123; // å°†a[i]æ’å…¥åˆ°a[i-w]ã€a[i-2*w]ã€a[i-3*w].... for (int j = i ; j &gt;= w &amp;&amp; less(a[j],a[j-w]) ; j -=w )&#123; exch(a,j,j-w); &#125; &#125; w = w / 3; &#125;&#125; å½’å¹¶æ’åºåœ¨0ï½ï¼ˆn-1ï¼‰çš„æ— åºåˆ—è¡¨ä¸­ï¼Œå°†å¤§å°ä¸º1çš„æœ‰åºåŒºé—´ï¼Œåˆå¹¶ä¸ºå¤§å°ä¸º2çš„æœ‰åºåŒºé—´;å°†å¤§å°ä¸º2çš„æœ‰åºåŒºé—´åˆå¹¶ä¸ºå¤§å°ä¸º4çš„æœ‰åºåŒºé—´;ç›´åˆ°æœ‰åºåŒºé—´å¤§å°å®¹çº³æ‰€æœ‰çš„æ•°ï¼Œå½’å¹¶æ’åºå®Œæˆ;å›¾è§£æµç¨‹è®¿é—®ä¸‹é¢é“¾æ¥ä¸­çš„Merge Sort Data Structure Visualizations12345678910111213141516171819202122232425262728293031323334353637383940414243444546public static Comparable[] aux;public void sort(Comparable[] a) &#123; aux = new Comparable[a.length]; sort(a,0,a.length-1);&#125;// è‡ªä¸Šè€Œä¸‹çš„å½’å¹¶æ’åºpublic void sort(Comparable[] a,int lo,int hi) &#123; if(hi &lt;= lo) &#123; return; &#125; // a[lo...mid] å’Œ a[mid+1....hi] int mid = lo + (hi - lo)/2; sort(a,lo,mid); sort(a,mid+1,hi); merge(a,lo,mid,hi);&#125;// åˆå¹¶ a[lo...mid] å’Œ a[mid+1....hi]public void merge(Comparable[] a, int lo, int mid, int hi) &#123; // åˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆ int i = lo; int j = mid + 1; // å°†aå¤åˆ¶åˆ°è¾…åŠ©æ•°ç»„aux for (int k = lo; k &lt;= hi; k++) &#123; aux[k] = a[k]; &#125; // å¼€å§‹æ‹¿ä¸¤ä¸ªæŒ‡é’ˆå¯¹åº”çš„æ•°è¿›è¡Œæ¯”è¾ƒ for (int k = lo; k &lt;= hi; k++) &#123; // jå¯¹åº”çš„æ•° æ¯”iå°ï¼Œå°†æ¯”è¾ƒå°çš„æ”¾åœ¨ç¬¬kä½ç½® if(j &gt; hi)&#123; a[k] = aux[i++]; &#125;else if(i &gt; mid)&#123;// å¦‚æœå·¦è¾¹ç”¨å®Œäº†ï¼Œç›´æ¥å°†å³åºåˆ—ä¸­çš„æ•°æ”¾åœ¨kä½ç½® a[k] = aux[j++]; &#125;else if(less(aux[j],aux[i]))&#123; // å¦‚æœå³è¾¹ç”¨å®Œäº†ï¼Œç›´æ¥å°†å·¦åºåˆ—ä¸­çš„æ•°æ”¾åœ¨kä½ç½® a[k] = aux[j++]; &#125;else&#123; a[k] = aux[i++]; &#125; &#125;&#125; å¿«é€Ÿæ’åºåˆ©ç”¨åˆ†æ²»çš„æ€æƒ³ï¼Œè¦å¯¹å¤§å°ä¸ºNçš„æ— åºåºåˆ—æ’åºï¼Œå°†å…¶åˆ†ä¸ºa[lo]-a[j-1],a[j],a[j+1]-a[hi]ä¸‰éƒ¨åˆ†ï¼Œä¿è¯a[lo]-a[j-1]ä¸­çš„æ•°æ°¸è¿œå°äºç­‰äºa[j];a[j+1]-a[hi]ä¸­çš„æ•°æ°¸è¿œå¤§äºa[j];åœ¨åˆ†åˆ«é€’å½’çš„å¯¹a[lo]-a[j-1]å’Œa[j+1]-a[hi]é‡å¤ä¸Šé¢çš„æ­¥éª¤ã€‚ä¸‹é¢æˆ‘ä»¬è¯´ä¸€ä¸‹ä»€ä¹ˆå«åˆ’åˆ†è¿‡ç¨‹ï¼Œåˆ’åˆ†è¿‡ç¨‹å°±æ˜¯æ€ä¹ˆå°†å°äºç­‰äºa[j]çš„æ•°æ”¾åˆ°a[j]çš„å·¦è¾¹ï¼Œå¤§äºa[j]çš„æ•°æ”¾åœ¨äº†a[j]çš„å³è¾¹ï¼šé€‰æ‹©ä¸€ä¸ªæ•°a[lo]ï¼Œåˆå§‹åŒ–å·¦æŒ‡é’ˆ i = lo ï¼Œå³æŒ‡é’ˆ j = hiï¼›iæŒ‡é’ˆå¾€å³ç§»ï¼Œæ‰¾åˆ°å¤§äºç­‰äºa[lo]çš„æ•°(a);jæŒ‡é’ˆå¾€å·¦ç§»ï¼Œæ‰¾åˆ°å°äºa[lo]çš„æ•°bã€‚äº¤æ¢aå’Œbçš„ä½ç½®,ç„¶åiç»§ç»­å¾€å³ç§»ï¼Œjç»§ç»­å¾€å·¦ç§»ï¼Œç›´åˆ°ä¸¤è€…äº¤æ±‡ã€‚å°†a[lo]ä¸a[j]äº¤æ¢ä½ç½®å›¾è§£æµç¨‹è®¿é—®ä¸‹é¢é“¾æ¥ä¸­çš„Quick Sort Data Structure Visualizations123456789101112131415161718192021222324252627282930313233343536public void sort(Comparable[] a) &#123; sort(a,0,a.length-1);&#125;// å¿«é€Ÿæ’åºpublic void sort(Comparable[] a,int lo ,int hi) &#123; if(hi &lt;= lo) &#123; return; &#125; // æ‰¾åˆ°j,åˆ†åˆ«å¯¹a[lo..j-1]å’Œa[j+1...hi]è¿›è¡Œé€’å½’å¿«é€Ÿçš„æ’åº int j = partition(a,lo,hi); // sortå·¦åºåˆ—\\ sortå³åºåˆ— sort(a,lo,j-1); sort(a,j+1,hi);&#125;// å¯¹a[lo...hi] è¿›è¡Œåˆ’åˆ†æ’åºpublic int partition(Comparable[] a, int lo, int hi) &#123; // å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ int i = lo; int j = hi + 1; Comparable v = a[lo]; while(true)&#123; // ä»å·¦è¾¹å¾€å³è¾¹ä¸€ç›´æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”vå¤§çš„æ•° while(less(a[++i],v))if(i == hi)break; // ä»å³è¾¹å¾€å·¦è¾¹ä¸€ç›´æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”vå°çš„æ•° while(less(v,a[--j]) )if(j == lo)break; if(i &gt;= j) break; exch(a,i,j); &#125; // æ¯”è¾ƒå®Œæˆåå°†jå’Œloä½ç½®ä¸Šçš„æ•°äº’æ¢ exch(a,lo,j); return j;&#125;","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"æ’åºç©ºé—´å¤æ‚åº¦ä¸ç¨³å®šæ€§","slug":"2019â€“07-08-æ’åºç©ºé—´å¤æ‚åº¦ä¸ç¨³å®šæ€§","date":"2019-07-08T19:34:38.000Z","updated":"2019-11-29T12:20:47.703Z","comments":true,"path":"2019/07/08/2019â€“07-08-æ’åºç©ºé—´å¤æ‚åº¦ä¸ç¨³å®šæ€§/","link":"","permalink":"yihao.ml/2019/07/08/2019â€“07-08-æ’åºç©ºé—´å¤æ‚åº¦ä¸ç¨³å®šæ€§/","excerpt":"","text":"8ç§ç»å…¸æ’åºç®—æ³•å·²ç»æ•´ç†å®Œæˆï¼Œä¸‹é¢è¯´ä¸€ä¸‹ä»–ä»¬çš„ç©ºé—´å¤æ‚åº¦ Oï¼ˆ1ï¼‰æ’å…¥æ’åºã€å†’æ³¡æ’åºã€é€‰æ‹©æ’åºã€å¸Œå°”æ’åºã€å †æ’åº Oï¼ˆnï¼‰ï½Oï¼ˆlognï¼‰å¿«é€Ÿæ’åº Oï¼ˆNï¼‰å½’å¹¶æ’åºè¿™é‡Œæœ‰ä¸€äº›ç½‘ä¸Šå’Œä¹¦ä¸Šè¯´å¯ä»¥å°†å½’å¹¶æ’åºçš„ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–åˆ°Oï¼ˆ1ï¼‰ï¼Œè¿™è¾¹é€šè¿‡æ‰‹æ‘‡ç®—æ³•ç¡®å®å¯ä»¥ä½¿å¾—ç©ºé—´å¤æ‚åº¦è¾¾åˆ°Oï¼ˆ1ï¼‰ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦ä¼šä¸Šå‡ã€‚ Oï¼ˆMï¼‰è®¡æ•°æ’åºã€åŸºæ•°æ’åºè¿™ä¸ªMä»£è¡¨çš„æ˜¯æ¡¶çš„æ•°é‡ ç¨³å®šæ€§æ‰€è°“ä¸ç¨³å®šæ€§ï¼ŒæŒ‡çš„æ˜¯ç›¸åŒå…ƒç´ ç»è¿‡æ’åºåï¼Œæ”¹å˜äº†åŸæ•°ç»„ä¸­æ•°çš„ä½ç½®ï¼Œå³ä¸ºä¸ç¨³å®šçš„æ’åºç®—æ³•ã€‚8ç§æ’åºç®—æ³•ä¸­ï¼Œæœ‰é€‰æ‹©æ’åºã€å¿«é€Ÿæ’åºã€å¸Œå°”æ’åºå’Œå †æ’åºä»–ä»¬æ˜¯ä¸ç¨³å®šçš„æ’åºç®—æ³•é‚£ä¹ˆæˆ‘ä»¬ä¸‹é¢è¯´ä¸€ä¸‹ï¼Œå¯¹äºåºåˆ—ï¼ˆ5,5,5,1ï¼‰ï¼Œä¸ºä»€ä¹ˆä»–ä»¬ä¼šæ˜¯ä¸ç¨³å®šçš„æ’åºç®—æ³• é€‰æ‹©æ’åºé€‰æ‹©æ’åºï¼Œä¼šå°†1ä¸ç¬¬ä¸€ä¸ª5è¿›è¡Œäº¤æ¢ä½ç½®ï¼Œå¯¼è‡´ç›¸åŒå…ƒç´ æ’åºåä½ç½®æ”¹å˜ã€‚ å¿«é€Ÿæ’åºå¯¹äºå¿«æ’è€Œè¨€ï¼Œå¼€å§‹ä»»æ„é€‰æ‹©ä¸€ä¸ªæ•°ï¼Œå‡å¦‚é€‰åˆ°äº†ç¬¬äºŒä¸ª5,é‚£ä¹ˆå°äºç­‰äºå®ƒçš„éƒ½å°†ä¼šè¢«æ”¾åˆ°ç¬¬äºŒä¸ª5çš„å·¦è¾¹ï¼Œå¯¼è‡´ç›¸åŒå…ƒç´ æ’åºåä½ç½®æ”¹å˜ã€‚ å¸Œå°”æ’åºå‡å¦‚å¸Œå°”æ’åºçš„æ­¥é•¿é€‰ä¸º2,åœ¨1å’Œç¬¬äºŒä¸ª5æ¯”è¾ƒä»¥åï¼Œä¼šå’Œå®ƒäº¤æ¢ä½ç½®ï¼Œå¯¼è‡´ç›¸åŒå…ƒç´ æ’åºåä½ç½®æ”¹å˜ã€‚ å †æ’åºå°†ä¸Šé¢å…ƒç´ æ˜ å°„ä¸ºå¤§æ ¹å †ï¼Œå †é¡¶å…ƒç´ ä¼šå’Œæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ï¼Œå¯¼è‡´ç›¸åŒå…ƒç´ æ’åºåä½ç½®æ”¹å˜ã€‚ å°ç»“åœ¨è§£å†³å·¥ç¨‹é—®é¢˜æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨å¤šä¸ªæ’åºç®—æ³•ç›¸ç»“åˆçš„å¥—è·¯ï¼Œæ¥è§£å†³é—®é¢˜ã€‚é¢å¯¹é—®é¢˜æ—¶è¦æ´»å­¦æ´»ç”¨ï¼Œæ¯”å¦‚ä½¿ç”¨è®¡æ•°æ’åºè§£å†³æŒ‰èº«é«˜æ’åºçš„é—®é¢˜å¾ˆé«˜æ•ˆï¼Œä½†æ˜¯æ”¾åœ¨è§£å†³æŒ‰å·¥èµ„æ’åºçš„é—®é¢˜ä¸Šå°±ä¸æ˜¯é‚£ä¹ˆå¥½äº†ã€‚ä¸€èˆ¬ï¼Œå¯¹äºæ•°é‡ä¸å¤§çš„æƒ…å†µä¸‹ï¼Œé€šå¸¸é€‰å–æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆn^2ï¼‰çš„æ’å…¥æ’åºç®—æ³•å¯¹äºæ•°é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œé€šå¸¸é€‰å–å¿«é€Ÿæ’åºï¼Œæˆ–è€…æ˜¯å…¶ä»–çš„æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆnlognï¼‰çš„æ’åºç®—æ³•","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"è®¡æ•°å’ŒåŸºæ•°æ’åº","slug":"2019â€“07-08-è®¡æ•°å’ŒåŸºæ•°æ’åº","date":"2019-07-08T19:34:38.000Z","updated":"2019-11-29T12:20:47.703Z","comments":true,"path":"2019/07/08/2019â€“07-08-è®¡æ•°å’ŒåŸºæ•°æ’åº/","link":"","permalink":"yihao.ml/2019/07/08/2019â€“07-08-è®¡æ•°å’ŒåŸºæ•°æ’åº/","excerpt":"","text":"Oï¼ˆNï¼‰çš„æ’åºç®—æ³•ä¹Ÿå«ä¸æ¯”è¾ƒçš„æ’åºç®—æ³•ï¼Œå®ƒçš„æ€æƒ³æºäºæ¡¶æ’åºï¼Œå…¶ä¸­æ¯”è¾ƒç»å…¸çš„ä¸¤ä¸ªä¾‹å­è®¡æ•°æ’åºå’ŒåŸºæ•°æ’åºï¼Œå®ƒä»¬çš„æ—¶é—´å¤æ‚åº¦è¶‹å‘äºOï¼ˆnï¼‰ä½ å¯èƒ½ä¼šçº³é—·ï¼Œä¸æ¯”è¾ƒä¹Ÿèƒ½æ’åºï¼Ÿä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹è¿™ä¸¤ç§ç»å…¸æ’åºç®—æ³• è®¡æ•°æ’åºå‡å¦‚è¦ç»™å…¬å¸å‘˜å·¥æŒ‰èº«é«˜æ’åºã€‚æˆ‘ä»¬çŸ¥é“å‘˜å·¥èº«é«˜å¤§éƒ¨åˆ†åœ¨160ï¼Œ180 ä¹‹é—´ï¼Œå»ºç«‹100ï½300ä¸€å…±200ä¸ªæ¡¶ã€‚éå†æ‰€æœ‰å‘˜å·¥ï¼ŒæŒ‰èº«é«˜æŠŠå‘˜å·¥æ”¾åˆ°åŒ¹é…çš„æ¡¶ä¸­åˆ†åˆ«å€’å‡º100ï½300å·æ¡¶ä¸­çš„å‘˜å·¥ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæŒ‰èº«é«˜æ’å¥½åºçš„åºåˆ—ã€‚ åŸºæ•°æ’åºç»™ä¸‹é¢åºåˆ— ï¼ˆ124ï¼Œ220ï¼Œ044ï¼Œ120ï¼Œ334ï¼Œ666ï¼Œ001ï¼Œ099ï¼‰æ’åºï¼Œå…¶ä¸­éƒ½ä¸º10è¿›åˆ¶æ•°ï¼›å»ºç«‹ 0ï½9 å…±10ä¸ªæ¡¶æ ¹æ®ä¸Šé¢æ•°çš„ä¸ªä½ï¼Œåˆ†åˆ«æ”¾åˆ°å¯¹åº”çš„æ¡¶ä¸­ï¼Œæ¯”å¦‚124ï¼Œä¸ªä½æ˜¯4ï¼Œå°±æ”¾åˆ°4å¯¹åº”çš„æ¡¶ä¸­ï¼›ä¾æ¬¡å€’å‡ºæ‰€æœ‰æ•°ï¼Œå†æ ¹æ®æ•°çš„åä½ï¼Œåˆ†åˆ«æ”¾åˆ°å¯¹åº”çš„æ¡¶ä¸­ï¼›ä¾æ¬¡å€’å‡ºæ‰€æœ‰æ•°ï¼Œå†æ ¹æ®æ•°çš„ç™¾ä½ï¼Œåˆ†åˆ«æ”¾åˆ°å¯¹åº”çš„æ¡¶ä¸­ï¼›ä¾æ¬¡å€’å‡ºæ‰€æœ‰çš„æ•°ï¼Œè¯¥åºåˆ—å°±æ˜¯ä»å°åˆ°å¤§çš„æœ‰åºåºåˆ—ï¼›ä¸‹é¢è¿™ä¸ªç½‘ç«™ä¸­å¯ä»¥ç»™ä½ ä¸€äº›å¥½çš„æ¡¶æ’åºçš„æ€æƒ³ï¼Œå¦‚æœæœ‰æ—¶é—´ï¼Œä¸å¦¨çœ‹ä¸€ä¸‹å›¾è§£Bucket SortCounting SortRadix Sort","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"å†’æ³¡ã€æ’å…¥ã€é€‰æ‹©æ’åº","slug":"2019-07-03-å†’æ³¡ã€æ’å…¥ã€é€‰æ‹©æ’åº","date":"2019-07-03T20:54:38.000Z","updated":"2019-11-29T12:20:47.702Z","comments":true,"path":"2019/07/03/2019-07-03-å†’æ³¡ã€æ’å…¥ã€é€‰æ‹©æ’åº/","link":"","permalink":"yihao.ml/2019/07/03/2019-07-03-å†’æ³¡ã€æ’å…¥ã€é€‰æ‹©æ’åº/","excerpt":"","text":"ä¸‹é¢æˆ‘ä»¬æ¥ç†ä¸€ä¸‹æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆn^2ï¼‰çš„æ’åºç®—æ³•ï¼šå†’æ³¡æ’åºã€æ’å…¥æ’åºå’Œé€‰æ‹©æ’åº å†’æ³¡æ’åºåœ¨0ï½ï¼ˆN-1ï¼‰çš„å¤§å°åŒºé—´ä¸­ï¼Œæ•°ç»„ä½ç½®0å’Œæ•°ç»„ä½ç½®1ä¸Šçš„è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœ0ä½ç½®ä¸Šçš„å¤§äº1ä½ç½®ä¸Šçš„ï¼Œäº¤æ¢ä»–ä»¬çš„ä½ç½®ï¼Œå¦åˆ™ä¸åŠ¨ï¼›ç´§æ¥ç€ä½ç½®1ä¸Šçš„å’Œä½ç½®2ä¸Šçš„è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœ1ä½ç½®ä¸Šçš„å¤§äº2ä½ç½®ä¸Šçš„ï¼Œäº¤æ¢ä»–ä»¬çš„ä½ç½®ï¼Œå¦‚æ­¤åå¤ç¬¬ä¸€è½®ä¸‹æ¥ï¼Œæ•°ç»„ä¸­æœ€å¤§çš„é‚£ä¸ªæ•°ä¼šè¢«æ”¾åˆ°æ•°ç»„çš„æœ€åé¢ã€‚å°†0ï½ï¼ˆN-1ï¼‰çš„åŒºé—´ç¼©å°ä¸º0ï½ï¼ˆN-2ï¼‰ï¼Œåå¤ä¸Šè¿°è¿‡ç¨‹ã€‚ç¬¬äºŒè½®ä¸‹æ¥åï¼Œæœ€å¤§çš„ä¼šè¢«æ”¾åˆ°å€’æ•°ç¬¬äºŒä¸ªä½ç½®ã€‚ä»¥æ­¤ç±»æ¨å®Œæˆåé¢å„è½®è¿‡ç¨‹ï¼Œç›´åˆ°æ•°ç»„åŒºé—´å¤§å°ä¸º1ï¼Œå³æ•´ä¸ªè¿‡ç¨‹ç»“æŸã€‚å›¾è§£æµç¨‹è®¿é—®ä¸‹é¢é“¾æ¥ä¸­çš„Bubble Sort Data Structure Visualizations1234567891011121314151617181920212223242526272829303132333435363738package mainimport \"fmt\"func less(a int, b int) bool &#123; return a&lt;b&#125;func exch(a *int, b *int)&#123; temp := *a *a = *b *b = temp&#125;func bsort(a *[10]int)&#123; count := len(a) //fmt.Println(count) for i := 0; i &lt; count; i++ &#123; for j := i + 1; j &lt; count; j++ &#123; if less(a[j], a[i]) &#123; exch(&amp;(*a)[j],&amp;(*a)[i]) &#125; &#125; &#125;&#125;func main()&#123; var a = [10]int&#123;3,14,2232,4,54,62,351,422,123,34&#125; fmt.Println(a) //fmt.Println(count) bsort(&amp;a) fmt.Println(a)&#125; æ’å…¥æ’åºæ•°ç»„0ä½ç½®ï¼ˆaï¼‰å’Œæ•°ç»„1ä½ç½®ï¼ˆbï¼‰ä¸Šçš„æ•°è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœåè€…bæ¯”å‰è€…aå°ï¼Œå°†bä¸aäº¤æ¢ä½ç½®ï¼Œç´§æ¥ç€bå†å’Œæ•°ç»„-1ä¸Šçš„ä½ç½®è¿›è¡Œæ¯”è¾ƒï¼Œå‘ç°æ•°ç»„è¶Šè¶Šç•Œï¼Œç»“æŸç¬¬ä¸€è½®çš„è¿‡ç¨‹ã€‚å°†å¾…å¤„ç†åŒºé—´çš„å¤§å°ç¼©å°ä¸º1ï½ï¼ˆN-1ï¼‰ï¼Œæ•°ç»„1ä½ç½®ä¸Šçš„æ•°ï¼ˆaï¼‰ä¸æ•°ç»„2ä½ç½®ä¸Šçš„æ•°ï¼ˆbï¼‰è¿›è¡Œæ¯”è¾ƒï¼ŒåŒæ ·çš„ï¼Œå¦‚æœåè€…bæ¯”å‰è€…aå°ï¼Œå°±å°†ä¸¤ä¸ªæ•°è¿›è¡Œäº¤æ¢ï¼Œç»§ç»­æ‹¿æ•°ç»„1ä½ç½®ä¸Šçš„æ•°ä¸æ•°0ä½ç½®ä¸Šçš„æ•°è¿›è¡Œæ¯”è¾ƒç›´åˆ°ä¸æ»¡è¶³åè€…å°äºå‰è€…ï¼Œæˆ–è€…æ•°ç»„è¶Šç•Œä¸ºæ­¢ã€‚ç»“æŸç¬¬äºŒè½®çš„è¿‡ç¨‹ã€‚åå¤ä¸Šé¢çš„è¿‡ç¨‹ç›´åˆ°å¾…æ¯”è¾ƒåŒºé—´å¤§å°ä¸º1åœæ­¢æ•´ä¸ªæ’å…¥æ’åºã€‚å›¾è§£æµç¨‹è®¿é—®ä¸‹é¢é“¾æ¥ä¸­çš„Insertion Sort Data Structure Visualizations12345678910public void sort(Comparable[] a)&#123; int len = a.length; for (int i =0 ; i &lt; len ; i++)&#123; // å°†a[i] æ’å…¥åˆ° a[i - 1] , a[i - 2], a[ i - 3] for (int j = i ; j &gt;= 1 &amp;&amp; less(a[j],a[j-1]) ; j -= 1)&#123; exch(a,j,j-1); &#125; &#125;&#125; é€‰æ‹©æ’åºåœ¨0ï½ï¼ˆN-1ï¼‰çš„æ¯”è¾ƒåŒºé—´ä¸­ï¼Œä»å¤´åˆ°å°¾ä¾æ¬¡æ¯”è¾ƒæ‰¾å‡ºæœ€å°çš„æ•°ï¼Œæ”¾åœ¨ä½ç½®0ä¸Šï¼Œå°†åŒºé—´é•¿åº¦å˜ä¸º1ï½ï¼ˆN-1ï¼‰åœ¨1ï½ï¼ˆN-1ï¼‰çš„æ¯”è¾ƒåŒºé—´ä¸­ï¼Œä»å¤´åˆ°å°¾ä¾æ¬¡æ¯”è¾ƒæ‰¾å‡ºæœ€å°çš„æ•°ï¼Œæ”¾åœ¨ä½ç½®1ä¸Šï¼Œå°†åŒºé—´é•¿åº¦å˜ä¸º2ï½ï¼ˆN-1ï¼‰åå¤ä¸Šè¿°è¿‡ç¨‹çŸ¥é“æ¯”è¾ƒåŒºé—´å¤§å°ä¸º0ï¼Œç»“æŸæ•´ä¸ªæ’åºè¿‡ç¨‹ã€‚å›¾è§£æµç¨‹è®¿é—®ä¸‹é¢é“¾æ¥ä¸­çš„Selection Sort Data Structure Visualizations123456789101112public void sort(Comparable[] a)&#123; int len = a.length; for(int i = 0 ; i &lt; len ; i++)&#123; int min = i; for (int j = i + 1 ; j &lt; len ; j++)&#123; if( less(a[j],a[min]) ) min = j; &#125; exch (a,i,min); &#125; &#125;","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"æœ€å¥½ã€æœ€åã€å¹³å‡ ã€å‡æ‘Šæ—¶é—´å¤æ‚åº¦","slug":"2019-07-03-æœ€å¥½ã€æœ€åã€å¹³å‡ ã€å‡æ‘Šæ—¶é—´å¤æ‚åº¦","date":"2019-07-03T20:42:05.000Z","updated":"2019-11-29T12:20:47.703Z","comments":true,"path":"2019/07/03/2019-07-03-æœ€å¥½ã€æœ€åã€å¹³å‡ ã€å‡æ‘Šæ—¶é—´å¤æ‚åº¦/","link":"","permalink":"yihao.ml/2019/07/03/2019-07-03-æœ€å¥½ã€æœ€åã€å¹³å‡ ã€å‡æ‘Šæ—¶é—´å¤æ‚åº¦/","excerpt":"","text":"è¾ƒä¸ºå¤æ‚çš„åˆ†ææ–¹æ³•å¤§è‡´å¯åˆ†ä¸ºå››ç±»ã€åˆ†åˆ«ä¸ºï¼šæœ€å¥½æ—¶é—´å¤æ‚åº¦ã€æœ€åæ—¶é—´å¤æ‚åº¦ã€å¹³å‡æ—¶é—´å¤æ‚åº¦å’Œå‡æ‘Šæ—¶é—´å¤æ‚åº¦ã€‚è¿™é‡Œæœ‰ä¸€æ®µä»£ç ï¼Œé’ˆå¯¹å®ƒä¸‹é¢åˆ†åˆ«æ¥è¯´ä¸€ä¸‹æ€ä¹ˆç®—ç€å››ç§æ—¶é—´å¤æ‚åº¦ã€‚12345678910111213// içš„å–å€¼èŒƒå›´æ˜¯ 0ï½nvoid add(int element) &#123; if (i &gt;= len) &#123; int new_array[] = new int[len*2]; for (int j = 0; j &lt; len; ++j) &#123; new_array[j] = array[j]; &#125; array = new_array; len = 2 * len; &#125; array[i] = element; ++i;&#125; æœ€å¥½ã€æœ€åæ—¶é—´å¤æ‚åº¦æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼Œè¨€æ˜ç›´æ„ï¼Œå°±æ˜¯åœ¨æœ€å¥½æƒ…å†µä¸‹æ±‚å¾—çš„æ—¶é—´å¤æ‚åº¦ï¼Œå¯¹äºä¸Šé¢ä»£ç ï¼Œé’ˆå¯¹é•¿åº¦ä¸ºNçš„æ•°ç»„æ·»åŠ ä¸€ä¸ªå…ƒç´ çš„æœ€å¥½æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆ1ï¼‰åœ¨æœ€å¥½æƒ…å†µä¸‹ï¼Œæ•°ç»„ç©ºé—´å¾ˆå……è¶³ï¼Œå¯ä»¥ç›´æ¥å°†æ•°ç»„æ·»åŠ åˆ°ç¬¬iä½ç½®åœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ•°ç»„ç©ºé—´ä¸å¤Ÿï¼Œæ‰€ä»¥è¦é‡æ–°ç”³è¯·ä¸€ä¸ª2å€å¤§å°çš„æ•°ç»„ç©ºé—´ï¼ŒæŠŠåŸæ¥arrayæ•°ç»„ä¸­çš„æ•°æ®ä¾æ¬¡copyåˆ°new_arrayï¼Œå› æ­¤æœ€åçš„æ—¶é—´å¤æ‚åº¦åº”è¯¥æ˜¯Oï¼ˆNï¼‰ å¹³å‡æ—¶é—´å¤æ‚åº¦æœ€å¥½ã€åçš„æ—¶é—´å¤æ‚åº¦å±€é™æ€§å¾ˆå¤§ï¼Œæœ‰æ—¶ä¸èƒ½å‡†ç¡®è¯´æ˜é—®é¢˜ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ç”¨ä»£ç æ‰§è¡Œå„ç§æƒ…å†µçš„åŠ æƒå¹³å‡å€¼æ¥è¯´æ˜é—®é¢˜ã€‚å‡è®¾æ•°ç»„çš„å¤§å°ä¸ºNï¼Œiçš„å–å€¼èŒƒå›´ä¸º0ï½Nï¼Œåœ¨0ï½n-1æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆ1ï¼‰ï¼Œåœ¨iç­‰äºNçš„æ—¶å€™æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆNï¼‰ï¼Œiçš„å–å€¼æœ‰1/ï¼ˆn-1ï¼‰ç§å¯èƒ½æ€§ï¼Œæ‰€ä»¥æœ‰ï¼šæœ€ç»ˆå¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯Oï¼ˆ1ï¼‰ å‡æ‘Šæ—¶é—´å¤æ‚åº¦ç½‘ä¸Šæœ‰å¥½å¤šè¯´å¹³å‡æ—¶é—´å¤æ‚åº¦å°±æ˜¯å‡æ‘Šæ—¶é—´å¤æ‚åº¦ï¼Œå®ƒä»¬å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä¸ç®¡ä»–ä»¬ä¿©æ˜¯å¦ä¸€æ ·ï¼Œè¿™è¾¹æœ‰ä¸¤ä¸ªtipæ¥å¸®åŠ©æˆ‘ä»¬ç®—å‡ºå‡æ‘Šæ—¶é—´å¤æ‚åº¦åœ¨Nç§æƒ…å†µä¸­ï¼Œå¦‚æœç¬¬è¢«ä½é˜¶å¤æ‚åº¦å å»äº†åŠå£æ±Ÿå±±ï¼Œé‚£ä¹ˆé€šè¿‡å‡æ‘Šæ›´é«˜é˜¶çš„å¤æ‚åº¦åˆ°ä½é˜¶ä¸Šï¼Œæœ€ç»ˆç»“æœä¸ºä½é˜¶å¤æ‚åº¦ã€‚å‡å¦‚ä½ å‘ç°ä½é˜¶å¤æ‚åº¦å’Œé«˜é˜¶å¤æ‚åº¦å‡ºç°è§„å¾‹æ€§çš„äº¤æ›¿ï¼Œé‚£ä¹ˆé€šå¸¸æœ€ç»ˆç»“æœä¸ºä½é˜¶å¤æ‚åº¦ã€‚æ ¹æ®ä¸Šé¢çš„tipsã€‚å¾ˆå¿«å°±å¾—å‡ºå®ƒçš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆ1ï¼‰ ä¸ºä»€ä¹ˆè¦å¼•å…¥è¿™4ç§å¤æ‚åº¦ï¼Ÿä¸€èˆ¬æˆ‘ä»¬ç”¨ä¸åˆ°åˆ°è¿™äº›åˆ†ææ–¹æ³•ï¼Œé’ˆå¯¹æŸäº›åœºæ™¯ï¼Œå¦‚æœæ™®é€šçš„åˆ†ææ–¹æ³•ä¸èƒ½è®ºè¯æˆ‘ä»¬çš„è®ºç‚¹ï¼Œé‚£ä¹ˆä½¿ç”¨å®ƒä»¬å¾€å¾€å¯ä»¥ä½¿è®ºç‚¹æ›´å…·æœ‰è¯´æœåŠ›ã€‚","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"Cå’ŒC++çš„å‚æ•°ä¼ é€’","slug":"2019-07-02-Cå’ŒC++çš„å‚æ•°ä¼ é€’","date":"2019-07-02T14:07:39.000Z","updated":"2019-11-29T12:20:47.701Z","comments":true,"path":"2019/07/02/2019-07-02-Cå’ŒC++çš„å‚æ•°ä¼ é€’/","link":"","permalink":"yihao.ml/2019/07/02/2019-07-02-Cå’ŒC++çš„å‚æ•°ä¼ é€’/","excerpt":"","text":"ä¸‹é¢æ˜¯å€¼ä¼ é€’ï¼Œaå’Œbçš„å€¼ä¼šè¢«ä¼ å…¥åˆ°swap1ä¸­ï¼Œå¦‚æœä½ ä¿®æ”¹äº†è¿™ä¸ªå€¼ï¼Œmainæ–¹æ³•ä¸­çš„å€¼æ˜¯ä¸ä¼šæ”¹å˜çš„1234567891011121314151617181920212223#include&lt;stdio.h&gt;void swap1(int a, int b) &#123; printf(\"a = %d ,ptr = %p\\n\", a, &amp;a); printf(\"b = %d ,ptr = %p\\n\", b, &amp;b); int tmp = b; b = a; a = tmp; printf(\"a = %d ,ptr = %p\\n\", a, &amp;a); printf(\"b = %d ,ptr = %p\\n\\n\", b, &amp;b); printf(\"swap leave\\n\");&#125;int main() &#123; int x = 1; int y = 2; printf(\"x = %d, ptr = %p\\n\", x, &amp;x); printf(\"y = %d, ptr = %p\\n\\n\", y, &amp;y); swap1(x, y); printf(\"x = %d, ptr = %p\\n\", x, &amp;x); printf(\"y = %d, ptr = %p\\n\\n\", y, &amp;y); return 0;&#125;ä¸‹é¢æ˜¯åœ°å€ä¼ é€’ï¼Œé¡¾åæ€ä¹‰ä¼ åˆ°swapä¸­çš„æ˜¯å¯„å­˜å™¨çš„åœ°å€123456789101112#include&lt;stdio.h&gt;void swap2(int *a, int *b) &#123; printf(\"a = %d ,ptr = %p\\n\", a, &amp;a); printf(\"b = %d ,ptr = %p\\n\", b, &amp;b); int tmp = *b; *b = *a; *a = tmp; printf(\"a = %d ,ptr = %p\\n\", a, &amp;a); printf(\"b = %d ,ptr = %p\\n\\n\", b, &amp;b); printf(\"swap leave\\n\");&#125;C++çš„å‡ºç°ä¼˜åŒ–äº†Cè¯­è¨€ä¸­çš„åœ°å€ä¼ é€’ï¼Œå› ä¸ºé‚£çœŸçš„ä¸å¤ªå‹å¥½ã€‚è¿™ä¸ªå’ŒJavaå¾ˆç›¸ä¼¼12345678910111213void swap3(int &amp;a, int &amp;b) &#123; printf(\"swap enter\\n\"); printf(\"a = %d, ptr = %p\\n\", a, &amp;a); printf(\"b = %d, ptr = %p\\n\", b, &amp;b); int tmp = b; b = a; a = tmp; printf(\"a = %d, ptr = %p\\n\", a, &amp;a); printf(\"b = %d, ptr = %p\\n\", b, &amp;b); printf(\"swap leave\\n\");&#125;","categories":[{"name":"ç¼–ç¨‹è¯­è¨€","slug":"ç¼–ç¨‹è¯­è¨€","permalink":"yihao.ml/categories/ç¼–ç¨‹è¯­è¨€/"}],"tags":[{"name":"C","slug":"C","permalink":"yihao.ml/tags/C/"}]},{"title":"æ—¶é—´ç©ºé—´å¤æ‚åº¦","slug":"2019-07-01-æ—¶é—´ç©ºé—´å¤æ‚åº¦","date":"2019-07-01T11:15:05.000Z","updated":"2019-11-29T12:20:47.701Z","comments":true,"path":"2019/07/01/2019-07-01-æ—¶é—´ç©ºé—´å¤æ‚åº¦/","link":"","permalink":"yihao.ml/2019/07/01/2019-07-01-æ—¶é—´ç©ºé—´å¤æ‚åº¦/","excerpt":"","text":"ç®—æ³•ä¸æ•°æ®ç»“æ„ç›¸è¾…ç›¸æˆï¼Œè°ä¹Ÿç¦»ä¸å¼€è°ï¼Œå­¦ç®—æ³•å’Œæ•°æ®ç»“æ„å¯ä»¥è¯´è®©æˆ‘å¾ˆç—›è‹¦ï¼Œå½“ç„¶å¯¹äºèªæ˜çš„ä½ æ¥è¯´ï¼Œè¿™å¯èƒ½ä¸æ˜¯ä»€ä¹ˆéš¾äº‹,å“ˆå“ˆå“ˆã€‚è¿™ä¸‹é¢çš„å›¾æ˜¯ç®—æ³•çš„æ•´ä¸ªçŸ¥è¯†ä½“ç³»å›¾ï¼Œé€šè¿‡è®©æˆ‘ä»¬å¯¹æ•´ä¸ªç®—æ³•ä½“ç³»æœ‰ä¸ªåˆæ­¥äº†è§£ã€‚æˆ‘æ€»ç»“äº†20ä¸ªæœ€å¸¸ç”¨çš„ã€æœ€åŸºç¡€æ•°æ®ç»“æ„ä¸ç®—æ³•,ä»–ä»¬åˆ†åˆ«æ˜¯10ä¸ªæ•°æ®ç»“æ„ï¼šæ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€æ•£åˆ—è¡¨ã€äºŒå‰æ ‘ã€å †ã€è·³è¡¨ã€å›¾ã€Trieæ ‘ï¼›10ä¸ªç®—æ³•ï¼šé€’å½’ã€æ’åºã€äºŒåˆ†æŸ¥æ‰¾ã€æœç´¢ã€å“ˆå¸Œç®—æ³•ã€è´ªå¿ƒç®—æ³•ã€åˆ†æ²»ç®—æ³•ã€å›æº¯ç®—æ³•ã€åŠ¨æ€è§„åˆ’ã€å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ã€‚å¦‚æœæƒ³å­¦å¥½ç®—æ³•ï¼Œå°±å¾—æŒæ¡æ€ä¹ˆåˆ†æä»£ç çš„æ€§èƒ½ã€‚ä¸šç•Œä¸­å¸¸ç”¨æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æ¥å‘é‡ï¼Œç±»ä¼¼O(1)ã€O(n)ã€O(n^2)ç­‰ã€‚å¦‚æœè¯´ä¸ä¼šæ±‚æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ï¼Œé‚£åªèƒ½è¯´ä½ å’Œç®—æ³•æ— ç¼˜äº†ï¼ä¸‹é¢æˆ‘ä»¬æ¥ç†ç†åˆ°åº•åº”è¯¥æ€ä¹ˆç®—ï¼Œå¦å¤–ç®—è¿™äº›ä¸œè¥¿ä¸éœ€è¦ä»€ä¹ˆå¾ˆé«˜æ·±çš„æ•°å­¦ï¼Œåªéœ€è¦é«˜ä¸­æ•°å­¦çŸ¥è¯†å°±è¶³å¤Ÿäº†ã€‚ä¸‹é¢ä¼šç‰µæ‰¯åˆ°ä¸€äº›å¯¹æ•°è¿ç®—ï¼Œå¦‚æœä½ å¿˜äº†ï¼Œå»ºè®®ä½ å›å»å¤ä¹ ä¸€ä¸‹ã€‚ å¤§Oå¤æ‚åº¦è¡¨ç¤ºæ³•è¿™é‡Œæœ‰æ®µéå¸¸ç®€å•çš„ä»£ç ï¼Œæ±‚1,2,3â€¦nçš„ç´¯åŠ å’Œã€‚ç°åœ¨ï¼Œæˆ‘å°±å¸¦ä½ ä¸€å—æ¥ä¼°ç®—ä¸€ä¸‹è¿™æ®µä»£ç çš„æ‰§è¡Œæ—¶é—´ã€‚12345678int cal(int n) &#123; int sum = 0; int i = 1; for (; i &lt;= n; ++i) &#123; sum = sum + i; &#125; return sum;&#125;å‡è®¾æ¯è¡Œä»£ç æ‰§è¡Œçš„æ—¶é—´éƒ½ä¸€æ ·ï¼Œä¸ºunit_timeã€‚åœ¨è¿™ä¸ªå‡è®¾çš„åŸºç¡€ä¹‹ä¸Šï¼Œè¿™æ®µä»£ç çš„æ€»æ‰§è¡Œæ—¶é—´æ˜¯å¤šå°‘å‘¢ï¼Ÿç¬¬2ã€3è¡Œä»£ç åˆ†åˆ«éœ€è¦1ä¸ªunit_timeçš„æ‰§è¡Œæ—¶é—´ï¼Œç¬¬4ã€5è¡Œéƒ½è¿è¡Œäº†néï¼Œæ‰€ä»¥éœ€è¦2n * unit_timeçš„æ‰§è¡Œæ—¶é—´ï¼Œæ‰€ä»¥è¿™æ®µä»£ç æ€»çš„æ‰§è¡Œæ—¶é—´å°±æ˜¯(2n+2) * unit_timeã€‚å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ‰€æœ‰ä»£ç çš„æ‰§è¡Œæ—¶é—´T(n)ä¸æ¯è¡Œä»£ç çš„æ‰§è¡Œæ¬¡æ•°æˆæ­£æ¯”æŒ‰ç…§è¿™ä¸ªåˆ†ææ€è·¯ï¼Œæˆ‘ä»¬å†æ¥çœ‹è¿™æ®µä»£ç ã€‚1234567891011int cal(int n) &#123; int sum = 0; int i = 1; int j = 1; for (; i &lt;= n; ++i) &#123; j = 1; for (; j &lt;= n; ++j) &#123; sum = sum + i * j; &#125; &#125;&#125;æˆ‘ä»¬ä¾æ—§å‡è®¾æ¯ä¸ªè¯­å¥çš„æ‰§è¡Œæ—¶é—´æ˜¯unit_timeã€‚é‚£è¿™æ®µä»£ç çš„æ€»æ‰§è¡Œæ—¶é—´T(n)æ˜¯å¤šå°‘å‘¢ï¼Ÿç¬¬2ã€3ã€4è¡Œä»£ç ï¼Œæ¯è¡Œéƒ½éœ€è¦1ä¸ªunit_timeçš„æ‰§è¡Œæ—¶é—´ï¼Œç¬¬5ã€6è¡Œä»£ç å¾ªç¯æ‰§è¡Œäº†néï¼Œéœ€è¦2n * unit_timeçš„æ‰§è¡Œæ—¶é—´ï¼Œç¬¬7ã€8è¡Œä»£ç å¾ªç¯æ‰§è¡Œäº†n^2 éï¼Œæ‰€ä»¥éœ€è¦ 2n^2 * unit_timeçš„æ‰§è¡Œæ—¶é—´ã€‚æ‰€ä»¥ï¼Œæ•´æ®µä»£ç æ€»çš„æ‰§è¡Œæ—¶é—´T(n) = (2n ^ 2 + 2n+3)*unit_timeå°½ç®¡æˆ‘ä»¬ä¸çŸ¥é“unit_timeçš„å…·ä½“å€¼ï¼Œä½†æ˜¯é€šè¿‡è¿™ä¸¤æ®µä»£ç æ‰§è¡Œæ—¶é—´çš„æ¨å¯¼è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªéå¸¸é‡è¦çš„è§„å¾‹ï¼Œé‚£å°±æ˜¯ï¼Œæ‰€æœ‰ä»£ç çš„æ‰§è¡Œæ—¶é—´T(n)ä¸æ¯è¡Œä»£ç çš„æ‰§è¡Œæ¬¡æ•°næˆæ­£æ¯”ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªè§„å¾‹æ€»ç»“æˆä¸€ä¸ªå…¬å¼ã€‚æ³¨æ„ï¼Œå¤§Oå°±è¦ç™»åœºäº†ï¼æˆ‘æ¥å…·ä½“è§£é‡Šä¸€ä¸‹è¿™ä¸ªå…¬å¼ã€‚å…¶ä¸­ï¼ŒT(n)æˆ‘ä»¬å·²ç»è®²è¿‡äº†ï¼Œå®ƒè¡¨ç¤ºä»£ç æ‰§è¡Œçš„æ—¶é—´ï¼›nè¡¨ç¤ºæ•°æ®è§„æ¨¡çš„å¤§å°ï¼›f(n)è¡¨ç¤ºæ¯è¡Œä»£ç æ‰§è¡Œçš„æ¬¡æ•°æ€»å’Œã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªå…¬å¼ï¼Œæ‰€ä»¥ç”¨f(n)æ¥è¡¨ç¤ºã€‚å…¬å¼ä¸­çš„Oï¼Œè¡¨ç¤ºä»£ç çš„æ‰§è¡Œæ—¶é—´T(n)ä¸f(n)è¡¨è¾¾å¼æˆæ­£æ¯”ã€‚æ‰€ä»¥ï¼Œç¬¬ä¸€ä¸ªä¾‹å­ä¸­çš„T(n) = O(2n+2)ï¼Œç¬¬äºŒä¸ªä¾‹å­ä¸­çš„T(n) = O(2n^2+2n+3)ã€‚è¿™å°±æ˜¯å¤§Oæ—¶é—´å¤æ‚åº¦è¡¨ç¤ºæ³•ã€‚å¤§Oæ—¶é—´å¤æ‚åº¦å®é™…ä¸Šå¹¶ä¸å…·ä½“è¡¨ç¤ºä»£ç çœŸæ­£çš„æ‰§è¡Œæ—¶é—´ï¼Œè€Œæ˜¯è¡¨ç¤ºä»£ç æ‰§è¡Œæ—¶é—´éšæ•°æ®è§„æ¨¡å¢é•¿çš„å˜åŒ–è¶‹åŠ¿ï¼Œæ‰€ä»¥ï¼Œä¹Ÿå«ä½œæ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼ˆasymptotic time complexityï¼‰ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚å½“nå¾ˆå¤§æ—¶ï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆ10000ã€100000ã€‚è€Œå…¬å¼ä¸­çš„ä½é˜¶ã€å¸¸é‡ã€ç³»æ•°ä¸‰éƒ¨åˆ†å¹¶ä¸å·¦å³å¢é•¿è¶‹åŠ¿ï¼Œæ‰€ä»¥éƒ½å¯ä»¥å¿½ç•¥ã€‚æˆ‘ä»¬åªéœ€è¦è®°å½•ä¸€ä¸ªæœ€å¤§é‡çº§å°±å¯ä»¥äº†ï¼Œå¦‚æœç”¨å¤§Oè¡¨ç¤ºæ³•è¡¨ç¤ºåˆšè®²çš„é‚£ä¸¤æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼Œå°±å¯ä»¥è®°ä¸ºï¼šT(n) = O(n)ï¼› T(n) = O(n^2)ã€‚ æ—¶é—´å¤æ‚åº¦åˆ†æå‰é¢ä»‹ç»äº†å¤§Oæ—¶é—´å¤æ‚åº¦çš„ç”±æ¥å’Œè¡¨ç¤ºæ–¹æ³•ã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸‹ï¼Œå¦‚ä½•åˆ†æä¸€æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼Ÿæˆ‘è¿™å„¿æœ‰ä¸‰ä¸ªæ¯”è¾ƒå®ç”¨çš„æ–¹æ³•å¯ä»¥åˆ†äº«ç»™ä½ ã€‚ 1.åªå…³æ³¨å¾ªç¯æ‰§è¡Œæ¬¡æ•°æœ€å¤šçš„ä¸€æ®µä»£ç æˆ‘åˆšæ‰è¯´äº†ï¼Œå¤§Oè¿™ç§å¤æ‚åº¦è¡¨ç¤ºæ–¹æ³•åªæ˜¯è¡¨ç¤ºä¸€ç§å˜åŒ–è¶‹åŠ¿ã€‚æˆ‘ä»¬é€šå¸¸ä¼šå¿½ç•¥æ‰å…¬å¼ä¸­çš„å¸¸é‡ã€ä½é˜¶ã€ç³»æ•°ï¼Œåªéœ€è¦è®°å½•ä¸€ä¸ªæœ€å¤§é˜¶çš„é‡çº§å°±å¯ä»¥äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨åˆ†æä¸€ä¸ªç®—æ³•ã€ä¸€æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦çš„æ—¶å€™ï¼Œä¹Ÿåªå…³æ³¨å¾ªç¯æ‰§è¡Œæ¬¡æ•°æœ€å¤šçš„é‚£ä¸€æ®µä»£ç å°±å¯ä»¥äº†ã€‚è¿™æ®µæ ¸å¿ƒä»£ç æ‰§è¡Œæ¬¡æ•°çš„nçš„é‡çº§ï¼Œå°±æ˜¯æ•´æ®µè¦åˆ†æä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚ä¸ºäº†ä¾¿äºä½ ç†è§£ï¼Œæˆ‘è¿˜æ‹¿å‰é¢çš„ä¾‹å­æ¥è¯´æ˜ã€‚12345678int cal(int n) &#123; int sum = 0; int i = 1; for (; i &lt;= n; ++i) &#123; sum = sum + i; &#125; return sum;&#125;å…¶ä¸­ç¬¬2ã€3è¡Œä»£ç éƒ½æ˜¯å¸¸é‡çº§çš„æ‰§è¡Œæ—¶é—´ï¼Œä¸nçš„å¤§å°æ— å…³ï¼Œæ‰€ä»¥å¯¹äºå¤æ‚åº¦å¹¶æ²¡æœ‰å½±å“ã€‚å¾ªç¯æ‰§è¡Œæ¬¡æ•°æœ€å¤šçš„æ˜¯ç¬¬4ã€5è¡Œä»£ç ï¼Œæ‰€ä»¥è¿™å—ä»£ç è¦é‡ç‚¹åˆ†æã€‚å‰é¢æˆ‘ä»¬ä¹Ÿè®²è¿‡ï¼Œè¿™ä¸¤è¡Œä»£ç è¢«æ‰§è¡Œäº†næ¬¡ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(n)ã€‚ 2.åŠ æ³•æ³•åˆ™ï¼šæ€»å¤æ‚åº¦ç­‰äºé‡çº§æœ€å¤§çš„é‚£æ®µä»£ç çš„å¤æ‚åº¦æˆ‘è¿™é‡Œè¿˜æœ‰ä¸€æ®µä»£ç ã€‚ä½ å¯ä»¥å…ˆè¯•ç€åˆ†æä¸€ä¸‹ï¼Œç„¶åå†å¾€ä¸‹çœ‹è·Ÿæˆ‘çš„åˆ†ææ€è·¯æ˜¯å¦ä¸€æ ·12345678910111213141516171819202122232425int cal(int n) &#123; int sum_1 = 0; int p = 1; for (; p &lt; 100; ++p) &#123; sum_1 = sum_1 + p; &#125; int sum_2 = 0; int q = 1; for (; q &lt; n; ++q) &#123; sum_2 = sum_2 + q; &#125; int sum_3 = 0; int i = 1; int j = 1; for (; i &lt;= n; ++i) &#123; j = 1; for (; j &lt;= n; ++j) &#123; sum_3 = sum_3 + i * j; &#125; &#125; return sum_1 + sum_2 + sum_3;&#125;è¿™ä¸ªä»£ç åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯æ±‚sum_1ã€sum_2ã€sum_3ã€‚æˆ‘ä»¬å¯ä»¥åˆ†åˆ«åˆ†ææ¯ä¸€éƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦ï¼Œç„¶åæŠŠå®ƒä»¬æ”¾åˆ°ä¸€å—å„¿ï¼Œå†å–ä¸€ä¸ªé‡çº§æœ€å¤§çš„ä½œä¸ºæ•´æ®µä»£ç çš„å¤æ‚åº¦ã€‚ç¬¬ä¸€æ®µçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿè¿™æ®µä»£ç å¾ªç¯æ‰§è¡Œäº†100æ¬¡ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªå¸¸é‡çš„æ‰§è¡Œæ—¶é—´ï¼Œè·Ÿnçš„è§„æ¨¡æ— å…³ã€‚è¿™é‡Œæˆ‘è¦å†å¼ºè°ƒä¸€ä¸‹ï¼Œå³ä¾¿è¿™æ®µä»£ç å¾ªç¯10000æ¬¡ã€100000æ¬¡ï¼Œåªè¦æ˜¯ä¸€ä¸ªå·²çŸ¥çš„æ•°ï¼Œè·Ÿnæ— å…³ï¼Œç…§æ ·ä¹Ÿæ˜¯å¸¸é‡çº§çš„æ‰§è¡Œæ—¶é—´ã€‚å½“næ— é™å¤§çš„æ—¶å€™ï¼Œå°±å¯ä»¥å¿½ç•¥ã€‚å°½ç®¡å¯¹ä»£ç çš„æ‰§è¡Œæ—¶é—´ä¼šæœ‰å¾ˆå¤§å½±å“ï¼Œä½†æ˜¯å›åˆ°æ—¶é—´å¤æ‚åº¦çš„æ¦‚å¿µæ¥è¯´ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªç®—æ³•æ‰§è¡Œæ•ˆç‡ä¸æ•°æ®è§„æ¨¡å¢é•¿çš„å˜åŒ–è¶‹åŠ¿ï¼Œæ‰€ä»¥ä¸ç®¡å¸¸é‡çš„æ‰§è¡Œæ—¶é—´å¤šå¤§ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å¿½ç•¥æ‰ã€‚å› ä¸ºå®ƒæœ¬èº«å¯¹å¢é•¿è¶‹åŠ¿å¹¶æ²¡æœ‰å½±å“ã€‚é‚£ç¬¬äºŒæ®µä»£ç å’Œç¬¬ä¸‰æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿç­”æ¡ˆæ˜¯O(n)å’ŒO(n^2)ï¼Œä½ åº”è¯¥èƒ½å®¹æ˜“å°±åˆ†æå‡ºæ¥ï¼Œæˆ‘å°±ä¸å•°å—¦äº†ã€‚ç»¼åˆè¿™ä¸‰æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬å–å…¶ä¸­æœ€å¤§çš„é‡çº§ã€‚æ‰€ä»¥ï¼Œæ•´æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦å°±ä¸ºO(n^2)ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šæ€»çš„æ—¶é—´å¤æ‚åº¦å°±ç­‰äºé‡çº§æœ€å¤§çš„é‚£æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚é‚£æˆ‘ä»¬å°†è¿™ä¸ªè§„å¾‹æŠ½è±¡æˆå…¬å¼å°±æ˜¯ï¼šå¦‚æœT1(n)=O(f(n))ï¼ŒT2(n)=O(g(n))ï¼›é‚£ä¹ˆT(n)=T1(n)+T2(n)=max(O(f(n)), O(g(n))) =O(max(f(n), g(n))). 3.ä¹˜æ³•æ³•åˆ™ï¼šåµŒå¥—ä»£ç çš„å¤æ‚åº¦ç­‰äºåµŒå¥—å†…å¤–ä»£ç å¤æ‚åº¦çš„ä¹˜ç§¯æˆ‘åˆšè®²äº†ä¸€ä¸ªå¤æ‚åº¦åˆ†æä¸­çš„åŠ æ³•æ³•åˆ™ï¼Œè¿™å„¿è¿˜æœ‰ä¸€ä¸ªä¹˜æ³•æ³•åˆ™ã€‚ç±»æ¯”ä¸€ä¸‹ï¼Œä½ åº”è¯¥èƒ½â€œçŒœåˆ°â€å…¬å¼æ˜¯ä»€ä¹ˆæ ·å­çš„å§ï¼Ÿå¦‚æœT1(n)=O(f(n))ï¼ŒT2(n)=O(g(n))ï¼›é‚£ä¹ˆT(n)=T1(n) * T2(n) = O(f(n)) * O(g(n)) = O(f(n) * g(n)).ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾T1(n) = O(n)ï¼ŒT2(n) = O(n^2)ï¼Œåˆ™T1(n) * T2(n) = O(n^3)ã€‚è½å®åˆ°å…·ä½“çš„ä»£ç ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¹˜æ³•æ³•åˆ™çœ‹æˆæ˜¯åµŒå¥—å¾ªç¯ï¼Œæˆ‘ä¸¾ä¸ªä¾‹å­ç»™ä½ è§£é‡Šä¸€ä¸‹ã€‚12345678910111213141516int cal(int n) &#123; int ret = 0; int i = 1; for (; i &lt; n; ++i) &#123; ret = ret + f(i); &#125; &#125; int f(int n) &#123; int sum = 0; int i = 1; for (; i &lt; n; ++i) &#123; sum = sum + i; &#125; return sum;&#125;æˆ‘ä»¬å•ç‹¬çœ‹cal()å‡½æ•°ã€‚å‡è®¾f()åªæ˜¯ä¸€ä¸ªæ™®é€šçš„æ“ä½œï¼Œé‚£ç¬¬4ï½6è¡Œçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼ŒT1(n) = O(n)ã€‚ä½†f()å‡½æ•°æœ¬èº«ä¸æ˜¯ä¸€ä¸ªç®€å•çš„æ“ä½œï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯T2(n) = O(n)ï¼Œæ‰€ä»¥ï¼Œæ•´ä¸ªcal()å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼ŒT(n) = T1(n) * T2(n) = O(n*n) = O(n^2)ã€‚æˆ‘åˆšåˆšè®²äº†ä¸‰ç§å¤æ‚åº¦çš„åˆ†ææŠ€å·§ã€‚ä¸è¿‡ï¼Œä½ å¹¶ä¸ç”¨åˆ»æ„å»è®°å¿†ã€‚å®é™…ä¸Šï¼Œå¤æ‚åº¦åˆ†æè¿™ä¸ªä¸œè¥¿å…³é”®åœ¨äºâ€œç†Ÿç»ƒâ€ã€‚ä½ åªè¦å¤šçœ‹æ¡ˆä¾‹ï¼Œå¤šåˆ†æï¼Œå°±èƒ½åšåˆ°â€œæ— æ‹›èƒœæœ‰æ‹›â€ã€‚ å‡ ç§å¸¸è§æ—¶é—´å¤æ‚åº¦å®ä¾‹åˆ†æè™½ç„¶ä»£ç åƒå·®ä¸‡åˆ«ï¼Œä½†æ˜¯å¸¸è§çš„å¤æ‚åº¦é‡çº§å¹¶ä¸å¤šã€‚æˆ‘ç¨å¾®æ€»ç»“äº†ä¸€ä¸‹ï¼Œè¿™äº›å¤æ‚åº¦é‡çº§å‡ ä¹æ¶µç›–äº†ä½ ä»Šåå¯ä»¥æ¥è§¦çš„æ‰€æœ‰ä»£ç çš„å¤æ‚åº¦é‡çº§ã€‚å¯¹äºåˆšç½—åˆ—çš„å¤æ‚åº¦é‡çº§ï¼Œæˆ‘ä»¬å¯ä»¥ç²—ç•¥åœ°åˆ†ä¸ºä¸¤ç±»ï¼Œå¤šé¡¹å¼é‡çº§å’Œéå¤šé¡¹å¼é‡çº§ã€‚å…¶ä¸­ï¼Œéå¤šé¡¹å¼é‡çº§åªæœ‰ä¸¤ä¸ªï¼šO(2^n)å’ŒO(n!)ã€‚å½“æ•°æ®è§„æ¨¡nè¶Šæ¥è¶Šå¤§æ—¶ï¼Œéå¤šé¡¹å¼é‡çº§ç®—æ³•çš„æ‰§è¡Œæ—¶é—´ä¼šæ€¥å‰§å¢åŠ ï¼Œæ±‚è§£é—®é¢˜çš„æ‰§è¡Œæ—¶é—´ä¼šæ— é™å¢é•¿ã€‚æ‰€ä»¥ï¼Œéå¤šé¡¹å¼æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•å…¶å®æ˜¯éå¸¸ä½æ•ˆçš„ç®—æ³•ã€‚å› æ­¤ï¼Œå…³äºNPæ—¶é—´å¤æ‚åº¦æˆ‘å°±ä¸å±•å¼€è®²äº†ã€‚æˆ‘ä»¬ä¸»è¦æ¥çœ‹å‡ ç§å¸¸è§çš„å¤šé¡¹å¼æ—¶é—´å¤æ‚åº¦ã€‚ 1. O(1)é¦–å…ˆä½ å¿…é¡»æ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼ŒO(1)åªæ˜¯å¸¸é‡çº§æ—¶é—´å¤æ‚åº¦çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³•ï¼Œå¹¶ä¸æ˜¯æŒ‡åªæ‰§è¡Œäº†ä¸€è¡Œä»£ç ã€‚æ¯”å¦‚è¿™æ®µä»£ç ï¼Œå³ä¾¿æœ‰3è¡Œï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(1ï¼‰ï¼Œè€Œä¸æ˜¯O(3)ã€‚123int i = 8;int j = 6;int sum = i + j;æˆ‘ç¨å¾®æ€»ç»“ä¸€ä¸‹ï¼Œåªè¦ä»£ç çš„æ‰§è¡Œæ—¶é—´ä¸éšnçš„å¢å¤§è€Œå¢é•¿ï¼Œè¿™æ ·ä»£ç çš„æ—¶é—´å¤æ‚åº¦æˆ‘ä»¬éƒ½è®°ä½œO(1)ã€‚æˆ–è€…è¯´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªè¦ç®—æ³•ä¸­ä¸å­˜åœ¨å¾ªç¯è¯­å¥ã€é€’å½’è¯­å¥ï¼Œå³ä½¿æœ‰æˆåƒä¸Šä¸‡è¡Œçš„ä»£ç ï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ÎŸ(1)ã€‚ 2. O(logn)ã€O(nlogn)å¯¹æ•°é˜¶æ—¶é—´å¤æ‚åº¦éå¸¸å¸¸è§ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€éš¾åˆ†æçš„ä¸€ç§æ—¶é—´å¤æ‚åº¦ã€‚æˆ‘é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ã€‚1234i=1;while (i &lt;= n) &#123; i = i * 2;&#125;æ ¹æ®æˆ‘ä»¬å‰é¢è®²çš„å¤æ‚åº¦åˆ†ææ–¹æ³•ï¼Œç¬¬ä¸‰è¡Œä»£ç æ˜¯å¾ªç¯æ‰§è¡Œæ¬¡æ•°æœ€å¤šçš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦èƒ½è®¡ç®—å‡ºè¿™è¡Œä»£ç è¢«æ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼Œå°±èƒ½çŸ¥é“æ•´æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚ä»ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå˜é‡içš„å€¼ä»1å¼€å§‹å–ï¼Œæ¯å¾ªç¯ä¸€æ¬¡å°±ä¹˜ä»¥2ã€‚å½“å¤§äºnæ—¶ï¼Œå¾ªç¯ç»“æŸã€‚è¿˜è®°å¾—æˆ‘ä»¬é«˜ä¸­å­¦è¿‡çš„ç­‰æ¯”æ•°åˆ—å—ï¼Ÿå®é™…ä¸Šï¼Œå˜é‡içš„å–å€¼å°±æ˜¯ä¸€ä¸ªç­‰æ¯”æ•°åˆ—ã€‚å¦‚æœæˆ‘æŠŠå®ƒä¸€ä¸ªä¸€ä¸ªåˆ—å‡ºæ¥ï¼Œå°±åº”è¯¥æ˜¯è¿™ä¸ªæ ·å­çš„ï¼šæ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦çŸ¥é“xå€¼æ˜¯å¤šå°‘ï¼Œå°±çŸ¥é“è¿™è¡Œä»£ç æ‰§è¡Œçš„æ¬¡æ•°äº†ã€‚é€šè¿‡2 ^ x=næ±‚è§£xè¿™ä¸ªé—®é¢˜æˆ‘ä»¬æƒ³é«˜ä¸­åº”è¯¥å°±å­¦è¿‡äº†ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ã€‚x=lognx=\\log nx=logn (ä»¥2ä¸ºåº•)æ‰€ä»¥ï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼šO(logn)O(\\log n)O(logn)(ä»¥2ä¸ºåº•)ç°åœ¨ï¼ŒæŠŠä»£ç ç¨å¾®æ”¹ä¸‹ï¼Œä½ å†çœ‹çœ‹ï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ1234i=1;while (i &lt;= n) &#123; i = i * 3;&#125;æ ¹æ®æˆ‘åˆšåˆšè®²çš„æ€è·¯ï¼Œå¾ˆç®€å•å°±èƒ½çœ‹å‡ºæ¥ï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(logn)O(logn)O(logn) (ä»¥3ä¸ºåº•)ã€‚å®é™…ä¸Šï¼Œä¸ç®¡æ˜¯ä»¥2ä¸ºåº•ã€ä»¥3ä¸ºåº•ï¼Œè¿˜æ˜¯ä»¥10ä¸ºåº•ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰å¯¹æ•°é˜¶çš„æ—¶é—´å¤æ‚åº¦éƒ½è®°ä¸ºO(logn)O(logn)O(logn)(ä»¥2ä¸ºåº•)ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Œæˆ‘çŸ¥é“æœ‰äº›äººå¿˜äº†ï¼Œä¸‹é¢æˆ‘å¸®ä½ è®ºè¯äº†ä¸€ä¸‹ï¼Œç”¨å¯¹æ•°çš„æ¢åº•å…¬å¼å°±å¯ä»¥äº†ï¼åŸºäºæˆ‘ä»¬å‰é¢çš„ä¸€ä¸ªç†è®ºï¼šåœ¨é‡‡ç”¨å¤§Oæ ‡è®°å¤æ‚åº¦çš„æ—¶å€™ï¼Œå¯ä»¥å¿½ç•¥ç³»æ•°ï¼Œå³O(Cf(n)) = O(f(n))ã€‚æ‰€ä»¥ï¼ŒO(logn)O(logn)O(logn) (ä»¥2ä¸ºåº•) å°±ç­‰äºO(logn)O(logn)O(logn) (ä»¥3ä¸ºåº•)ã€‚å› æ­¤ï¼Œåœ¨å¯¹æ•°é˜¶æ—¶é—´å¤æ‚åº¦çš„è¡¨ç¤ºæ–¹æ³•é‡Œï¼Œæˆ‘ä»¬å¿½ç•¥å¯¹æ•°çš„â€œåº•â€ï¼Œç»Ÿä¸€è¡¨ç¤ºä¸ºO(logn)O(logn)O(logn)ã€‚å¦‚æœä½ ç†è§£äº†æˆ‘å‰é¢è®²çš„O(logn)O(logn)O(logn)ï¼Œé‚£O(nlogn)O(nlogn)O(nlogn)å°±å¾ˆå®¹æ˜“ç†è§£äº†ã€‚è¿˜è®°å¾—æˆ‘ä»¬åˆšè®²çš„ä¹˜æ³•æ³•åˆ™å—ï¼Ÿå¦‚æœä¸€æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(logn)O(logn)O(logn)ï¼Œæˆ‘ä»¬å¾ªç¯æ‰§è¡Œnéï¼Œæ—¶é—´å¤æ‚åº¦å°±æ˜¯O(nlogn)O(nlogn)O(nlogn)äº†ã€‚è€Œä¸”ï¼ŒO(nlogn)O(nlogn)O(nlogn)ä¹Ÿæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦ã€‚æ¯”å¦‚ï¼Œå½’å¹¶æ’åºã€å¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(nlogn)O(nlogn)O(nlogn)ã€‚ 3.O(m+n)ã€O(m*n)æˆ‘ä»¬å†æ¥è®²ä¸€ç§è·Ÿå‰é¢éƒ½ä¸ä¸€æ ·çš„æ—¶é—´å¤æ‚åº¦ï¼Œä»£ç çš„å¤æ‚åº¦ç”±ä¸¤ä¸ªæ•°æ®çš„è§„æ¨¡æ¥å†³å®šã€‚è€è§„çŸ©ï¼Œå…ˆçœ‹ä»£ç ï¼123456789101112131415int cal(int m, int n) &#123; int sum_1 = 0; int i = 1; for (; i &lt; m; ++i) &#123; sum_1 = sum_1 + i; &#125; int sum_2 = 0; int j = 1; for (; j &lt; n; ++j) &#123; sum_2 = sum_2 + j; &#125; return sum_1 + sum_2;&#125;ä»ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œmå’Œnæ˜¯è¡¨ç¤ºä¸¤ä¸ªæ•°æ®è§„æ¨¡ã€‚æˆ‘ä»¬æ— æ³•äº‹å…ˆè¯„ä¼°må’Œnè°çš„é‡çº§å¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¡¨ç¤ºå¤æ‚åº¦çš„æ—¶å€™ï¼Œå°±ä¸èƒ½ç®€å•åœ°åˆ©ç”¨åŠ æ³•æ³•åˆ™ï¼Œçœç•¥æ‰å…¶ä¸­ä¸€ä¸ªã€‚æ‰€ä»¥ï¼Œä¸Šé¢ä»£ç çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(m+n)ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒåŸæ¥çš„åŠ æ³•æ³•åˆ™å°±ä¸æ­£ç¡®äº†ï¼Œæˆ‘ä»¬éœ€è¦å°†åŠ æ³•è§„åˆ™æ”¹ä¸ºï¼šT1(m) + T2(n) = O(f(m) + g(n))ã€‚ä½†æ˜¯ä¹˜æ³•æ³•åˆ™ç»§ç»­æœ‰æ•ˆï¼šT1(m)*T2(n) = O(f(m) * f(n))ã€‚ ç©ºé—´å¤æ‚åº¦åˆ†æå‰é¢ï¼Œå’±ä»¬èŠ±äº†å¾ˆé•¿æ—¶é—´è®²å¤§Oè¡¨ç¤ºæ³•å’Œæ—¶é—´å¤æ‚åº¦åˆ†æï¼Œç†è§£äº†å‰é¢è®²çš„å†…å®¹ï¼Œç©ºé—´å¤æ‚åº¦åˆ†ææ–¹æ³•å­¦èµ·æ¥å°±éå¸¸ç®€å•äº†å‰é¢æˆ‘è®²è¿‡ï¼Œæ—¶é—´å¤æ‚åº¦çš„å…¨ç§°æ˜¯æ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼Œè¡¨ç¤ºç®—æ³•çš„æ‰§è¡Œæ—¶é—´ä¸æ•°æ®è§„æ¨¡ä¹‹é—´çš„å¢é•¿å…³ç³»ã€‚ç±»æ¯”ä¸€ä¸‹ï¼Œç©ºé—´å¤æ‚åº¦å…¨ç§°å°±æ˜¯æ¸è¿›ç©ºé—´å¤æ‚åº¦ï¼ˆasymptotic space complexityï¼‰ï¼Œè¡¨ç¤ºç®—æ³•çš„å­˜å‚¨ç©ºé—´ä¸æ•°æ®è§„æ¨¡ä¹‹é—´çš„å¢é•¿å…³ç³»ã€‚æˆ‘è¿˜æ˜¯æ‹¿å…·ä½“çš„ä¾‹å­æ¥ç»™ä½ è¯´æ˜ã€‚ï¼ˆè¿™æ®µä»£ç æœ‰ç‚¹â€œå‚»â€ï¼Œä¸€èˆ¬æ²¡äººä¼šè¿™ä¹ˆå†™ï¼Œæˆ‘è¿™ä¹ˆå†™åªæ˜¯ä¸ºäº†æ–¹ä¾¿ç»™ä½ è§£é‡Šã€‚ï¼‰1234567891011void print(int n) &#123; int i = 0; int[] a = new int[n]; for (i; i &lt;n; ++i) &#123; a[i] = i * i; &#125; for (i = n-1; i &gt;= 0; --i) &#123; print out a[i] &#125;&#125;è·Ÿæ—¶é—´å¤æ‚åº¦åˆ†æä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç¬¬2è¡Œä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”³è¯·äº†ä¸€ä¸ªç©ºé—´å­˜å‚¨å˜é‡iï¼Œä½†æ˜¯å®ƒæ˜¯å¸¸é‡é˜¶çš„ï¼Œè·Ÿæ•°æ®è§„æ¨¡næ²¡æœ‰å…³ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¿½ç•¥ã€‚ç¬¬3è¡Œç”³è¯·äº†ä¸€ä¸ªå¤§å°ä¸ºnçš„intç±»å‹æ•°ç»„ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå‰©ä¸‹çš„ä»£ç éƒ½æ²¡æœ‰å ç”¨æ›´å¤šçš„ç©ºé—´ï¼Œæ‰€ä»¥æ•´æ®µä»£ç çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯O(n)ã€‚æˆ‘ä»¬å¸¸è§çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯O(1)ã€O(n)ã€O(n2 )ï¼ŒåƒO(logn)ã€O(nlogn)è¿™æ ·çš„å¯¹æ•°é˜¶å¤æ‚åº¦å¹³æ—¶éƒ½ç”¨ä¸åˆ°ã€‚è€Œä¸”ï¼Œç©ºé—´å¤æ‚åº¦åˆ†ææ¯”æ—¶é—´å¤æ‚åº¦åˆ†æè¦ç®€å•å¾ˆå¤šã€‚æ‰€ä»¥ï¼Œå¯¹äºç©ºé—´å¤æ‚åº¦ï¼ŒæŒæ¡åˆšæˆ‘è¯´çš„è¿™äº›å†…å®¹å·²ç»è¶³å¤Ÿäº†ã€‚ å°ç»“åŸºç¡€å¤æ‚åº¦åˆ†æçš„çŸ¥è¯†åˆ°æ­¤å°±è®²å®Œäº†ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ã€‚å¤æ‚åº¦ä¹Ÿå«æ¸è¿›å¤æ‚åº¦ï¼ŒåŒ…æ‹¬æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Œç”¨æ¥åˆ†æç®—æ³•æ‰§è¡Œæ•ˆç‡ä¸æ•°æ®è§„æ¨¡ä¹‹é—´çš„å¢é•¿å…³ç³»ï¼Œå¯ä»¥ç²—ç•¥åœ°è¡¨ç¤ºï¼Œè¶Šé«˜é˜¶å¤æ‚åº¦çš„ç®—æ³•ï¼Œæ‰§è¡Œæ•ˆç‡è¶Šä½ã€‚å¸¸è§çš„å¤æ‚åº¦å¹¶ä¸å¤šï¼Œä»ä½é˜¶åˆ°é«˜é˜¶æœ‰ï¼šO(1)ã€O(logn)ã€O(n)ã€O(nlogn)ã€O(n2 )ã€‚ç­‰ä½ å­¦å®Œæ•´ä¸ªä¸“æ ä¹‹åï¼Œä½ å°±ä¼šå‘ç°å‡ ä¹æ‰€æœ‰çš„æ•°æ®ç»“æ„å’Œç®—æ³•çš„å¤æ‚åº¦éƒ½è·‘ä¸å‡ºè¿™å‡ ä¸ªã€‚å¤æ‚åº¦åˆ†æå¹¶ä¸éš¾ï¼Œå…³é”®åœ¨äºå¤šç»ƒã€‚ ä¹‹åè®²åé¢çš„å†…å®¹æ—¶ï¼Œæˆ‘è¿˜ä¼šå¸¦ä½ è¯¦ç»†åœ°åˆ†ææ¯ä¸€ç§æ•°æ®ç»“æ„å’Œç®—æ³•çš„æ—¶é—´ã€ç©ºé—´å¤æ‚åº¦ã€‚åªè¦è·Ÿç€æˆ‘çš„æ€è·¯å­¦ä¹ ã€ç»ƒä¹ ï¼Œä½ å¾ˆå¿«å°±èƒ½å’Œæˆ‘ä¸€æ ·ï¼Œæ¯æ¬¡çœ‹åˆ°ä»£ç çš„æ—¶å€™ï¼Œç®€å•çš„ä¸€çœ¼å°±èƒ½çœ‹å‡ºå…¶å¤æ‚åº¦ï¼Œéš¾çš„ç¨å¾®åˆ†æä¸€ä¸‹å°±èƒ½å¾—å‡ºç­”æ¡ˆã€‚è½¬è‡ªã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ã€‹â€“ç‹äº‰","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"Hbaseè¯»å†™æ“ä½œ","slug":"2019-06-28-Hbaseè¯»å†™æ“ä½œ","date":"2019-06-28T14:18:20.000Z","updated":"2019-11-29T12:20:47.700Z","comments":true,"path":"2019/06/28/2019-06-28-Hbaseè¯»å†™æ“ä½œ/","link":"","permalink":"yihao.ml/2019/06/28/2019-06-28-Hbaseè¯»å†™æ“ä½œ/","excerpt":"","text":"HDFSã€MRè§£å†³äº†åˆ†å¸ƒå¼å­˜å‚¨å’Œåˆ†å¸ƒå¼è®¡ç®—é—®é¢˜ï¼Œä½†æ˜¯ç”±äºHDFSçš„éšæœºè¯»å†™èƒ½åŠ›å¤ªå·®ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ä½œä¸ºæ•°æ®åº“ã€‚Hbaseæ˜¯ä¸ºäº†åº”å¯¹è¿™ç‚¹è€Œè¯ç”Ÿçš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€é«˜å¯é ã€å¯ä¼¸ç¼©ã€é¢å‘åˆ—çš„åˆ†å¸ƒå¼å­˜å‚¨æ•°æ®åº“ï¼Œç»“åˆZookeeperå¯ä»¥è§£å†³HDFSéšæœºè¯»å†™èƒ½åŠ›å·®çš„é—®é¢˜ã€‚é‚£ä¹ˆå®ƒåˆ°åº•æ˜¯æ€ä¹ˆè§£å†³éšæœºè¯»å†™èƒ½åŠ›å¤ªå·®çš„é—®é¢˜å‘¢ï¼Ÿè¯•æƒ³ä¸€ä¸‹å¦‚æœæƒ³è¦1S å¾€æŸä¸ªæ–‡ä»¶ä¸­æ’å…¥100æ¡è®°å½•ï¼Œå¦‚æœæ²¡æœ‰HBaseï¼Œç”¨Javaä»£ç å†™ä¼šæ˜¯ä¸€ç§ä»€ä¹ˆæ ·çš„æ“ä½œï¼Ÿå¯èƒ½æˆ‘ä»¬éœ€è¦100æ¬¡çš„IOæ‰èƒ½æå®šã€‚ä½†ä¸Šé¢å‡è®¾ä¸€å±‚ç¼“å†²å±‚ç”¨æ¥ç¼“å­˜ä¸€ä¸‹ï¼Œ å½“ç¼“å†²æ± æ»¡äº†ä»¥åå†å¾€æ–‡ä»¶ä¸­å†™ï¼Œä¼šä¸ä¼šå¥½å¾ˆå¤šï¼Ÿä»¥Mysqlä¸ºä¾‹ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“Mysqlçš„è¡¨ï¼Œåº“ç­‰æ•°æ®æœ€ç»ˆéƒ½ä¼šè½åœ¨ç£ç›˜ä¸Šï¼ŒMysqlåªä¸è¿‡æ˜¯æ¶è®¾åœ¨OSæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä¸€æ¬¾è§£æè½¯ä»¶è€Œå·²ï¼Œå¸®å‡†ä½ ç”¨æµå®Œæˆæ–‡ä»¶çš„è¯»å†™ã€‚HDFSç›¸å½“äºOSæ–‡ä»¶ç³»ç»Ÿï¼ŒHBaseå’ŒMysqlä¸€æ ·ç›¸å½“äºä¸€ä¸ªè§£æå™¨ã€‚ Hbaseæ¶æ„å›¾è¢«ç½‘ä¸Šçš„å›¾ç‰‡å‘çš„å¾ˆï¼ŒHLogç»„ä»¶åº”è¯¥å½’å±äºHRegionServerç®¡ï¼Œä½†æ˜¯å›¾ä¸­å´æŠŠHLogç”»åˆ°äº†HRegionä¸­ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç‰ˆæœ¬é—®é¢˜ï¼Ÿä¸‹é¢çš„å›¾æ‘˜è‡ªã€ŠHBaseæƒå¨æŒ‡å—ã€‹ å†™æ“ä½œå½“Clientå‘HRegionServerå‘èµ·putè¯·æ±‚æ—¶ï¼Œå…¶å°†ä¼šäº¤ç»™å¯¹åº”çš„HRegionæ¥å¤„ç†é¦–å…ˆHRegionä¼šçœ‹æ˜¯å¦éœ€è¦å†™å…¥HLogï¼ˆWALç”¨äºåšæ•°æ®æ¢å¤å’Œæ•°æ®å›æ»šï¼‰å½“æ•°æ®æŒä¹…åŒ–åˆ°HLogåï¼Œæ•°æ®ä¼šè¢«ç›´æ¥å†™åˆ°MemStoreä¸­ï¼Œå¹¶æ£€æŸ¥MemStoreæ˜¯å¦æ»¡äº†ï¼Œå¦‚æœæ»¡äº†ï¼Œæ•°æ®ä¼šè¢«åˆ·åˆ°HDFSä¸Šä»¥HFileæ–‡ä»¶ç±»å‹å­˜å‚¨ï¼Œè¿™ä¸ªæ“ä½œç”±å¦ä¸€ä¸ªHRegionServerçš„çº¿ç¨‹å¤„ç†ï¼ŒåŒæ—¶ä¼šä¿å­˜æœ€åå†™å…¥åºå·ï¼Œç³»ç»Ÿå°±çŸ¥é“å“ªäº›æ•°æ®è¢«æŒä¹…åŒ–äº†ã€‚æ‘˜è‡ªã€ŠHBaseæƒå¨æŒ‡å—ã€‹â€“8.2.2å†™è·¯å¾„ è¯»æ“ä½œå¾ˆçº³é—·ä¸ºå•¥HBaseæƒå¨æŒ‡å—é‡Œé¢æ²¡æ‰¾åˆ°è¯»æ•°æ®çš„ç« èŠ‚ï¼Œä¸‹é¢æ‘˜è‡ªç½‘ç»œæµè½¬çš„è¯´æ³•ï¼Œå…·ä½“éœ€è¦çœ‹ä¸€ä¸‹æºç éªŒè¯é¦–å…ˆClientå‘HRegionServerå‘é€Getè¯·æ±‚ï¼ŒHRegionå°†å…¶è¯·æ±‚æäº¤ç»™å¯¹åº”çš„HRegionHRegionä¼šå…ˆä»MemStoreä¸­æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å›ï¼Œå¦‚æœæ²¡æœ‰æˆ–è€…æ•°æ®ä¸å…¨ï¼Œåˆ™å»StoreFileä¸­å¯»æ‰¾","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"HBase","slug":"HBase","permalink":"yihao.ml/tags/HBase/"}]},{"title":"è½»åŠå…¬ç¥å™¨","slug":"2019-06-28-è½»åŠå…¬ç¥å™¨","date":"2019-06-28T14:18:20.000Z","updated":"2019-11-29T12:20:47.701Z","comments":true,"path":"2019/06/28/2019-06-28-è½»åŠå…¬ç¥å™¨/","link":"","permalink":"yihao.ml/2019/06/28/2019-06-28-è½»åŠå…¬ç¥å™¨/","excerpt":"","text":"æ¨èAPP Termiuusã€Working copyã€Textastic","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[]},{"title":"åˆ†å¸ƒå¼ç¼“å­˜å°ç»“","slug":"2019-05-13-åˆ†å¸ƒå¼ç¼“å­˜æ€»ç»“","date":"2019-05-13T22:41:00.000Z","updated":"2019-11-29T12:20:47.700Z","comments":true,"path":"2019/05/13/2019-05-13-åˆ†å¸ƒå¼ç¼“å­˜æ€»ç»“/","link":"","permalink":"yihao.ml/2019/05/13/2019-05-13-åˆ†å¸ƒå¼ç¼“å­˜æ€»ç»“/","excerpt":"","text":"ç¼“å­˜æ˜¯æé«˜æœåŠ¡è®¿é—®é€Ÿåº¦çš„æœ€æœ‰æ•ˆçš„é€”å¾„ä¹‹ä¸€ï¼Œä¸‹é¢å¯¹ç¼“å­˜çš„åŸºæœ¬åŸç†ä»¥åŠä½¿ç”¨åšä¸€ä¸ªå°ç»“ã€‚ ç¼“å­˜çš„åŸºæœ¬åŸç†ç¼“å­˜æŒ‡å°†æ•°æ®å­˜å‚¨åœ¨ç›¸å¯¹è¾ƒé«˜è®¿é—®é€Ÿåº¦çš„å­˜å‚¨ä»‹è´¨ä¸­ï¼Œä»¥ä¾›ç³»ç»Ÿå¤„ç†;ç¼“å­˜çš„æœ¬è´¨æ˜¯ä¸€ä¸ªå†…å­˜Hashè¡¨ï¼Œæ•°æ®ç¼“å­˜æ˜¯ä»¥KVå½¢å¼å­˜å‚¨åœ¨å†…å­˜çš„Hashè¡¨ä¸­ï¼ŒHashè¡¨æ•°æ®è¯»å†™çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œå¯ä»¥å‚è€ƒä¸‹å›¾åŠ æ·±ç†è§£ï¼Œå›¾ç‰‡æ‘˜è‡ª-ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„ï¼šæ ¸å¿ƒåŸç†ä¸æ¡ˆä¾‹åˆ†æã€‹ä¸‹å›¾ä¸ºæ˜¯åº”ç”¨åˆ°ä»£ç ä¸­æ—¶çš„é€»è¾‘å›¾ åˆç†ä½¿ç”¨ç¼“å­˜ç¼“å­˜è™½ç„¶æœ‰å¾ˆå¤šå¥½å¤„ï¼Œä½†æ˜¯ä¸åˆç†çš„ä½¿ç”¨ç¼“å­˜åè€Œä¼šå¸®å€’å¿™ï¼Œæˆä¸ºç³»ç»Ÿç´¯èµ˜ã€‚ä½œä¸ºä¸€ä¸ªåˆæ ¼çš„å¼€å‘è€…ï¼Œæœ‰å¿…è¦ææ¸…æ¥šå…¶åº”ç”¨ç‚¹ï¼Œä»¥åŠåœ¨åº”ç”¨æ—¶çš„æ³¨æ„äº‹é¡¹ï¼Œä¸‹é¢å¯¹å…¶è¿›è¡Œç®€å•å°ç»“ã€‚é¢‘ç¹ä¿®æ”¹çš„æ•°æ®é¢‘ç¹ä¿®æ”¹çš„æ•°æ®ä¸å®œå­˜å…¥ç¼“å­˜ï¼Œå¦‚æœä½ è¿™ä¹ˆåšäº†ï¼Œæ•°æ®åœ¨å­˜å…¥ç¼“å­˜åï¼Œåº”ç”¨è¿˜æ¥ä¸åŠè®¿é—®ï¼Œå°±å·²ç»å†æ¬¡å¤±æ•ˆäº†ï¼Œé€”å¢ç³»ç»Ÿè´Ÿæ‹…ã€‚æ²¡æœ‰çƒ­ç‚¹è®¿é—®çš„æ•°æ®å†…å­˜å¾€å¾€æ˜¯æœ‰é™çš„ï¼Œåœ¨å¾€å†…å­˜å­˜å‚¨æ—¶ï¼Œè‹¥ redis æ£€æµ‹åˆ°å·²ç»æ²¡æœ‰è¶³å¤Ÿç©ºé—´å†å®¹çº³æ–°å¢åŠ æ•°æ®æ—¶ï¼Œä¼šå°†é•¿æœŸæœªä½¿ç”¨çš„æ•°æ®æ¸…ç†å‡ºç¼“å­˜ã€‚è¯•æƒ³ä¸€ä¸‹ç¼“å­˜è¢«å¤§é‡éçƒ­ç‚¹æ•°æ®ï¼Œä¼šæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿå¯èƒ½æ•°æ®è¿˜æ²¡æœ‰å†æ¬¡è¢«è®¿é—®å°±å·²ç»è¢«æŒ¤å‡ºç¼“å­˜ã€‚åœ¨ä¸ºæ•°æ®åšç¼“å­˜æ—¶è¦éµå®ˆäºŒå…«åŸåˆ™ï¼Œå¤§éƒ¨åˆ†è®¿é—®çš„æ•°æ®æ²¡æœ‰é›†ä¸­åœ¨å°éƒ¨åˆ†æ•°æ®ä¸Šï¼Œé‚£ä¹ˆç¼“å­˜å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚æ•°æ®çš„ä¸ä¸€è‡´æ€§å’Œè„è¯»æˆ‘ä»¬ä¼šè§åˆ°æŸè´­ç‰©å¹³å°åº—å®¶ä¿®æ”¹äº†å•†å“ï¼Œä½†å‰å°å¹¶æœªå®æ—¶æ›´æ–°æ•°æ®ï¼Œè¿™ç§ç°è±¡ç§°ä¸ºæ•°æ®çš„ä¸ä¸€è‡´å’Œè„è¯»ã€‚ç¼“å­˜å†…ä¼šç»™æ•°æ®è®¾ç½®è¿‡Â­æœŸæ—¶é—´ï¼Œå½“æ•°æ®è¿‡æœŸåä¼šé‡æ–°åŠ è½½æ•°æ®åº“æ•°Â­æ®åˆ°ç¼“å­˜ï¼Œæ‰€ä»¥å¾€å¾€ä¼šæœ‰ä¸€å®šå»¶æ—¶ã€‚åœ¨äº’è”ç½‘è¡Œä¸šä¸­ï¼Œè¿™ç§å»¶æ—¶æ˜¯å¯ä»¥è¢«æ¥å—çš„ã€‚ä½†å‡å¦‚äº§å“äººå‘˜è¡¨ç¤ºéè¦ä¼˜åŒ–ï¼Œé‚£ä¹ˆä¹Ÿæœ‰åº”å¯¹æ–¹æ¡ˆï¼Œå°±æ˜¯åšå®æ—¶æ›´æ–°åŒæ­¥ç¼“å­˜ï¼Œä½†è¿™ç§åšæ³•ä¼šå¸¦æ¥æ›´å¤šçš„ç³»ç»Ÿå¼€é”€å’Œæ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚ç¼“å­˜çš„é«˜å¯ç”¨åœ¨å…¬å¸ä¸­ï¼Œå¯èƒ½ä¼šå‘ç°å¯¹äºä¸šåŠ¡åœºæ™¯ï¼Œå•å° redis ç¼“å­˜æœåŠ¡å³å¯æ»¡è¶³æ—¥å¸¸éœ€è¦ã€‚ä½†éšç€ä¸šåŠ¡ä¸æ–­æ‰©å±•ï¼Œå¯èƒ½å°±ä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ã€‚æ¯”å¦‚å½“ redis æœåŠ¡å®•æœºæ—¶ï¼Œæ•´ä¸ªæœåŠ¡å™¨çš„ä¸šåŠ¡å‹åŠ›ä¼šè½åœ¨æ•°æ®Â­åº“æœåŠ¡å™¨ä¸Šã€‚è¿™ç§å‹åŠ›çš„çªç„¶é£™å‡å¾ˆæœ‰å¯èƒ½é€ æˆæœåŠ¡å®•æœºï¼Œè€Œä¸”è¿™ç§å®•æœºå¹¶ä¸æ˜¯ç®€å•çš„ç›´æ¥é‡èµ·æœåŠ¡å°±å¯ä»¥è§£å†³çš„ã€‚å¯¹äºè¿™ç§é—®é¢˜ä¸€äº›äººå¯èƒ½ä¼šä½¿ç”¨çƒ­å¤‡æœåŠ¡å™¨å»è§£å†³ï¼Œå½“ä¸»ç¼“å­˜æœåŠ¡å®•æ‰åï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ä»½ç¼“å­˜æœåŠ¡å™¨ï¼Œä½†æ˜¯è¿™æ ·åš è¿èƒŒäº†ç¼“å­˜è®¾è®¡çš„åˆè¡·ï¼Œæ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ä½¿ç”¨åˆ†å¸ƒå¼ç¼“å­˜ï¼Œæ•°æ®ä¼šè¢«ç¼“å­˜åœ¨å¤šå°æœºå™¨ä¸Šï¼Œå½“æŸå°æœºå™¨ä¸å¯ç”¨æ—¶åªæ˜¯éƒ¨åˆ†æ•°æ®ä¸å¯ç”¨ï¼Œé‡æ–°å¯åŠ¨å³å¯ã€‚ç¼“å­˜é¢„çƒ­ç¼“å­˜ä¸­å­˜æ”¾çš„æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œçƒ­ç‚¹æ•°æ®åˆæ˜¯ç¼“å­˜ç³»ç»Ÿåˆ©ç”¨LRUç®—æ³•å¯¹ä¸æ–­è®¿é—®çš„æ•°æ®ç­›é€‰æ·˜æ±°å‡ºæ¥çš„ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦èŠ±è´¹è¾ƒé•¿çš„æ—¶é—´ã€‚æ–°å¯åŠ¨çš„ç¼“å­˜ç³»ç»Ÿå¦‚æœæ²¡æœ‰ä»»ä½•æ•°æ®ï¼Œåœ¨é‡å»ºç¼“å­˜æ•°æ®è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿçš„æ€§èƒ½å’Œæ•°æ®åº“è´Ÿè½½éƒ½ä¸ä¼šå¤ªå¥½ï¼Œé‚£ä¹ˆæœ€å¥½åœ¨ç¼“å­˜ç³»ç»Ÿå¯åŠ¨æ—¶å°±æŠŠæ•°æ®åŠ è½½å¥½ï¼Œè¿™ç§æ‰‹æ®µå«ç¼“å­˜çš„é¢„çƒ­ã€‚ä¾‹å¦‚æ·˜å®åŒåä¸€ï¼Œå¼€å‘äººå‘˜ä¼šæå‰ä¸€ä¸ªæœˆé¢„çƒ­å¤§é‡çš„ç¼“å­˜æ•°æ®ã€‚ç¼“å­˜ç©¿é€å¯¹äºè®¿é—®æ•°æ®åº“æ²¡æœ‰çš„æ•°æ®ï¼Œå¯èƒ½ä¸€äº›å¼€å‘äººå‘˜çš„åšæ³•æ˜¯ç›´æ¥è¿”å›åˆ°å‰å°ï¼Œä½†æ˜¯è¿™ç§åšæ³•æ˜¯ä¸æ­£ç¡®çš„ã€‚æ­£ç¡®çš„åšæ³•åº”æ˜¯å°†å…¶keyç¼“å­˜èµ·æ¥value è®¾ç½®ä¸ºNULLå³å¯ã€‚","categories":[{"name":"åˆ†å¸ƒå¼","slug":"åˆ†å¸ƒå¼","permalink":"yihao.ml/categories/åˆ†å¸ƒå¼/"}],"tags":[]},{"title":"Hbase ThriftServerè®¿é—®å†…ç½‘HBase","slug":"2019-05-10-Hbase-ThriftServerè®¿é—®å†…ç½‘HBase","date":"2019-05-10T17:59:00.000Z","updated":"2019-11-29T12:20:47.699Z","comments":true,"path":"2019/05/10/2019-05-10-Hbase-ThriftServerè®¿é—®å†…ç½‘HBase/","link":"","permalink":"yihao.ml/2019/05/10/2019-05-10-Hbase-ThriftServerè®¿é—®å†…ç½‘HBase/","excerpt":"","text":"æœ¬åœ°é›†ç¾¤ç¯å¢ƒæ¶æ„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º:å®ç°thriftClientä¸thriftServeré€šä¿¡ï¼Œå®ç°è®¿é—®å†…ç½‘HBaseé›†ç¾¤118.166.152.33å’Œ101.118.124.111 åˆ†åˆ«ä¸ºå…¬ç½‘IP,192.168.5.2/3/4åˆ†åˆ«ä¸ºå†…ç½‘IP åŸŸåæ˜ å°„é¦–å…ˆæˆ‘ä»¬è¦åšçš„æ˜¯å°†ThriftServeræœåŠ¡çš„é€šä¿¡ç«¯å£9000 æ˜ å°„åˆ°å†…ç½‘ä¸­ï¼Œè¿™è¾¹æ˜ å°„æˆäº†å…¬ç½‘çš„9000ç«¯å£ thriftä¸‹é¢æ˜¯Thriftçš„ç™¾åº¦ç™¾ç§‘Thriftæ˜¯ä¸€ç§æ¥å£æè¿°è¯­è¨€å’ŒäºŒè¿›åˆ¶é€šè®¯åè®®ï¼Œå®ƒè¢«ç”¨æ¥å®šä¹‰å’Œåˆ›å»ºè·¨è¯­è¨€çš„æœåŠ¡ã€‚å®ƒè¢«å½“ä½œä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶æ¥ä½¿ç”¨ï¼Œæ˜¯ç”±Facebookä¸ºâ€œå¤§è§„æ¨¡è·¨è¯­è¨€æœåŠ¡å¼€å‘â€è€Œå¼€å‘çš„ã€‚Thriftæ”¯æŒä¼—å¤šé€šè®¯åè®®ï¼šTBinaryProtocol â€“ ä¸€ç§ç®€å•çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œç®€å•ï¼Œä½†æ²¡æœ‰ä¸ºç©ºé—´æ•ˆç‡è€Œä¼˜åŒ–ã€‚æ¯”æ–‡æœ¬åè®®å¤„ç†èµ·æ¥æ›´å¿«ï¼Œä½†æ›´éš¾äºè°ƒè¯•ã€‚TCompactProtocol â€“ æ›´ç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¤„ç†èµ·æ¥é€šå¸¸åŒæ ·é«˜æ•ˆã€‚æƒ³äº†è§£æ›´å¤šç™¾åº¦ç™¾ç§‘æ”¯æŒçš„ä¼ è¾“åè®®æœ‰ï¼šTFramedTransport â€“ å½“ä½¿ç”¨ä¸€ä¸ªéé˜»å¡æœåŠ¡å™¨æ—¶ï¼Œè¦æ±‚ä½¿ç”¨è¿™ä¸ªä¼ è¾“åè®®ã€‚å®ƒæŒ‰å¸§æ¥å‘é€æ•°æ®ï¼Œå…¶ä¸­æ¯ä¸€å¸§çš„å¼€å¤´æ˜¯é•¿åº¦ä¿¡æ¯ã€‚TSocket â€“ ä½¿ç”¨é˜»å¡çš„å¥—æ¥å­—I/Oæ¥ä¼ è¾“ã€‚æƒ³äº†è§£æ›´å¤šç™¾åº¦ç™¾ç§‘HBase ThriftServeræœ‰ä¸‹é¢ä¸¤ä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šæ˜¯å¦ä½¿ç”¨TFramedTransportåè®®,é»˜è®¤æ˜¯falseè¿™è¾¹CDHä¸­ä¸ç”¨å¼€å¯hbase.regionserver.thrift.framedUse Thrift TFramedTransport on the server side. This is the recommended transport for thrift servers and requires a similar setting on the client side. Changing this to false will select the default transport, vulnerable to DoS when malformed requests are issued due to THRIFT-601.hbase.regionserver.thrift.compactUse Thrift TCompactProtocol binary serialization protocol.ä¸‹é¢å‚æ•°ç”¨æ¥é…ç½®Thrift Gatewayçš„è®¤è¯ï¼Œå¦‚æœä½ é…äº†è¿™ä¸ªä¸œè¥¿å°±å¿…é¡»ç”¨doAså®Œæˆè®¤è¯æ‰èƒ½å®Œæˆé€šä¿¡12345678&lt;property&gt; &lt;name&gt;hbase.regionserver.thrift.http&lt;/name&gt; &lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hbase.thrift.support.proxyuser&lt;/name&gt; &lt;value&gt;true/value&gt;&lt;/property&gt;æƒ³äº†è§£æ›´å¤šConfigure the Thrift Gateway to Use the doAs Featureï¼Œçœ‹59.6ç« èŠ‚æˆ‘è¿™è¾¹éƒ½æ²¡æœ‰å¼€å¯å¦‚ä¸‹å›¾ Clientå®¢æˆ·ç«¯å¯ä»¥ç”¨pythonæˆ–è€…æ˜¯Javaä¸ThriftServerè¿›è¡Œé€šä¿¡ã€‚å€¼å¾—ä¸€æçš„æ˜¯python3 åœ¨è®¿é—®æ—¶ä¼šæŠ›å¼‚å¸¸ï¼Œè¿™è¾¹åˆæ­¥æŸ¥äº†ä¸€ä¸‹ä¹Ÿæœ‰è§£å†³æ–¹æ¡ˆï¼Œè¿™è¾¹å°±å…ˆç”¨python2.7è¿›è¡Œæµ‹è¯•ï¼Œä¸‹é¢æ˜¯ä»£ç ç¤ºä¾‹:python123456789101112131415161718192021222324#!/usr/bin/pythonfrom common import *from thrift.transport import TSocketfrom thrift.protocol import TBinaryProtocolfrom thrift.transport import TTransportfrom hbase import Hbase# Connect to HBase Thrift servertransport = TTransport.TBufferedTransport(TSocket.TSocket(\"101.118.124.111\", \"9090\"))protocol = TBinaryProtocol.TBinaryProtocolAccelerated(transport)# Create and open the client connectionclient = Hbase.Client(protocol)transport.open()rows = client.getRow(\"cars\", \"row1\")for row in rows: rowKey = row.row print(\"Got row:\" + rowKey);# Close the client connectiontransport.close()java1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192package com.bim.hbase;import org.apache.hadoop.hbase.thrift.generated.AlreadyExists;import org.apache.hadoop.hbase.thrift.generated.Hbase;import org.apache.hadoop.hbase.thrift.generated.ColumnDescriptor;import org.apache.thrift.transport.*;import org.apache.thrift.protocol.*;import org.apache.thrift.protocol.TCompactProtocol;import org.apache.thrift.transport.TFramedTransport;import java.io.*;import java.util.ArrayList;import java.util.List;import java.nio.ByteBuffer;import java.nio.charset.Charset;import java.util.Properties;public class HbaseThriftTest &#123; private static String host; private static Integer port; public static void init()&#123; Properties properties = new Properties(); InputStream in = null; try &#123; in = HbaseThriftTest.class.getClassLoader().getResourceAsStream(\"system.properties\"); properties.load(in); host = properties.getProperty(\"hbase.thrift.host\"); port = Integer.parseInt(properties.getProperty(\"hbase.thrift.port\")); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;finally &#123; if(in != null) &#123; try &#123; in.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; public static void main(String[] args) throws Exception &#123; init(); String Proto = \"binary\"; String TableName = \"t1\"; String ColFamily = \"rowkey002\"; // setup the hbase thrift connection TTransport Transport; Transport = new TSocket(host, port); TCompactProtocol FProtocol = new TCompactProtocol(Transport); Hbase.Client Client = new Hbase.Client(FProtocol); if (Proto.equals(\"binary\")) &#123; TProtocol Protocol = new TBinaryProtocol(Transport, true, true); Client = new Hbase.Client(Protocol); &#125; else if ( Proto.equals(\"framed\")) &#123; Transport = new TFramedTransport(new TSocket(host, port)); TProtocol Protocol = new TBinaryProtocol(Transport, true, true); Client = new Hbase.Client(Protocol); &#125; else if ( ! Proto.equals(\"compact\")) &#123; System.out.println(\"Protocol must be compact or framed or binary\"); &#125; Transport.open(); // prepare the column family List&lt;ColumnDescriptor&gt; Columns = new ArrayList&lt;ColumnDescriptor&gt;(); ColumnDescriptor col = new ColumnDescriptor(); col.name = ByteBuffer.wrap(ColFamily.getBytes()); Columns.add(col); // dump existing tables System.out.println(\"#~ Dumping Existing tables\"); for (ByteBuffer tn : Client.getTableNames()) &#123; System.out.println(\"-- found: \" + new String(tn.array(), Charset.forName(\"UTF-8\"))); &#125; // create the new table System.out.println(\"#~ Creating table: \" + TableName); try &#123; Client.createTable(ByteBuffer.wrap(TableName.getBytes()), Columns); &#125; catch (AlreadyExists ae) &#123; System.out.println(\"WARN: \" + ae.message); &#125; Transport.close(); &#125;&#125;ä¸‹é¢æ˜¯system.properties12hbase.thrift.host=101.118.124.111hbase.thrift.port=9090","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Hbase","slug":"Hbase","permalink":"yihao.ml/tags/Hbase/"}]},{"title":"åˆ†å¸ƒå¼ç³»ç»Ÿçš„çŸ¥è¯†ç»“æ„æ€»ç»“","slug":"2019-05-09-åˆ†å¸ƒå¼ç³»ç»Ÿçš„çŸ¥è¯†ç»“æ„æ€»ç»“","date":"2019-05-09T12:47:14.000Z","updated":"2019-11-29T12:20:47.699Z","comments":true,"path":"2019/05/09/2019-05-09-åˆ†å¸ƒå¼ç³»ç»Ÿçš„çŸ¥è¯†ç»“æ„æ€»ç»“/","link":"","permalink":"yihao.ml/2019/05/09/2019-05-09-åˆ†å¸ƒå¼ç³»ç»Ÿçš„çŸ¥è¯†ç»“æ„æ€»ç»“/","excerpt":"","text":"æ„ä»¶åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç›®çš„æ˜¯å¢åŠ ç³»ç»Ÿå®¹é‡ï¼Œæé«˜ç³»ç»Ÿå¯ç”¨æ€§ã€‚è½¬æ¢æˆæŠ€æœ¯æ–¹é¢å°±æ˜¯å®Œæˆä¸‹é¢ä¸¤ä»¶äº‹å¤§æµé‡å¤„ç†ã€‚æ‰€è°“å¤§æµé‡å¤„ç†å°±æ˜¯åˆ©ç”¨é›†ç¾¤æŠ€æœ¯å°†å¤§é‡çš„å¹¶å‘è¯·æ±‚åˆ†å‘åˆ°ä¸åŒæœºå™¨ä¸Šå…³é”®ä¸šåŠ¡ä¿æŠ¤ã€‚æé«˜ç³»ç»Ÿå¯ç”¨æ€§ï¼Œæ‰€ä»¥éœ€è¦å°†æ•…éšœéš”ç¦»èµ·æ¥ï¼Œé˜²æ­¢é›ªå´©æ•ˆåº”å¼•èµ·çš„æ•´ä½“æœåŠ¡æ— æ³•æ­£å¸¸æœåŠ¡ã€‚è¯´ç™½äº†å°±æ˜¯å¹²ä¸¤ä»¶äº‹ï¼Œä¸€æ˜¯æé«˜ç³»ç»Ÿæ¶æ„çš„ååé‡ï¼ŒæœåŠ¡æ›´å¤šçš„å¹¶å‘æµé‡ï¼›äºŒæ˜¯ä¸ºäº†æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œè®©ç³»ç»Ÿçš„å¯ç”¨æ€§æ›´é«˜ï¼›ä¸‹é¢ä»ç³»ç»Ÿçš„æ€§èƒ½å’Œç³»ç»Ÿçš„ç¨³å®šæ€§æ¥è¯´ä¸€ä¸‹åœ¨åˆ†å¸ƒå¼ä¸‹éœ€è¦å®Œæˆçš„äº‹æƒ…ã€‚ ç³»ç»Ÿæ€§èƒ½ç³»ç»Ÿæ€§èƒ½å¯ä»¥ä»ä¸‹é¢äº”ä¸ªæ–¹é¢å…¥æ‰‹æ¥åšæ•´ä½“ä¼˜åŒ–ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯ï¼šç¼“å­˜è´Ÿè½½å‡è¡¡å¼‚æ­¥æ•°æ®åˆ†åŒºæ•°æ®é•œåƒ ç¼“å­˜ä»å‰å°åˆ°åå°å†åˆ°æ•°æ®åº“ï¼Œéƒ½æœ‰ç¼“å­˜ã€‚ç¼“å­˜æ˜¯æé«˜æœåŠ¡å“åº”é€Ÿåº¦çš„æœ€ç›´æ¥æ‰‹æ®µï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨MemCacheã€redisæ¥æ„ä»¶åˆ†å¸ƒå¼ç¼“å­˜ã€‚ç›®å‰ä»å¸‚é¢ä¸Šçœ‹æ¥å¤§å®¶éƒ½æ›´å–œæ¬¢redisï¼Œè¿™å…¶ä¸­éœ€è¦ä¸€ä¸ªProxyæ¥åšç¼“å­˜çš„åˆ†ç‰‡å’Œè·¯ç”±ã€‚ è´Ÿè½½å‡è¡¡è´Ÿè½½å‡è¡¡æ˜¯æ°´å¹³æ‹“å±•çš„å…³é”®æŠ€æœ¯ï¼Œå®ƒå¯ä»¥æ˜¯å¤šå°æœºå™¨å…±åŒåˆ†æ‹…ä¸€éƒ¨åˆ†æµé‡è¯·æ±‚ã€‚ å¼‚æ­¥å¼‚æ­¥è¿™å—ä¸»è¦æ˜¯é€šè¿‡å¼‚æ­¥é˜Ÿåˆ—å¯¹è¯·æ±‚åšæ’é˜Ÿå¤„ç†ï¼Œè¿™è¾¹æœ‰å¾ˆå¤šä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚å¯ä»¥æŠŠå‰ç«¯å¹¶å‘è¯·æ±‚çš„å³°å€¼ç»™â€œå‰Šå¹³â€äº†ï¼Œè®©åç«¯é€šè¿‡è‡ªå·±èƒ½å¤Ÿå¤„ç†çš„é€Ÿåº¦æ¥å¤„ç†è¯·æ±‚ï¼Œè¿›è€Œæ¥å¢åŠ ç³»ç»Ÿçš„ååé‡ï¼Œä½†è¿™é€šå¸¸æ¯”è¾ƒé€‚ç”¨äºå®æ—¶æ€§ä¸æ˜¯å¾ˆé«˜çš„åœºæ™¯ï¼›å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—åï¼Œå¯èƒ½ä¼šå‡ºç°æ¶ˆæ¯ä¸¢å¤±çš„é—®é¢˜ï¼Œè¿™å°±è¢«è¿«æˆ‘ä»¬ä¸å¾—ä¸å»åšæ¶ˆæ¯çš„æŒä¹…åŒ–ï¼ŒæŒä¹…åŒ–ä¼šé€ æˆæœ‰â€œçŠ¶æ€â€çš„èŠ‚ç‚¹ï¼Œä»è€Œå¢åŠ æœåŠ¡è°ƒåº¦çš„éš¾åº¦ã€‚ æ•°æ®åˆ†åŒº/é•œåƒæ•°æ®åˆ†åŒºå’Œæ•°æ®é•œåƒå¯ä»¥æ”¾åœ¨ä¸€èµ·ï¼Œæ•°æ®åˆ†åŒºå°±æ˜¯å°†æ•°æ®æŒ‰ç…§æŸç§å›ºå®šçš„æ–¹å¼åˆ†æˆå¤šä¸ªåŒºã€‚æ¯”å¦‚æŒ‰ç…§åœ°åŒºæ¥åˆ†ï¼Œè¿™æ ·éœ€è¦ä¸€ä¸ªæ•°æ®è·¯ç”±çš„ä¸­é—´ä»¶ï¼Œä¸åŒåœ°åŒºæ¥è®¿é—®ä¸åŒåŒºåŸŸçš„æ•°æ®åº“ï¼Œæ¥å‡å°‘æ•°æ®åº“çš„å‹åŠ›ã€‚ä½†æ˜¯è¿™æ ·ä¼šé€ æˆè·¨åº“çš„joinå’Œè·¨åº“çš„äº‹åŠ¡å¼‚å¸¸å¤æ‚ã€‚è€Œæ•°æ®é•œåƒæ˜¯å°†æ•°æ®å¤åˆ¶æˆå¤šåˆ†ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ•°æ®ä¸­é—´ä»¶äº†ï¼Œå¯ä»¥åœ¨ä»»æ„èŠ‚ç‚¹ä¸Šè¿›è¡Œè¯»å†™ï¼Œ å†…éƒ¨ä¼šè¿›è¡Œè‡ªåŠ¨æ•°æ®åŒæ­¥ï¼Œä½†æ˜¯æ•°æ®é•œåƒä¸­æœ€å¤§çš„é—®é¢˜å°±æ˜¯æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚å¯¹äºä¸€èˆ¬å…¬å¸æ¥è¯´ï¼Œåœ¨åˆæœŸä¼šä½¿ç”¨è¯»å†™åˆ†ç¦»çš„æ•°æ®é•œåƒæ–¹å¼ï¼Œç„¶è€ŒåæœŸä¼šé‡‡ç”¨åˆ†åº“åˆ†è¡¨çš„æ–¹å¼ã€‚","categories":[{"name":"åˆ†å¸ƒå¼","slug":"åˆ†å¸ƒå¼","permalink":"yihao.ml/categories/åˆ†å¸ƒå¼/"}],"tags":[]},{"title":"CDH5.15 æƒé™ç®¡ç†","slug":"2019-04-30-CDH-æƒé™ç®¡ç†","date":"2019-04-30T13:37:30.000Z","updated":"2019-11-29T12:20:47.699Z","comments":true,"path":"2019/04/30/2019-04-30-CDH-æƒé™ç®¡ç†/","link":"","permalink":"yihao.ml/2019/04/30/2019-04-30-CDH-æƒé™ç®¡ç†/","excerpt":"","text":"CDHé»˜è®¤ä¼šç»™æˆ‘ä»¬åˆ›å»ºå¾ˆå¤šè§’è‰²ç”¨æˆ·ï¼Œè¿™è¾¹å¯¹äºå¼€å‘å’Œç®¡ç†æ¥è¯´ååˆ†ä¸æ–¹ä¾¿ã€‚è¿™è¾¹å°†æ‰€æœ‰çš„ç”¨æˆ·ä¿®æ”¹ä¸ºROOT HDFSä¸‹é¢æè¿°ä¸€ä¸‹æ€ä¹ˆä¿®æ”¹HDFSæ‰§è¡Œä¸‹é¢æŒ‡ä»¤1chown -R root:root /var/run/hdfs-sockets YARNæœç´¢â€œç”¨æˆ·â€ã€â€œç³»ç»Ÿç»„â€ã€â€œmapredâ€ã€â€œhadoopâ€ä¿®æ”¹ä¸ºroot å…¶ä»–ç»„ä»¶æœ€åä¿®æ”¹ZooKeeperï¼ŒHiveï¼ŒImpalaï¼ŒHbaseï¼ŒSparkï¼ŒSqoop2ï¼ŒFlumeï¼ŒKafkaç­‰çš„ç”¨æˆ·å’Œç³»ç»Ÿç»„ä¸ºrootã€‚æœç´¢â€œç”¨æˆ·â€ã€â€œç»„â€ä¿®æ”¹ä¸ºroot å°†è§’è‰²åŠ åˆ°rootç»„ä¸­CDHç»™æˆ‘ä»¬å»ºçš„è§’è‰²åœ¨/etc/passwdä¸­å¯ä»¥ä½“ç°æ‰¾å‡ºæ‰€æœ‰çš„ç›¸å…³è§’è‰²æŠŠä»–ä»¬åŠ åˆ°rootç»„ä¸­12345678910111213141516usermod -a -G datacenter hueusermod -a -G datacenter yarnusermod -a -G datacenter flumeusermod -a -G datacenter impalausermod -a -G datacenter sparkusermod -a -G datacenter zookeeperusermod -a -G datacenter mapredusermod -a -G datacenter sqoopusermod -a -G datacenter hiveusermod -a -G datacenter sqoop2usermod -a -G datacenter oozieusermod -a -G datacenter hbaseusermod -a -G datacenter hdfsusermod -a -G datacenter kuduusermod -a -G datacenter httpfsusermod -a -G datacenter root ä¿®æ”¹HDFShdfs dfs -chown -R root:root /é‡å¯é›†ç¾¤æœåŠ¡å³å¯ï¼Œåç»­å¦‚æœè¿˜æœ‰æƒé™é—®é¢˜éœ€è¦æŒ‰æç¤ºè¿›è¡Œä¿®æ”¹å³å¯","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"CDH","slug":"CDH","permalink":"yihao.ml/tags/CDH/"}]},{"title":"chrome auto proxy","slug":"2019-04-28-chrome-auto-proxy","date":"2019-04-28T15:39:39.000Z","updated":"2019-11-29T12:20:47.698Z","comments":true,"path":"2019/04/28/2019-04-28-chrome-auto-proxy/","link":"","permalink":"yihao.ml/2019/04/28/2019-04-28-chrome-auto-proxy/","excerpt":"","text":"åˆ°googleåº”ç”¨å•†åº—ä¸‹è½½Proxy SwitchyOmega ä¸‹é¢è¿›è¡Œç›¸å…³é…ç½®ç‚¹æˆ‘ä¸‹è½½","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[]},{"title":"CDH5.15.0 hbase hue é…ç½®åError","slug":"2019-04-27-CDH15-5-0-hbase-hue","date":"2019-04-27T17:43:28.000Z","updated":"2019-11-29T12:20:47.698Z","comments":true,"path":"2019/04/27/2019-04-27-CDH15-5-0-hbase-hue/","link":"","permalink":"yihao.ml/2019/04/27/2019-04-27-CDH15-5-0-hbase-hue/","excerpt":"","text":"åœ¨CDM hueçš„é…ç½®ç•Œé¢æœç´¢ hue_safetyå°†ä¸‹é¢ä»£ç åŠ å…¥åˆ°â€œå€¼â€123[hbase]hbase_conf_dir=&#123;&#123;HBASE_CONF_DIR&#125;&#125;thrift_transport=bufferedåœ¨CDM Hbaseçš„é…ç½®ç•Œé¢æœç´¢ core-site.xmlå°†ä¸‹é¢ä»£ç åŠ å…¥åˆ°â€œå€¼â€12345678910111213141516&lt;property&gt; &lt;name&gt;hadoop.proxyuser.hue.hosts&lt;/name&gt; &lt;value&gt;*&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.proxyuser.hue.groups&lt;/name&gt; &lt;value&gt;*&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.proxyuser.hbase.hosts&lt;/name&gt; &lt;value&gt;*&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.proxyuser.hbase.groups&lt;/name&gt; &lt;value&gt;*&lt;/value&gt;&lt;/property&gt;é™¤æ­¤ä¹‹å¤–æƒ³çœ‹æ›´å¤šé…ç½®å¯ä»¥å‚è€ƒ https://blog.csdn.net/zhangshenghang/article/details/85776134","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Hue","slug":"Hue","permalink":"yihao.ml/tags/Hue/"}]},{"title":"TProtocolException: Bad version in readMessageBegin","slug":"2019-04-26-TProtocolException-Bad-version-in-readMessageBegin","date":"2019-04-26T13:23:25.000Z","updated":"2019-11-29T12:20:47.698Z","comments":true,"path":"2019/04/26/2019-04-26-TProtocolException-Bad-version-in-readMessageBegin/","link":"","permalink":"yihao.ml/2019/04/26/2019-04-26-TProtocolException-Bad-version-in-readMessageBegin/","excerpt":"","text":"é“¾æ¥thriftå¼‚å¸¸123456789101112131415org.apache.thrift.protocol.TProtocolException: Bad version in readMessageBegin at org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:223) at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:27) at org.apache.hadoop.hbase.thrift.TBoundedThreadPoolServer$ClientConnnection.run(TBoundedThreadPoolServer.java:289) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)2019-04-26 11:04:02,472 ERROR org.apache.hadoop.hbase.thrift.TBoundedThreadPoolServer: Thrift error occurred during processing of message.org.apache.thrift.protocol.TProtocolException: Bad version in readMessageBegin at org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:223) at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:27) at org.apache.hadoop.hbase.thrift.TBoundedThreadPoolServer$ClientConnnection.run(TBoundedThreadPoolServer.java:289) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)å»CDHä¸­çš„Hbaseé¢æ¿ä¸­æ£€æŸ¥hbase.regionserver.thrift.compactå’Œhbase.regionserver.thrift.framedæ˜¯å¦å¯ç”¨hbase.regionserver.thrift.framedDescription:Use Thrift TFramedTransport on the server side. This is the recommended transport for thrift servers and requires a similar setting on the client side. Changing this to false will select the default transport, vulnerable to DoS when malformed requests are issued due to THRIFT-601.hbase.regionserver.thrift.compactDescriptionUse Thrift TCompactProtocol binary serialization protocol.å¢åŠ ThriftServerå †æ ˆå¤§å°åˆ°2Gå¹¶ä¿å­˜é‡å¯ThriftServeræœåŠ¡å³å¯","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Hbase","slug":"Hbase","permalink":"yihao.ml/tags/Hbase/"}]},{"title":"CDH Error: JAVA_HOME is not set and could not be found.","slug":"2019-04-26-CDH-Error-JAVA-HOME-is-not-set-and-could-not-be-found","date":"2019-04-26T13:23:25.000Z","updated":"2019-11-29T12:20:47.697Z","comments":true,"path":"2019/04/26/2019-04-26-CDH-Error-JAVA-HOME-is-not-set-and-could-not-be-found/","link":"","permalink":"yihao.ml/2019/04/26/2019-04-26-CDH-Error-JAVA-HOME-is-not-set-and-could-not-be-found/","excerpt":"","text":"é”™è¯¯ä¸€12hdfs dfs -mkdir -p /flume/mysqlPermission denied: user=root, access=WRITE, inode=\"/\":hdfs:supergroup:drwxr-xr-xæ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·æ²¡æœ‰æ‰§è¡Œæƒé™ã€‚ç›´æ¥ç»™å½“å‰ç”¨æˆ·æˆæƒã€‚ï¼ˆè¿™ç§æƒ³æ³•æ˜¯ä¸æ­£ç¡®çš„ï¼Œä¸è¦ä¸ºäº†ç®€åŒ–è¾“å…¥å‘½ä»¤ï¼Œå°±è¯•å›¾ä¿®æ”¹è¿™äº›ä¸œè¥¿ï¼‰æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ã€‚åˆ‡æ¢æŒ‡å®šç”¨æˆ·æ‰§è¡Œå‘½ä»¤1[root@cdh1 data]#sudo -u hdfs hadoop fs -mkdir /newFileæˆ–è€…1[root@cdh1 data]#sudo -u hdfs dfhs dfs -mkdir /newFileæ›´ç®€å•çš„æ˜¯ï¼Œå…ˆè¿›å…¥è¿™ä¸ªç”¨æˆ·ï¼Œsu hdfs é”™è¯¯äºŒ1234sudo -u hdfs hdfs dfs -mkdir -p /flume/mysql Error: JAVA_HOME is not set and could not be found.java -versionjava version \"1.8.0_91\"ç¡®å®å·²ç»è®¾ç½®äº†JAVA_HOME ï¼Œè€Œä¸”åœ¨linux shell æ‰§è¡Œ echo $JAVA_HOME ä¹Ÿæ˜¯æœ‰è¾“å‡ºã€‚123456789find / -name cloudera-config.sh/*/*/*/cloudera-manager/cm-5.10.0/lib64/cmf/service/common/cloudera-config.shlocal JAVA8_HOME_CANDIDATES=( '/usr/java/jdk1.8' '/usr/java/jre1.8' '/usr/lib/jvm/j2sdk1.8-oracle' '/usr/lib/jvm/j2sdk1.8-oracle/jre' '/usr/lib/jvm/java-8-oracle')è§£å†³åŠæ³•:å»ºç«‹ä¸€ä¸ªå·²ç»æœ‰çš„JAVA_HOME é“¾æ¥åˆ° /usr/java/jdk1.8 å°±å¥½äº†ï¼ç›®æ ‡ä½ç½®ï¼š/usr/java/jdk1.8åŸæ–‡ä»¶ï¼š///jdk1.8.0_91123ln -s æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ln -s /*/*/jdk1.8.0_91 /usr/java/jdk1.8sudo -u hdfs hdfs dfs -mkdir -p /flume/mysql","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"CDH","slug":"CDH","permalink":"yihao.ml/tags/CDH/"}]},{"title":"RDD DataSetå’ŒDataFrameçš„åŒºåˆ«å’Œåº”ç”¨åœºæ™¯","slug":"2019-04-24-RDD-DataSetå’ŒDataFrameçš„åŒºåˆ«å’Œåº”ç”¨åœºæ™¯","date":"2019-04-24T11:47:37.000Z","updated":"2019-11-29T12:20:47.697Z","comments":true,"path":"2019/04/24/2019-04-24-RDD-DataSetå’ŒDataFrameçš„åŒºåˆ«å’Œåº”ç”¨åœºæ™¯/","link":"","permalink":"yihao.ml/2019/04/24/2019-04-24-RDD-DataSetå’ŒDataFrameçš„åŒºåˆ«å’Œåº”ç”¨åœºæ™¯/","excerpt":"","text":"åœ¨sparkä¸­ï¼ŒRDDã€DataFrameã€Datasetæ˜¯æœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼Œæœ¬åšæ–‡ç»™å‡ºç¬”è€…åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä½“ä¼šåˆ°çš„åŒºåˆ«å’Œå„è‡ªçš„ä¼˜åŠ¿ã€‚ å…±æ€§1ã€ RDDã€DataFrameå’ŒDatasetå…¨éƒ½æ˜¯sparkå¹³å°ä¸‹çš„åˆ†å¸ƒå¼å¼¹æ€§æ•°æ®é›†ï¼Œä¸ºå¤„ç†è¶…å¤§å‹æ•°æ®æä¾›ä¾¿åˆ©ï¼›2ã€ ä¸‰è€…éƒ½æœ‰æƒ°æ€§æœºåˆ¶ï¼Œåœ¨è¿›è¡Œåˆ›å»ºã€è½¬æ¢ï¼Œå¦‚mapæ–¹æ³•æ—¶ï¼Œä¸ä¼šç«‹å³æ‰§è¡Œï¼Œåªæœ‰åœ¨é‡åˆ°Actionå¦‚foreachæ—¶ï¼Œä¸‰è€…æ‰ä¼šå¼€å§‹éå†è¿ç®—ï¼Œæç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœä»£ç é‡Œé¢æœ‰åˆ›å»ºã€è½¬æ¢ï¼Œä½†æ˜¯åé¢æ²¡æœ‰åœ¨Actionä¸­ä½¿ç”¨å¯¹åº”çš„ç»“æœï¼Œåœ¨æ‰§è¡Œæ—¶ä¼šè¢«ç›´æ¥è·³è¿‡ï¼Œå¦‚1234567val sparkconf = new SparkConf().setMaster(\"local\").setAppName(\"test\").set(\"spark.port.maxRetries\",\"1000\")val spark = SparkSession.builder().config(sparkconf).getOrCreate()val rdd=spark.sparkContext.parallelize(Seq((\"a\", 1), (\"b\", 1), (\"a\", 1)))rdd.map&#123;line=&gt; println(\"è¿è¡Œ\") line._1&#125;mapä¸­çš„println(â€œè¿è¡Œâ€)å¹¶ä¸ä¼šè¿è¡Œã€‚3ã€ä¸‰è€…éƒ½ä¼šæ ¹æ®sparkçš„å†…å­˜æƒ…å†µè‡ªåŠ¨ç¼“å­˜è¿ç®—ï¼Œè¿™æ ·å³ä½¿æ•°æ®é‡å¾ˆå¤§ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒä¼šå†…å­˜æº¢å‡ºã€‚4ã€ä¸‰è€…éƒ½æœ‰partitionçš„æ¦‚å¿µ12345678var predata=data.repartition(24).mapPartitions&#123; PartLine =&gt; &#123; PartLine.map&#123; line =&gt; println(â€œè½¬æ¢æ“ä½œâ€) &#125; &#125;&#125;è¿™æ ·å¯¹æ¯ä¸€ä¸ªåˆ†åŒºè¿›è¡Œæ“ä½œæ—¶ï¼Œå°±è·Ÿåœ¨æ“ä½œæ•°ç»„ä¸€æ ·ï¼Œä¸ä½†æ•°æ®é‡æ¯”è¾ƒå°ï¼Œè€Œä¸”å¯ä»¥æ–¹ä¾¿çš„å°†mapä¸­çš„è¿ç®—ç»“æœæ‹¿å‡ºæ¥ï¼Œå¦‚æœç›´æ¥ç”¨mapï¼Œmapä¸­å¯¹å¤–é¢çš„æ“ä½œæ˜¯æ— æ•ˆçš„12345678910val rdd=spark.sparkContext.parallelize(Seq((\"a\", 1), (\"b\", 1), (\"a\", 1)))var flag=0val test=rdd.map&#123;line=&gt; println(\"è¿è¡Œ\") flag+=1 println(flag) line._1&#125;println(test.count)println(flag)ç»“æœå¦‚ä¸‹:12345678è¿è¡Œ1è¿è¡Œ2è¿è¡Œ330ä¸ä½¿ç”¨partitionæ—¶ï¼Œå¯¹mapä¹‹å¤–çš„æ“ä½œæ— æ³•å¯¹mapä¹‹å¤–çš„å˜é‡é€ æˆå½±å“ã€‚5ã€ä¸‰è€…æœ‰è®¸å¤šå…±åŒçš„å‡½æ•°ï¼Œå¦‚filterï¼Œæ’åºç­‰ã€‚6ã€åœ¨å¯¹DataFrameå’ŒDatasetè¿›è¡Œæ“ä½œè®¸å¤šæ“ä½œéƒ½éœ€è¦è¿™ä¸ªåŒ…è¿›è¡Œæ”¯æŒã€‚12//è¿™é‡Œçš„sparkæ˜¯SparkSessionçš„å˜é‡åimport spark.implicits._7ã€DataFrameå’ŒDatasetå‡å¯ä½¿ç”¨æ¨¡å¼åŒ¹é…è·å–å„ä¸ªå­—æ®µçš„å€¼å’Œç±»å‹ã€‚DataFrame:1234567testDF.map&#123; case Row(col1:String,col2:Int)=&gt; println(col1);println(col2) col1 case _=&gt; \"\"&#125;ä¸ºäº†æé«˜ç¨³å¥æ€§ï¼Œæœ€å¥½åé¢æœ‰ä¸€ä¸ª_é€šé…æ“ä½œï¼Œè¿™é‡Œæä¾›äº†DataFrameä¸€ä¸ªè§£æå­—æ®µçš„æ–¹æ³•ã€‚Dataset:12345678case class Coltest(col1:String,col2:Int)extends Serializable //å®šä¹‰å­—æ®µåå’Œç±»å‹testDS.map&#123; case Coltest(col1:String,col2:Int)=&gt; println(col1);println(col2) col1 case _=&gt; \"\"&#125; åŒºåˆ« RDD1ã€RDDä¸€èˆ¬å’Œspark mlibåŒæ—¶ä½¿ç”¨ã€‚2ã€RDDä¸æ”¯æŒsparkSQLæ“ä½œã€‚DataFrame:1ã€ä¸RDDå’ŒDatasetä¸åŒï¼ŒDataFrameæ¯ä¸€è¡Œçš„ç±»å‹å›ºå®šä¸ºRowï¼Œåªæœ‰é€šè¿‡è§£ææ‰èƒ½è·å–å„ä¸ªå­—æ®µçš„å€¼ï¼Œå¦‚12345testDF.foreach&#123; line =&gt; val col1=line.getAs[String](\"col1\") val col2=line.getAs[String](\"col2\")&#125;æ¯ä¸€åˆ—çš„å€¼æ²¡æ³•ç›´æ¥è®¿é—®ã€‚2ã€DataFrameä¸Datasetä¸€èˆ¬ä¸spark mlåŒæ—¶ä½¿ç”¨ã€‚3ã€DataFrameä¸Datasetå‡æ”¯æŒsparksqlçš„æ“ä½œï¼Œæ¯”å¦‚selectï¼Œgroupbyä¹‹ç±»ï¼Œè¿˜èƒ½æ³¨å†Œä¸´æ—¶è¡¨/è§†çª—ï¼Œè¿›è¡Œsqlè¯­å¥æ“ä½œï¼Œå¦‚12dataDF.createOrReplaceTempView(\"tmp\")spark.sql(\"select ROW,DATE from tmp where DATE is not null order by DATE\").show(100,false)4ã€DataFrameä¸Datasetæ”¯æŒä¸€äº›ç‰¹åˆ«æ–¹ä¾¿çš„ä¿å­˜æ–¹å¼ï¼Œæ¯”å¦‚ä¿å­˜æˆcsvï¼Œå¯ä»¥å¸¦ä¸Šè¡¨å¤´ï¼Œè¿™æ ·æ¯ä¸€åˆ—çš„å­—æ®µåä¸€ç›®äº†ç„¶ã€‚123456//ä¿å­˜val saveoptions = Map(\"header\" -&gt; \"true\", \"delimiter\" -&gt; \"t\", \"path\" -&gt; \"hdfs://172.xx.xx.xx:9000/test\")datawDF.write.format(\"com.databricks.spark.csv\").mode(SaveMode.Overwrite).options(saveoptions).save()//è¯»å–val options = Map(\"header\" -&gt; \"true\", \"delimiter\" -&gt; \"t\", \"path\" -&gt; \"hdfs://172.xx.xx.xx:9000/test\")val datarDF= spark.read.options(options).format(\"com.databricks.spark.csv\").load()åˆ©ç”¨è¿™æ ·çš„ä¿å­˜æ–¹å¼ï¼Œå¯ä»¥æ–¹ä¾¿çš„è·å¾—å­—æ®µåå’Œåˆ—çš„å¯¹åº”ï¼Œè€Œä¸”åˆ†éš”ç¬¦ï¼ˆdelimiterï¼‰å¯ä»¥è‡ªç”±æŒ‡å®šã€‚Dataset:è¿™é‡Œä¸»è¦å¯¹æ¯”Datasetå’ŒDataFrameï¼Œå› ä¸ºDatasetå’ŒDataFrameæ‹¥æœ‰å®Œå…¨ç›¸åŒçš„æˆå‘˜å‡½æ•°ï¼ŒåŒºåˆ«åªæ˜¯æ¯ä¸€è¡Œçš„æ•°æ®ç±»å‹ä¸åŒã€‚DataFrameä¹Ÿå¯ä»¥å«Dataset[Row],æ¯ä¸€è¡Œçš„ç±»å‹æ˜¯Rowï¼Œä¸è§£æï¼Œæ¯ä¸€è¡Œç©¶ç«Ÿæœ‰å“ªäº›å­—æ®µï¼Œå„ä¸ªå­—æ®µåˆæ˜¯ä»€ä¹ˆç±»å‹éƒ½æ— ä»å¾—çŸ¥ï¼Œåªèƒ½ç”¨ä¸Šé¢æåˆ°çš„getASæ–¹æ³•æˆ–è€…å…±æ€§ä¸­çš„ç¬¬ä¸ƒæ¡æåˆ°çš„æ¨¡å¼åŒ¹é…æ‹¿å‡ºç‰¹å®šå­—æ®µã€‚è€ŒDatasetä¸­ï¼Œæ¯ä¸€è¡Œæ˜¯ä»€ä¹ˆç±»å‹æ˜¯ä¸ä¸€å®šçš„ï¼Œåœ¨è‡ªå®šä¹‰äº†case classä¹‹åå¯ä»¥å¾ˆè‡ªç”±çš„è·å¾—æ¯ä¸€è¡Œçš„ä¿¡æ¯ã€‚12345678910111213case class Coltest(col1:String,col2:Int)extends Serializable //å®šä¹‰å­—æ®µåå’Œç±»å‹//rdd//(\"a\", 1)//(\"b\", 1)//(\"a\", 1)val test: Dataset[Coltest]=rdd.map&#123;line=&gt; Coltest(line._1,line._2)&#125;.toDStest.map&#123; line=&gt; println(line.col1) println(line.col2)&#125;å¯ä»¥çœ‹å‡ºï¼ŒDatasetåœ¨éœ€è¦è®¿é—®åˆ—ä¸­çš„æŸä¸ªå­—æ®µæ—¶æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œç„¶è€Œï¼Œå¦‚æœè¦å†™ä¸€äº›é€‚é…æ€§å¾ˆå¼ºçš„å‡½æ•°æ—¶ï¼Œå¦‚æœä½¿ç”¨Datasetï¼Œè¡Œçš„ç±»å‹åˆä¸ç¡®å®šï¼Œå¯èƒ½æ˜¯å„ç§case classï¼Œæ— æ³•å®ç°é€‚é…ï¼Œè¿™æ—¶å€™ç”¨DataFrameå³Dataset[Row]å°±èƒ½æ¯”è¾ƒå¥½çš„è§£å†³é—®é¢˜ã€‚è½¬åŒ–ï¼šRDDã€DataFrameã€Datasetä¸‰è€…æœ‰è®¸å¤šå…±æ€§ï¼Œæœ‰å„è‡ªé€‚ç”¨çš„åœºæ™¯å¸¸å¸¸éœ€è¦åœ¨ä¸‰è€…ä¹‹é—´è½¬æ¢ã€‚DataFrame/Datasetè½¬RDDï¼šè¿™ä¸ªè½¬æ¢å¾ˆç®€å•12val rdd1=testDF.rddval rdd2=testDS.rddRDDè½¬DataFrameï¼š1234import spark.implicits._val testDF = rdd.map &#123;line=&gt; (line._1,line._2)&#125;.toDF(\"col1\",\"col2\")ä¸€èˆ¬ç”¨å…ƒç»„æŠŠä¸€è¡Œçš„æ•°æ®å†™åœ¨ä¸€èµ·ï¼Œç„¶ååœ¨toDFä¸­æŒ‡å®šå­—æ®µåã€‚RDDè½¬Datasetï¼š12345import spark.implicits._case class Coltest(col1:String,col2:Int)extends Serializable //å®šä¹‰å­—æ®µåå’Œç±»å‹val testDS = rdd.map &#123;line=&gt; Coltest(line._1,line._2)&#125;.toDSå¯ä»¥æ³¨æ„åˆ°ï¼Œå®šä¹‰æ¯ä¸€è¡Œçš„ç±»å‹ï¼ˆcase classï¼‰æ—¶ï¼Œå·²ç»ç»™å‡ºäº†å­—æ®µåå’Œç±»å‹ï¼Œåé¢åªè¦å¾€case classé‡Œé¢æ·»åŠ å€¼å³å¯ã€‚Datasetè½¬DataFrameï¼šè¿™ä¸ªä¹Ÿå¾ˆç®€å•ï¼Œå› ä¸ºåªæ˜¯æŠŠcase classå°è£…æˆRowã€‚12import spark.implicits._val testDF = testDS.toDFDataFrameè½¬Datasetï¼š123import spark.implicits._case class Coltest(col1:String,col2:Int)extends Serializable //å®šä¹‰å­—æ®µåå’Œç±»å‹val testDS = testDF.as[Coltest]è¿™ç§æ–¹æ³•å°±æ˜¯åœ¨ç»™å‡ºæ¯ä¸€åˆ—çš„ç±»å‹åï¼Œä½¿ç”¨asæ–¹æ³•ï¼Œè½¬æˆDatasetï¼Œè¿™åœ¨æ•°æ®ç±»å‹æ˜¯DataFrameåˆéœ€è¦é’ˆå¯¹å„ä¸ªå­—æ®µå¤„ç†æ—¶æä¸ºæ–¹ä¾¿ã€‚ç‰¹åˆ«æ³¨æ„ï¼šåœ¨ä½¿ç”¨ä¸€äº›ç‰¹æ®Šçš„æ“ä½œæ—¶ï¼Œä¸€å®šè¦åŠ ä¸Š import spark.implicits._ ä¸ç„¶toDFã€toDSæ— æ³•ä½¿ç”¨ã€‚","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Spark","slug":"Spark","permalink":"yihao.ml/tags/Spark/"}]},{"title":"CDH5.15.0å‡çº§spark1.6åˆ°2.3","slug":"2019-04-23-CDH5-15å‡çº§spark1-6åˆ°2-3","date":"2019-04-23T20:10:32.000Z","updated":"2019-11-29T12:20:47.696Z","comments":true,"path":"2019/04/23/2019-04-23-CDH5-15å‡çº§spark1-6åˆ°2-3/","link":"","permalink":"yihao.ml/2019/04/23/2019-04-23-CDH5-15å‡çº§spark1-6åˆ°2-3/","excerpt":"","text":"CDH5.15.0å®‰è£…é›†ç¾¤ä»¥åï¼Œé»˜è®¤å®‰è£…çš„sparkæ˜¯1.6ç‰ˆæœ¬ã€‚æ·»åŠ çš„æ—¶å€™æ²¡æœ‰spark2,å› ä¸ºspark1.6å¥½å¤šæ–°åŠŸèƒ½éƒ½ä¸èƒ½ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™è¾¹å¯¹å…¶è¿›è¡Œå‡çº§ã€‚ å®‰è£…åŒ…parcelã€parcel.shaå’Œmanifest.jsoncsdä¸‹è½½parcelç­‰æ–‡ä»¶ç‚¹æˆ‘ä¸‹è½½ä¸‹è½½csdæ–‡ä»¶ç‚¹æˆ‘ä¸‹è½½å…³äºç‰ˆæœ¬ï¼Œcsdå’Œparcelçš„ç‰ˆæœ¬è¦å¯¹åº”ä¸Šæœ¬ä¾‹å­ä¸­éƒ½æ˜¯cloudera1;parcelçš„ç‰ˆæœ¬è¦é€‰æ‹©é€‚åˆè‡ªå·±æ“ä½œç³»ç»Ÿçš„ï¼Œæœ¬ä¾‹ä¸­ä½¿ç”¨çš„æ˜¯centos7,æ‰€ä»¥ä¸‹è½½el7ä¸‹è½½å¥½æ‰€æœ‰æ–‡ä»¶1234SPARK2_ON_YARN-2.4.0.cloudera1.jarSPARK2-2.4.0.cloudera1-1.cdh5.13.3.p0.1007356-el7.parcelSPARK2-2.4.0.cloudera1-1.cdh5.13.3.p0.1007356-el7.parcel.sha1manifest.json ä¸Šä¼ å°†SPARK2_ON_YARN-2.4.0.cloudera1.jarä¸Šä¼ åˆ°ä¸»èŠ‚ç‚¹çš„*/opt/cloudera/csd/*æ²¡æœ‰ç›®å½•çš„è¯åˆ›å»ºä¸€ä¸ªå°†å…¶ä½™æ–‡ä»¶ä¸Šä¼ åˆ°ä¸»èŠ‚ç‚¹çš„*/opt/cloudera/parcel-repo/*ç›®å½•ä¸‹é¢å¦‚æœæœ‰é‡åæ–‡ä»¶å¿…é¡»åˆ æ‰ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ç”¨ç®¡ é‡å¯CSM1234# åœ¨ä¸»èŠ‚ç‚¹è¿è¡Œ/opt/cm-5.15.0/etc/init.d/cloudera-scm-server start# åœ¨æ‰€æœ‰èŠ‚ç‚¹è¿è¡Œ/opt/cm-5.15.0/etc/init.d/cloudera-scm-agent start æ¿€æ´»å®‰è£…åˆ°cloudera managerç•Œé¢ ä¸»æœº-ã€‹parcel-ã€‹SPARK2 åšæ¿€æ´»æŒ‰ç…§æ­£å¸¸æ“ä½œæ·»åŠ SPARK2åˆ°é›†ç¾¤å³å¯ éªŒè¯åˆ°node1èŠ‚ç‚¹ä¸‹è¿è¡Œspark-shellå‘ç°æŠ¥é”™é¦–å…ˆæˆ‘ä»¬å¾—çŸ¥é“ä¸‹é¢è¿™äº›äº‹æƒ…CDHå®‰è£…ç›®å½• /opt/cloudera/parcels/CDH/SPARK2å®‰è£…ç›®å½• /opt/cloudera/parcels/SPARK2æ‰€æœ‰é…ç½®æ–‡ä»¶ç›®å½•ä¸º /etc/å°†CDHä¸­sparké…ç½®æ–‡ä»¶æ‹·è´åˆ°SPARK2çš„é…ç½®æ–‡ä»¶ä¸­,å¹¶é…ç½®spark-env.shæ–‡ä»¶1cp /opt/cloudera/parcels/CDH/etc/spark/conf.dist/* /opt/cloudera/parcels/SPARK2/etc/spark2/conf.dist/æ£€æŸ¥ä¸€ä¸‹é…ç½®æ–‡ä»¶1234vim /opt/cloudera/parcels/SPARK2/etc/spark2/conf.dist/spark-env.sh# æ·»åŠ ä¸‹é¢å†…å®¹åˆ°*spark-env.sh*ä¸­export SPARK_DIST_CLASSPATH=$(hadoop classpath) //æŒ‡å®šhadoop classæ–‡ä»¶ç›®å½•export HADOOP_CONF_DIR=/etc/hadoop/conf //æŒ‡å®šhadoopé…ç½®æ–‡ä»¶ç›®å½•å°†Spark2åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­12345vim /etc/profile#æ·»åŠ å¦‚ä¸‹å†…å®¹export HADOOP_CONF_DIR=/etc/hadoop/confexport SPARK_HOME=/opt/cloudera/parcels/SPARK2/lib/spark2export PATH=$SPARK_HOME/bin:$PATH spark on yarnæµ‹è¯•1234567891011cd /opt/cloudera/parcels/SPARK2/lib/spark2/examples/jarsspark-submit --class org.apache.spark.examples.SparkPi \\ --master yarn \\ --deploy-mode cluster \\ --driver-memory 4g \\ --executor-memory 2g \\ --executor-cores 1 \\ --queue thequeue \\ ./spark-examples_2.11-2.4.0.cloudera1.jar \\ 10åˆ°yarnä¸ŠæŸ¥çœ‹ä»»åŠ¡http://zhaoyihao.iok.la:8088/cluster Spark SQL æ“ä½œHiveæµ‹è¯•è¿™é‡Œæœ‰ä¸€ä¸ªå‚æ•°ç‰¹åˆ«é‡è¦spark.sql.warehouse.dirä¸‹é¢æ˜¯å®˜æ–¹è§£é‡ŠWhen working with Hive, one must instantiate SparkSession with Hive support, including connectivity to a persistent Hive metastore, support for Hive serdes, and Hive user-defined functions. Users who do not have an existing Hive deployment can still enable Hive support. When not configured by the hive-site.xml, the context automatically creates metastore_db in the current directory and creates a directory configured by spark.sql.warehouse.dir, which defaults to the directory spark-warehouse in the current directory that the Spark application is started. Note that the hive.metastore.warehouse.dir property in hive-site.xml is deprecated since Spark 2.0.0. Instead, use spark.sql.warehouse.dir to specify the default location of database in warehouse. You may need to grant write privilege to the user who starts the Spark application.å¤§æ¦‚çš„æ„æ€æ˜¯ï¼Œä½¿ç”¨hiveéœ€è¦sparksessionè®¾ç½®æ”¯æŒé€‰é¡¹ï¼Œå¦‚æœç”¨æˆ·é›†ç¾¤é‡Œï¼Œæ²¡æœ‰éƒ¨ç½²å¥½çš„hiveï¼Œsparksessionä¹Ÿèƒ½å¤Ÿæä¾›hiveæ”¯æŒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰hive-site.xmlæ–‡ä»¶ï¼Œsparkcontextä¼šè‡ªåŠ¨åœ¨å½“å‰ç›®å½•åˆ›å»ºå…ƒæ•°æ®db,å¹¶ä¸”ä¼šåœ¨spark.sql.warehouse.dirè¡¨ç¤ºçš„ä½ç½®åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œç”¨æˆ·å­˜æ”¾tableæ•°æ®ï¼Œæ‰€ä»¥spark.sql.warehouse.diræ˜¯ä¸€ä¸ªç”¨æˆ·å­˜æ”¾hive tableæ–‡ä»¶çš„ä¸€ä¸ªç›®å½•ï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªç›®å½•åœ°å€ï¼Œéš¾å…ä¼šæ”¶åˆ°æ“ä½œç³»ç»Ÿçš„å½±å“ï¼Œå› ä¸ºä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿçš„å‰ç¼€æ˜¯ä¸ä¸€æ ·äº†ï¼Œä¸ºäº†é€‚é…æ€§ï¼Œsparké¼“åŠ±åœ¨codeä¸­è®¾ç½®è¯¥é€‰é¡¹ï¼Œè€Œä¸æ˜¯åœ¨hive-site.xmlä¸­è®¾ç½®è¯¥é€‰é¡¹ã€‚1.å¦‚æœæ²¡æœ‰éƒ¨ç½²å¥½çš„hiveï¼Œsparkç¡®å®æ˜¯ä¼šä½¿ç”¨å†…ç½®çš„hiveï¼Œä½†æ˜¯sparkä¼šå°†æ‰€æœ‰çš„å…ƒä¿¡æ¯éƒ½æ”¾åˆ°spark_home/bin ç›®å½•ä¸‹ï¼Œä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆé…ç½®äº†spark.sql.warehouse.dir å´ä¸èµ·ä½œç”¨çš„åŸå› ã€‚è€Œä¸”ï¼Œå°±ç®—éƒ¨ç½²äº†hiveï¼Œä¹Ÿéœ€è¦è®©sparkè¯†åˆ«hiveï¼Œå¦åˆ™sparkï¼Œè¿˜æ˜¯ä¼šä½¿ç”¨sparké»˜è®¤çš„hive2.åªæœ‰åœ¨éƒ¨ç½²å¥½çš„hiveæƒ…å†µä¸‹ï¼Œä½¿ç”¨spark.sql.warehouse.diræ‰ä¼šç”Ÿæ•ˆï¼Œè€Œä¸”sparkä¼šé»˜è®¤è¦†ç›–hiveçš„é…ç½®é¡¹ã€‚ä¸‹é¢æ‘˜è‡ªå®˜æ–¹æ–‡æ¡£Configuration of Hive is done by placing your hive-site.xml, core-site.xml (for security configuration), and hdfs-site.xml (for HDFS configuration) file in conf/. http://spark.apache.org/docs/latest/sql-data-sources-hive-tables.htmlåˆ°cloudera manager ä¸‹è½½hvieçš„å®¢æˆ·ç«¯é…ç½®ï¼Œå°†hive-site.xmlï¼Œcore-site.xmlï¼Œhdfs-site.xmlå¤åˆ¶åˆ°*/opt/cloudera/parcels/SPARK2-2.4.0.cloudera1-1.cdh5.13.3.p0.1007356/lib/spark2/conf*ç›®å½•ä¸‹123cp /etc/hadoop/conf/hdfs-site.xml /opt/cloudera/parcels/SPARK2/lib/spark2/conf/cp /etc/hadoop/conf/core-site.xml /opt/cloudera/parcels/SPARK2/lib/spark2/conf/cp /etc/hive/conf/hive-site.xml /opt/cloudera/parcels/SPARK2/lib/spark2/conf/è¿›å…¥spark-shell1234567891011121314151617val spark = SparkSession .builder() .appName(\"Spark Hive Example\") //åœ¨å®ä¾‹åŒ–sparkSessionæ—¶æŒ‡å®šhiveçš„warehouse .config(\"spark.sql.warehouse.dir\", \"/user/hive/warehouse\") //è°ƒç”¨enableHiveSupportå¼€å¯hiveçš„æ”¯æŒ .enableHiveSupport() .getOrCreate()import spark.implicits._import spark.sqlsql(\"CREATE TABLE IF NOT EXISTS src (key INT, value STRING) USING hive\")sql(\"LOAD DATA LOCAL INPATH 'examples/src/main/resources/kv1.txt' INTO TABLE src\")// Queries are expressed in HiveQLsql(\"SELECT * FROM src\").show()","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"CDH","slug":"CDH","permalink":"yihao.ml/tags/CDH/"}]},{"title":"CDH5.15.x å¯åŠ¨æœåŠ¡Time out","slug":"2019-04-17-CDH5-15-x-time-out","date":"2019-04-17T19:02:00.000Z","updated":"2019-11-29T12:20:47.696Z","comments":true,"path":"2019/04/17/2019-04-17-CDH5-15-x-time-out/","link":"","permalink":"yihao.ml/2019/04/17/2019-04-17-CDH5-15-x-time-out/","excerpt":"","text":"ç¯å¢ƒ: CDH 5.15.0 + centos71Command aborted because of exception: Command timed-out after 150 secondsè¿™æ˜¯ç”±äºæœåŠ¡ç«¯é›†ç¾¤æœªç¦ç”¨ipv6å¯¼è‡´ä½¿ç”¨ifconfigå‘½ä»¤æŸ¥çœ‹ç½‘å¡ä¿¡æ¯ï¼Œå¦‚æœå‡ºç°inet6 fe80::20c:29ff:fed0:3514ï¼Œè¯´æ˜æœºå™¨å¼€å¯äº†ipv6ç¼–è¾‘**/etc/sysctl.conf**é…ç½®1net.ipv6.conf.all.disable_ipv6=1ç¼–è¾‘**/etc/sysconfig/network**é…ç½®1NETWORKING_IPV6=noç¼–è¾‘**/etc/sysconfig/network-scripts/ifcfg-eno16777736**1IPV6INIT=noæ‰§è¡Œsysctl -pæˆ–è€…rebooté‡å¯å‘½ä»¤","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"CDH","slug":"CDH","permalink":"yihao.ml/tags/CDH/"}]},{"title":"java.lang.NoClassDefFoundError scala/Product$class","slug":"2019-04-16-spark-idea-windows-scala-Product","date":"2019-04-16T13:18:58.000Z","updated":"2019-11-29T12:20:47.696Z","comments":true,"path":"2019/04/16/2019-04-16-spark-idea-windows-scala-Product/","link":"","permalink":"yihao.ml/2019/04/16/2019-04-16-spark-idea-windows-scala-Product/","excerpt":"","text":"ç¯å¢ƒï¼šwindows 7 + idea + scala + sparkæœ¬åœ°è¿è¡Œä»¥åæŠ¥ä¸‹é¢é”™è¯¯1234567891011121314Exception in thread \"main\" java.lang.NoClassDefFoundError: scala/Product$class at org.apache.spark.SparkConf$DeprecatedConfig.&lt;init&gt;(SparkConf.scala:682) at org.apache.spark.SparkConf$.&lt;init&gt;(SparkConf.scala:539) at org.apache.spark.SparkConf$.&lt;clinit&gt;(SparkConf.scala) at org.apache.spark.SparkConf.set(SparkConf.scala:72) at org.apache.spark.SparkConf.setAppName(SparkConf.scala:87) at com.bim.WordCount$.main(WordCount.scala:9) at com.bim.WordCount.main(WordCount.scala)Caused by: java.lang.ClassNotFoundException: scala.Product$class at java.net.URLClassLoader.findClass(URLClassLoader.java:381) at java.lang.ClassLoader.loadClass(ClassLoader.java:424) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ... 7 moreSparkå’ŒScalaçš„ç‰ˆæœ¬æ˜¯æœ‰å¯¹åº”å…³ç³»çš„ï¼Œä¸‹é¢æœ‰ä¸ªæŸ¥çœ‹å…³ç³»çš„å°æŠ€å·§ï¼Œå»https://mvnrepository.com/ä¸­æœç´¢sparkï¼Œè¿›å…¥Spark Project CoreæŸ¥çœ‹å³å¯ä¸‹é¢åˆ†åˆ«å¼•å…¥spark-coreå’Œspark-sqlï¼ˆä¸éœ€è¦çš„è¯å¯ä»¥ä¸å¼•ï¼‰è¿è¡Œå³å¯ã€‚","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Spark","slug":"Spark","permalink":"yihao.ml/tags/Spark/"}]},{"title":"java.lang.ArrayIndexOutOfBoundsException 10582","slug":"2019-04-16-spark-idea-windows-array-index-out-of-bounds-exception","date":"2019-04-16T13:11:07.000Z","updated":"2019-11-29T12:20:47.695Z","comments":true,"path":"2019/04/16/2019-04-16-spark-idea-windows-array-index-out-of-bounds-exception/","link":"","permalink":"yihao.ml/2019/04/16/2019-04-16-spark-idea-windows-array-index-out-of-bounds-exception/","excerpt":"","text":"ç¯å¢ƒï¼šwindows 7 + idea + scala 1.12.6 + spark 2.4.0åœ¨IDEAä¸­è¿è¡ŒæŠ¥ä¸‹é¢é”™è¯¯1234567891011121314Exception in thread \"main\" java.lang.ArrayIndexOutOfBoundsException: 10582 at com.thoughtworks.paranamer.BytecodeReadingParanamer$ClassReader.accept(BytecodeReadingParanamer.java:563) at com.thoughtworks.paranamer.BytecodeReadingParanamer$ClassReader.access$200(BytecodeReadingParanamer.java:338) at com.thoughtworks.paranamer.BytecodeReadingParanamer.lookupParameterNames(BytecodeReadingParanamer.java:103) at com.thoughtworks.paranamer.CachingParanamer.lookupParameterNames(CachingParanamer.java:90) at com.fasterxml.jackson.module.scala.introspect.BeanIntrospector$.getCtorParams(BeanIntrospector.scala:44) at com.fasterxml.jackson.module.scala.introspect.BeanIntrospector$.$anonfun$apply$1(BeanIntrospector.scala:58) at com.fasterxml.jackson.module.scala.introspect.BeanIntrospector$.$anonfun$apply$1$adapted(BeanIntrospector.scala:58) at scala.collection.TraversableLike.$anonfun$flatMap$1(TraversableLike.scala:241) at scala.collection.Iterator.foreach(Iterator.scala:944) at scala.collection.Iterator.foreach$(Iterator.scala:944) at scala.collection.AbstractIterator.foreach(Iterator.scala:1432) at scala.collection.IterableLike.foreach(IterableLike.scala:71) ...ä¸‹é¢æ˜¯pom.xml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;ml.yihao&lt;/groupId&gt; &lt;artifactId&gt;spark&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;encoding&gt;UTF-8&lt;/encoding&gt; &lt;scala.version&gt;2.12.6&lt;/scala.version&gt; &lt;spark.version&gt;2.4.0&lt;/spark.version&gt; &lt;hadoop.version&gt;2.6.4&lt;/hadoop.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.scala-lang&lt;/groupId&gt; &lt;artifactId&gt;scala-library&lt;/artifactId&gt; &lt;version&gt;$&#123;scala.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.spark&lt;/groupId&gt; &lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt; &lt;version&gt;$&#123;spark.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt; &lt;artifactId&gt;hadoop-client&lt;/artifactId&gt; &lt;version&gt;$&#123;hadoop.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.spark&lt;/groupId&gt; &lt;artifactId&gt;spark-sql_2.12&lt;/artifactId&gt; &lt;version&gt;$&#123;spark.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.38&lt;/version&gt; &lt;/dependency&gt; &lt;!--&lt;dependency&gt;--&gt; &lt;!--&lt;groupId&gt;com.thoughtworks.paranamer&lt;/groupId&gt;--&gt; &lt;!--&lt;artifactId&gt;paranamer&lt;/artifactId&gt;--&gt; &lt;!--&lt;version&gt;2.8&lt;/version&gt;--&gt; &lt;!--&lt;/dependency&gt;--&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;sourceDirectory&gt;src/main/scala&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;src/test/scala&lt;/testSourceDirectory&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt; &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt; &lt;version&gt;3.2.2&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;goal&gt;testCompile&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt; &lt;version&gt;2.4.3&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;shade&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;filters&gt; &lt;filter&gt; &lt;artifact&gt;*:*&lt;/artifact&gt; &lt;excludes&gt; &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt; &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt; &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt; &lt;/excludes&gt; &lt;/filter&gt; &lt;/filters&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;è§£å†³ï¼šåœ¨pom.xmlä¸­æ·»åŠ paranamerå³å¯12345&lt;dependency&gt; &lt;groupId&gt;com.thoughtworks.paranamer&lt;/groupId&gt; &lt;artifactId&gt;paranamer&lt;/artifactId&gt; &lt;version&gt;2.8&lt;/version&gt;&lt;/dependency&gt;","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Spark","slug":"Spark","permalink":"yihao.ml/tags/Spark/"}]},{"title":"B-æ ‘","slug":"2019-03-27-B-æ ‘","date":"2019-03-27T21:01:56.000Z","updated":"2019-11-29T12:20:47.695Z","comments":true,"path":"2019/03/27/2019-03-27-B-æ ‘/","link":"","permalink":"yihao.ml/2019/03/27/2019-03-27-B-æ ‘/","excerpt":"","text":"B+æ ‘ï¼Œç§°ä¸ºBåŠ æ ‘ï¼›é‚£ä¹ˆå¯¹äºB-æ ‘ï¼Œè°è¦æ˜¯è¯»æˆBå‡æ ‘ï¼Œé‚£å°±å¤ªä¸¢äººäº†å’¯ï¼Œå®ƒè™½ç„¶å¸¦ç€å‡å·ï¼Œä½†æ˜¯è¦è¯»æˆBæ ‘ã€‚B+æ ‘å’ŒB-æ ‘æ˜¯ä¸€ç§åŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œåšä¸ºå¼€å‘äººå‘˜ä¸€å®šè¦æŒæ¡ã€‚ ä»€ä¹ˆæ˜¯B-æ ‘é¦–å…ˆå¤§å®¶éƒ½çŸ¥é“æ•°æ®åº“æœ‰ç´¢å¼•ï¼Œç´¢å¼•è¢«æ˜ å°„æˆäºŒå‰ç´¢å¼•æ ‘ï¼Œè¢«å­˜åœ¨äºç£ç›˜ä¹‹ä¸Šã€‚é‚£ä¹ˆä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ä¸ºå•¥æ•°æ®åº“è¦ä½¿ç”¨B-æ ‘ï¼Ÿæ¢äºŒå‰æœç´¢æ ‘è¡Œä¸è¡Œï¼Ÿä»ç®—æ³•é€»è¾‘ä¸Šæ¥è®²ï¼ŒäºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾é€Ÿåº¦å’Œæ¯”è¾ƒæ¬¡æ•°éƒ½æ˜¯æœ€å°çš„ï¼Œä½†æ˜¯æ•°æ®åº“çš„å®ç°å¹¶æ²¡æœ‰ç”¨äºŒå‰æœç´¢æ ‘ï¼Œè€Œæ˜¯ç”¨äº†B-æ ‘å’ŒB+æ ‘ï¼Œä¸‹é¢æ¥è¯´ä¸€ä¸‹é‡Œé¢çš„é—¨é“ã€‚æ•°æ®åº“æ“ä½œæ•°æ®è¦è¿›è¡Œé¢‘ç¹çš„â€œç£ç›˜IO&quot;ï¼Œå› æ­¤åœ¨è®¾è®¡ä¹‹åˆè¦å……åˆ†è€ƒè™‘åˆ°å¦‚ä½•ä¼˜åŒ–ç£ç›˜IOé€ æˆçš„è¯»å†™æ•ˆç‡é—®é¢˜ã€‚æ•°æ®åº“ç´¢å¼•å­˜äºç£ç›˜ä¹‹ä¸Šï¼Œå½“æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œç´¢å¼•çš„å¤§å°å¯èƒ½æœ‰å‡ ä¸ªGç”šè‡³æ›´å¤šã€‚å½“åˆ©ç”¨ç´¢å¼•æŸ¥è¯¢çš„æ—¶å€™ï¼Œè‚¯å®šä¸èƒ½å°†å…¨éƒ¨éƒ½åŠ è½½åˆ°å†…å­˜ï¼Œèƒ½åšçš„åªæœ‰é€ä¸€åŠ è½½æ¯ä¸ªç£ç›˜é¡µï¼Œè¿™é‡Œçš„ç£ç›˜é¡µå¯¹åº”ç´¢å¼•æ ‘çš„èŠ‚ç‚¹ã€‚æ¢ç©¶ä¸€ä¸‹å¦‚æœç´¢å¼•æ ‘ä½¿ç”¨äºŒå‰æœç´¢æ ‘å®ç°ï¼Œä¼šæ˜¯ä¸€ç§ä»€ä¹ˆæ ·çš„æƒ…å†µï¼Œå‡è®¾æ ‘çš„é«˜åº¦æ˜¯4ï¼ŒæŸ¥æ‰¾çš„å€¼æ˜¯10ç¬¬1æ¬¡IOç¬¬2æ¬¡IOç¬¬3æ¬¡IOç¬¬4æ¬¡IOæŸ¥æ‰¾äº†4æ¬¡å‘½ä¸­ç»“æœï¼Œå› æ­¤ç£ç›˜IOçš„æ¬¡æ•°æ˜¯ç”±æ ‘çš„é«˜åº¦å†³å®šã€‚ä¸ºäº†å‡å°‘ç£ç›˜IOæ¬¡æ•°ï¼Œä¸‹é¢ä½¿ç”¨B-æ ‘æ¥å°†äºŒå‰æœç´¢æ ‘è¿›è¡Œâ€œç˜¦èº«â€ï¼Œä»¥æ­¤æ¥å‡å°‘IOæ¬¡æ•°ï¼ä¸‹é¢æ¥å…·ä½“ä»‹ç»ä¸€ä¸‹B-æ ‘ï¼ˆBalance Treeï¼‰ï¼Œä¸€ä¸ªmé˜¶çš„Bæ ‘å…·æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹å¾ï¼š12345æ ¹ç»“ç‚¹è‡³å°‘æœ‰ä¸¤ä¸ªå­å¥³ã€‚æ¯ä¸ªä¸­é—´èŠ‚ç‚¹éƒ½åŒ…å«k-1ä¸ªå…ƒç´ å’Œkä¸ªå­©å­ï¼Œå…¶ä¸­ m/2 &lt;= k &lt;= mæ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹éƒ½åŒ…å«k-1ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ m/2 &lt;= k &lt;= mæ‰€æœ‰çš„å¶å­ç»“ç‚¹éƒ½ä½äºåŒä¸€å±‚ã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸­çš„å…ƒç´ ä»å°åˆ°å¤§æ’åˆ—ï¼ŒèŠ‚ç‚¹å½“ä¸­k-1ä¸ªå…ƒç´ æ­£å¥½æ˜¯kä¸ªå­©å­åŒ…å«çš„å…ƒç´ çš„å€¼åŸŸåˆ†åˆ’ã€‚ä»¥3é˜¶ B-æ ‘ä¸ºä¾‹ï¼Œæ¥è®¤è¯†ä¸€ä¸‹B-æ ‘çš„å…·ä½“ç»“æ„ã€‚æ ‘ä¸­çš„å…·ä½“å…ƒç´ å’Œä¸Šå›¾äºŒå‰æœç´¢æ ‘èŠ‚ç‚¹ä¸€æ ·ã€‚è¿™æ£µæ ‘ä¸­ï¼Œé‡ç‚¹çœ‹ï¼ˆ2,6ï¼‰èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå…ƒç´ 2å’Œ6ï¼Œåˆæœ‰ä¸‰ä¸ªå­©å­1ï¼Œï¼ˆ3,5ï¼‰ï¼Œ8ï¼›å…¶ä¸­1å°äºå…ƒç´ 2ï¼Œï¼ˆ3,5ï¼‰åœ¨å…ƒç´ 2,6ä¹‹é—´ï¼Œ8å¤§äºï¼ˆ3,5ï¼‰ï¼Œç¬¦åˆB-æ ‘çš„å‡ ä¸ªç‰¹å¾ã€‚ B-æ ‘çš„æŸ¥æ‰¾å‡å¦‚è¦æŸ¥çš„å€¼ä¸º5é€šè¿‡æ•´ä¸ªæµç¨‹å¯ä»¥çœ‹å‡º B-æ ‘ åœ¨æŸ¥è¯¢ä¸­æ¯”è¾ƒæ¬¡æ•°å…¶å®ä¸æ¯”äºŒå‰æ ‘å°‘ï¼Œå°¤å…¶å½“å•ä¸€èŠ‚ç‚¹ä¸­çš„å…ƒç´ æ•°é‡å¾ˆå¤šæ—¶ã€‚å¯æ˜¯ç›¸æ¯”ç£ç›˜IOçš„é€Ÿåº¦ï¼Œå†…å­˜ä¸­æ¯”è¾ƒè€—æ—¶å‡ ä¹å¯ä»¥å¿½ç•¥ï¼Œæ‰€ä»¥åªè¦æ ‘çš„é«˜åº¦è¶³å¤Ÿä½ï¼ŒIOæ¬¡æ•°è¶³å¤Ÿå°‘ï¼Œå°±å¯ä»¥æå‡æŸ¥æ‰¾æ€§èƒ½ã€‚ç›¸æ¯”ä¹‹ä¸‹èŠ‚ç‚¹å†…éƒ¨å…ƒç´ å¤šä¸€äº›ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä»…ä»…æ˜¯å¤šäº†å‡ æ¬¡å†…å­˜äº¤äº’ï¼Œåªè¦ä¸è¶…è¿‡ç£ç›˜é¡µçš„å¤§å°å³å¯ï¼Œè¿™ä¹Ÿæ˜¯B-æ ‘çš„é‡è¦ä¼˜åŠ¿ä¹‹ä¸€ã€‚ B-æ ‘çš„æ’å…¥B-æ ‘æ’å…¥æ–°èŠ‚ç‚¹è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”åˆ†å¾ˆå¤šç§æƒ…å†µã€‚è¿™è¾¹ä¸¾ä¸€ä¸ªæœ€å…¸å‹ä¾‹å­ï¼ŒåŠ å…¥æˆ‘ä»¬è¦æ’å…¥çš„å€¼æ˜¯4è‡ªé¡¶å‘ä¸‹æŸ¥æ‰¾4çš„èŠ‚ç‚¹ä½ç½®ï¼Œå‘ç°4åº”å½“æ’å…¥åˆ°èŠ‚ç‚¹å…ƒç´ 3ï¼Œ5ä¹‹é—´ã€‚èŠ‚ç‚¹3ï¼Œ5å·²ç»æ˜¯ä¸¤å…ƒç´ èŠ‚ç‚¹ï¼Œæ— æ³•å†å¢åŠ ã€‚çˆ¶äº²èŠ‚ç‚¹ 2ï¼Œ 6 ä¹Ÿæ˜¯ä¸¤å…ƒç´ èŠ‚ç‚¹ï¼Œä¹Ÿæ— æ³•å†å¢åŠ ã€‚æ ¹èŠ‚ç‚¹9æ˜¯å•å…ƒç´ èŠ‚ç‚¹ï¼Œå¯ä»¥å‡çº§ä¸ºä¸¤å…ƒç´ èŠ‚ç‚¹ã€‚äºæ˜¯æ‹†åˆ†èŠ‚ç‚¹3ï¼Œ5ä¸èŠ‚ç‚¹2ï¼Œ6ï¼Œè®©æ ¹èŠ‚ç‚¹9å‡çº§ä¸ºä¸¤å…ƒç´ èŠ‚ç‚¹4ï¼Œ9ã€‚èŠ‚ç‚¹6ç‹¬ç«‹ä¸ºæ ¹èŠ‚ç‚¹çš„ç¬¬äºŒä¸ªå­©å­ã€‚ B-æ ‘çš„åˆ é™¤ä¸‹é¢æ¼”ç¤ºä¸€ä¸‹B-æ ‘åˆ é™¤å…ƒç´ 11çš„è¿‡ç¨‹è‡ªé¡¶å‘ä¸‹æŸ¥æ‰¾å…ƒç´ 11çš„èŠ‚ç‚¹ä½ç½®ã€‚åˆ é™¤11åï¼ŒèŠ‚ç‚¹12åªæœ‰ä¸€ä¸ªå­©å­ï¼Œä¸ç¬¦åˆBæ ‘è§„èŒƒã€‚å› æ­¤æ‰¾å‡º12,13,15ä¸‰ä¸ªèŠ‚ç‚¹çš„ä¸­ä½æ•°13ï¼Œå–ä»£èŠ‚ç‚¹12ï¼Œè€ŒèŠ‚ç‚¹12è‡ªèº«ä¸‹ç§»æˆä¸ºç¬¬ä¸€ä¸ªå­©å­ã€‚ï¼ˆè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå·¦æ—‹ï¼‰ å°ç»“B-æ ‘ä¸»è¦åº”ç”¨äºæ–‡ä»¶ç³»ç»Ÿä»¥åŠéƒ¨åˆ†æ•°æ®åº“ç´¢å¼•ï¼Œæ¯”å¦‚MongoDBã€‚å¤§éƒ¨åˆ†å…³ç³»å‹æ•°æ®åº“ï¼Œæ¯”å¦‚myslqï¼Œåˆ™ä½¿ç”¨B+æ ‘ä½œä¸ºç´¢å¼•ã€‚","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"IDEA æ— æ³•åˆ›å»º scala","slug":"2019-03-21-2017IDEA-æ— æ³•åˆ›å»º-scala","date":"2019-03-21T15:08:38.000Z","updated":"2019-11-29T12:20:47.694Z","comments":true,"path":"2019/03/21/2019-03-21-2017IDEA-æ— æ³•åˆ›å»º-scala/","link":"","permalink":"yihao.ml/2019/03/21/2019-03-21-2017IDEA-æ— æ³•åˆ›å»º-scala/","excerpt":"","text":"IDEA æ— æ³•åˆ›å»ºScala classæ‰¾åˆ°æ ¹ç›®å½•ä¸‹çš„ spark.imlåœ¨é‡Œé¢æ·»åŠ 1&lt;orderEntry type=\"library\" name=\"scala-sdk-2.12.6\" level=\"application\" /&gt;","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"ClouderaManageræ“ä½œæŒ‡å—","slug":"2019-03-19-ClouderaManageræ‰‹å†Œ","date":"2019-03-19T13:58:42.000Z","updated":"2019-11-29T12:20:47.694Z","comments":true,"path":"2019/03/19/2019-03-19-ClouderaManageræ‰‹å†Œ/","link":"","permalink":"yihao.ml/2019/03/19/2019-03-19-ClouderaManageræ‰‹å†Œ/","excerpt":"","text":"ä½œè€… ï¼š å¼ å¸… 1 å‰è¨€æ„å»ºä¼ä¸šçº§åˆ«çš„å¤§æ•°æ®å¹³å°ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼Œè¦ä»å¤šä¸ªæ–¹é¢è¿›è¡Œè€ƒè™‘ï¼Œå¦‚ç¡¬ä»¶ç¯å¢ƒã€è½¯ä»¶ç¯å¢ƒã€‚Hadoopç”Ÿæ€åœˆçš„äº§å“ä¼—å¤šï¼Œéƒ¨ç½²ã€å®‰è£…ã€è¿ç»´ã€ç›‘æ§ç­‰å·¥ä½œå¼‚å¸¸çç¢ï¼Œå°¤å…¶å½“æŸä¸ªç»„ä»¶å‡ºç°é—®é¢˜ï¼Œç”±äºæœºå™¨çš„æ•°é‡ã€ç»„ä»¶çš„åˆ†å¸ƒæƒ…å†µï¼Œå¾€å¾€ä¼šä½¿å¾—è¿ç»´äººå‘˜æ— ä»ä¸‹æ‰‹ã€‚ç›®å‰å¸‚é¢ä¸ŠHadoopçš„å‘å‹ç‰ˆæœ¬ä¸»è¦æœ‰ä¸‰ç§ï¼š1. Apache Hadoop 2. CDH(Cloudera Distribution Hadoop) 3. HDP(Hortonworks Data Platform) é¦–å…ˆï¼ŒApache Hadoopæ˜¯æœ€æ­£ç»Ÿçš„å‘è¡Œç‰ˆæœ¬ï¼Œç‰ˆæœ¬æ›´æ–°å¿«ï¼Œæ–°ç‰¹æ€§å¢åŠ çš„å¤šï¼Œä½†ç›¸å¯¹è€Œè¨€Bugè¾ƒå¤šï¼Œç»„ä»¶ä¹‹é—´çš„å…¼å®¹æ€§ä¹Ÿè¾ƒå·®ã€‚å…¶æ¬¡ï¼ŒCDHç‰ˆæœ¬ä¼šå°†Hadoopçš„å„ä¸ªç»„ä»¶è¿›è¡Œæ‰“åŒ…ï¼Œå½¢æˆä¸€ä¸ªå‘å¸ƒç‰ˆæœ¬ï¼Œé’ˆå¯¹è¯¥ç‰ˆæœ¬ä¸‹çš„å„ä¸ªç»„ä»¶è¿›è¡Œä¸€ç³»åˆ—æµ‹è¯•ï¼Œè¡¥ä¸ä¿®å¤ï¼Œä¼˜åŒ–ç­–ç•¥ç­‰ï¼Œä¿è¯äº†CDHå¤§ç‰ˆæœ¬ä¸‹å„ä¸ªHadoopç»„ä»¶ä¹‹é—´çš„è‰¯å¥½åä½œæ€§ã€‚å¤§éƒ¨åˆ†å…¬å¸å‡ä½¿ç”¨è¯¥ç³»åˆ—ã€‚æœ€åï¼ŒHDPç‰ˆæœ¬æ˜¯Hortonworkså…¬å¸é’ˆå¯¹Hadoopçš„å‘è¡Œç‰ˆæœ¬ï¼Œæš‚æ—¶æ²¡æœ‰è¿‡å¤šçš„äº†è§£ã€‚CDHçš„å…¬å¸Clouderaæ¨å‡ºäº†Cloudera Managerç”¨äºCDHç‰ˆæœ¬é›†ç¾¤çš„ç®¡ç†ã€‚Cloudera Manageræ˜¯ä¸€æ¬¾ç®¡ç†CDHé›†ç¾¤çš„ç«¯åˆ°ç«¯çš„åº”ç”¨äº§å“ï¼Œå¯ä»¥é€šè¿‡ç®¡ç†ç•Œé¢å¯è§†åŒ–çš„å¯¹é›†ç¾¤ä¸­çš„ä¸€ç³»åˆ—ç»„ä»¶è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ï¼šéƒ¨ç½²ã€å®‰è£…ã€é…ç½®ã€ç›‘æ§ç­‰ã€‚ç®€å•æ¥è¯´ï¼ŒCloudera Manageræœ‰å››å¤§åŠŸèƒ½ï¼š1. ç®¡ç†ï¼šå¯¹é›†ç¾¤è¿›è¡Œç®¡ç†ï¼Œå¦‚æ·»åŠ ã€åˆ é™¤èŠ‚ç‚¹ç­‰æ“ä½œã€‚ 2. ç›‘æ§ï¼šç›‘æ§é›†ç¾¤çš„å¥åº·æƒ…å†µï¼Œå¯¹è®¾ç½®çš„å„ç§æŒ‡æ ‡å’Œç³»ç»Ÿè¿è¡Œæƒ…å†µè¿›è¡Œå…¨é¢ç›‘æ§ã€‚ 3. è¯Šæ–­ï¼šå¯¹é›†ç¾¤å‡ºç°çš„é—®é¢˜è¿›è¡Œè¯Šæ–­ï¼Œå¯¹å‡ºç°çš„é—®é¢˜ç»™å‡ºå»ºè®®è§£å†³æ–¹æ¡ˆã€‚ 4. é›†æˆï¼šå¯¹hadoopçš„å¤šç»„ä»¶è¿›è¡Œæ•´åˆã€‚ Cloudera Managerçš„æ ¸å¿ƒæ˜¯Cloudera Manager Serverï¼Œç®€ç§°CMSã€‚CMSæä¾›äº†ç®¡ç†ç«¯Webç•Œé¢ï¼Œç»Ÿä¸€é’ˆå¯¹å…¶ä»–èŠ‚ç‚¹è¿›è¡Œæ§åˆ¶ï¼Œå¦‚å›¾æ‰€ç¤ºç»„ä»¶ä»‹ç»1. Agentï¼ŒAgentå®‰è£…åœ¨é›†ç¾¤ä¸­çš„å„ä¸ªèŠ‚ç‚¹ä¸Šï¼Œç”¨äºå¯åŠ¨ã€ç»“æŸè¿›ç¨‹ï¼Œå®‰è£…ã€é…ç½®ç»„ä»¶ï¼Œç›‘æ§èŠ‚ç‚¹ç­‰ 2. Management Serviceï¼Œç”±ä¸€ç³»åˆ—çš„è§’è‰²æ„æˆï¼Œè§’è‰²æœ‰ç›‘æ§ã€é¢„è­¦ã€æŠ¥å‘Šç­‰ 3. Databaseï¼Œå­˜å‚¨äº†é…ç½®å’Œç›‘æ§ä¿¡æ¯ 4. Cloudera Repositoryï¼ŒCloudera Managerç”¨äºåˆ†å‘çš„è½¯ä»¶ä»“åº“ 2 å‰ç½®å‡†å¤‡å·¥ä½œæ“ä½œç³»ç»Ÿå°½é‡å’Œè¦ä½¿ç”¨Cloudera Managerç‰ˆæœ¬åŒ¹é…ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹ç»™å‡ºçš„Cloudera Managerä¸æ“ä½œç³»ç»Ÿçš„å…¼å®¹æ€§å‚ç…§è¡¨ã€‚Cloudera Managerå®˜æ–¹ä¸‹è½½Cloudera CDH å„ä¸ªç»„ä»¶å®˜æ–¹ä¸‹è½½CDH Requirements for Cloudera Manager 2.1 å…³äºRAID 0çš„è¯´æ˜å°½ç®¡å»ºè®®é‡‡ç”¨RAID(Redundant Array of Independent Disk,å³ç£ç›˜é˜µåˆ—)ä½œä¸ºNameNodeçš„å­˜å‚¨å™¨ä»¥ä¿æŠ¤å…ƒæ•°æ®ï¼Œä½†æ˜¯è‹¥å°†RAIDä½œä¸ºdatanodeçš„å­˜å‚¨è®¾å¤‡åˆ™ä¸ä¼šç»™HDFSå¸¦æ¥ç›Šå¤„ã€‚HDFSæ‰€æä¾›çš„èŠ‚ç‚¹é—´æ•°æ®å¤åˆ¶æŠ€æœ¯å·²å¯æ»¡è¶³æ•°æ®å¤‡ä»½éœ€æ±‚ï¼Œæ— éœ€ä½¿ç”¨RAIDçš„å†—ä½™æœºåˆ¶ã€‚æ­¤å¤–ï¼Œå°½ç®¡RAIDæ¡å¸¦åŒ–æŠ€æœ¯(RAID 0)è¢«å¹¿æ³›ç”¨æˆ·æå‡æ€§èƒ½ï¼Œä½†æ˜¯å…¶é€Ÿåº¦ä»ç„¶æ¯”ç”¨åœ¨HDFSé‡Œçš„JBOD(Just a Bunch Of Disks)é…ç½®æ…¢ã€‚JBODåœ¨æ‰€æœ‰ç£ç›˜ä¹‹é—´å¾ªç¯è°ƒåº¦HDFSå—ã€‚RAID 0çš„è¯»å†™æ“ä½œå—é™äºç£ç›˜é˜µåˆ—ä¸­æœ€æ…¢ç›˜ç‰‡çš„é€Ÿåº¦ï¼Œè€ŒJBODçš„ç£ç›˜æ“ä½œå‡ç‹¬ç«‹ï¼Œå› è€Œå¹³å‡è¯»å†™é€Ÿåº¦é«˜äºæœ€æ…¢ç›˜ç‰‡çš„è¯»å†™é€Ÿåº¦ã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œå„ä¸ªç£ç›˜çš„æ€§èƒ½åœ¨å®é™…ä½¿ç”¨ä¸­æ€»å­˜åœ¨ç›¸å½“å¤§çš„å·®å¼‚ï¼Œå³ä½¿å¯¹äºç›¸åŒå‹å·çš„ç£ç›˜ã€‚é’ˆå¯¹æŸä¸€é›…è™é›†ç¾¤çš„è¯„æµ‹æŠ¥å‘Šç‚¹æˆ‘è¡¨æ˜ï¼Œåœ¨ä¸€ä¸ªæµ‹è¯•(Gridmix)ä¸­ï¼ŒJBODæ¯”RAID 0 å¿«10%ï¼›åœ¨å¦ä¸€æµ‹è¯•(HDFSå†™ååé‡)ä¸­ï¼ŒJBODæ¯”RAID 0 å¿«30%ã€‚æœ€åï¼Œè‹¥JBODé…ç½®çš„æŸä¸€ç£ç›˜å‡ºç°æ•…éšœï¼ŒHDFSå¯ä»¥å¿½ç•¥è¯¥ç£ç›˜ï¼Œç»§ç»­å·¥ä½œã€‚è€ŒRAIDçš„æŸä¸€ç›˜ç‰‡æ•…éšœä¼šå¯¼è‡´æ•´ä¸ªç£ç›˜é˜µåˆ—ä¸å¯ç”¨ï¼Œè¿›è€Œä½¿ç›¸åº”èŠ‚ç‚¹å¤±æ•ˆã€‚https://zh.hortonworks.com/blog/why-not-raid-0-its-about-time-and-snowflakes/å¤‡æ³¨ï¼šæˆ‘ä»¬å®é™…ç”Ÿæˆç¯å¢ƒä½¿ç”¨çš„æ˜¯RAID5ï¼Œ12å—4Tç¡¬ç›˜ï¼Œå¯ç”¨ç©ºé—´ä¸º40Tã€‚è™½ç„¶æœ‰å¯èƒ½å› ä¸ºRAIDå¡çš„æŸåå¯¼è‡´èŠ‚ç‚¹æ•…éšœï¼Œä½†æ˜¯RAIDå¡æå¤§ç¨‹åº¦çš„æé«˜äº†IOæ€§èƒ½ï¼Œå¹¶ä¸”åœ¨é€»è¾‘ä¸Šå°†12å—ç¡¬ç›˜æ˜ å°„ä¸ºäº†ä¸€å—å¤§ç£ç›˜ã€‚å•å—ç£ç›˜æ•…éšœä¸ä¼šå½±å“åˆ°èŠ‚ç‚¹çš„çŠ¶æ€ã€‚ 2.2 IPåœ°å€å°½å¯èƒ½çš„å°†é›†ç¾¤éƒ¨ç½²åœ¨åŒä¸€ç½‘æ®µä¸­ï¼Œé¿å…å¤¸è·¯ç”±è¿›è¡Œæ•°æ®äº¤äº’ã€‚ 2.3 ä¸»æœºååŠæ˜ å°„ä¸»æœºåæ˜ å°„ä¸ºå…¨é™å®šåç§°å’ŒçŸ­åç§°çš„å½¢å¼ï¼Œä¾‹å¦‚ï¼šâ€‹â€‹ 192.168.15.193 datacenter01.aisino.com datacenter01 2.4 å¯åŠ¨çº§åˆ«å¯åŠ¨çº§åˆ«å°½å¯èƒ½è®¾ç½®ä¸º3ï¼Œé¿å…å…¶ä»–å›¾å½¢ç•Œé¢æ¶ˆè€—æœºå™¨èµ„æºã€‚ 2.5 é˜²ç«å¢™å’Œselinuxå…³é—­é˜²ç«å¢™çš„åŸå› æ˜¯ä¸€äº›åŠ¨æ€ä»»åŠ¡ï¼ˆYARNã€Spark Executorï¼‰åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ†é…ç«¯å£å·ï¼Œå¦‚æœå¼€å¯é˜²ç«å¢™çš„è¯ä¼šå¯¼è‡´ä»»åŠ¡æ— æ³•è¿æ¥ï¼Œå¯¼è‡´ä»»åŠ¡æ‰§è¡Œå¤±è´¥ã€‚selinuxè®°å¾—è¦å…³é—­ã€‚ 2.6 é…ç½®ç³»ç»Ÿæ–‡ä»¶æ‰“å¼€æ•°é‡ä»¥åŠç”¨æˆ·æœ€å¤§è¿›ç¨‹æ•°é‡vi /etc/security/limits.conf * soft nofile 65536 * hard nofile 65536 * soft nproc 16384 * hard nproc 16384 æ³¨æ„ï¼Œæ˜Ÿå·è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ· 2.7 é…ç½®NTPæœåŠ¡Cloudera Managerè¦æ±‚å„ä¸ªèŠ‚ç‚¹éƒ½å¯åŠ¨NTPæœåŠ¡ï¼Œä¿è¯é›†ç¾¤å†…å„èŠ‚ç‚¹ä¹‹é—´çš„æ—¶é—´åŒæ­¥ï¼Œç”±äºæ˜¯åˆ†å¸ƒå¼æ¶æ„ï¼ŒèŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´æ—¶åˆ»ä¿æŒé€šä¿¡ï¼Œå¦‚æœèŠ‚ç‚¹ä¹‹é—´æ—¶é—´å·®åˆ«è¿‡å¤§ï¼Œä¼šå¯¼è‡´é€šä¿¡æ•…éšœï¼Œä»è€ŒèŠ‚ç‚¹é€ æˆå®•æœºã€‚ 2.8 é…ç½®SSHæ‰€æœ‰èŠ‚ç‚¹éƒ½éœ€è¦é…ç½®SSHå…å¯†ç™»å½•ï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰ã€‚ 3 å®‰è£…Cloudera Manageræœ¬æ¬¡å®‰è£…ç¯å¢ƒä¸ºCDH-5.7.0ç‰ˆæœ¬ 3.1 ä¸‹è½½å®‰è£…åŒ…1. ä¸‹è½½Cloudera Managerå®‰è£…åŒ… http://archive.cloudera.com/cm5/cm/5/cloudera-manager-centos7-cm5.7.0_x86_64.tar.gz 2. ä¸‹è½½Parcelç¦»çº¿åŒ… http://archive.cloudera.com/cdh5/parcels/5.7.0/CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel http://archive.cloudera.com/cdh5/parcels/5.7.0/CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel.sha1 http://archive.cloudera.com/cdh5/parcels/5.7.0/manifest.json 3.2 å®‰è£…yumä¾èµ–yum install -y chkconfig python bind-utils psmisc libxslt zlib sqlite yum install -y cyrus-sasl-plain cyrus-sasl-gssapi fuse portmap fuse-libs yum install -y redhat-lsb bind-utils libxslt yum install -y protobuf snappy 3.3 å®‰è£…MySQLæ•°æ®åº“Cloudera Manageréœ€è¦å°†é…ç½®ä¿¡æ¯ä»¥åŠç›‘æ§ä¿¡æ¯å­˜å‚¨è‡³æ•°æ®åº“ä¸­ï¼Œè¿™é‡Œé‡‡ç”¨MySQLæ•°æ®ã€‚ 3.4 MySQLé©±åŠ¨åŒ…è·¯å¾„å¿…é¡»å°†MySQLé©±åŠ¨åŒ…å¤åˆ¶è‡³/usr/share/javaç›®å½•ä¸‹ï¼Œå¹¶ä¸”é©±åŠ¨åŒ…çš„åç§°å¿…é¡»ä¸ºmysql-connector-java.jarã€‚æ³¨æ„ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½éœ€è¦MySQLé©±åŠ¨åŒ… 3.5 åœ¨MySQLä¸­åˆ›å»ºæ•°æ®åº“create database hive DEFAULT CHARSET utf8 COLLATE utf8_general_ci; create database hue DEFAULT CHARSET utf8 COLLATE utf8_general_ci; create database monitor DEFAULT CHARSET utf8 COLLATE utf8_general_ci; create database oozie DEFAULT CHARSET utf8 COLLATE utf8_general_ci; create database cloudera DEFAULT CHARSET utf8 COLLATE utf8_general_ci; 3.6 è§£å‹Cloudera Managerå®‰è£…åŒ…Cloudera Manager ServeræœåŠ¡å®‰è£…åœ¨Manager1æœåŠ¡å™¨ä¸Šï¼Œå› æ­¤éœ€è¦å°†Cloudera Managerçš„å‹ç¼©åŒ…ä»¥åŠæ‰€æœ‰Parcelæ–‡ä»¶ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œå¹¶å°†Cloudera Managerå‹ç¼©åŒ…è§£å‹è‡³/opt/cloudera-managerç›®å½•ä¸‹ 3.7 åˆ›å»ºç”¨æˆ·åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šåˆ›å»ºcloudera-scmç”¨æˆ·ï¼šâ€‹â€‹ useradd --system --home=/opt/cloudera-manager/cm-5.7.0/run/cloudera-scm-server --no-create-home --shell=/bin/false --comment â€œCloudera SCM Userâ€ cloudera-scm 3.8 åˆ›å»ºCloudera Manager Serverå…ƒæ•°æ®ç›®å½•åœ¨ä¸»èŠ‚ç‚¹ä¸Šéœ€è¦åˆ›å»ºCloudera Manager Serverçš„å…ƒæ•°æ®ç›®å½•ï¼šmkdir /var/cloudera-scm-server chown cloudera-scm:cloudera-scm /var/cloudera-scm-server chown cloudera-scm:cloudera-scm /opt/cloudera-manager 3.9 å¤åˆ¶cloudera-managerç›®å½•åˆ°å…¶ä»–èŠ‚ç‚¹é¦–å…ˆå°†/opt/cloudera-manager/cm-5.7.0/etc/cloudera-scm-agent/config.iniæ–‡ä»¶ä¸­server_hosté…ç½®é¡¹çš„åœ°å€æ›´æ”¹ä¸ºä¸»èŠ‚ç‚¹çš„åœ°å€å°†ä¸»èŠ‚ç‚¹ä¸Š/opt/cloudera-managerç›®å½•å¤åˆ¶è‡³å…¶ä»–é›†ç¾¤èŠ‚ç‚¹ä¸‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼šscp -r /opt/cloudera-manager ä¸»æœº:/opt/ 3.10 åˆ›å»ºParcelç›®å½•åœ¨ä¸»èŠ‚ç‚¹ä¸Šåˆ›å»ºParcelåŒ…çš„å­˜å‚¨ç›®å½•ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼šmkdir -p /opt/cloudera/parcel-repo chown cloudera-scm:cloudera-scm /opt/cloudera/parcel-repo å°†ä»¥ä¸‹æ–‡ä»¶å¤åˆ¶åˆ°è¯¥ç›®å½•ä¸‹CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcelCDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel.sha1manifest.jsonå°†CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel.sha1æ–‡ä»¶çš„åç§°ä¿®æ”¹ä¸ºCDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel.sha 3.11 åˆ›å»ºParcelåŒ…åˆ†å‘ç›®å½•Cloudera Manageråœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å°†å®‰è£…åŒ…å¤åˆ¶åˆ°é›†ç¾¤çš„å„ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå› æ­¤éœ€è¦åœ¨é›†ç¾¤å„ä¸ªèŠ‚ç‚¹ä¸Šäº‹å…ˆåˆ›å»ºParcelåŒ…çš„åˆ†å‘ç›®å½•ã€‚åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šï¼šmkdir -p /opt/cloudera/parcels chown cloudera-scm:cloudera-scm /opt/cloudera/parcels 3.12 åˆå§‹åŒ–CSMæ•°æ®åº“è„šæœ¬åœ¨ä¸»èŠ‚ç‚¹ä¸Šï¼Œæ‰§è¡Œåˆå§‹åŒ–è„šæœ¬ï¼š/opt/cloudera-manager/cm-5.7.0/share/cmf/schema/scm_prepare_database.sh mysql -hmanager1 -uroot -p123456 --scm-host manager1 scmdbn scmdbu scmdbp è¯´æ˜ï¼šè¿™ä¸ªè„šæœ¬å°±æ˜¯ç”¨æ¥åˆ›å»ºå’Œé…ç½®CMSéœ€è¦çš„æ•°æ®åº“çš„è„šæœ¬ã€‚å„å‚æ•°æ˜¯æŒ‡ï¼šmysqlï¼šæ•°æ®åº“ç”¨çš„æ˜¯mysqlï¼Œå¦‚æœå®‰è£…è¿‡ç¨‹ä¸­ç”¨çš„oracleï¼Œé‚£ä¹ˆè¯¥å‚æ•°å°±åº”è¯¥æ”¹ä¸ºoracleã€‚-hmanager1ï¼šæ•°æ®åº“å»ºç«‹åœ¨manager1ä¸»æœºä¸Šé¢ã€‚ä¹Ÿå°±æ˜¯ä¸»èŠ‚ç‚¹ä¸Šé¢ã€‚-urootï¼šrootèº«ä»½è¿è¡Œmysqlã€‚-123456ï¼šmysqlçš„rootå¯†ç æ˜¯123456ã€‚â€“scm-host manager1ï¼šCMSçš„ä¸»æœºï¼Œä¸€èˆ¬æ˜¯å’Œmysqlå®‰è£…çš„ä¸»æœºæ˜¯åœ¨åŒä¸€ä¸ªä¸»æœºä¸Šã€‚æœ€åä¸‰ä¸ªå‚æ•°æ˜¯ï¼šæ•°æ®åº“åï¼Œæ•°æ®åº“ç”¨æˆ·åï¼Œæ•°æ®åº“å¯†ç ã€‚æˆ‘çš„å®é™…ç¯å¢ƒä¸­é‡‡ç”¨å¦‚ä¸‹å‘½ä»¤/opt/cloudera-manager/cm-5.7.0/share/cmf/schema/scm_prepare_database.sh mysql -hlocalhost -uroot -p -P13066 --scm-host localhost cloudera root BIM@123%$#qwe 3.13 é…ç½®ä¸å¯åŠ¨Cloudera Manager Serveré¦–å…ˆå°†Cloudera Manager Serverçš„å¯åŠ¨è„šæœ¬å¤åˆ¶åˆ°/etc/init.d/ç›®å½•ä¸‹ï¼šâ€‹â€‹ cpâ€‹ /opt/cloudera-manager/cm-5.7.0/etc/init.d/cloudera-scm-serverâ€‹ /etc/init.d/cloudera-scm-serveré…ç½®/etc/init.d/cloudera-scm-serverï¼švi /etc/init.d/cloudera-scm-server æ‰¾åˆ°CMF_DEFAULTSé…ç½®é¡¹ï¼Œè¿›è¡Œä¿®æ”¹ã€‚ CMF_DEFAULTS=${CMF_DEFAULTS:-/opt/cloudera-manager/cm-5.7.0/etc/default} å¯åŠ¨Cloudera Manager Serverï¼šservice cloudera-scm-server start chkconfig cloudera-scm-server on 3.14 é…ç½®ä¸å¯åŠ¨Cloudera Manager Agentåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šåˆ›å»ºagentçš„è¿è¡Œæ—¶ç›®å½•ï¼šmkdir /opt/cloudera-manager/cm-5.7.0/run/cloudera-scm-agent å°†Cloudera Manager Agentçš„å¯åŠ¨è„šæœ¬å¤åˆ¶åˆ°/etc/init.d/ç›®å½•ä¸‹ï¼šcp \\ /opt/cloudera-manager/cm-5.7.0/etc/init.d/cloudera-scm-agent \\ /etc/init.d/cloudera-scm-agent é…ç½®Cloudera Manager Agentï¼švi /etc/init.d/cloudera-scm-agent æ‰¾åˆ°CMF_DEFAULTSé…ç½®é¡¹ï¼Œè¿›è¡Œä¿®æ”¹ã€‚ CMF_DEFAULTS=${CMF_DEFAULTS:-/opt/cloudera-manager/cm-5.7.0/etc/default} å¯åŠ¨Cloudera Manager Agentï¼šservice cloudera-scm-agent start chkconfig cloudera-scm-agent on 3.15 æ—¥å¿—æ–‡ä»¶è·¯å¾„å¯åŠ¨Serveræˆ–Agentç”±äºå„ç§åŸå› å¯èƒ½ä¼šå¯¼è‡´å¯åŠ¨å¤±è´¥ï¼Œå› æ­¤éœ€è¦æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶å®šä½é”™è¯¯ä¿¡æ¯ï¼Œè¿›è¡Œä¿®å¤ã€‚Serverçš„æ—¥å¿—æ–‡ä»¶ä½äºï¼š/opt/cloudera-manager/cm-5.7.0/log/cloudera-scm-server Agentçš„æ—¥å¿—æ–‡ä»¶ä½äºï¼š/opt/cloudera-manager/cm-5.7.0/log/cloudera-scm-agent 3.16 è¿›å…¥Cloudera Manager Serverç®¡ç†é¡µé¢å½“Serverä¸Agentå…¨éƒ¨å¯åŠ¨å®Œæˆåï¼Œå¯ä»¥è®¿é—®CMSçš„WEBç®¡ç†é¡µé¢example linkï¼Œå¦‚å›¾æ‰€ç¤ºã€‚è´¦æˆ·å¯†ç å‡ä¸ºadmin 4 å®‰è£…CDHåœ¨Cloudera Manager Serverçš„WEBç®¡ç†é¡µé¢ä¸­ï¼Œå¯ä»¥æ‰¹é‡è¿›è¡Œç»„ä»¶çš„å®‰è£…ã€é…ç½®ç­‰ï¼Œä¸‹é¢å¼€å§‹å®‰è£…CDHå„ç§ç»„ä»¶ã€‚ 4.1 æ¥å—åè®®é¦–æ¬¡ç™»é™†æ—¶ï¼Œä¼šè‡ªåŠ¨å¼¹å‡ºâ€œæ¥å—åè®®â€é¡µé¢ï¼Œæ¥å—å³å¯ã€‚ 4.2 é€‰æ‹©ç‰ˆæœ¬é€‰æ‹©ç‰ˆæœ¬æ—¶ï¼Œé€‰æ‹©å…è´¹ç‰ˆæœ¬å³å¯ã€‚ 4.3 æŸ¥çœ‹å½“å‰å·²ç®¡ç†ä¸»æœºå¦‚æœAgentæ­£äº§å¯åŠ¨ï¼Œåœ¨â€œå½“å‰ç®¡ç†çš„ä¸»æœºâ€é¡µé¢ä¼šæ˜¾ç¤ºæ‰€æœ‰ç®¡ç†ä¸»æœºï¼Œå¦åˆ™è¯·æ£€æŸ¥Agentæ˜¯å¦æ­£å¸¸å¯åŠ¨ã€‚é€‰æ‹©æ‰€æœ‰ä¸»æœºï¼Œç‚¹å‡»â€œç»§ç»­â€æŒ‰é’®ã€‚ 4.4 ç­‰å¾…ç³»ç»Ÿåˆ†å‘ParcelåŒ…Cloudera Managerä¼šå°†ParcelåŒ…åˆ†å‘è‡³å„ä¸ªèŠ‚ç‚¹ï¼Œç­‰å¾…å‡ åˆ†é’Ÿå³å¯ã€‚æ³¨æ„ï¼Œåœ¨åˆ†å‘ParcelåŒ…çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä¼šå‡ºç°åˆ†å‘å¤±è´¥çš„é—®é¢˜ï¼ŒæŸ¥çœ‹ç›¸åº”çš„Agentæ—¥å¿—ï¼Œå®šä½é”™è¯¯ï¼Œè¿›è¡Œä¿®å¤ã€‚æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªé”™è¯¯æ˜¯Pythonè„šæœ¬å‡ºç°é—®é¢˜ï¼Œéœ€è¦è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼Œå‚è§é“¾æ¥ï¼šhttp://www.jianshu.com/p/0d70a67b66b2 4.5 ç­‰å¾…æ£€æŸ¥ä¸»æœºæ­£ç¡®æ€§ParcelåŒ…åˆ†å‘å®Œæˆåï¼ŒCloudera Managerä¼šæ£€æŸ¥ä¸»æœºçš„çš„æ­£ç¡®æ€§ï¼ŒåŒ…æ‹¬ä¸€äº›ä¼˜åŒ–çš„é…ç½®ã€è¦å…³é—­çš„å±æ€§ç­‰ï¼Œè¯¥æ­¥éª¤éå¸¸é‡è¦ï¼Œä¸€å®šè¦æ ¹æ®æ£€æŸ¥ç»“æœå¯¹ä¸»æœºè¿›è¡Œé…ç½®ä¿®å¤ï¼Œå¦åˆ™åœ¨ä»¥åçš„è¿‡ç¨‹ä¸­ä¼šå‡ºç°å„ç§ä¸å¯é¢„æ–™é—®é¢˜ã€‚ 4.6 é€‰æ‹©è¦å®‰è£…çš„ç»„ä»¶ä¸»æœºæ­£ç¡®æ€§æ£€æŸ¥å®Œæˆåï¼Œå°±å¯ä»¥è¿›å…¥å®‰è£…ç¯èŠ‚äº†ï¼ŒCloudera Managerä¼šè¦æ±‚ä½ é€‰æ‹©è¦å®‰è£…çš„ç»„ä»¶ã€‚é€‰æ‹©â€œè‡ªå®šä¹‰æœåŠ¡â€ï¼Œé€‰æ‹©é›†ç¾¤ä¸­è¦å®‰è£…çš„ç»„ä»¶ã€‚ 4.7 è®¾ç½®æ•°æ®åº“é€‰æ‹©å®Œæˆè¦å®‰è£…çš„ç»„ä»¶åï¼Œéœ€è¦ä¸ºCloudera Manageré…ç½®è¿è¡Œæ—¶æ•°æ®åº“ç¯å¢ƒï¼Œå¦‚å›¾æ‰€ç¤ºã€‚é…ç½®çš„æ•°æ®åº“åœ¨å‰é¢çš„æ­¥éª¤ä¸­å·²ç»æå‰åˆ›å»ºå®Œæˆã€‚ 4.8 è®¾ç½®ç»„ä»¶çš„åŸºæœ¬è¿è¡Œç¯å¢ƒè¯¥æ­¥éª¤ä¸»è¦ç”¨äºè®¾ç½®ç»„ä»¶çš„åŸºæœ¬è¿è¡Œç¯å¢ƒï¼Œä¾‹å¦‚NameNodeçš„èŠ‚ç‚¹ã€DataNodeçš„èŠ‚ç‚¹ã€æ•°æ®å­˜æ”¾çš„ç›®å½•ç­‰ï¼Œè¯¥æ­¥éª¤æ ¹æ®å®é™…çš„ç‰©ç†ç¯å¢ƒè¿›è¡Œè®¾ç½®å³å¯ã€‚ 4.9 ç­‰å¾…å¯åŠ¨é›†ç¾¤åœ¨é›†ç¾¤çš„å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå› ä¸ºæƒé™æˆ–å…¶ä»–é—®é¢˜å¯¼è‡´æŸäº›æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œåªéœ€è¦æ ¹æ®é”™è¯¯ä¿¡æ¯è¿›è¡Œä¿®å¤ï¼Œå³å¯å¯åŠ¨å®Œæˆã€‚ 4.10 å¯åŠ¨æˆåŠŸé›†ç¾¤å¯åŠ¨æˆåŠŸåï¼Œå¯åœ¨é¦–é¡µæŸ¥çœ‹é›†ç¾¤çš„æ€»è§ˆã€‚ 4.11 å…¶ä»–åç»­å¯ä»¥å¯åŠ¨HDFSçš„HAã€YARNçš„HAä»¥åŠä¼˜åŒ–å„ä¸ªç»„ä»¶çš„é…ç½®ç­‰ã€‚æ„Ÿè°¢å¼ å¸…åˆ†äº«ã€‚","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"CDH","slug":"CDH","permalink":"yihao.ml/tags/CDH/"}],"author":"å¼ å¸…"},{"title":"ç”¨æˆ·è¡Œä¸ºæŒ‡åˆ†æ","slug":"2019-03-15-ç”¨æˆ·è¡Œä¸ºæŒ‡åˆ†æ","date":"2019-03-15T14:24:40.000Z","updated":"2019-11-29T12:20:47.692Z","comments":true,"path":"2019/03/15/2019-03-15-ç”¨æˆ·è¡Œä¸ºæŒ‡åˆ†æ/","link":"","permalink":"yihao.ml/2019/03/15/2019-03-15-ç”¨æˆ·è¡Œä¸ºæŒ‡åˆ†æ/","excerpt":"","text":"1. æ¦‚è¿°æ„ä»¶ä¼ä¸šçº§åˆ«çš„å¤§æ•°æ®å¹³å°å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ï¼Œèµ·æ­¥é˜¶æ®µè¦æƒ³çš„å…¨é¢ä¸€äº›ï¼Œä»å¤šä¸ªæ–¹é¢è¿›è¡Œè€ƒè™‘ã€‚ä¾‹å¦‚å…³äºç¡¬ä»¶ç¯å¢ƒï¼ŸHadoopç”Ÿæ€åœˆçš„äº§å“ä¼—å¤šï¼Œåˆ°åº•è¦é€‰æ‹©é‚£äº›ç»„ä»¶ï¼Ÿå¦å¤–éƒ¨ç½²ã€å®‰è£…ã€è¿ç»´ã€ç›‘æ§ç­‰å·¥ä½œå¼‚å¸¸ç¹çï¼Œæ€ä¹ˆè§£å†³åæœŸç®¡ç†é—®é¢˜ï¼Ÿé’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œä¸‹é¢ä»è½¯ç¡¬ä»¶ã€åæœŸè¿ç»´å’Œä¸šåŠ¡çš„è§’åº¦æ¥é˜è¿°è¯¦ç»†è§„åˆ’ã€‚ 2. è½¯ä»¶æ”¯æŒ1ï¼‰ é¦–å…ˆæˆ‘ä»¬è¯´è¯´å…³äºHadoopçš„å‘è¡Œç‰ˆï¼Œç›®å‰Hadoopçš„å‘è¡Œç‰ˆä¸»è¦æœ‰ä¸‰ç§ï¼Œæˆ‘ä»¬æ€ä¹ˆé€‰?1231. Apahce åŸºé‡‘ä¼š Hadoop2. CDH (Cloudera Distribution Hadoop)3. HDP ï¼ˆHortonworks Data Platformï¼‰Hadoopå±äºApacheåŸºé‡‘ä¼šçš„é¡¶çº§é¡¹ç›®ï¼ŒApahceç‰ˆæœ¬è¿­ä»£é€Ÿåº¦å¾ˆå¿«ï¼Œæ–°ç‰¹æ€§å¾ˆå¤šï¼Œç›¸å¯¹çš„bugå°±ä¼šå¾ˆå¤šï¼Œç»„ä»¶ä¸ç»„ä»¶ä¹‹é—´çš„å…¼å®¹æ€§ä¹Ÿä¼šå¾ˆå·®ã€‚åœ¨å®é™…ä¸­å¤§éƒ¨åˆ†å®ƒçš„ä½¿ç”¨è€…å¤šä¸ºè¿›è¡Œå­¦æœ¯ç ”ç©¶ï¼Œå–œæ¬¢çˆ±æŠ˜è…¾çš„é‚£å·äººï¼Œæ‰€ä»¥è¿™ä¸ªç‰ˆæœ¬ä¸é¦–é€‰ã€‚Cloudera é’ˆå¯¹Apahce Hadoopåœ¨æ¯ä¸ªå¤§ç‰ˆæœ¬å˜åŒ–åè¿›è¡Œä¸€æ¬¡æ‰“åŒ…ï¼Œå¾ˆå¥½çš„è§£å†³äº†ç³»ç»Ÿä¸ç¨³å®šçš„é—®é¢˜ã€‚ä¸æ­¤åŒæ—¶ï¼ŒClouderaå…¬å¸æ¨å‡ºçš„Cloudera Managerç‰ˆæœ¬é›†ç¾¤ç®¡ç†å·¥å…·ï¼Œå®ƒå¯ä»¥å®Œæˆä¸€é”®éƒ¨ç½²é›†ç¾¤ï¼Œä¸€é”®æ‹“å±•ï¼Œç›‘æ§ï¼Œè‡ªåŠ¨è¯Šæ–­ç­‰æ“ä½œã€‚æœ€é‡è¦çš„æ˜¯CDHçš„æ–‡æ¡£å¾ˆä¸°å¯Œï¼Œè§£å†³é—®é¢˜çš„é€Ÿåº¦ä¹Ÿä¼šå¾ˆé«˜ã€‚ç›®å‰çŸ¥æ™“çš„ä½¿ç”¨æ­¤å‘è¡Œç‰ˆçš„å…¬å¸æœ‰ï¼š360ã€ä¸œæ–¹èˆªç©ºç­‰ï¼Œè¿™ä¸ªç‰ˆæœ¬æ˜¯ç›®å‰é¦–é€‰ã€‚HDPç‰ˆæœ¬æ˜¯Hortonworkså…¬å¸é’ˆå¯¹Hadoopçš„å‘è¡Œç‰ˆæœ¬ï¼Œç›®å‰ä¹Ÿæ˜¯æ¯”è¾ƒå°ä¼—çš„ä¸€ä¸ªï¼Œç°é˜¶æ®µè¿˜å¤„äºæ¢ç´¢å‘å±•é˜¶æ®µï¼Œæ‰€ä»¥ä¸é¦–é€‰ã€‚æœ‰äº†è‡ªåŠ¨åŒ–éƒ¨ç½²Cloudera Manager ,åæœŸè¿ç»´å°±èƒ½è½»æ¾çš„å¤šï¼Œè€Œä¸”é‡Œé¢çš„è‡ªåŠ¨è¯Šæ–­åŠŸèƒ½ä¹Ÿæ˜¯ç›¸å½“niceï¼2ï¼‰ å…³äºå…·ä½“åº”ç”¨ç»„ä»¶Flumeã€Hadoopã€Kafkaã€Hiveã€Sparkã€Redisã€Mysqlã€Sqlserverã€Sqoopã€Hueã€Oozie 3. ç¡¬ä»¶æ”¯æŒé…ç½®Hadoopé›†ç¾¤è‡³å°‘è¦æ±‚æœ‰ä¸‰å°Serverï¼Œä¸€å°ä¸ºä¸»æœåŠ¡å™¨ï¼Œä¸‰å°ä¸ºä»æœåŠ¡å™¨ã€‚ä¸»æœåŠ¡å™¨ä¸Šä¼šè·‘å¤§é‡åå°è¿›ç¨‹ï¼Œæ‰€ä»¥ä¸»æœåŠ¡å™¨çš„é…ç½®è¦è¿œè¿œä¼˜äºä»æœåŠ¡å™¨ã€‚**ä¸»æœåŠ¡å™¨ ** æœ€å°‘1å°ç¡¬ä»¶ç±»å‹è¦æ±‚OSlinuxç¡¬ç›˜1~4TBCPU2ä¸ªé¢‘ç‡ä¸º2~2.5GHzçš„å››æ ¸æˆ–å…­æ ¸å†…å­˜16~32GB**ä»æœåŠ¡å™¨ **æœ€å°‘ä¸¤å°ç¡¬ä»¶ç±»å‹è¦æ±‚OSlinuxç¡¬ç›˜1~2TBCPU2ä¸ªé¢‘ç‡ä¸º2~2.5GHzçš„å››æ ¸æˆ–å…­æ ¸å†…å­˜4~16GB 4. å¦‚ä½•è¿›è¡Œç½‘ç«™æµé‡åˆ†æä¸‹é¢å¯¹å¹³å°åˆæœŸç»Ÿè®¡æŒ‡æ ‡åšä¸€ä¸ªæ¢³ç†ï¼Œå¦å¤–ä¼šä»‹ç»ä¸€ä¸‹ç»Ÿè®¡æŒ‡æ ‡çš„æ–¹å‘ã€‚ 4.1 æŒ‡æ ‡ä¸¾ä¾‹éœ€æ±‚ï¼šä»Šæ—¥ï¼Œæ˜¨å¤©ï¼Œå‰å¤© æ‰€æœ‰æ¥è®¿è€…ï¼Œå¹³å‡è¯·æ±‚çš„é¡µé¢æ•°éœ€æ±‚ï¼šæŒ‰ç…§æ¥æºåŠæ—¶é—´ç»´åº¦ç»Ÿè®¡PVSï¼Œå¹¶æŒ‰ç…§PVå¤§å°å€’åºæ’åºéœ€æ±‚ï¼šæŒ‰ç…§æ—¶é—´ç»´åº¦ï¼Œæ¯”å¦‚ï¼Œç»Ÿè®¡ä¸€å¤©å†…å„å°æ—¶äº§ç”Ÿæœ€å¤špvsçš„æ¥æºtopNéœ€æ±‚ï¼šç»Ÿè®¡æ¯æ—¥æœ€çƒ­é—¨çš„åŠŸèƒ½top10éœ€æ±‚ï¼šæŒ‰ç…§æ—¶é—´ç»´åº¦æ¯”å¦‚å°æ—¶æ¥ç»Ÿè®¡ç‹¬ç«‹è®¿å®¢åŠå…¶äº§ç”Ÿçš„pvéœ€æ±‚ï¼šå°†æ¯å¤©çš„æ–°è®¿å®¢ç»Ÿè®¡å‡ºæ¥éœ€æ±‚ï¼šæŸ¥è¯¢ä»Šæ—¥æ‰€æœ‰å›å¤´è®¿å®¢åŠå…¶è®¿é—®æ¬¡æ•°éœ€æ±‚ï¼šç»Ÿè®¡å‡ºæ¯å¤©æ‰€æœ‰ç”¨æˆ·è®¿é—®ç½‘ç«™çš„å¹³å‡æ¬¡æ•°éœ€æ±‚ï¼šå›å¤´/å•æ¬¡è®¿å®¢çš„è®¿é—®æ¯”é‡ï¼Œæ¯”å¦‚å½“æ—¥å›å¤´å®¢å æ¯”éœ€æ±‚ï¼šäººå‡è®¿é—®é¢‘åº¦éœ€æ±‚ï¼šæ¼æ–—æ¨¡å‹ç»Ÿè®¡ï¼Œä»¥æ¨¡å‹ä¸Šä¼ ä¸šåŠ¡æ¥è¯„ä¼°æ¨¡å‹è½¬åŒ–è®¾è®¡çš„åˆç†æ€§ã€‚1234567891011step1: å¼€å¯æœ¬åœ°åŒ–ç»„å»ºstep2: é€‰æ‹©æ¨¡å‹ã€é€‰æ‹©ç›®å½•step3: è®¾ç½®å„ç§å‚æ•°ï¼Œå‹¾é€‰æ¨¡å‹å¯¹æ¯”ï¼ˆæˆ–è€…æ˜¯å…¶ä»–æ“ä½œï¼‰step4: è¿›è¡Œæ¨¡å‹è½¬æ¢step5: è¿›è¡Œæ¨¡å‹ä¸Šä¼ step6: æ¨¡å‹æµè§ˆå…­æ­¥ä¸ºä¸€ä¸ªä¸šåŠ¡æŒ‡æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥æ‹“å±•ä¸‹é¢ä¸šåŠ¡æŒ‡æ ‡**1) æŸ¥è¯¢æ¯ä¸€ä¸ªæ­¥éª¤çš„æ€»è®¿é—®äººæ•°****2) æŸ¥è¯¢æ¯ä¸€æ­¥éª¤ç›¸å¯¹äºè·¯å¾„èµ·ç‚¹äººæ•°çš„æ¯”ä¾‹****3) æŸ¥è¯¢æ¯ä¸€æ­¥éª¤ç›¸å¯¹äºä¸Šä¸€æ­¥éª¤çš„æ¼å‡ºç‡**â€‹é™¤äº†ä¸Šé¢ä¸€äº›æŒ‡æ ‡ä»¥å¤–ï¼Œå¯ä»¥ä»ä¸‹é¢æ–¹å‘å…¥æ‰‹ï¼Œå‘æ˜ä¸€äº›æœ‰ä»·å€¼çš„æ•°æ®æŠ¥è¡¨ã€‚éƒ¨åˆ†å‚è€ƒ**ã€Šç½‘ç«™åˆ†æå®æˆ˜â€”â€”å¦‚ä½•ä»¥æ•°æ®é©±åŠ¨å†³ç­–ï¼Œæå‡ç½‘ç«™ä»·å€¼ã€‹** ç‹å½¦å¹³ï¼Œå´ç››é”‹ç¼–è‘— 4.2 å…³äºç»Ÿè®¡ç»Ÿè®¡æ–¹å‘1ï¼‰ åŸºç¡€åˆ†æï¼ˆPV,IP,UVï¼‰è¶‹åŠ¿åˆ†æï¼šæ ¹æ®é€‰å®šçš„æ—¶æ®µï¼Œæä¾›ç½‘ç«™æµé‡æ•°æ®ï¼Œé€šè¿‡æµé‡è¶‹åŠ¿å˜åŒ–å½¢æ€ï¼Œä¸ºæ‚¨åˆ†æç½‘ç«™è®¿å®¢çš„è®¿é—®è§„å¾‹ã€ç½‘ç«™å‘å±•çŠ¶å†µæä¾›å‚è€ƒã€‚å¯¹æ¯”åˆ†æï¼šæ ¹æ®é€‰å®šçš„ä¸¤ä¸ªå¯¹æ¯”æ—¶æ®µï¼Œæä¾›ç½‘ç«™æµé‡åœ¨æ—¶é—´ä¸Šçš„çºµå‘å¯¹æ¯”æŠ¥è¡¨ï¼Œå¸®æ‚¨å‘ç°ç½‘ç«™å‘å±•çŠ¶å†µã€å‘å±•è§„å¾‹ã€æµé‡å˜åŒ–ç‡ç­‰ã€‚å½“å‰åœ¨çº¿ï¼šæä¾›å½“å‰æ—¶åˆ»ç«™ç‚¹ä¸Šçš„è®¿å®¢é‡ï¼Œä»¥åŠæœ€è¿‘15åˆ†é’Ÿæµé‡ã€æ¥æºã€å—è®¿ã€è®¿å®¢å˜åŒ–æƒ…å†µç­‰ï¼Œæ–¹ä¾¿ç”¨æˆ·åŠæ—¶äº†è§£å½“å‰ç½‘ç«™æµé‡çŠ¶å†µã€‚è®¿é—®æ˜ç»†ï¼šæä¾›æœ€è¿‘7æ—¥çš„è®¿å®¢è®¿é—®è®°å½•ï¼Œå¯æŒ‰æ¯ä¸ªPVæˆ–æ¯æ¬¡è®¿é—®è¡Œä¸ºï¼ˆè®¿å®¢çš„æ¯æ¬¡ä¼šè¯ï¼‰æ˜¾ç¤ºï¼Œå¹¶å¯æŒ‰ç…§æ¥æºã€æœç´¢è¯ç­‰æ¡ä»¶è¿›è¡Œç­›é€‰ã€‚ é€šè¿‡è®¿é—®æ˜ç»†ï¼Œç”¨æˆ·å¯ä»¥è¯¦ç»†äº†è§£ç½‘ç«™æµé‡çš„ç´¯è®¡è¿‡ç¨‹ï¼Œä»è€Œä¸ºç”¨æˆ·å¿«é€Ÿæ‰¾å‡ºæµé‡å˜åŠ¨åŸå› æä¾›æœ€åŸå§‹ã€æœ€å‡†ç¡®çš„ä¾æ®ã€‚2)æ¥æºåˆ†ææ¥æºåˆ†ç±»ï¼šæä¾›ä¸åŒæ¥æºå½¢å¼ï¼ˆç›´æ¥è¾“å…¥ã€æœç´¢å¼•æ“ã€å…¶ä»–å¤–éƒ¨é“¾æ¥ã€ç«™å†…æ¥æºï¼‰ã€ä¸åŒæ¥æºé¡¹å¼•å…¥æµé‡çš„æ¯”ä¾‹æƒ…å†µã€‚é€šè¿‡ç²¾ç¡®çš„é‡åŒ–æ•°æ®ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†æä»€ä¹ˆç±»å‹çš„æ¥è·¯äº§ç”Ÿçš„æµé‡å¤šã€æ•ˆæœå¥½ï¼Œè¿›è€Œåˆç†ä¼˜åŒ–æ¨å¹¿æ–¹æ¡ˆã€‚æœç´¢å¼•æ“ï¼šæä¾›å„æœç´¢å¼•æ“ä»¥åŠæœç´¢å¼•æ“å­äº§å“å¼•å…¥æµé‡çš„æ¯”ä¾‹æƒ…å†µã€‚ä»æœç´¢å¼•æ“å¼•å…¥æµé‡çš„çš„è§’åº¦ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£ç½‘ç«™çš„SEOã€SEMæ•ˆæœï¼Œä»è€Œä¸ºåˆ¶å®šä¸‹ä¸€æ­¥SEOã€SEMè®¡åˆ’æä¾›ä¾æ®ã€‚æœç´¢è¯ï¼šæä¾›è®¿å®¢é€šè¿‡æœç´¢å¼•æ“è¿›å…¥ç½‘ç«™æ‰€ä½¿ç”¨çš„æœç´¢è¯ï¼Œä»¥åŠå„æœç´¢è¯å¼•å…¥æµé‡çš„ç‰¹å¾å’Œåˆ†å¸ƒã€‚å¸®åŠ©ç”¨æˆ·äº†è§£å„æœç´¢è¯å¼•å…¥æµé‡çš„è´¨é‡ï¼Œè¿›è€Œäº†è§£è®¿å®¢çš„å…´è¶£å…³æ³¨ç‚¹ã€ç½‘ç«™ä¸è®¿å®¢å…´è¶£ç‚¹çš„åŒ¹é…åº¦ï¼Œä¸ºä¼˜åŒ–SEOæ–¹æ¡ˆåŠSEMæè¯æ–¹æ¡ˆæä¾›è¯¦ç»†ä¾æ®ã€‚æœ€è¿‘7æ—¥çš„è®¿å®¢æœç´¢è®°å½•ï¼Œå¯æŒ‰æ¯ä¸ªPVæˆ–æ¯æ¬¡è®¿é—®è¡Œä¸ºï¼ˆè®¿å®¢çš„æ¯æ¬¡ä¼šè¯ï¼‰æ˜¾ç¤ºï¼Œå¹¶å¯æŒ‰ç…§è®¿å®¢ç±»å‹ã€åœ°åŒºç­‰æ¡ä»¶è¿›è¡Œç­›é€‰ã€‚ä¸ºæ‚¨æœç´¢å¼•æ“ä¼˜åŒ–æä¾›æœ€è¯¦ç»†çš„åŸå§‹æ•°æ®ã€‚æ¥è·¯åŸŸåï¼šæä¾›å…·ä½“æ¥è·¯åŸŸåå¼•å…¥æµé‡çš„åˆ†å¸ƒæƒ…å†µï¼Œå¹¶å¯æŒ‰â€œç¤¾ä¼šåŒ–åª’ä½“â€ã€â€œæœç´¢å¼•æ“â€ã€â€œé‚®ç®±â€ç­‰ç½‘ç«™ç±»å‹å¯¹æ¥æºåŸŸåè¿›è¡Œåˆ†ç±»ã€‚ å¸®åŠ©ç”¨æˆ·äº†è§£å“ªç±»æ¨å¹¿æ¸ é“äº§ç”Ÿçš„æµé‡å¤šã€æ•ˆæœå¥½ï¼Œè¿›è€Œåˆç†ä¼˜åŒ–ç½‘ç«™æ¨å¹¿æ–¹æ¡ˆã€‚æ¥è·¯é¡µé¢ï¼šæä¾›å…·ä½“æ¥è·¯é¡µé¢å¼•å…¥æµé‡çš„åˆ†å¸ƒæƒ…å†µã€‚ å°¤å…¶å¯¹äºé€šè¿‡æµé‡ç½®æ¢ã€åŒ…å¹¿å‘Šä½ç­‰æ–¹å¼ä»å…¶ä»–ç½‘ç«™å¼•å…¥æµé‡çš„ç”¨æˆ·ï¼Œè¯¥åŠŸèƒ½å¯ä»¥æ–¹ä¾¿ã€æ¸…æ™°åœ°å±•ç°å¹¿å‘Šå¼•å…¥çš„æµé‡åŠæ•ˆæœï¼Œä¸ºä¼˜åŒ–æ¨å¹¿æ–¹æ¡ˆæä¾›ä¾æ®ã€‚æ¥æºå‡é™æ¦œï¼šæä¾›å¼€é€šç»Ÿè®¡åä»»æ„ä¸¤æ—¥çš„TOP10000æœç´¢è¯ã€æ¥è·¯åŸŸåå¼•å…¥æµé‡çš„å¯¹æ¯”æƒ…å†µï¼Œå¹¶æŒ‰ç…§å˜åŒ–çš„å‰§çƒˆç¨‹åº¦æä¾›æ’è¡Œæ¦œã€‚ ç”¨æˆ·å¯é€šè¿‡æ­¤åŠŸèƒ½å¿«é€Ÿæ‰¾åˆ°å“ªäº›æ¥è·¯å¯¹ç½‘ç«™æµé‡çš„å½±å“æ¯”è¾ƒå¤§ï¼Œä»è€ŒåŠæ—¶æ’æŸ¥ç›¸åº”æ¥è·¯é—®é¢˜ã€‚3) å—è®¿åˆ†æå—è®¿åŸŸåï¼šæä¾›è®¿å®¢å¯¹ç½‘ç«™ä¸­å„ä¸ªåŸŸåçš„è®¿é—®æƒ…å†µã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç½‘ç«™ä¸åŒåŸŸåæä¾›çš„äº§å“ã€å†…å®¹å„æœ‰å·®å¼‚ï¼Œé€šè¿‡æ­¤åŠŸèƒ½ç”¨æˆ·å¯ä»¥äº†è§£ä¸åŒå†…å®¹çš„å—æ¬¢è¿ç¨‹åº¦ä»¥åŠç½‘ç«™è¿è¥æˆæ•ˆã€‚å—è®¿é¡µé¢ï¼šæä¾›è®¿å®¢å¯¹ç½‘ç«™ä¸­å„ä¸ªé¡µé¢çš„è®¿é—®æƒ…å†µã€‚ ç«™å†…å…¥å£é¡µé¢ä¸ºè®¿å®¢è¿›å…¥ç½‘ç«™æ—¶æµè§ˆçš„ç¬¬ä¸€ä¸ªé¡µé¢ï¼Œå¦‚æœå…¥å£é¡µé¢çš„è·³å‡ºç‡è¾ƒé«˜åˆ™éœ€è¦å…³æ³¨å¹¶ä¼˜åŒ–ï¼›ç«™å†…å‡ºå£é¡µé¢ä¸ºè®¿å®¢è®¿é—®ç½‘ç«™çš„æœ€åä¸€ä¸ªé¡µé¢ï¼Œå¯¹äºç¦»å¼€ç‡è¾ƒé«˜çš„é¡µé¢éœ€è¦å…³æ³¨å¹¶ä¼˜åŒ–ã€‚å—è®¿å‡é™æ¦œï¼šæä¾›å¼€é€šç»Ÿè®¡åä»»æ„ä¸¤æ—¥çš„TOP10000å—è®¿é¡µé¢çš„æµè§ˆæƒ…å†µå¯¹æ¯”ï¼Œå¹¶æŒ‰ç…§å˜åŒ–çš„å‰§çƒˆç¨‹åº¦æä¾›æ’è¡Œæ¦œã€‚ å¯é€šè¿‡æ­¤åŠŸèƒ½éªŒè¯ç»è¿‡æ”¹ç‰ˆçš„é¡µé¢æ˜¯å¦æœ‰æµé‡æå‡æˆ–å“ªäº›é¡µé¢æœ‰å·¨å¤§æµé‡æ³¢åŠ¨ï¼Œä»è€ŒåŠæ—¶æ’æŸ¥ç›¸åº”é—®é¢˜ã€‚çƒ­ç‚¹å›¾ï¼šè®°å½•è®¿å®¢åœ¨é¡µé¢ä¸Šçš„é¼ æ ‡ç‚¹å‡»è¡Œä¸ºï¼Œé€šè¿‡é¢œè‰²åŒºåˆ†ä¸åŒåŒºåŸŸçš„ç‚¹å‡»çƒ­åº¦ï¼›æ”¯æŒå°†ä¸€ç»„é¡µé¢è®¾ç½®ä¸º&quot;å…³æ³¨èŒƒå›´&quot;ï¼Œå¹¶å¯æŒ‰æ¥è·¯ç»†åˆ†ç‚¹å‡»çƒ­åº¦ã€‚ é€šè¿‡è®¿å®¢åœ¨é¡µé¢ä¸Šçš„ç‚¹å‡»é‡ç»Ÿè®¡ï¼Œå¯ä»¥äº†è§£é¡µé¢è®¾è®¡æ˜¯å¦åˆç†ã€å¹¿å‘Šä½çš„å®‰æ’èƒ½å¦è·å–æ›´å¤šä½£é‡‘ç­‰ã€‚ç”¨æˆ·è§†ç‚¹ï¼šæä¾›å—è®¿é¡µé¢å¯¹é¡µé¢ä¸Šé“¾æ¥çš„å…¶ä»–ç«™å†…é¡µé¢çš„è¾“å‡ºæµé‡ï¼Œå¹¶é€šè¿‡è¾“å‡ºæµé‡çš„é«˜ä½ç»˜åˆ¶çƒ­åº¦å›¾ï¼Œä¸çƒ­ç‚¹å›¾ä¸åŒçš„æ˜¯ï¼Œæ‰€æœ‰è®°å½•éƒ½æ˜¯å®é™…æ‰“å¼€äº†ä¸‹ä¸€é¡µé¢äº§ç”Ÿäº†æµè§ˆæ¬¡æ•°ï¼ˆPVï¼‰çš„æ•°æ®ï¼Œè€Œä¸ä»…ä»…æ˜¯æ‹¥æœ‰é¼ æ ‡ç‚¹å‡»è¡Œä¸ºã€‚è®¿é—®è½¨è¿¹ï¼šæä¾›è§‚å¯Ÿç„¦ç‚¹é¡µé¢çš„ä¸Šä¸‹æ¸¸é¡µé¢ï¼Œäº†è§£è®¿å®¢ä»å“ªäº›é€”å¾„è¿›å…¥é¡µé¢ï¼Œåˆæµå‘äº†å“ªé‡Œã€‚ é€šè¿‡ä¸Šæ¸¸é¡µé¢åˆ—è¡¨æ¯”è¾ƒå‡ºä¸åŒæµé‡å¼•å…¥æ¸ é“çš„æ•ˆæœï¼›é€šè¿‡ä¸‹æ¸¸é¡µé¢åˆ—è¡¨äº†è§£ç”¨æˆ·çš„æµè§ˆä¹ æƒ¯ï¼Œå“ªäº›é¡µé¢å…ƒç´ ã€å†…å®¹æ›´å¸å¼•è®¿å®¢ç‚¹å‡»ã€‚4) è®¿å®¢åˆ†æåœ°åŒºè¿è¥å•†ï¼šæä¾›å„åœ°åŒºè®¿å®¢ã€å„ç½‘ç»œè¿è¥å•†è®¿å®¢çš„è®¿é—®æƒ…å†µåˆ†å¸ƒã€‚ åœ°æ–¹ç½‘ç«™ã€ä¸‹è½½ç«™ç­‰ä¸åœ°åŸŸæ€§ã€ç½‘ç»œé“¾è·¯ç­‰ç»“åˆè¾ƒä¸ºç´§å¯†çš„ç½‘ç«™ï¼Œå¯ä»¥å‚è€ƒæ­¤åŠŸèƒ½æ•°æ®ï¼Œåˆç†ä¼˜åŒ–æ¨å¹¿è¿è¥æ–¹æ¡ˆã€‚ç»ˆç«¯è¯¦æƒ…ï¼šæä¾›ç½‘ç«™è®¿å®¢æ‰€ä½¿ç”¨çš„æµè§ˆç»ˆç«¯çš„é…ç½®æƒ…å†µã€‚ å‚è€ƒæ­¤æ•°æ®è¿›è¡Œç½‘é¡µè®¾è®¡ã€å¼€å‘ï¼Œå¯æ›´å¥½åœ°æé«˜ç½‘ç«™å…¼å®¹æ€§ï¼Œä»¥è¾¾åˆ°è‰¯å¥½çš„ç”¨æˆ·äº¤äº’ä½“éªŒã€‚æ–°è€è®¿å®¢ï¼šå½“æ—¥è®¿å®¢ä¸­ï¼Œå†å²ä¸Šç¬¬ä¸€æ¬¡è®¿é—®è¯¥ç½‘ç«™çš„è®¿å®¢è®°ä¸ºå½“æ—¥æ–°è®¿å®¢ï¼›å†å²ä¸Šå·²ç»è®¿é—®è¿‡è¯¥ç½‘ç«™çš„è®¿å®¢è®°ä¸ºè€è®¿å®¢ã€‚ æ–°è®¿å®¢ä¸è€è®¿å®¢è¿›å…¥ç½‘ç«™çš„é€”å¾„å’Œæµè§ˆè¡Œä¸ºå¾€å¾€å­˜åœ¨å·®å¼‚ã€‚è¯¥åŠŸèƒ½å¯ä»¥è¾…åŠ©åˆ†æä¸åŒè®¿å®¢çš„è¡Œä¸ºä¹ æƒ¯ï¼Œé’ˆå¯¹ä¸åŒè®¿å®¢ä¼˜åŒ–ç½‘ç«™ï¼Œä¾‹å¦‚ä¸ºåˆ¶ä½œæ–°æ‰‹å¯¼èˆªæä¾›æ•°æ®æ”¯æŒç­‰ã€‚å¿ è¯šåº¦ï¼šä»è®¿å®¢ä¸€å¤©å†…å›è®¿ç½‘ç«™çš„æ¬¡æ•°ï¼ˆæ—¥è®¿é—®é¢‘åº¦ï¼‰ä¸è®¿å®¢ä¸Šæ¬¡è®¿é—®ç½‘ç«™çš„æ—¶é—´ä¸¤ä¸ªè§’åº¦ï¼Œåˆ†æè®¿å®¢å¯¹ç½‘ç«™çš„è®¿é—®ç²˜æ€§ã€å¿ è¯šåº¦ã€å¸å¼•ç¨‹åº¦ã€‚ ç”±äºæå‡ç½‘ç«™å†…å®¹çš„æ›´æ–°é¢‘ç‡ã€å¢å¼ºç”¨æˆ·ä½“éªŒä¸ç”¨æˆ·ä»·å€¼å¯ä»¥æœ‰æ›´é«˜çš„å¿ è¯šåº¦ï¼Œå› æ­¤è¯¥åŠŸèƒ½åœ¨ç½‘ç«™å†…å®¹æ›´æ–°åŠç”¨æˆ·ä½“éªŒæ–¹é¢æä¾›äº†é‡è¦å‚è€ƒã€‚æ´»è·ƒåº¦ï¼šä»è®¿å®¢å•æ¬¡è®¿é—®æµè§ˆç½‘ç«™çš„æ—¶é—´ä¸ç½‘é¡µæ•°ä¸¤ä¸ªè§’åº¦ï¼Œåˆ†æè®¿å®¢åœ¨ç½‘ç«™ä¸Šçš„æ´»è·ƒç¨‹åº¦ã€‚ ç”±äºæå‡ç½‘ç«™å†…å®¹çš„è´¨é‡ä¸æ•°é‡å¯ä»¥è·å¾—æ›´é«˜çš„æ´»è·ƒåº¦ï¼Œå› æ­¤è¯¥åŠŸèƒ½æ˜¯ç½‘ç«™å†…å®¹åˆ†æçš„å…³é”®æŒ‡æ ‡ä¹‹ä¸€ã€‚5) è½¬åŒ–è·¯å¾„åˆ†æè½¬åŒ–å®šä¹‰:è®¿å®¢åœ¨æ‚¨çš„ç½‘ç«™å®Œæˆäº†æŸé¡¹æ‚¨æœŸæœ›çš„æ´»åŠ¨ï¼Œè®°ä¸ºä¸€æ¬¡è½¬åŒ–ï¼Œå¦‚æ³¨å†Œæˆ–ä¸‹è½½ã€‚ç›®æ ‡ç¤ºä¾‹è·å¾—ç”¨æˆ·ç›®æ ‡ï¼šåœ¨çº¿æ³¨å†Œã€åˆ›å»ºè´¦å·ç­‰ã€‚å’¨è¯¢ç›®æ ‡ï¼šå’¨è¯¢ã€ç•™è¨€ã€ç”µè¯ç­‰ã€‚äº’åŠ¨ç›®æ ‡ï¼šæ¨¡å‹è½¬åŒ–ã€æ¨¡å‹åˆ†äº«ç­‰ã€‚æ”¶å…¥ç›®æ ‡ï¼šè´­ä¹°ç®€çº¦ç‰ˆã€ä»˜æ¬¾ç­‰ã€‚è½¬åŒ–æ•°æ®çš„åº”ç”¨åœ¨æŠ¥å‘Šçš„è‡ªå®šä¹‰æŒ‡æ ‡ä¸­å‹¾é€‰è½¬åŒ–æŒ‡æ ‡ï¼Œå®æ—¶æŒæ¡ç½‘ç«™çš„æ¨å¹¿åŠè¿è¥æƒ…å†µã€‚ç»“åˆâ€œå…¨éƒ¨æ¥æºâ€ã€â€œè½¬åŒ–è·¯å¾„â€ã€â€œé¡µé¢ä¸Šä¸‹æ¸¸â€ç­‰æŠ¥å‘Šåˆ†æè®¿é—®æ¼æ–—ï¼Œæé«˜è½¬åŒ–ç‡ã€‚å¯¹â€œè½¬åŒ–ç›®æ ‡â€è®¾ç½®ä»·å€¼ï¼Œé¢„ä¼°è½¬åŒ–æ”¶ç›Šï¼Œè¡¡é‡ROIã€‚è·¯å¾„åˆ†æï¼šæ ¹æ®è®¾ç½®çš„ç‰¹å®šè·¯çº¿ï¼Œç›‘æµ‹æŸä¸€æµç¨‹çš„å®Œæˆè½¬åŒ–æƒ…å†µï¼Œç®—å‡ºæ¯æ­¥çš„è½¬æ¢ç‡å’Œæµå¤±ç‡æ•°æ®ï¼Œå¦‚æ³¨å†Œæµç¨‹ï¼Œè´­ä¹°æµç¨‹ç­‰ã€‚","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[]},{"title":"äºŒå‰æ•°ï¼ˆä¸‰ï¼‰","slug":"2019-03-11-äºŒå‰æ•°ï¼ˆä¸‰ï¼‰","date":"2019-03-11T00:04:04.000Z","updated":"2019-11-29T12:20:47.692Z","comments":true,"path":"2019/03/11/2019-03-11-äºŒå‰æ•°ï¼ˆä¸‰ï¼‰/","link":"","permalink":"yihao.ml/2019/03/11/2019-03-11-äºŒå‰æ•°ï¼ˆä¸‰ï¼‰/","excerpt":"","text":"ä¸‹é¢ä½¿ç”¨Javaå®ç°ä¸­åºéé€’å½’éå†äºŒå‰æ ‘ï¼Œå¼€å§‹ä¹‹å‰æˆ‘ä»¬å…ˆæ¢³ç†ä¸€ä¸‹å®ƒçš„æ‰§è¡Œé€»è¾‘ã€‚ç”³è¯·ä¸€ä¸ªæ¡Ÿè®°ä¸ºstack.åˆå§‹åŒ–ä¸€ä¸ªæŒ‡é’ˆcuræŒ‡å‘å¤´èŠ‚ç‚¹ã€‚ä»¥å¤´èŠ‚ç‚¹ä¸ºèµ·å§‹ï¼Œå°†æ ‘çš„æ•´ä¸ªå·¦è¾¹ç•Œå‹å…¥åˆ°æ¡Ÿä¸­ã€‚åŠä¸æ–­çš„å¦cur=cur.left,é‡å¤æ­¥éª¤2å¦‚æœcur.leftä¸ºç©ºï¼Œå¼¹å‡ºstackæ¡Ÿé¡¶å…ƒç´ ï¼Œå¹¶æ‰“å°æ¡Ÿé¡¶å…ƒç´ çš„å€¼ï¼Œæ¡Ÿé¡¶å…ƒç´ è®°ä¸ºnode,å¦cur=node.righté‡å¤æ­¥éª¤2ç›´åˆ°curæŒ‡å‘çš„nodeä¸ºç©ºå¹¶ä¸”stackä¸ºç©ºæ—¶ï¼Œç»“æŸè¯¥è¿‡ç¨‹ã€‚ä¸‹é¢æ˜¯Javaä»£ç å®ç°ï¼š12345678910111213public static void inOrder1(BiTree tree)&#123; Stack&lt;BiTree&gt; stack = new Stack&lt;&gt;(); while(tree != null || !stack.empty())&#123; if(tree!=null)&#123; stack.push(tree); tree = tree.lChild; &#125;else&#123; BiTree node = stack.pop(); System.out.print(node.data); tree = node.rChild; &#125; &#125;&#125;","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"äºŒå‰æ ‘ï¼ˆäºŒï¼‰","slug":"2019-03-10-äºŒå‰æ ‘ï¼ˆäºŒï¼‰","date":"2019-03-10T00:38:24.000Z","updated":"2019-11-29T12:20:47.691Z","comments":true,"path":"2019/03/10/2019-03-10-äºŒå‰æ ‘ï¼ˆäºŒï¼‰/","link":"","permalink":"yihao.ml/2019/03/10/2019-03-10-äºŒå‰æ ‘ï¼ˆäºŒï¼‰/","excerpt":"","text":"ä¸‹é¢ä½¿ç”¨Javaå®ç°å…ˆåºéé€’å½’éå†äºŒå‰æ ‘ï¼Œå¼€å§‹ä¹‹å‰æˆ‘ä»¬å…ˆæ¢³ç†ä¸€ä¸‹å®ƒçš„æ‰§è¡Œé€»è¾‘ã€‚é¦–å…ˆç”³è¯·ä¸€ä¸ªæ–°çš„æ¡Ÿï¼Œè®°ä¸ºstackã€‚æ¯æ¬¡å°†å¤´èŠ‚ç‚¹headå‹å…¥stackä¸­æ¯æ¬¡ä»stackä¸­å¼¹å‡ºæ¡Ÿé¡¶èŠ‚ç‚¹ï¼Œè®°ä¸ºcurï¼Œç„¶åæ‰“å°curèŠ‚ç‚¹çš„å€¼ã€‚å¦‚æœcurå³å­©å­ä¸ä¸ºç©ºçš„è¯ï¼Œå°†curçš„å³å­©å­å…ˆå‹å…¥stackä¸­ã€‚æœ€åå¦‚æœcurçš„å·¦å­©å­ä¸ä¸ºç©ºçš„è¯ï¼Œå°†curçš„å·¦å­©å­å‹å…¥stackä¸­ã€‚ä¸æ–­é‡å¤æ­¥éª¤3,ç›´åˆ°stackä¸ºç©ºï¼Œå…¨éƒ¨è¿‡ç¨‹ç»“æŸã€‚ä¸‹é¢æ˜¯Javaä»£ç å®ç°ï¼š1234567891011121314151617181920/*** å…ˆåºéå†* éé€’å½’*/public static void preOrder1(BiTree tree)&#123; Stack&lt;BiTree&gt; stack = new Stack&lt;&gt;(); if(tree != null)&#123; stack.push(tree); while(!stack.empty())&#123; BiTree node = stack.pop(); while(node != null)&#123; System.out.print(node.data); if(node.rChild != null) stack.push(node.rChild); node = node.lChild; &#125; &#125; &#125;&#125;","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"äºŒå‰æ ‘ï¼ˆä¸€ï¼‰","slug":"2019-03-09-äºŒå‰æ ‘ï¼ˆä¸€ï¼‰","date":"2019-03-09T13:51:42.000Z","updated":"2019-11-29T12:20:47.691Z","comments":true,"path":"2019/03/09/2019-03-09-äºŒå‰æ ‘ï¼ˆä¸€ï¼‰/","link":"","permalink":"yihao.ml/2019/03/09/2019-03-09-äºŒå‰æ ‘ï¼ˆä¸€ï¼‰/","excerpt":"","text":"æ ‘æ˜¯åœ¨å®é™…ç¼–ç¨‹ä¸­ç»å¸¸é‡åˆ°çš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„é€»è¾‘å¾ˆç®€å•ï¼šé™¤äº†æ ¹èŠ‚ç‚¹ä»¥å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œæ ¹èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹;é™¤äº†å¶èŠ‚ç‚¹ä¹‹å¤–æ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹ï¼Œå¶èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ã€‚æ ‘çš„å‰ã€ä¸­ã€ååºéå†æ˜¯æ¯”è¾ƒåŸºç¡€ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¿…é¡»è¦æŒæ¡çš„å‡ ä¸ªç‚¹ï¼Œå®ƒä»¬åˆ†åˆ«æœ‰é€’å½’ã€å’Œéé€’å½’çš„è§£æ³•ã€‚é€’å½’ç›¸å¯¹ç®€å•ä¸€ç‚¹ï¼Œéé€’å½’ç›¸å¯¹å¤æ‚ä¸€äº›ã€‚ä¸‹é¢ç”¨Javaè¯­è¨€åˆ†åˆ«å®ç°æ ‘çš„å‰ã€ä¸­ã€ååºé€’å½’éå†ï¼Œå¦å¤–è¿™è¾¹æ‹“å±•ï¼ˆé€’å½’åˆ›å»ºäºŒå‰æ ‘ã€æ±‚æ ‘çš„æ·±åº¦ï¼‰ä¸¤ä¸ªè§£æ³•ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109package BiTree;import java.util.Scanner;/** * @author zyh * @create 19-3-9 ä¸‹åˆ12:06 */public class BiTree &#123; private Object data; private BiTree lChild; private BiTree rChild; public BiTree(Object data,BiTree lChild,BiTree rChild)&#123; this.data = data; this.lChild = lChild; this.rChild = rChild; &#125; /** * ä¸­åºéå†äºŒå‰æ•° å·¦æ ¹å³ * @param tree */ public static void inOrderTraverse(BiTree tree)&#123; if(tree != null) &#123; inOrderTraverse(tree.lChild); System.out.print(tree.data); inOrderTraverse(tree.rChild); &#125; &#125; /** * åç»­éå†äºŒå‰æ•° å·¦å³æ ¹ * @param tree */ public static void afterOrderTraverse(BiTree tree)&#123; if(tree != null)&#123; afterOrderTraverse(tree.lChild); afterOrderTraverse(tree.rChild); System.out.print(tree.data); &#125; &#125; /** * å…ˆé¡»éå†äºŒå‰æ•° æ ¹å·¦å³ * @param tree */ public static void preOrderTraverse(BiTree tree)&#123; if(tree != null)&#123; System.out.print(tree.data); preOrderTraverse(tree.lChild); preOrderTraverse(tree.rChild); &#125; &#125; /** * é€’å½’åˆ›å»ºäºŒå‰æ•° * @param scanner * @return * @throws Exception */ public static BiTree createBiTree(Scanner scanner) throws Exception&#123; int data = scanner.nextInt(); if(data == 0)&#123; return null; &#125;else&#123; return new BiTree(data,createBiTree(scanner),createBiTree(scanner)); &#125; &#125; /** * æ±‚äºŒå‰æ•°çš„æ·±åº¦ * @param tree * @return */ public static Integer depth(BiTree tree)&#123; if(tree == null)&#123; return 0; &#125;else&#123; Integer m = depth(tree.lChild); Integer n = depth(tree.rChild); if(m &gt; n)&#123; return m+1; &#125;else&#123; return n+1; &#125; &#125; &#125; public static void main(String []args) throws Exception&#123; BiTree tree = createBiTree(new Scanner(System.in)); System.out.println(); System.out.println(\"--------------é€’å½’ï¼šä¸­åºéå†äºŒå‰æ•°------------------\"); inOrderTraverse(tree); System.out.println(); System.out.println(\"--------------é€’å½’ï¼šå…ˆåºéå†äºŒå‰æ•°------------------\"); preOrderTraverse(tree); System.out.println(); System.out.println(\"--------------é€’å½’ï¼šååºéå†äºŒå‰æ•°------------------\"); afterOrderTraverse(tree); System.out.println(); System.out.println(\"--------------é€’å½’ï¼šæ±‚äºŒå‰æ ‘çš„æ·±åº¦------------------\"); System.out.println(depth(tree)); &#125;&#125;å‚è€ƒ:å‚è€ƒ: Data Structure (2nd Edition) ç¬¬äº”ç« http://book.knowsky.com/book_1030305.htm","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"æ­å»ºæ—¥å¿—æ”¶é›†æœåŠ¡å™¨","slug":"2019-1-24-æ­å»ºæ—¥å¿—æ”¶é›†æœåŠ¡å™¨","date":"2019-01-24T00:00:00.000Z","updated":"2019-11-29T12:20:47.714Z","comments":true,"path":"2019/01/24/2019-1-24-æ­å»ºæ—¥å¿—æ”¶é›†æœåŠ¡å™¨/","link":"","permalink":"yihao.ml/2019/01/24/2019-1-24-æ­å»ºæ—¥å¿—æ”¶é›†æœåŠ¡å™¨/","excerpt":"","text":"ä¸šåŠ¡ç›®æ ‡ï¼šå‰å°æŠ¥è¡¨éœ€è¦æŒ‰é¡¹ç›®IDã€æŒ‰åŒIPä¸‹çš„ä¸åŒç”¨æˆ·è¿›è¡Œç»Ÿè®¡ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸èƒ½å†ä½¿ç”¨nginxæ—¥å¿—äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæ­å»ºæ—¥å¿—æ”¶é›†æœåŠ¡å™¨ã€‚1.å®‰è£…ä¾èµ–1yum -y install gcc perl pcre-devel openssl openssl-devel2.ä¸Šä¼ LuaJIT-2.0.4.tar.gzå¹¶å®‰è£…LuaJIT123tar -zxvf LuaJIT-2.0.4.tar.gz -C /usr/local/src/cd /usr/local/src/LuaJIT-2.0.4/make &amp;&amp; make install PREFIX=/usr/local/luajit3.è®¾ç½®ç¯å¢ƒå˜é‡12export LUAJIT_LIB=/usr/local/luajit/libexport LUAJIT_INC=/usr/local/luajit/include/luajit-2.04.åˆ›å»ºmodulesä¿å­˜nginxçš„æ¨¡å—1mkdir -p /usr/local/nginx/modules5.ä¸Šä¼ openresty-1.9.7.3.tar.gzå’Œä¾èµ–çš„æ¨¡å—lua-nginx-module-0.10.0.tarã€ngx_devel_kit-0.2.19.tarã€ngx_devel_kit-0.2.19.tarã€echo-nginx-module-0.58.tar.gz6.å°†ä¾èµ–çš„æ¨¡å—ç›´æ¥è§£å‹åˆ°/usr/local/nginx/modulesç›®å½•å³å¯ï¼Œä¸éœ€è¦ç¼–è¯‘å®‰è£…1234tar -zxvf lua-nginx-module-0.10.0.tar.gz -C /usr/local/nginx/modules/tar -zxvf set-misc-nginx-module-0.29.tar.gz -C /usr/local/nginx/modules/tar -zxvf ngx_devel_kit-0.2.19.tar.gz -C /usr/local/nginx/modules/tar -zxvf echo-nginx-module-0.58.tar.gz -C /usr/local/nginx/modules/7.è§£å‹openresty-1.9.7.3.tar.gz12tar -zxvf openresty-1.9.7.3.tar.gz -C /usr/local/src/cd /usr/local/src/openresty-1.9.7.3/8.ç¼–è¯‘å®‰è£…openresty1./configure --prefix=/usr/local/openresty --with-luajit &amp;&amp; make &amp;&amp; make install9.ä¸Šä¼ nginx12tar -zxvf nginx-1.8.1.tar.gz -C /usr/local/src/cd /usr/local/src/nginx-1.8.1/10.ç¼–è¯‘nginxå¹¶æ”¯æŒå…¶ä»–æ¨¡å—12345678./configure --prefix=/usr/local/nginx \\ --with-ld-opt=\"-Wl,-rpath,/usr/local/luajit/lib\" \\ --add-module=/usr/local/nginx/modules/ngx_devel_kit-0.2.19 \\ --add-module=/usr/local/nginx/modules/lua-nginx-module-0.10.0 \\ --add-module=/usr/local/nginx/modules/set-misc-nginx-module-0.29 \\ --add-module=/usr/local/nginx/modules/echo-nginx-module-0.58 make -j2make install11.ä¿®æ”¹nginxé…ç½®æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576worker_processes 2;events &#123; worker_connections 1024;&#125;http &#123; include mime.types; default_type application/octet-stream; log_format tick \"$msec^A$remote_addr^A$u_domain^A$u_url^A$u_title^A$u_referrer^A$u_sh^A$u_sw^A$u_cd^A$u_lang^A$http_user_agent^A$u_utrace^A$u_account\"; access_log logs/access.log tick; sendfile on; keepalive_timeout 65; server &#123; listen 8099; server_name localhost; location /1.gif &#123; #ä¼ªè£…æˆgifæ–‡ä»¶ default_type image/gif; #æœ¬èº«å…³é—­access_logï¼Œé€šè¿‡subrequestè®°å½•log access_log off; access_by_lua \" -- ç”¨æˆ·è·Ÿè¸ªcookieåä¸º__utrace local uid = ngx.var.cookie___utrace if not uid then -- å¦‚æœæ²¡æœ‰åˆ™ç”Ÿæˆä¸€ä¸ªè·Ÿè¸ªcookieï¼Œç®—æ³•ä¸ºmd5(æ—¶é—´æˆ³+IP+å®¢æˆ·ç«¯ä¿¡æ¯) uid = ngx.md5(ngx.now() .. ngx.var.remote_addr .. ngx.var.http_user_agent) end ngx.header['Set-Cookie'] = &#123;'__utrace=' .. uid .. '; path=/'&#125; if ngx.var.arg_domain then -- é€šè¿‡subrequeståˆ°/i-logè®°å½•æ—¥å¿—ï¼Œå°†å‚æ•°å’Œç”¨æˆ·è·Ÿè¸ªcookieå¸¦è¿‡å» ngx.location.capture('/i-log?' .. ngx.var.args .. '&amp;utrace=' .. uid) end \"; #æ­¤è¯·æ±‚ä¸ç¼“å­˜ add_header Expires \"Fri, 01 Jan 1980 00:00:00 GMT\"; add_header Pragma \"no-cache\"; add_header Cache-Control \"no-cache, max-age=0, must-revalidate\"; #è¿”å›ä¸€ä¸ª1Ã—1çš„ç©ºgifå›¾ç‰‡ empty_gif; &#125; location /i-log &#123; #å†…éƒ¨locationï¼Œä¸å…è®¸å¤–éƒ¨ç›´æ¥è®¿é—® internal; #è®¾ç½®å˜é‡ï¼Œæ³¨æ„éœ€è¦unescape set_unescape_uri $u_domain $arg_domain; set_unescape_uri $u_url $arg_url; set_unescape_uri $u_title $arg_title; set_unescape_uri $u_referrer $arg_referrer; set_unescape_uri $u_sh $arg_sh; set_unescape_uri $u_sw $arg_sw; set_unescape_uri $u_cd $arg_cd; set_unescape_uri $u_lang $arg_lang; set_unescape_uri $u_utrace $arg_utrace; set_unescape_uri $u_account $arg_account; #æ‰“å¼€æ—¥å¿— log_subrequest on; #è®°å½•æ—¥å¿—åˆ°ma.logï¼Œå®é™…åº”ç”¨ä¸­æœ€å¥½åŠ bufferï¼Œæ ¼å¼ä¸ºtick access_log /var/nginx_logs/ma.log tick; #è¾“å‡ºç©ºå­—ç¬¦ä¸² echo ''; &#125; &#125;&#125;12.åœ¨nginx/htmlç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªma.js (118.89.108.139:8099æ˜¯nginxè®¿é—®åœ°å€)1234567891011121314151617181920212223242526272829303132333435363738394041424344(function () &#123; var params = &#123;&#125;; //Documentå¯¹è±¡æ•°æ® if(document) &#123; params.domain = document.domain || ''; params.url = document.URL || ''; params.title = document.title || ''; params.referrer = document.referrer || ''; &#125; //Windowå¯¹è±¡æ•°æ® if(window &amp;&amp; window.screen) &#123; params.sh = window.screen.height || 0; params.sw = window.screen.width || 0; params.cd = window.screen.colorDepth || 0; &#125; //navigatorå¯¹è±¡æ•°æ® if(navigator) &#123; params.lang = navigator.language || ''; &#125; //è§£æ_maqé…ç½® if(_maq) &#123; for(var i in _maq) &#123; switch(_maq[i][0]) &#123; case '_setAccount': params.account = _maq[i][1]; break; default: break; &#125; &#125; &#125; //æ‹¼æ¥å‚æ•°ä¸² var args = ''; for(var i in params) &#123; if(args != '') &#123; args += '&amp;'; &#125; args += i + '=' + encodeURIComponent(params[i]); &#125; //é€šè¿‡Imageå¯¹è±¡è¯·æ±‚åç«¯è„šæœ¬ var img = new Image(1, 1); img.src = 'http://118.89.108.139:8099/log.gif?' + args;&#125;)();13.åœ¨è¦ç»Ÿè®¡çš„é¡µé¢æ·»åŠ js12345678910111213&lt;script type=\"text/javascript\"&gt; var _maq = _maq || []; _maq.push(['_setAccount', 'zyh']); (function() &#123; var ma = document.createElement('script'); ma.type = 'text/javascript'; ma.async = true; ma.src = 'http://118.89.108.139:8099/ma.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ma, s); &#125;)();&lt;/script&gt;","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Flume","slug":"Flume","permalink":"yihao.ml/tags/Flume/"}]},{"title":"å®æ—¶å‘Šè­¦ç³»ç»Ÿï¼ˆäºŒï¼‰","slug":"2018-12-06-å®æ—¶å‘Šè­¦ç³»ç»Ÿï¼ˆäºŒï¼‰","date":"2018-12-06T00:00:00.000Z","updated":"2019-11-29T12:20:47.689Z","comments":true,"path":"2018/12/06/2018-12-06-å®æ—¶å‘Šè­¦ç³»ç»Ÿï¼ˆäºŒï¼‰/","link":"","permalink":"yihao.ml/2018/12/06/2018-12-06-å®æ—¶å‘Šè­¦ç³»ç»Ÿï¼ˆäºŒï¼‰/","excerpt":"","text":"ä¸‹é¢è®°å½•ç¯å¢ƒæ­å»ºè¿‡ç¨‹ï¼Œä»¥åŠå…¶ä¸­é‡åˆ°çš„å›°éš¾ï¼Œæ–¹ä¾¿åç»­æŸ¥è¯¢ã€‚ æ¦‚è¿°å‡†å¤‡3å°centos6.7 :storm1ï¼ˆ192.168.1.19ï¼‰ã€storm2ï¼ˆ192.168.1.20ï¼‰ã€storm3ï¼ˆ192.168.1.21ï¼‰æ‰€éœ€è¦çš„ç»„ä»¶ï¼šjdk8ã€zookeeperã€kafkaã€redisã€storm 1.åˆ›å»ºè™šæ‹Ÿæœºè¿™ä¸€æ­¥åˆ›å»ºä¸‰å°è™šæ‹Ÿæœº,æˆ‘è¿™è¾¹ä½¿ç”¨çš„æ˜¯virtualboxï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨VMè™šæ‹Ÿæœºã€‚å®‰è£…CentOSè™šæ‹Ÿæœºhttp://www.zonegood.com/2018-12-02-VirtualBoxå®‰è£…CentOS6.7/ 2.éƒ¨ç½²zookeeperé›†ç¾¤å®‰è£…zookeeperéœ€è¦jdk8çš„æ”¯æŒï¼Œæ‰€ä»¥æå‰å®‰è£…å¥½jdk8éƒ¨ç½²zookeeperé›†ç¾¤http://www.zonegood.com/2018-04-15-hadoop-zookeeperé›†ç¾¤æ­å»ºåŠå…¶ä½¿ç”¨/ 3.éƒ¨ç½²stormé›†ç¾¤éƒ¨ç½²stormé›†ç¾¤http://www.zonegood.com/2018-12-02-éƒ¨ç½²stormé›†ç¾¤/ 4.éƒ¨ç½²kafkaé›†ç¾¤éƒ¨ç½²kafkaé›†ç¾¤http://www.zonegood.com/2018-09-29-kafkaé›†ç¾¤éƒ¨ç½²/ 5.éƒ¨ç½²redisé›†ç¾¤éƒ¨ç½²redisé›†ç¾¤http://www.zonegood.com/2018-09-15-Redisé›†ç¾¤éƒ¨ç½²/","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Storm","slug":"Storm","permalink":"yihao.ml/tags/Storm/"}]},{"title":"å®æ—¶å‘Šè­¦ç³»ç»Ÿï¼ˆä¸€ï¼‰","slug":"2018-12-03-å®æ—¶å‘Šè­¦ç³»ç»Ÿï¼ˆä¸€ï¼‰","date":"2018-12-03T00:00:00.000Z","updated":"2019-11-29T12:20:47.689Z","comments":true,"path":"2018/12/03/2018-12-03-å®æ—¶å‘Šè­¦ç³»ç»Ÿï¼ˆä¸€ï¼‰/","link":"","permalink":"yihao.ml/2018/12/03/2018-12-03-å®æ—¶å‘Šè­¦ç³»ç»Ÿï¼ˆä¸€ï¼‰/","excerpt":"","text":"ä»Šå¤©ç»ç†å‘Šè¯‰å°æ˜ï¼ˆç¨‹åºå‘˜ï¼‰ï¼Œä½ åšçš„åŠŸèƒ½ä¸ºå•¥ä¸èƒ½ç”¨äº†ï¼Ÿäºæ˜¯å°æ˜ï¼Œè”ç³»å°çº¢ç«¥é‹ï¼ˆè¿ç»´ï¼‰è¯´ä½ å¸®æˆ‘çœ‹çœ‹çº¿ä¸Šæ—¥å¿—å‘—ï¼Œå°çº¢ç«¥é‹ç”¨SSHé“¾æ¥åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œæ‰“å¼€åå°æ—¥å¿—ï¼Œä¸€çœ‹å‘ç°ç¡®å®æŠ›äº†ä¸€ä¸ªå¼‚å¸¸ï¼ŒåŸå› æ˜¯æ•°æ®åº“å­—æ®µå¤ªçŸ­ï¼Œæ•°æ®å­˜ä¸è¿›å»ï¼Œä¹‹åäº‹æƒ…å°±è¿™ä¹ˆæ„‰å¿«çš„è§£å†³äº†ï¼ä¸€æ¬¡ä¸¤æ¬¡è¿˜å¥½ï¼Œå¦‚æœæ—¶é—´ä¹…äº†ï¼Œä½ å°±å¾—ä¸€ç›´éº»çƒ¦å°çº¢ç«¥é‹å¸®è¿™çœ‹çœ‹æ—¥å¿—ã€‚è€Œä¸”ç»ç†ä»–ä»¬åªçœ‹ç»“æœï¼Œæ ¹æœ¬ä¸ç®¡ä½ æ˜¯ä»€ä¹ˆé—®é¢˜å¯¼è‡´çš„ï¼Œé•¿æœŸä¸‹æ¥å°±ä¼šå¯¹ä½ çš„èƒ½åŠ›æœ‰è´¨ç–‘;é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œå°æ˜å†³å®šåšä¸€ä¸ªæ—¥å¿—ç›‘æ§å‘Šè­¦ç³»ç»Ÿï¼Œåœ¨ç»ç†å‘ç°é—®é¢˜ä¹‹å‰å°±æå‰å‘ç°é—®é¢˜å¹¶è§£å†³æ‰ æ¶æ„è®¾è®¡1.åŸºç¡€äº§ç”Ÿæ—¥å¿—çš„é¡¹ç›®ï¼Œæœ€å°‘ä¹Ÿå¾—æœ‰ä¸€ä¸ªã€‚2.flume æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†å·¥å…·ï¼Œå› å…¶ç®€å•æ˜“ç”¨èµ¢å¾—äººä»¬é’çï¼Œç³»ç»Ÿä½¿ç”¨FLUMEæ”¶é›†æ¥è‡ªå„ä¸ªå­ç³»ç»Ÿä¸­äº§ç”Ÿçš„æ—¥å¿—ï¼Œè¿™ä¸ªæ—¥å¿—å¯ä»¥æ˜¯log4Jäº§ç”Ÿçš„ï¼Œå…·ä½“æƒ…å†µè§†å…¬å¸è€Œå®šï¼›3.kafka æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œåº•å±‚ç”¨scalaç¼–å†™ï¼Œå…¶ä¸­æä¾›ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„åŠŸèƒ½ï¼Œä»–æä¾›ç±»ä¼¼JMSçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªTopic,Flume sinkåˆ°kafka çš„è¿™ä¸ªtopic ä¸­4.storm æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æµå¼è®¡ç®—æ¡†æ¶ï¼Œæ¯ä¸ªtopologyä¸­å¹¶è¡Œè¿è¡Œç€å¾ˆå¤šä¸ªboltï¼Œæ•´ä¸ªå·¥ä½œæµç¨‹ä¼¼æµæ°´ä¸€æ ·ï¼Œä»æºå¤´æºæºä¸æ–­çš„å°±åƒç»ˆç‚¹ã€‚æˆ‘ä»¬ä½¿ç”¨kafkaSpoutè·å–kafkaä¸­çš„æ•°æ®ï¼Œå¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ã€æ ¹æ®åŒ¹é…è§„åˆ™å®Œæˆæ—¥å¿—åŒ¹é…ï¼Œå®Œæˆå‘é€é‚®ä»¶æˆ–è€…æ‰‹æœºçŸ­ä¿¡ï¼Œæ¥é€šçŸ¥æ¨¡å—è´Ÿè´£äººã€‚5.æ•°æ®åº“æ–¹é¢æˆ‘ä»¬å¯ä»¥é€‰ç”¨mysqlï¼Œé¡¹ç›®å¯åŠ¨åéœ€è¦æŠŠè§„åˆ™åŠ è½½åˆ°stormå†…å­˜ï¼Œä¸æ­¤åŒæ—¶åšä¸€ä¸ªå®šæ—¶ä»»åŠ¡å®Œæˆæ›´æ–°stormå†…å­˜ä¸­çš„è§„åˆ™,å¦‚æœå…¬å¸é¡¹ç›®å¾ˆå¤§å¾ˆå¤§ï¼Œè§„åˆ™å¾ˆå¤šçš„è¯å¯ä»¥è€ƒè™‘ç”¨redisï¼Œå¦‚æœå¾ˆå°‘çš„è¯è€ƒè™‘ä½¿ç”¨mysqlå³å¯ã€‚6.zookeeper æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼åè°ƒå·¥å…· æ•°æ®åº“è®¾è®¡1.ç”¨æˆ·è¡¨ï¼Œç”¨æ¥è®°å½•ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚å§“åï¼Œé‚®ç®±ï¼Œæ‰‹æœºå·ç­‰åŸºæœ¬ä¿¡æ¯2.åº”ç”¨è¡¨ï¼Œç”¨æ¥è®°å½•å…¬å¸çš„æ‰€æœ‰å­ç³»ç»Ÿ3.è§„åˆ™è¡¨ï¼Œå…³é”®å­—æ®µæ‰€å±åº”ç”¨ã€è´Ÿè´£äººã€åŒ¹é…å­—ç¬¦4.å¼‚å¸¸è®°å½•è¡¨ï¼šå‘ç°å¼‚å¸¸ä¿¡æ¯åè§¦å‘å­˜å‚¨å¼‚å¸¸è®°å½•æ“ä½œã€‚ é€»è¾‘æ¢³ç†ä¸‹é¢ä¸»è¦é˜è¿°é¡¹ç›®ä¸­æ ¸å¿ƒéƒ¨åˆ†é€»è¾‘ä»¥åŠæ³¨æ„ç‚¹ï¼š1.é¡¹ç›®å¯åŠ¨åé¦–å…ˆéœ€è¦åŠ è½½ APPå¯¹åº”çš„è´Ÿè´£äººåˆ—è¡¨ã€ç”¨æˆ·åˆ—è¡¨ã€APPçš„å¼‚å¸¸åŒ¹é…è§„åˆ™ã€APPåˆ—è¡¨2.æ•°æ®è¿›å…¥ç¬¬ä¸€å±‚çš„Boltåï¼Œå¯¹æ•°æ®è¿›è¡Œè§„æ•´å’Œè¿‡æ»¤ï¼Œå¸¸è§„çš„æ“ä½œæ˜¯å°†æ•°æ®è½¬æˆä¸€ä¸ªJavaBeanã€‚3.åŒ¹é…JavaBeanæ˜¯å¦æ»¡è¶³å¼‚å¸¸åŒ¹é…è§„åˆ™4.æ»¡è¶³è§„åˆ™ï¼Œæ ¹æ®appIdæ‰¾åˆ°å¯¹åº”è´Ÿè´£äººï¼Œå‘é€é‚®ä»¶å’Œæ‰‹æœºçŸ­ä¿¡é€šçŸ¥5.å°†å¼‚å¸¸è®°å½•ä¿¡æ¯å­˜æ”¾åˆ°mysqlæ•°æ®åº“ä¸‹é¢é˜è¿°å®šæ—¶ä»»åŠ¡çš„æ ¸å¿ƒé€»è¾‘ä»¥åŠæ³¨æ„ç‚¹ï¼š1.ä»€ä¹ˆæ—¶å€™åŒæ­¥æ•°æ®æ¯”è¾ƒå¥½ï¼Ÿ å¦‚æœåŒæ­¥ä»»åŠ¡å†™æˆå®šæ—¶ä»»åŠ¡ï¼ŒåŠ å…¥kafkaä¸­æ ¹æœ¬å°±æ²¡æœ‰æ•°æ®è¿‡æ¥ï¼Œå°±ç®—å†æ€ä¹ˆåŒæ­¥å…¶å®ä¹Ÿæ²¡ä»€ä¹ˆç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è§„å®šåªæœ‰kafkaä¸­æœ‰æ•°æ®è¿‡æ¥ï¼Œè¿™è¾¹æ‰è·‘å®šæ—¶ä»»åŠ¡ã€‚2.æ£€æµ‹kafkaæœ‰æ²¡æœ‰æ•°æ®å…¶å®å¾ˆç®€å•ï¼Œç¬¬ä¸€æ¬¡FirstBoltçš„ executeæ–¹æ³•åªè¦è§¦å‘ï¼Œå°±è¯æ˜æœ‰æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬åˆä¸æƒ³è®©ä»–æ¯æ¬¡éƒ½è§¦å‘æ›´æ–°æ“ä½œï¼Œéœ€è¦æ€ä¹ˆåŠï¼Ÿ- å®šä¹‰reload booleanå…¨å±€å­—æ®µï¼Œåœ¨éloadæ—¶é—´ä¸€ç›´ä¿®æ”¹reloadå­—æ®µä¸ºtrue,åœ¨loadæ—¶é—´ä¿®æ”¹reloadä¸ºfalseå³å¯ï¼› - loadè§„åˆ™çš„æ—¶å€™ï¼Œéœ€è¦åŠ ä¸ŠåŒæ­¥æ“ä½œã€‚ loadæ—¶é—´:æ¯”å¦‚å®šä¹‰åªè¦å½“å‰æ—¶é—´èƒ½è¢«10æ•´é™¤å°±æ˜¯loadæ—¶é—´,éloadæ—¶é—´æ¯”å¦‚å®šä¹‰åªè¦å½“å‰æ—¶é—´ä¸èƒ½è¢«10æ•´é™¤å°±æ˜¯éloadæ—¶é—´ é¡¹ç›®çš„æ„ä¹‰è¾…åŠ©å¢å¼ºç³»ç»Ÿç¨³å®šæ€§ï¼Œå¦‚æœå†…éƒ¨äººå‘˜æ€»èƒ½åœ¨ç¬¬ä¸€æ—¶é—´å†…å‘ç°é—®é¢˜ï¼Œåœ¨å…¶ä»–äººå‘ç°é—®é¢˜ä¹‹å‰å°±èƒ½æŠŠé—®é¢˜è§£å†³äº†ï¼Œé•¿æœŸå¦‚æ­¤ç”¨æˆ·å¯¹å…¬å¸äº§å“çš„è®¤å¯åº¦ä¹Ÿä¼šæå‡ã€‚å°†ç³»ç»Ÿæ—¥å¿—ä¿¡æ¯è®°å½•åˆ°æ•°æ®åº“ï¼Œå¹¶ä¸”è®¾ç½®è§¦å‘æ—¶é—´ä»¥åŠè§£å†³æ—¶é—´ï¼Œå¹¶ç”ŸæˆæŠ¥è¡¨ã€‚ä¸ºå°†æ¥ç»©æ•ˆè€ƒæ ¸åšä¸€ä¸ªæ•°æ®æ”¯æ’‘ã€‚ç”¨å‘Šè­¦ç³»ç»Ÿæ¨åŠ¨æ•´ä¸ªéƒ¨é—¨çš„ç§¯ææ€§ï¼Œä½¿å…¬å¸èƒ½å¤Ÿæ›´åŠ å¹³ç¨³çš„å‘å±•ã€‚","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Storm","slug":"Storm","permalink":"yihao.ml/tags/Storm/"}]},{"title":"éƒ¨ç½²stormé›†ç¾¤","slug":"2018-12-02-éƒ¨ç½²stormé›†ç¾¤","date":"2018-12-02T00:00:00.000Z","updated":"2019-11-29T12:20:47.689Z","comments":true,"path":"2018/12/02/2018-12-02-éƒ¨ç½²stormé›†ç¾¤/","link":"","permalink":"yihao.ml/2018/12/02/2018-12-02-éƒ¨ç½²stormé›†ç¾¤/","excerpt":"","text":"1.å‡†å¤‡ä¸‰ä¸ªè™šæ‹Ÿæœºæ­å»ºStormé›†ç¾¤å®‰è£…æ­¥éª¤å‚è€ƒ2018-12-02-VirtualBoxå®‰è£…CentOS6.7 2.é…ç½®é›†ç¾¤Hostsæ‰€æœ‰çš„è™šæ‹Ÿæœºä¸Šéƒ½éœ€è¦é…ç½®hosts12345vi /etc/hosts#192.168.239.128 storm01 zk01 hadoop01#192.168.239.129 storm02 zk02 hadoop02#192.168.239.130 storm03 zk03 hadoop03 3.æœåŠ¡å™¨é—´å…å¯†ç ç™»å½•[å¯é€‰]é…ç½®å…å¯†ç ç™»é™†ï¼Œåœ¨æ‰€æœ‰æœºå™¨ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤1ssh-keygen -t rsa ï¼ˆå››ä¸ªå›è½¦ï¼‰ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶id_rsaï¼ˆç§é’¥ï¼‰ã€id_rsa.pubï¼ˆå…¬é’¥ï¼‰,ä½¿ç”¨ä¸‹é¢å‘½ä»¤å°†å…¬é’¥æ‹·è´åˆ°è¦å…å¯†ç™»é™†çš„ç›®æ ‡æœºå™¨ä¸Š1ssh-copy-id &#123;å…¶ä»–æœºå™¨çš„hostname&#125; 4.å…³é—­æœåŠ¡å™¨çš„é˜²ç«å¢™12service iptables stopchkconfig iptables off 5.åˆ›å»ºæœåŠ¡å™¨ä¸Šçš„ç»Ÿä¸€å·¥ä½œç›®å½•123mkdir /exportmkdir /export/serverschmod 755 -R /export 6.é…ç½®JDKå®‰è£…jdk8å…·ä½“æ­¥éª¤ä¸åšè¯¦è¿° 7.ä¸‹è½½stormå®‰è£…åŒ…1wget http://124.202.164.6/files/1139000006794ECA/apache.fayea.com/storm/apache-storm-0.9.5/apache-storm-0.9.5.tar.gz 8.è§£å‹å®‰è£…åŒ…123tar -zxvf apache-storm-0.9.5.tar.gz -C /export/servers/cd /export/servers/ln -s apache-storm-0.9.5 storm 9.ä¿®æ”¹é…ç½®æ–‡ä»¶12mv /export/servers/storm/conf/storm.yaml /export/servers/storm/conf/storm.yaml.bakvi /export/servers/storm/conf/storm.yamlå‚è€ƒ12345678910111213141516171819202122storm.zookeeper.servers: - \"storm1\" - \"storm2\" - \"storm3\"#æŒ‡å®šstormæœ¬åœ°çŠ¶æ€ä¿å­˜åœ°å€storm.local.dir: \"/export/servers/storm/workdir\"#æŒ‡å®šstormé›†ç¾¤ä¸­çš„nimbusèŠ‚ç‚¹æ‰€åœ¨çš„æœåŠ¡å™¨nimbus.host: \"storm1\"#æŒ‡å®šnimbuså¯åŠ¨JVMæœ€å¤§å¯ç”¨å†…å­˜å¤§å°nimbus.childopts: \"-Xmx1024m\"#æŒ‡å®šsupervisorå¯åŠ¨JVMæœ€å¤§å¯ç”¨å†…å­˜å¤§å°supervisor.childopts: \"-Xmx1024m\"#æŒ‡å®šsupervisorèŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªworkerå¯åŠ¨JVMæœ€å¤§å¯ç”¨å†…å­˜å¤§å°worker.childopts: \"-Xmx768m\"#æŒ‡å®šuiå¯åŠ¨JVMæœ€å¤§å¯ç”¨å†…å­˜å¤§å°ï¼ŒuiæœåŠ¡ä¸€èˆ¬ä¸nimbusåŒåœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚ui.childopts: \"-Xmx768m\"#æŒ‡å®šsupervisorèŠ‚ç‚¹ä¸Šï¼Œå¯åŠ¨workeræ—¶å¯¹åº”çš„ç«¯å£å·ï¼Œæ¯ä¸ªç«¯å£å¯¹åº”æ§½ï¼Œæ¯ä¸ªæ§½ä½å¯¹åº”ä¸€ä¸ªworkersupervisor.slots.ports: - 6700 - 6701 - 6702 - 6703 10.åˆ†å‘1234scp -r /export/servers/apache-storm-0.9.5 storm02:/export/servers# ç„¶ååˆ†åˆ«åœ¨å„æœºå™¨ä¸Šåˆ›å»ºè½¯è¿æ¥cd /export/servers/ln -s apache-storm-0.9.5 storm 11.å¯åŠ¨åœ¨nimbus.hostæ‰€å±çš„æœºå™¨ä¸Šå¯åŠ¨ nimbusæœåŠ¡12cd /export/servers/storm/bin/nohup ./storm nimbus &amp;åœ¨nimbus.hostæ‰€å±çš„æœºå™¨ä¸Šå¯åŠ¨uiæœåŠ¡12cd /export/servers/storm/bin/nohup ./storm ui &amp;åœ¨å…¶å®ƒä¸ªç‚¹å‡»ä¸Šå¯åŠ¨supervisoræœåŠ¡12cd /export/servers/storm/bin/nohup ./storm supervisor &amp; 12.æŸ¥çœ‹é›†ç¾¤è®¿é—®nimbus.host:/8080ï¼Œå³å¯çœ‹åˆ°stormçš„uiç•Œé¢ 13.Stormå¸¸ç”¨æ“ä½œå‘½ä»¤æœ‰è®¸å¤šç®€å•ä¸”æœ‰ç”¨çš„å‘½ä»¤å¯ä»¥ç”¨æ¥ç®¡ç†æ‹“æ‰‘ï¼Œå®ƒä»¬å¯ä»¥æäº¤ã€æ€æ­»ã€ç¦ç”¨ã€å†å¹³è¡¡æ‹“æ‰‘ã€‚æäº¤ä»»åŠ¡å‘½ä»¤æ ¼å¼ï¼šstorm jar ã€jarè·¯å¾„ã€‘ ã€æ‹“æ‰‘åŒ…å.æ‹“æ‰‘ç±»åã€‘ ã€æ‹“æ‰‘åç§°ã€‘1bin/storm jar examples/storm-starter/storm-starter-topologies-0.10.0.jar storm.starter.WordCountTopology wordcountæ€æ­»ä»»åŠ¡å‘½ä»¤æ ¼å¼ï¼šstorm kill ã€æ‹“æ‰‘åç§°ã€‘ -w 10ï¼ˆæ‰§è¡Œkillå‘½ä»¤æ—¶å¯ä»¥é€šè¿‡-w [ç­‰å¾…ç§’æ•°]æŒ‡å®šæ‹“æ‰‘åœç”¨ä»¥åçš„ç­‰å¾…æ—¶é—´ï¼‰1storm kill topology-name -w 10åœç”¨ä»»åŠ¡å‘½ä»¤æ ¼å¼ï¼šstorm deactivte ã€æ‹“æ‰‘åç§°ã€‘1storm deactivte topology-nameæˆ‘ä»¬èƒ½å¤ŸæŒ‚èµ·æˆ–åœç”¨è¿è¡Œä¸­çš„æ‹“æ‰‘ã€‚å½“åœç”¨æ‹“æ‰‘æ—¶ï¼Œæ‰€æœ‰å·²åˆ†å‘çš„å…ƒç»„éƒ½ä¼šå¾—åˆ°å¤„ç†ï¼Œä½†æ˜¯spoutsçš„nextTupleæ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ã€‚é”€æ¯ä¸€ä¸ªæ‹“æ‰‘ï¼Œå¯ä»¥ä½¿ç”¨killå‘½ä»¤ã€‚å®ƒä¼šä»¥ä¸€ç§å®‰å…¨çš„æ–¹å¼é”€æ¯ä¸€ä¸ªæ‹“æ‰‘ï¼Œé¦–å…ˆåœç”¨æ‹“æ‰‘ï¼Œåœ¨ç­‰å¾…æ‹“æ‰‘æ¶ˆæ¯çš„æ—¶é—´æ®µå†…å…è®¸æ‹“æ‰‘å®Œæˆå½“å‰çš„æ•°æ®æµã€‚å¯ç”¨ä»»åŠ¡å‘½ä»¤æ ¼å¼ï¼šstorm activateã€æ‹“æ‰‘åç§°ã€‘1storm activate topology-nameé‡æ–°éƒ¨ç½²ä»»åŠ¡å‘½ä»¤æ ¼å¼ï¼šstorm rebalance ã€æ‹“æ‰‘åç§°ã€‘1storm rebalance topology-nameå†å¹³è¡¡ä½¿ä½ é‡åˆ†é…é›†ç¾¤ä»»åŠ¡ã€‚è¿™æ˜¯ä¸ªå¾ˆå¼ºå¤§çš„å‘½ä»¤ã€‚æ¯”å¦‚ï¼Œä½ å‘ä¸€ä¸ªè¿è¡Œä¸­çš„é›†ç¾¤å¢åŠ äº†èŠ‚ç‚¹ã€‚å†å¹³è¡¡å‘½ä»¤å°†ä¼šåœç”¨æ‹“æ‰‘ï¼Œç„¶ååœ¨ç›¸åº”è¶…æ—¶æ—¶é—´ä¹‹åé‡åˆ†é…å·¥äººï¼Œå¹¶é‡å¯æ‹“æ‰‘ã€‚","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Storm","slug":"Storm","permalink":"yihao.ml/tags/Storm/"}]},{"title":"VirtualBoxå®‰è£…CentOS6.7","slug":"2018-12-02-VirtualBoxå®‰è£…CentOS6.7","date":"2018-12-02T00:00:00.000Z","updated":"2019-11-29T12:20:47.688Z","comments":true,"path":"2018/12/02/2018-12-02-VirtualBoxå®‰è£…CentOS6.7/","link":"","permalink":"yihao.ml/2018/12/02/2018-12-02-VirtualBoxå®‰è£…CentOS6.7/","excerpt":"","text":"1.å®‰è£…æ–°å»ºè™šæ‹Ÿæœºç¯å¢ƒï¼Œç”±äºVBoxç¯å¢ƒæ²¡æœ‰CentOSçš„é€‰é¡¹ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©Red Hat Linuxï¼ˆ64Bitï¼‰åŠ¨æ€åˆ†é…ç¡¬ç›˜å¤§å°æ‰€ä»¥ä½ å¯ä»¥é€‰æ‹©å¤§ä¸€ç‚¹çš„ç¡¬ç›˜ç©ºé—´ï¼ˆä¸ç”¨çš„è¯ä¸ä¼šå ç”¨çš„ï¼Œä½†æ˜¯Cç›˜æ€§èƒ½ä¸Šæ²¡å›ºå®šçš„å¥½ï¼‰åœ¨VBOXä¸»ç•Œé¢ï¼Œé€‰æ‹©åˆšåˆšæ–°å»ºçš„CentOS64ï¼Œç‚¹å‡»å¯åŠ¨ã€‚é€‰æ‹©ç¬¬äºŒé¡¹ï¼Œå®‰è£…æ“ä½œç³»ç»Ÿé€‰æ‹©Skipé€‰æ‹©æœåŠ¡å™¨ç±»å‹ä¸ºBasic Serverå®‰è£…å®Œåreboot 2.é…ç½®ç½‘ç»œå‚è€ƒ:https://www.cnblogs.com/zyh1994/p/10040640.html","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[]},{"title":"ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿ(ä¸‰)","slug":"2018-11-27-ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿ(ä¸‰)","date":"2018-11-27T00:00:00.000Z","updated":"2019-11-29T12:20:47.688Z","comments":true,"path":"2018/11/27/2018-11-27-ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿ(ä¸‰)/","link":"","permalink":"yihao.ml/2018/11/27/2018-11-27-ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿ(ä¸‰)/","excerpt":"","text":"å‰ä¸€é˜¶æ®µæŠŠé›†ç¾¤æ­å»ºå¥½ï¼Œç¼–å†™å¥½FlumeNGé‡‡é›†æ•°æ®åˆ°HDFSä¸Šä»¥åï¼Œå¼€å§‹ä½¿ç”¨MapReduceå¯¹æ•°æ®è¿›è¡Œåˆæ­¥å¤„ç†ï¼Œå¤„ç†åˆ†ä¸‰ä¸ªé˜¶æ®µ1.è¿‡æ»¤æ‰æ— ç”¨çš„æ•°æ®,åƒè®¿é—®çš„é™æ€èµ„æºã€è®¿é—®çŠ¶æ€ç é200çš„ç­‰ã€‚2.åŸºäºç¬¬ä¸€æ­¥çš„ç»“æœè¿›è¡Œæ—¥å¿—å¢å¼ºï¼Œç»™æ¯æ¡è®°å½•æ·»åŠ SessionId,æŒ‰è®¿é—®æ—¶é—´æ’åºååŠ ä¸Šé€’å¢æ ‡å·3.åˆæ­¥ç»Ÿè®¡è®¿é—®èµ·å§‹æ—¶é—´ã€è®¿é—®ç»“æŸæ—¶é—´ã€è¿›å…¥é¡µé¢ã€ç¦»å¼€é¡µé¢ã€ä¸€å…±è®¿é—®äº†å¤šå°‘é¡µé¢ç­‰æ•°æ®ä»£ç çš„æ•´ä½“ç»“æ„ ç¬¬ä¸€æ­¥è¿‡æ»¤è§„æ•´1.å®ç°ç¬¬ä¸€æ­¥çš„ä»£ç WebLogPreProcess.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package com.zonegood.hive.mr.pre;import com.zonegood.hive.mrbean.WebLog;import com.zonegood.hive.util.ParseUtil;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.Path;import org.apache.hadoop.io.LongWritable;import org.apache.hadoop.io.NullWritable;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Job;import org.apache.hadoop.mapreduce.Mapper;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;import java.io.IOException;import java.util.HashSet;import java.util.Set;public class WebLogPreProcess &#123; static class WebLogPreProcessMapper extends Mapper&lt;LongWritable, Text, Text, NullWritable&gt; &#123; Set&lt;String&gt; filter = new HashSet&lt;String&gt;(); Text k = new Text(); NullWritable v = NullWritable.get(); // è¿‡æ»¤é™æ€èµ„æº @Override protected void setup(Context context) throws IOException, InterruptedException &#123; filter.add(\"/about\"); filter.add(\"/black-ip-list/\"); ... &#125; @Override protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123; String line = value.toString(); WebLog bean = ParseUtil.parse(line); // è¿‡æ»¤æ‰é™æ€èµ„æº ParseUtil.filter(bean,filter); if(bean.getInvalid())&#123; k.set(bean.toString()); context.write(k,v); &#125; &#125; &#125;&#125;ä¸‹é¢çœ‹ä¸€ä¸‹ParseUtilç±»:12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package com.zonegood.hive.util;import com.zonegood.hive.mrbean.WebLog;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Locale;import java.util.Set;public class ParseUtil &#123; public static SimpleDateFormat df1 = new SimpleDateFormat(\"dd/MMM/yyyy:HH:mm:ss\", Locale.US); public static SimpleDateFormat df2 = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.US); public static WebLog parse(String line)&#123; WebLog webLogBean = new WebLog(); String[] arr = line.split(\" \"); if(arr.length &gt; 11)&#123; webLogBean.setIp(arr[0]); webLogBean.setU_info(arr[1]); String time_local = formatDate(arr[3].substring(1)); if(null==time_local) time_local=\"-invalid_time-\"; webLogBean.setTime(time_local); webLogBean.setRequest_method(arr[5]); webLogBean.setRequest_url(arr[6]); webLogBean.setStatus(arr[8]); webLogBean.setSent_body_bytes(arr[9]); webLogBean.setRequest_referer(arr[10]); //å¦‚æœuseragentå…ƒç´ è¾ƒå¤šï¼Œæ‹¼æ¥useragent if (arr.length &gt; 12) &#123; StringBuilder sb = new StringBuilder(); for(int i=11;i&lt;arr.length;i++)&#123; sb.append(arr[i]); &#125; webLogBean.setUser_agent(sb.toString()); &#125; else &#123; webLogBean.setUser_agent(arr[11]); &#125; if (Integer.parseInt(webLogBean.getStatus()) &gt;= 400) &#123;// å¤§äº400ï¼ŒHTTPé”™è¯¯ webLogBean.setInvalid(false); &#125; if(\"-invalid_time-\".equals(webLogBean.getTime()))&#123; webLogBean.setInvalid(false); &#125; &#125;else&#123; webLogBean.setInvalid(false); &#125; return webLogBean; &#125; public static void filter(WebLog bean,Set&lt;String&gt; filter)&#123; if(!filter.contains(bean.getRequest_url()))&#123; bean.setInvalid(false); &#125; &#125; public static String formatDate(String time_local) &#123; try &#123; return df2.format(df1.parse(time_local)); &#125; catch (ParseException e) &#123; return null; &#125; &#125;&#125;ä½¿ç”¨ä¸‹é¢çš„shellè„šæœ¬å®Œæˆè‡ªåŠ¨åŒ–éƒ¨ç½²123456789101112131415161718192021222324252627282930313233343536373839404142#!/bin/bash# ä½œç”¨:æ‰¹å¤„ç†weblogæ—¥å¿—è„šæœ¬# ç¼–å†™:èµµä¸€å¥½# java ç¯å¢ƒexport JAVE_HOME=/data/jdk1.8.0_161export JRE_HOME=$&#123;JAVE_HOME&#125;/jreexport CLASS_PATH=$&#123;JAVE_HOME&#125;/lib/dt.jar:$&#123;JAVE_HOME&#125;/lib/tools.jarexport PATH=$PATH:$&#123;JAVE_HOME&#125;/bin:$&#123;JRE_HOME&#125;/bin# hadoop ç¯å¢ƒexport HADDOP_HOME=/data/hadoop-2.7.3export PATH=$PATH:$&#123;HADDOP_HOME&#125;/bin:$&#123;HADDOP_HOME&#125;/sbin# æ—¶é—´yesterday=`date -d'-1 day' +%Y-%m-%d`s_year=`date -d'-1 day' +%Y`s_month=`date -d'-1 day' +%m`s_day=`date -d'-1 day' +%d`# inpathin_path=/syslog/preprocess/inpath# outpathout_path=/syslog/preprocess/outpath# jar namejar_name=weblog_pre_process.jar# åˆ¤æ–­åˆ¶å®šç›®å½•æ˜¯å¦å­˜åœ¨æ•°æ®flies=`hdfs dfs -ls $in_path | grep $yesterday | wc -l`if [ $flies -gt 0 ];then echo \"å¼€å§‹è¿è¡Œpreprocessæ‰¹å¤„ç†å‘½ä»¤,ä¸Šä¼ ç›®å½•ä¸º:$out_path/$yesterday\" hadoop jar $jar_name $in_path/$yesterday $out_path/$yesterdayfi# å¦‚æœæŠ¥é”™å‘é€é‚®ä»¶if [ $? -gt 0 ];then echo \"è¿è¡Œå¤±è´¥,å‘é€é‚®ä»¶...\"fi ç¬¬äºŒæ­¥æ—¥å¿—å¢å¼ºæ—¥å¿—å¢å¼ºç”±ClickStreamPageView.javaå®Œæˆ,ä¸‹é¢æ˜¯æ ¸å¿ƒä»£ç :123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233package com.zonegood.hive.mr;import com.zonegood.hive.mrbean.WebLog;import org.apache.commons.beanutils.BeanUtils;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.Path;import org.apache.hadoop.io.LongWritable;import org.apache.hadoop.io.NullWritable;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Job;import org.apache.hadoop.mapreduce.Mapper;import org.apache.hadoop.mapreduce.Reducer;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;import java.io.IOException;import java.text.SimpleDateFormat;import java.util.*;/** * * ç»Ÿè®¡ç‚¹å‡»æµPV * * ç»™æ¯æ¡æ•°æ®æ·»åŠ sessionId,é»˜è®¤sessionè¿‡æœŸæ—¶é—´ä¸º30åˆ†,å½“å‰é¡µé¢åœç•™äº†å¤šé•¿æ—¶é—´ * æ¯ä¸ªsessionæŒ‰è®¿é—®æ—¶é—´æ’åº,å¹¶æ ‡ä¸Šåºå· * ä¿ç•™WebLogä¸­éƒ¨åˆ†å­—æ®µ * * @author zyh * @create 18-11-3 ä¸‹åˆ3:41 */public class ClickStreamPageView &#123; static class ClickStreamPageViewMapper extends Mapper&lt;LongWritable, Text, Text, WebLog&gt; &#123; WebLog v = new WebLog(); Text k = new Text(); @Override protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123; String line = value.toString(); String[] fields = line.split(\"\\001\"); if(fields.length &gt;= 10 &amp;&amp; \"true\".equals(fields[0]))&#123; // å¤„ç† v.setIp(fields[1]); v.setU_info(fields[2]); v.setTime(fields[3]); v.setRequest_url(fields[5]); v.setStatus(fields[6]); v.setSent_body_bytes(fields[7]); v.setRequest_referer(fields[8]); v.setUser_agent(fields[9]); k.set(v.getIp()); context.write(k,v); &#125; &#125; static class ClickStreamPageViewReducer extends Reducer&lt;Text, WebLog, NullWritable, Text&gt; &#123; public static SimpleDateFormat df2 = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.US); NullWritable k = NullWritable.get(); Text v = new Text(); /** * * @param key ip * @param values &lt;PageView,PageView,PageView,PageView&gt; * @param context * @throws IOException * @throws InterruptedException */ @Override protected void reduce(Text key, Iterable&lt;WebLog&gt; values, Context context) throws IOException, InterruptedException &#123; ArrayList&lt;WebLog&gt; beans = new ArrayList&lt;WebLog&gt;(); try&#123; for (WebLog webLog:values) &#123; WebLog pv = new WebLog(); try &#123; BeanUtils.copyProperties(pv,webLog); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; beans.add(pv); &#125; Collections.sort(beans, new Comparator&lt;WebLog&gt;() &#123; @Override public int compare(WebLog o1, WebLog o2) &#123; try &#123; Date d1 = formatDate(o1.getTime()); Date d2 = formatDate(o2.getTime()); if(d1 == null || d2 == null) return 0; return d1.compareTo(d2); &#125; catch (Exception e) &#123; return 0; &#125; &#125; &#125;); /** * 1. é‡Œé¢åªæœ‰ä¸€ä¸ª * 1.1 è®¾ç½®sessionIdã€setpã€ç›´æ¥è¾“å‡º,é‡ç½®sessionId * * 2. é‡Œé¢æœ‰å¤šä¸ª * 2.1 æ˜¯ç¬¬ä¸€ä¸ªï¼Œç›´æ¥è·³è¿‡ä¸è¾“å‡º * 2.2 æ˜¯æœ€åä¸€ä¸ªï¼Œè®¾ç½®sessionId,è®¾ç½®step,è¾“å‡º * 2.3 æ¯”è¾ƒç¬¬nä¸ªä¸n-1ä¸ªçš„æ—¶é—´å·® * 2.2.1å·® å¤§äº30s * 2.2.1.1 è®¾ç½®sessionId,è®¾ç½®step,è¾“å‡ºç¬¬n-1ä¸ª,é‡ç½®sessionId,é‡ç½®step * 2.2.2 å·®å°äº30s * 2.2.2.1 è®¾ç½®sessionId,è®¾ç½®step,è¾“å‡ºç¬¬n-1ä¸ª,step ++ * */ int step = 1; String sessionId = UUID.randomUUID().toString(); for (int i=0 ; i&lt;beans.size() ; i++) &#123; if(beans.size() == 1)&#123; v.set(sessionId+\"\\001\"+ beans.get(i).getIp()+\"\\001\"+ step + \"\\001\" + (60) + \"\\001\" + beans.get(i).getU_info() + \"\\001\" + beans.get(i).getTime() + \"\\001\" + beans.get(i).getRequest_url() + \"\\001\" + beans.get(i).getRequest_referer() + \"\\001\"+ beans.get(i).getUser_agent() + \"\\001\" + beans.get(i).getSent_body_bytes() + \"\\001\" + beans.get(i).getStatus()); // è¾“å‡ºå½“å‰pv context.write(k,v); break; &#125; if(i == 0)&#123; continue; &#125; long diffTime = 0; try &#123; diffTime = diffTime(beans.get(i).getTime(),beans.get(i-1).getTime()); &#125; catch (Exception e) &#123; &#125; if(diffTime &gt; 30 * 60 * 1000)&#123; v.set(sessionId+\"\\001\"+ beans.get(i -1).getIp()+\"\\001\"+ step + \"\\001\" + (diffTime/1000) + \"\\001\" + beans.get(i-1).getU_info() + \"\\001\" + beans.get(i-1).getTime() + \"\\001\" + beans.get(i-1).getRequest_url() + \"\\001\" + beans.get(i-1).getRequest_referer() + \"\\001\"+ beans.get(i-1).getUser_agent() + \"\\001\" + beans.get(i-1).getSent_body_bytes() + \"\\001\" + beans.get(i-1).getStatus()); // è¾“å‡ºå½“å‰pv context.write(k,v); sessionId = UUID.randomUUID().toString(); step = 1; &#125;else&#123; v.set(sessionId+\"\\001\"+ beans.get(i -1).getIp()+\"\\001\"+ step + \"\\001\" + (diffTime/1000) + \"\\001\" + beans.get(i-1).getU_info() + \"\\001\" + beans.get(i-1).getTime() + \"\\001\" + beans.get(i-1).getRequest_url() + \"\\001\" + beans.get(i-1).getRequest_referer() + \"\\001\"+ beans.get(i-1).getUser_agent() + \"\\001\" + beans.get(i-1).getSent_body_bytes() + \"\\001\" + beans.get(i-1).getStatus()); // è¾“å‡ºå½“å‰pv context.write(k,v); step ++; &#125; if(i == beans.size()-1)&#123; v.set(sessionId+\"\\001\"+ beans.get(i).getIp()+\"\\001\"+ step + \"\\001\" + (60) + \"\\001\" + beans.get(i).getU_info() + \"\\001\" + beans.get(i).getTime() + \"\\001\" + beans.get(i).getRequest_url() + \"\\001\" + beans.get(i).getRequest_referer() + \"\\001\"+ beans.get(i).getUser_agent() + \"\\001\" + beans.get(i).getSent_body_bytes() + \"\\001\" + beans.get(i).getStatus()); // è¾“å‡ºå½“å‰pv context.write(k,v); &#125; &#125; &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125; private Date formatDate(String timeStr) throws Exception&#123; return df2.parse(timeStr); &#125; private long diffTime(String t1,String t2) throws Exception&#123; return df2.parse(t1).getTime() - df2.parse(t2).getTime(); &#125; &#125; &#125; public static void main(String[] args) throws Exception &#123; Configuration conf = new Configuration(); Job job = Job.getInstance(conf); job.setJarByClass(ClickStreamPageView.class); job.setMapperClass(ClickStreamPageViewMapper.class); job.setReducerClass(ClickStreamPageViewMapper.ClickStreamPageViewReducer.class); job.setMapOutputKeyClass(Text.class); job.setMapOutputValueClass(WebLog.class); job.setOutputKeyClass(NullWritable.class); job.setOutputValueClass(Text.class); FileInputFormat.setInputPaths(job, new Path(args[0])); FileOutputFormat.setOutputPath(job, new Path(args[1])); job.waitForCompletion(true); &#125;&#125;è‡ªåŠ¨åŒ–è¿è¡Œè„šæœ¬click_stream_page_view.sh1234567891011121314151617181920212223242526272829303132333435363738394041#!/bin/bash# ä½œç”¨:ç»Ÿè®¡PageViewçš„æ‰¹å¤„ç†è„šæœ¬# ä½œè€…:èµµä¸€å¥½# java ç¯å¢ƒexport JAVE_HOME=/data/jdk1.8.0_161export JRE_HOME=$&#123;JAVE_HOME&#125;/jreexport CLASS_PATH=$&#123;JAVE_HOME&#125;/lib/dt.jar:$&#123;JAVE_HOME&#125;/lib/tools.jarexport PATH=$PATH:$&#123;JAVE_HOME&#125;/bin:$&#123;JRE_HOME&#125;/bin# hadoop ç¯å¢ƒexport HADDOP_HOME=/data/hadoop-2.7.3export PATH=$PATH:$&#123;HADDOP_HOME&#125;/bin:$&#123;HADDOP_HOME&#125;/sbin# æ—¥æœŸyesterday=`date -d'-1 day' +%Y-%m-%d`s_year=`date -d'-1 day' +%Y`s_month=`date -d'-1 day' +%m`s_day=`date -d'-1 day' +%d`# inpathin_path=/syslog/preprocess/outpath# outpathout_path=/syslog/pageview/outpath# jar namejar_name=click_stream_page_view.jar# æ£€æµ‹æ˜¯å¦å­˜åœ¨å¾…å¤„ç†æ•°æ®files=`hdfs dfs -ls $in_path | grep $yesterday | wc -l`if [ $files -gt 0 ];then echo \"å¼€å§‹è¿è¡ŒPageViewæ‰¹å¤„ç†å‘½ä»¤,ä¸Šä¼ ç›®å½•ä¸º:$out_path/$yesterday\" hadoop jar $jar_name $in_path/$yesterday $out_path/$yesterdayfi# å¦‚æœæŠ¥é”™å‘é€é‚®ä»¶if [ $? -gt 0 ];then echo \"è¿è¡Œå¤±è´¥,å‘é€é‚®ä»¶...\"fi ç¬¬ä¸‰æ­¥ç”Ÿæˆéƒ¨åˆ†æŒ‡æ ‡ä¸»è¦ç”±ClickStreamVisit.javaå®Œæˆï¼Œä¸‹é¢æ˜¯æ ¸å¿ƒä»£ç :123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115package com.zonegood.hive.mr;import com.zonegood.hive.mrbean.PageView;import com.zonegood.hive.mrbean.VisitBean;import org.apache.commons.beanutils.BeanUtils;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.Path;import org.apache.hadoop.io.LongWritable;import org.apache.hadoop.io.NullWritable;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Job;import org.apache.hadoop.mapreduce.Mapper;import org.apache.hadoop.mapreduce.Reducer;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;import java.io.IOException;import java.util.ArrayList;import java.util.Collections;import java.util.Comparator;/** * ç‚¹å‡»æµ * ç»Ÿè®¡èµ·å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€è¿›å…¥é¡µé¢ã€ç¦»å¼€é¡µé¢ã€ä¸€å…±è®¿é—®äº†å¤šå°‘é¡µé¢ã€sessionIdã€IPã€ä»å“ªæ¥çš„ * @author zyh * @create 18-11-3 ä¸‹åˆ5:24 */public class ClickStreamVisit &#123; static class ClickStreamVisitMapper extends Mapper&lt;LongWritable, Text, Text, PageView&gt; &#123; Text k = new Text(); PageView v = new PageView(); @Override protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123; String[] fields = value.toString().split(\"\\001\"); v.setSessionId(fields[0]); v.setIp(fields[1]); v.setStep(fields[2]); v.setStayTime(fields[3]); v.setU_info(fields[4]); v.setTime(fields[5]); v.setRequest_url(fields[6]); v.setRequest_referer(fields[7]); v.setUser_agent(fields[8]); v.setSent_body_bytes(fields[9]); v.setStatus(fields[10]); k.set(v.getSessionId()); context.write(k,v); &#125; &#125; static class ClickStreamVisitReducer extends Reducer&lt;Text, PageView, NullWritable, VisitBean&gt; &#123; NullWritable k = NullWritable.get(); Text v = new Text(); @Override protected void reduce(Text key, Iterable&lt;PageView&gt; values, Context context) throws IOException, InterruptedException &#123; ArrayList&lt;PageView&gt; beans = new ArrayList&lt;PageView&gt;(); // æŒ‰ç…§æ­¥éª¤æ’åº for (PageView pv : values) &#123; PageView bean = new PageView(); try &#123; BeanUtils.copyProperties(bean, pv); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; beans.add(bean); &#125; Collections.sort(beans, new Comparator&lt;PageView&gt;() &#123; @Override public int compare(PageView o1, PageView o2) &#123; return Integer.parseInt(o1.getStep()) &gt; Integer.parseInt(o2.getStep()) ? 1 : -1; &#125; &#125;); VisitBean visitBean = new VisitBean(); visitBean.setInPage(beans.get(0).getRequest_url()); visitBean.setOutPage(beans.get(beans.size()-1).getRequest_url()); visitBean.setInTime(beans.get(0).getTime()); visitBean.setOutTime(beans.get(beans.size()-1).getTime()); visitBean.setPageVisits(beans.size()); visitBean.setRemote_addr(beans.get(0).getIp()); visitBean.setSession(beans.get(0).getSessionId()); visitBean.setReferal(beans.get(0).getRequest_referer()); context.write(k,visitBean); &#125; &#125; public static void main(String[] args) throws Exception &#123; Configuration conf = new Configuration(); Job job = Job.getInstance(conf); job.setJarByClass(ClickStreamVisit.class); job.setMapperClass(ClickStreamVisitMapper.class); job.setReducerClass(ClickStreamVisitReducer.class); job.setMapOutputKeyClass(Text.class); job.setMapOutputValueClass(PageView.class); job.setOutputKeyClass(NullWritable.class); job.setOutputValueClass(VisitBean.class); FileInputFormat.setInputPaths(job, new Path(args[0])); FileOutputFormat.setOutputPath(job, new Path(args[1])); boolean res = job.waitForCompletion(true); System.exit(res?0:1); &#125;&#125;ä¸‹é¢æ˜¯é…åˆMRè‡ªåŠ¨è„šæœ¬click_stream_visit.sh1234567891011121314151617181920212223242526272829303132333435363738394041#!/bin/bash# ä½œç”¨:ç»Ÿè®¡Visitçš„æ‰¹å¤„ç†è„šæœ¬# ä½œè€…:èµµä¸€å¥½# java ç¯å¢ƒexport JAVE_HOME=/data/jdk1.8.0_161export JRE_HOME=$&#123;JAVE_HOME&#125;/jreexport CLASS_PATH=$&#123;JAVE_HOME&#125;/lib/dt.jar:$&#123;JAVE_HOME&#125;/lib/tools.jarexport PATH=$PATH:$&#123;JAVE_HOME&#125;/bin:$&#123;JRE_HOME&#125;/bin# hadoop ç¯å¢ƒexport HADDOP_HOME=/data/hadoop-2.7.3export PATH=$PATH:$&#123;HADDOP_HOME&#125;/bin:$&#123;HADDOP_HOME&#125;/sbin# æ—¥æœŸyesterday=`date -d'-1 day' +%Y-%m-%d`s_year=`date -d'-1 day' +%Y`s_month=`date -d'-1 day' +%m`s_day=`date -d'-1 day' +%d`# inpathin_path=/syslog/pageview/outpath# outpathout_path=/syslog/visit/outpath# jar namejar_name=click_stream_visit.jar# æ£€æµ‹æ˜¯å¦å­˜åœ¨å¾…å¤„ç†æ•°æ®files=`hdfs dfs -ls $in_path | grep $yesterday | wc -l`if [ $files -gt 0 ];then echo \"å¼€å§‹è¿è¡ŒVisitæ‰¹å¤„ç†å‘½ä»¤,ä¸Šä¼ ç›®å½•ä¸º:$out_path/$yesterday\" hadoop jar $jar_name $in_path/$yesterday $out_path/$yesterdayfi# å¦‚æœæŠ¥é”™å‘é€é‚®ä»¶if [ $? -gt 0 ];then echo \"è¿è¡Œå¤±è´¥,å‘é€é‚®ä»¶...\"fi è‡ªåŠ¨åŒ–ä½¿ç”¨éƒ¨ç½²å¥½çš„Azkabanè°ƒåº¦ç³»ç»Ÿè°ƒåº¦ä¸‰ä¸ªshellè„šæœ¬ï¼Œå®Œæˆè‡ªåŠ¨ETLæ­¥éª¤ã€‚1.ç¼–å†™auto_run.shè„šæœ¬1234567#!/bin/bash# ä½œç”¨:è‡ªåŠ¨è¿è¡Œpreprocess pageview visit æ‰¹å¤„ç†è„šæœ¬sh weblog_pre_process.shsh click_stream_page_view.shsh click_stream_visit.sh2.å°†ä¸‰ä¸ªMRç¨‹åºåˆ†åˆ«æ‰“åŒ…æˆå¯æ‰§è¡Œja,å¯ä»¥ä½¿ç”¨Maven packageæŒ‡ä»¤ï¼Œè¿™è¾¹ä¸è¿‡å¤šè¯¦è¿°click_stream_page_view.jarclick_stream_visit.jarweblog_pre_process.jar3.ç¼–å†™azkabançš„jobå¹¶æ‰“åŒ…æˆzipä¸Šä¼ åˆ°Azkabanå¹³å°123# foo.jobtype=commandcommand=sh auto_run.shfoo.zipä¸­ä¸€å®šè¦åŒ…å«ä¸Šè¿°çš„æ‰€æœ‰æ–‡ä»¶,å¦‚ä¸‹å›¾æ‰€ç¤ºè¿è¡Œfooä»»åŠ¡ï¼Œå¦‚æœæ˜¯ç»¿æ¡è¯æ˜ç¨‹åºæ²¡é—®é¢˜å…·ä½“æ“ä½œæœ‰ç‚¹ç¹çï¼Œä¹‹å‰blogæœ‰è¯¦è¿°ï¼Œè¿™è¾¹å°±ç•¥è¿‡äº†","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Hadoop","slug":"Hadoop","permalink":"yihao.ml/tags/Hadoop/"}]},{"title":"ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿ(äºŒ)","slug":"2018-11-26-ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿ(äºŒ)","date":"2018-11-26T00:00:00.000Z","updated":"2019-11-29T12:20:47.687Z","comments":true,"path":"2018/11/26/2018-11-26-ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿ(äºŒ)/","link":"","permalink":"yihao.ml/2018/11/26/2018-11-26-ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿ(äºŒ)/","excerpt":"","text":"ç³»ç»Ÿçš„æ–¹å‘ä¸ºæ”¶é›†ngnixè®¿é—®æ—¥å¿—ï¼Œåšç¦»çº¿æ‰¹å¤„ç†ç»Ÿè®¡åˆ†æï¼Œä¸ºä¸Šå±‚å†³ç­–æä¾›æ•°æ®æ”¯æŒ ç³»ç»Ÿè®¾è®¡å°å‹é›†ç¾¤(3å° CentOS)ï¼Œcor1/cor2/cor3 æ ¸å¿ƒç»„ä»¶ä¸‹é¢å¯¹ç”¨åˆ°çš„æ ¸å¿ƒç»„ä»¶åšä¸€ä¸ªæ¦‚è¿°ï¼Œå¿ƒé‡Œæœ‰ä¸€ä¸ªå¤§æ¦‚FlumeNG : ä¸»è¦æ”¶é›†WEBç«¯äº§ç”Ÿçš„ngnixæ—¥å¿—æ±‡æ€»åˆ°HDFSä¸­HDFS : å­˜æ”¾å‰ä¸€å¤©æ±‡æ€»çš„æ•°æ®ï¼Œä¸ºåç»­ç¦»çº¿åˆ†æåšå‡†å¤‡MapReduce : ä¸»è¦è¿›è¡ŒETLï¼Œæ¸…æ´—ï¼Œè¿‡æ»¤ï¼Œè§„æ•´ã€‚æ ¹æ®HDFSæ±‡æ€»æ•°æ®ç”Ÿæˆè´´æºè¡¨Hive : åŠ è½½HDFSä¸Šçš„æ•°æ®åˆ°ä»“åº“ï¼ˆåŠ è½½è´´æºè¡¨ï¼‰ï¼Œä½¿ç”¨hive sqlæ ¹æ®è´´æºè¡¨è¿›ä¸€æ­¥è®¡ç®—å‡ºå„ç»´åº¦æŒ‡æ ‡Sqoop : åŒæ­¥Hiveæ•°æ®ä»“åº“ä¸­å„ç»´åº¦æŒ‡æ ‡åˆ°mysqlæ•°æ®åº“ï¼Œæˆ–è€…redisã€‚ä¸ºWEBç«¯å±•ç¤ºæä¾›åŸºç¡€æ•°æ®Azkaban : å„ä¸ªç»„ä»¶çš„ç²˜åˆå‰‚ï¼Œç”¨æ¥è°ƒåº¦å„è‡ªåŠ¨è„šæœ¬ï¼Œå®ç°è‡ªåŠ¨åŒ– æ­å»ºé›†ç¾¤1.å¼€å‘é˜¶æ®µä½¿ç”¨è™šæ‹Ÿæœº,è¿™è¾¹ç”¨çš„æ˜¯VirtualBox.å…ˆå‡†å¤‡3å°CentOSè™šæ‹Ÿæœº,cor1/cor2/cor3,è¿™è¾¹ä¸åšè¯¦è¿°2.åœ¨cor1ä¸Šéƒ¨ç½²hadoop,zookeeper,hive,flume,sqoop,mysql,azkaban,è¿™è¾¹ä¸åšè¯¦è¿°3.åœ¨cor2ä¸Šéƒ¨ç½²hadoop,zookeeper,è¿™è¾¹ä¸åšè¯¦è¿°4.åœ¨cor3ä¸Šéƒ¨ç½²hadoop,zookeeper,è¿™è¾¹ä¸åšè¯¦è¿° æ”¶é›†æ•°æ®æ”¶é›†æ•°æ®è¿™è¾¹ä½¿ç”¨,flumeNGé‡‡é›†ngnixæ—¥å¿—ä¸Šä¼ åˆ°HDFSï¼Œå®‰è£…å¥½flumeNG,åœ¨confç›®å½•ä¸‹åˆ›å»ºtail-hdfs.conf1234567891011121314151617181920212223242526272829303132333435# Name the components on this agenta1.sources = r1a1.sinks = k1a1.channels = c1# Describe/configure the sourcea1.sources.r1.type = execa1.sources.r1.command = tail -F /home/hadoop/log/test.loga1.sources.r1.channels = c1# Describe the sinka1.sinks.k1.type = hdfsa1.sinks.k1.channel = c1a1.sinks.k1.hdfs.path = /flume/events/%y-%m-%d/a1.sinks.k1.hdfs.filePrefix = events-a1.sinks.k1.hdfs.round = truea1.sinks.k1.hdfs.roundValue = 10a1.sinks.k1.hdfs.roundUnit = minutea1.sinks.k1.hdfs.rollInterval = 3a1.sinks.k1.hdfs.rollSize = 20a1.sinks.k1.hdfs.rollCount = 5a1.sinks.k1.hdfs.batchSize = 1a1.sinks.k1.hdfs.useLocalTimeStamp = true#ç”Ÿæˆçš„æ–‡ä»¶ç±»å‹ï¼Œé»˜è®¤æ˜¯Sequencefileï¼Œå¯ç”¨DataStreamï¼Œåˆ™ä¸ºæ™®é€šæ–‡æœ¬a1.sinks.k1.hdfs.fileType = DataStream# Use a channel which buffers events in memorya1.channels.c1.type = memorya1.channels.c1.capacity = 1000a1.channels.c1.transactionCapacity = 100# Bind the source and sink to the channela1.sources.r1.channels = c1a1.sinks.k1.channel = c1å¯åŠ¨FlumeNGï¼š1bin/flume-ng agent -c conf -f conf/tail-hdfs.conf -n a1FlumeNGæ‰‹å†Œ:http://flume.apache.org/FlumeUserGuide.htmlå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨FlumeNG,ä½¿ç”¨shellè„šæœ¬å®šæ—¶æ£€æµ‹æŸä¸ªç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å®šæ—¶ä¸Šä¼ åˆ°HDFSä¸­ã€‚ä¸‹é¢æä¾›ä¸€ä¸ªå‚è€ƒè„šæœ¬çš„å†™æ³•123456789101112131415161718192021222324252627282930313233343536373839#!/bin/bash## ===========================================================================# Data Input: /data/weblog/preprocess/input# Data Output: /data/weblog/preprocess/output# Author: zyh# ===========================================================================#set java envexport JAVE_HOME=/data/jdk1.8.0_161export JRE_HOME=$&#123;JAVE_HOME&#125;/jreexport CLASS_PATH=$&#123;JAVE_HOME&#125;/lib/dt.jar:$&#123;JAVE_HOME&#125;/lib/tools.jarexport PATH=$PATH:$&#123;JAVE_HOME&#125;/bin:$&#123;JRE_HOME&#125;/bin#set hadoop envexport HADDOP_HOME=/data/hadoop-2.7.3export PATH=$PATH:$&#123;HADDOP_HOME&#125;/bin:$&#123;HADDOP_HOME&#125;/sbin#flumeé‡‡é›†ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶å­˜æ”¾çš„ç›®å½•log_flume_dir=/data/flumedata/#å¾…ä¸Šä¼ æ–‡ä»¶å­˜æ”¾çš„ç›®å½•log_pre_input=/data/weblog/preprocess/input#è·å–æ—¶é—´ä¿¡æ¯day_01=`date -d'-1 day' +%Y-%m-%d`syear=`date --date=$day_01 +%Y`smonth=`date --date=$day_01 +%m`sday=`date --date=$day_01 +%d`#è¯»å–æ—¥å¿—æ–‡ä»¶çš„ç›®å½•ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶files=`hadoop fs -ls $log_flume_dir | grep $day_01 | wc -l`if [ $files -gt 0 ]; thenhadoop fs -mv $&#123;log_flume_dir&#125;/$&#123;day_01&#125; $&#123;log_pre_input&#125;echo \"success moved $&#123;log_flume_dir&#125;/$&#123;day_01&#125; to $&#123;log_pre_input&#125; .....\"fi","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Hadoop","slug":"Hadoop","permalink":"yihao.ml/tags/Hadoop/"}]},{"title":"ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿï¼ˆä¸€ï¼‰","slug":"2018-11-25-ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿï¼ˆä¸€ï¼‰","date":"2018-11-25T00:00:00.000Z","updated":"2019-11-29T12:20:47.687Z","comments":true,"path":"2018/11/25/2018-11-25-ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿï¼ˆä¸€ï¼‰/","link":"","permalink":"yihao.ml/2018/11/25/2018-11-25-ç¦»çº¿æ—¥å¿—åˆ†æç³»ç»Ÿï¼ˆä¸€ï¼‰/","excerpt":"","text":"è¯¥ç³»ç»Ÿä¸»è¦å¯¹å‰ä¸€å¤©ngnixæ—¥å¿—è¿›è¡Œç¦»çº¿æ‰¹å¤„ç†ç»Ÿè®¡å’Œåˆ†æï¼Œä»å¤§é‡æ•°æ®ä¸­æ™’å‡ºæœ‰ä»·å€¼çš„æ•°æ®ï¼Œä¸ºä¸Šå±‚å†³ç­–æä¾›æ•°æ®æ”¯æŒï¼Œä¸»è¦æ€æƒ³æ˜¯MapReduceã€‚ä½¿ç”¨åˆ†å¸ƒå¼HDFSæ–‡ä»¶ç³»ç»Ÿä½œä¸ºç¦»çº¿æ•°æ®å­˜å‚¨ï¼Œä½¿ç”¨hiveç®€åŒ–MapReduceå¼€å‘ã€‚ngnix æ—¥å¿—çš„æ ¼å¼å¾ˆç®€å•ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯ä»ä¸­å‘æ˜å‡ºæœ‰ä»·å€¼çš„æ•°æ®ï¼Œngnixçš„access.logçš„æ ¼å¼,æ‘˜æŠ„éƒ¨åˆ†æ—¥å¿—12127.0.0.1 - - [05/Sep/2018:23:18:22 +0800] \"GET /favicon.ico HTTP/1.1\" 502 575 \"http://localhost:8080/4DAnalog/clashreport/delete\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:40 +0800] \"GET /4DAnalog/clashreport/find HTTP/1.1\" 502 575 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"ä¸‹é¢è¡¨æ ¼å¯¹ä¸Šé¢æ¯ä¸ªå­—æ®µè¿›è¡Œäº†è¯¦ç»†æè¿°ä½ç½®å­—æ®µè¯´æ˜å€¼1ip127.0.0.12å®é™…ä¸Šç»å¤§å¤šæ•°æ—¶å€™è¿™ä¸€é¡¹éƒ½æ˜¯å¦‚æ­¤ã€‚è¿™ä¸ªä½ç½®ç”¨äºè®°å½•æµè§ˆè€…çš„æ ‡è¯†-3è®°å½•æµè§ˆè€…è¿›è¡Œèº«ä»½éªŒè¯æ—¶æä¾›çš„åå­—-4è¯·æ±‚çš„æ—¶é—´[05/Sep/2018:23:18:22 +0800]5è®¿é—®è¯·æ±‚æ–¹å¼GET6æµè§ˆè€…è¯·æ±‚èµ„æºè·¯å¾„/4DAnalog/clashreport/delete7è®¿é—®åè®®HTTP/1.1&quot;8çŠ¶æ€ä»£ç 5029å‘é€ç»™å®¢æˆ·ç«¯çš„æ€»å­—èŠ‚æ•°ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬ä¼ è¾“æ˜¯å¦è¢«æ‰“æ–­ï¼ŒæŠŠæ—¥å¿—è®°å½•ä¸­çš„è¿™äº›å€¼åŠ èµ·æ¥å°±å¯ä»¥å¾—çŸ¥æœåŠ¡å™¨åœ¨æŸä¸€æ®µæ—¶é—´å‘é€äº†å¤šå°‘æ•°æ®ã€‚57510è¯·æ±‚æ¥è®¿åœ°å€referer,å¯ä»¥åˆ©ç”¨å®ƒåˆ†æå‡ºè®¿é—®è€…ä»å“ªæ¥çš„http://localhost:8080/4DAnalog/clashreport/delete11æµè§ˆå™¨ä¿¡æ¯Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36 ç»Ÿè®¡æŒ‡æ ‡æ±‡æ€»ä¸‹é¢å¯¹ç»Ÿè®¡çš„æŒ‡æ ‡å·¦ç®€å•æ¦‚è¿° 1.æŸæ—¶é—´æ®µçš„PVSä»ä¸­å¯ä»¥ç¹è¡å‡ºå„ç§ç»´åº¦çš„PVSï¼Œæ¯”å¦‚1å¤©ä¸­æ¯ä¸ªå°æ—¶çš„PVSï¼Œ1å¤©ä¸­æ¯åˆ†é’Ÿçš„PVSï¼Œä¸€ä¸ªæœˆä¸­æ¯å¤©çš„PVS 2.æµè§ˆå™¨å…¶ä¸­å¯ä»¥ç»Ÿè®¡ä»Firfoxè·³è½¬è¿‡æ¥çš„PVSã€ä»Chromeè·³è½¬è¿‡æ¥çš„PVSã€ä»IEè·³è½¬è¿‡æ¥çš„PVS 3.æŸæ—¶é—´æ®µå†…çš„äººå‡æµè§ˆé¡µæ•°ä»ä¸­å¯ä»¥ç¹è¡å‡ºå„ç§ç»´åº¦çš„æŒ‡æ ‡ï¼Œæ¯”å¦‚ä¸€ä¸ªæœˆå†…æ¯æ—¥äººå‡æµè§ˆé¡µï¼Œä¸€å¤©ä¸­æ¯å°æ—¶çš„æµè§ˆé¡µç­‰ 4.æœç´¢å¼•æ“ä»ç™¾åº¦è·³è½¬è¿‡æ¥çš„äººæ•°ã€ä»bingè·³è½¬è¿‡æ¥çš„äººæ•°ã€ä»googleè·³è½¬è¿‡æ¥çš„äººæ•° 5.TopNæŒ‡æ ‡ä¸€å¤©å†…è®¿é—®é¡µé¢çƒ­åº¦æ’è¡Œï¼ŒæŸå°æ—¶å†…è®¿é—®é¡µé¢çƒ­åº¦æ’è¡Œï¼Œä¸€ä¸ªæœˆé¡µé¢çƒ­åº¦æ’è¡Œ 6.ç‹¬ç«‹è®¿å®¢ä¸€å¹´å†…æ¯ä¸ªæœˆçš„ç‹¬ç«‹è®¿å®¢ã€ä¸€ä¸ªæœˆå†…æ¯å¤©çš„ç‹¬ç«‹è®¿å®¢ 7.å›å¤´å®¢/å•æ¬¡è®¿å®¢ä¸€ä¸ªæœˆå†…å›å¤´å®¢/å•æ¬¡è®¿å®¢ 8.è½¬æ¢ç‡ç”Ÿæˆä¸€ä¸ªæœˆå†…è¯„ä¼°ä¸šåŠ¡æŒ‡æ ‡çš„æ•°æ®ï¼ˆå„ä¸ªä¸šåŠ¡çš„è½¬æ¢ç‡ï¼‰","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Hadoop","slug":"Hadoop","permalink":"yihao.ml/tags/Hadoop/"}]},{"title":"Ngnix Websocket 400 é”™è¯¯","slug":"2018-11-15-Ngnix Websocket 400 é”™è¯¯","date":"2018-11-15T00:00:00.000Z","updated":"2019-11-29T12:20:47.686Z","comments":true,"path":"2018/11/15/2018-11-15-Ngnix Websocket 400 é”™è¯¯/","link":"","permalink":"yihao.ml/2018/11/15/2018-11-15-Ngnix Websocket 400 é”™è¯¯/","excerpt":"","text":"Spring WebSocket ç»“åˆngnix ä¹‹å400æŠ¥é”™ï¼ä»Šå¤©æ¶ˆæ¯æ¨é€åŠŸèƒ½ä¸Šæµ‹è¯•æœä»¥åå‘ç°ä¸èƒ½ä½¿ç”¨ï¼Œåˆ°æµ‹è¯•æœä¸Šå‘ç°å‘é€çš„è¯·æ±‚ä¸€ç›´è¿”å›400ã€‚åæ¥å®šä½åˆ°æ˜¯ngnixé…ç½®é—®é¢˜ã€‚è”ç³»è¿ç»´å“¥ä»¬å°†ä¸‹é¢ä»£ç æ·»åŠ ä¸Šä»¥åæˆåŠŸè§£å†³:12345678map $http_upgrade $connection_upgrade &#123; default upgrade; '' close;&#125;proxy_http_version 1.1;proxy_set_header Upgrade $http_upgrade;proxy_set_header Connection $connection_upgrade;æ·»åŠ å¥½ä¹‹åçš„æ ·å­12345678910111213map $http_upgrade $connection_upgrade &#123; default upgrade; '' close;&#125;server &#123; ... location /chat/ &#123; proxy_pass http://backend; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $connection_upgrade; &#125;&#125;","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"WebSocket","slug":"WebSocket","permalink":"yihao.ml/tags/WebSocket/"}]},{"title":"Spring WebSocketæ¶ˆæ¯æ¨é€","slug":"2018-11-14-Spring WebSocketæ¶ˆæ¯æ¨é€","date":"2018-11-14T00:00:00.000Z","updated":"2019-11-29T12:20:47.686Z","comments":true,"path":"2018/11/14/2018-11-14-Spring WebSocketæ¶ˆæ¯æ¨é€/","link":"","permalink":"yihao.ml/2018/11/14/2018-11-14-Spring WebSocketæ¶ˆæ¯æ¨é€/","excerpt":"","text":"éœ€æ±‚:åå°ç¼–è¾‘æ¨é€æ¶ˆæ¯ï¼Œå‰å°å®æ—¶æ¥æ”¶æ¶ˆæ¯ä¸‹é¢æ˜¯jså®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869$(function() &#123; bdipOnline();&#125;);var bdipWebSocket;var bdipReconnectTime = 5000;function bdipOnline() &#123; if (window.WebSocket) &#123; var protocol = publicJS.protocol == \"https\"? \"wss\": \"ws\"; try&#123; bdipWebSocket = new WebSocket(encodeURI(protocol + '://' + publicJS.host +'/ws')); //cloud.bimbdip.com &#125;catch (err)&#123; console.log(\"onlineé“¾æ¥websocketå¤±è´¥\"); &#125; if(bdipWebSocket)&#123; bdipWebSocket.onopen = function() &#123; console.log(\"bdipWebSocketé“¾æ¥æˆåŠŸ... bdipReconnectTime :\" + bdipReconnectTime) //è¿æ¥æˆåŠŸ //bdipReconnectTime = 10000; setTimeout(bdipOnline, bdipReconnectTime); &#125;; bdipWebSocket.onerror = function() &#123; console.log(\"bdipWebSocketå‘ç”Ÿé”™è¯¯... bdipReconnectTime :\" + bdipReconnectTime) //è¿æ¥å¤±è´¥ setTimeout(bdipOnline, bdipReconnectTime); bdipReconnectTime += 5000; &#125;; bdipWebSocket.onclose = function() &#123; //è¿æ¥æ–­å¼€ console.log(\"bdipWebSocketæ–­å¼€é“¾æ¥... bdipReconnectTime :\" + bdipReconnectTime) setTimeout(bdipOnline, bdipReconnectTime); bdipReconnectTime += 5000; &#125;; //æ¶ˆæ¯æ¥æ”¶ bdipWebSocket.onmessage = function(message) &#123; console.log(\"æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œæ¶ˆæ¯å†…å®¹ä¸º:\" + message); var data = JSON.parse(message.data); if (data.type == 'logMessage') &#123; notificate(data.data); &#125; &#125;; &#125; &#125;&#125;// å¼¹å‡ºæ¶ˆæ¯æ¡†function notificate(_message) &#123; var msgContent = JSON.parse(_message.content) var title = msgContent.title; if(title == null || typeof(title) == 'undefined' || title == '') &#123; title = \"é€šçŸ¥ä¸­å¿ƒ\"; &#125; var content = msgContent.content; if(content.length &gt; 140) &#123; content = content.substr(0, 140); &#125; $(\"#notification-title\").html(title); $(\"#notification-content\").html(content); //$(\".notification-panel\").show(); $(\".notification-panel\").slideDown(1000); setTimeout(function()&#123; //$(\".notification-panel\").hide(); $(\".notification-panel\").slideUp(1000); &#125;, 5000);&#125;ä¸‹é¢æ˜¯åå°ä»£ç ,å…ˆè¯´ä¸€ä¸‹å®ç°æ€è·¯:1.åœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­ç¼–è¾‘å¾…æ¨é€æ•°æ®å¹¶å®Œæˆæ¨é€æ¶ˆæ¯æ“ä½œ;2.spring websocket æ£€æµ‹åˆ°ç”¨æˆ·ç™»å½•ï¼ŒæŒ‰æŸç§è§„åˆ™å°†ç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°redisï¼›3.å®šæ—¶è½®è®­æŸ¥çœ‹å¾…æ¨é€ä¿¡æ¯ï¼Œå½“æ£€æµ‹åˆ°ç”¨æˆ·åœ¨çº¿æ—¶è¿›è¡Œæ¨é€ï¼Œæ›´æ–°æ•°æ®åº“ä¸ºå·²æ¨é€ï¼›å…¶ä¸­ä½¿ç”¨åˆ°äº†ä½¿ç”¨redisï¼ˆè®¢é˜…å’Œå‘å¸ƒï¼‰åŠŸèƒ½è¿›è¡Œæ•°æ®æ¨é€,ä¸‹é¢ä¸Šä»£ç ï¼šspring websocket handler ç›‘å¬ç”¨æˆ·ç™»å½•çš„ä»£ç :123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101package com.bim.bdip.cloud.home.web;import com.alibaba.fastjson.JSONObject;import com.baomidou.mybatisplus.mapper.EntityWrapper;import com.bim.bdip.cloud.home.constant.BizServiceDefine;import com.bim.bdip.cloud.home.constant.ConstantDefine;import com.bim.bdip.cloud.home.core.base.Parameter;import com.bim.bdip.cloud.home.domain.api.ApiResultEntity;import com.bim.bdip.cloud.home.model.BimMessageCenter;import com.bim.bdip.cloud.home.model.BimUser;import com.bim.bdip.cloud.home.provider.IBizProvider;import org.apache.ibatis.session.RowBounds;import org.apache.log4j.LogManager;import org.apache.log4j.Logger;import org.redisson.api.RTopic;import org.redisson.api.RedissonClient;import org.redisson.api.listener.MessageListener;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.socket.CloseStatus;import org.springframework.web.socket.TextMessage;import org.springframework.web.socket.WebSocketMessage;import org.springframework.web.socket.WebSocketSession;import org.springframework.web.socket.handler.TextWebSocketHandler;import org.springframework.web.socket.server.support.HttpSessionHandshakeInterceptor;import java.io.IOException;import java.util.List;import java.util.Map;public class WebSocketHandler extends TextWebSocketHandler &#123; private static final Logger logger = LogManager.getLogger(WebSocketHandler.class); @Autowired private RedissonClient redissonClient; @Autowired private IBizProvider bizProvider; @Override protected void handleTextMessage(WebSocketSession session, TextMessage message) throws Exception &#123; &#125; @Override public void afterConnectionEstablished(WebSocketSession session) throws Exception &#123; super.afterConnectionEstablished(session); Map&lt;String, Object&gt; attributes = session.getAttributes(); BimUser user = (BimUser) attributes.get(ConstantDefine.LOGIN_SESSION_USER); if (user == null) &#123; session.close(); &#125; else &#123; System.out.println(\"æ£€æµ‹åˆ°ç”¨æˆ·ç™»å½•:\" + user.getId() + \"å½“å‰çº¿ç¨‹IDä¸º:\" + Thread.currentThread().getId()); Long userId = user.getId(); String topic = String.format(\"notification:%d\", userId); RTopic&lt;BimMessageCenter&gt; rtopic = redissonClient.getTopic(topic); rtopic.removeAllListeners(); String listenerKey = String.format(\"notification:%d:listeners\", user.getId()); redissonClient.getSet(listenerKey).delete(); Integer listenerId = rtopic.addListener(new MessageListener&lt;BimMessageCenter&gt;() &#123; @Override public void onMessage(String channel, BimMessageCenter msg) &#123; System.out.println(\"å‘ç”¨æˆ·æ¨é€æ¶ˆæ¯:\" + msg); JSONObject jsonObject = new JSONObject(); jsonObject.put(\"type\", \"logMessage\"); jsonObject.put(\"data\", msg); TextMessage textMessage = new TextMessage(jsonObject.toJSONString()); try &#123; session.sendMessage(textMessage); &#125; catch (IOException e) &#123; logger.error(\"Websocket Error.\", e); &#125; &#125; &#125;); redissonClient.getSet(listenerKey).add(listenerId); attributes.put(ConstantDefine.LISTENER_ID, listenerId); &#125; &#125; @Override public void afterConnectionClosed(WebSocketSession session, CloseStatus status) throws Exception &#123; Map&lt;String, Object&gt; attributes = session.getAttributes(); BimUser user = (BimUser) attributes.get(ConstantDefine.LOGIN_SESSION_USER); Integer listenerId = (Integer) attributes.get(ConstantDefine.LISTENER_ID); if (user != null) &#123; System.out.println(\"ç”¨æˆ·é€€å‡º:\" + user.getId()); super.afterConnectionClosed(session, status); String topic = String.format(\"notification:%d\", user.getId()); String listenerKey = String.format(\"notification:%d:listeners\", user.getId()); redissonClient.getSet(listenerKey).remove(listenerId); RTopic&lt;BimMessageCenter&gt; rtopic = redissonClient.getTopic(topic); rtopic.removeListener(listenerId); &#125; &#125;&#125;ä¸‹é¢æ˜¯å®šæ—¶ä»»åŠ¡,å®šæ—¶ä»»åŠ¡è½®è®­å¾…æ¨é€æ•°æ®ï¼Œå¦‚æœæ£€æµ‹åˆ°ç”¨æˆ·ç™»å½•(é€šè¿‡redis)ï¼Œå°±è¿›è¡Œæ•°æ®æ¨é€(é€šè¿‡redis topic):1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package com.bim.bdip.cloud.home.scheduled;import com.baomidou.mybatisplus.mapper.EntityWrapper;import com.bim.bdip.cloud.home.model.BimMessageCenter;import com.bim.bdip.cloud.home.service.IBimMessageCenterService;import org.apache.ibatis.session.RowBounds;import org.redisson.api.RTopic;import org.redisson.api.RedissonClient;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.scheduling.annotation.EnableScheduling;import org.springframework.scheduling.annotation.Scheduled;import org.springframework.stereotype.Service;import java.util.Date;import java.util.List;@Service@EnableSchedulingpublic class NotificationTask &#123; @Autowired private RedissonClient redissonClient; @Autowired private IBimMessageCenterService messageCenterService; @Scheduled(cron=\"1 * * * * ?\") public void scanNotifications() &#123;EntityWrapper&lt;BimMessageCenter&gt; wrapper = new EntityWrapper&lt;&gt;(); RowBounds rowBounds = new RowBounds(0, 10000000); wrapper.where(\"read_status = &#123;0&#125;\", 0).and(\"notification_status = &#123;0&#125;\", 0).and(\"message_type = &#123;0&#125;\", \"logMessage\"); List&lt;BimMessageCenter&gt; messageList = messageCenterService.selectPage(rowBounds, wrapper); System.out.println(\"è½®è®­æ£€æµ‹æ•°æ®åº“æ•°æ®\" + messageList.size() + \"å½“å‰çº¿ç¨‹IDä¸º:\" + Thread.currentThread().getId() + \"å½“å‰æ—¶é—´ä¸º\" + new Date().getTime()); for(BimMessageCenter message : messageList) &#123; String listenerKey = String.format(\"notification:%d:listeners\", message.getReceiveId()); if(redissonClient.getSet(listenerKey).size() &gt; 0) &#123; System.out.println(\"æ£€æµ‹åˆ°ç”¨æˆ·\" + message.getReceiveId() + \"åœ¨çº¿ï¼Œæ¨é€æ¶ˆæ¯\"); String topic = String.format(\"notification:%d\", message.getReceiveId()); RTopic&lt;BimMessageCenter&gt; rTopic = redissonClient.getTopic(topic); rTopic.publish(message); if(message.getNotificationStatus() != 2)&#123; message.setNotificationStatus(2); // å·²æ¨é€ this.messageCenterService.update(message); &#125; &#125; &#125; System.out.println(\"è½®è®­ç»“æŸï¼Œå½“å‰æ—¶é—´ä¸º:\" + new Date().getTime()); &#125;&#125;","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"WebSocket","slug":"WebSocket","permalink":"yihao.ml/tags/WebSocket/"}]},{"title":"Hive å„ç§Joinæ€»è®¡æ±‡æ€»","slug":"2018-11-06-hiveå„ç§join","date":"2018-11-06T00:00:00.000Z","updated":"2019-11-29T12:20:47.685Z","comments":true,"path":"2018/11/06/2018-11-06-hiveå„ç§join/","link":"","permalink":"yihao.ml/2018/11/06/2018-11-06-hiveå„ç§join/","excerpt":"","text":"å…³äºhiveä¸­çš„å„ç§joinï¼Œä¸‹è¾¹åšä¸ªæ€»ç»“å…ˆå‡†å¤‡æ•°æ®12345678910111213# a.txt1,a2,b3,c4,d7,y8,u# b.txt2,bb3,cc7,yy9,ppå»ºè¡¨ï¼š12345create table a(id int,name string)row format delimited fields terminated by ',';create table b(id int,name string)row format delimited fields terminated by ',';å¯¼å…¥æ•°æ®ï¼š123load data local inpath '/home/hadoop/a.txt' into table a;load data local inpath '/home/hadoop/b.txt' into table b;å®éªŒï¼šinner joinselect * from a inner join b on a.id=b.id;left joinselect * from a left join b on a.id=b.id;right joinselect * from a right join b on a.id=b.id;outer joinselect * from a full outer join b on a.id=b.id;left semi joinselect * from a left semi join b on a.id = b.id;","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Hive","slug":"Hive","permalink":"yihao.ml/tags/Hive/"}]},{"title":"Lambdaæ¶æ„","slug":"2018-10-28-Lambdaæ¶æ„è®¾è®¡","date":"2018-10-28T00:00:00.000Z","updated":"2019-11-29T12:20:47.685Z","comments":true,"path":"2018/10/28/2018-10-28-Lambdaæ¶æ„è®¾è®¡/","link":"","permalink":"yihao.ml/2018/10/28/2018-10-28-Lambdaæ¶æ„è®¾è®¡/","excerpt":"","text":"Lambdaæ¶æ„æ˜¯ç”±Stromçš„ä½œè€…æå‡ºçš„ä¸€ç§é€šç”¨ç³»ç»Ÿæ¶æ„ï¼Œå¯ä»¥è¯´å®ƒæ˜¯ä¸€ç§æ··åˆå¼æ¶æ„ï¼Œå…¶æ¶æ„å¤§è‡´åˆ†ä¸ºä¸‰å±‚batch layerã€speed layerå’Œserving layerã€‚batch layer : ç§°ä¸ºæ‰¹å¤„ç†å±‚ï¼Œä¸»è¦è¿›è¡Œç¦»çº¿æ•°æ®å¤„ç†å’Œè®¡ç®—ã€‚è®¡ç®—æ•°æ®é‡å¤§ï¼Œå»¶æ—¶é«˜æ˜¯å…¶ä¸»è¦ç‰¹ç‚¹speed layer : ç§°ä¸ºæµå¤„ç†å±‚ ï¼Œä¸»è¦è¿›è¡Œå®æ—¶æ•°æ®å¤„ç†å’Œè®¡ç®—ã€‚è¿œè¿œä¸æ–­çš„å¤„ç†è¿‡æ¥çš„æ•°æ®ï¼Œå»¶æ—¶ä½æ˜¯å…¶ä¸»è¦ç‰¹ç‚¹Serving layer : ä¸»è¦è¿›è¡Œåˆå¹¶Batch Viewå’ŒReal-time view ä¸­çš„ç»“æœåˆ°æœ€ç»ˆæ•°æ®é›† æ‰¹å¤„ç†å±‚(batch layer)æ‰¹é‡è®¡ç®—:æ‰¹é‡è·å–æ•°æ®ã€æ‰¹é‡ä¼ è¾“æ•°æ®ã€å‘¨æœŸæ€§æ‰¹é‡è®¡ç®—æ•°æ®å¹¶è¿›è¡Œæ•°æ®å±•ç¤ºã€‚ä¸‹é¢å¯¹å…·ä½“å¯è¡Œæ–¹æ¡ˆè¿›è¡Œæ¢è®¨æ•°æ®æ”¶é›†ï¼šFlumeNG æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„é‡‡é›†ã€èšå’Œä¼ è¾“ç³»ç»Ÿ,å…¶æ ¸å¿ƒç»„ä»¶æ˜¯Agentã€‚ä½¿ç”¨å®ƒå¯ä»¥å®ç°ä»æºåˆ°ç›®æ ‡çš„æµ·é‡æ•°æ®ä¼ è¾“ã€‚æ•°æ®åŒæ­¥å±‚ï¼šsqoopå¯ä»¥å®Œæˆå…³ç³»å‹æ•°æ®åˆ°åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¹‹é—´çš„æ•°æ®åŒæ­¥æ•°æ®å­˜å‚¨ï¼šå¯ä»¥ä½¿ç”¨HDFS+Hbaseåˆ†å¸ƒå¼è®¡ç®—ï¼šmapreduce æˆ–è€…sparkã€‚mapreduceä¸­æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„jobï¼Œsparkä¸­åˆ™æ˜¯ä¸€ä¸ªä¸€ä¸ªRDDã€‚å…¶ä¸­ä»–ä»¬ä¿©æœ€å¤§çš„ä¸€ä¸ªå·®åˆ«æ˜¯HDFSå¤„ç†çš„ æ•°æ®å¿…é¡»è¢«æ”¾åœ¨ç£ç›˜ä¸Šï¼Œè€ŒSparkåˆ™ä¸æ˜¯å®ƒçš„æ•°æ®å¯ä»¥éƒ½åœ¨å†…å­˜ä¸­å®Œæˆåºåˆ—åŒ–æ¡†æ¶ï¼šThriftã€Protocol bufferã€Avroè§†å›¾ï¼šç”±reduceäº§ç”Ÿï¼Œå¯ä»¥å­˜åœ¨Hbaseã€mysqlã€redisã€memcacheä¸­éƒ½å¯ä»¥ å®æ—¶å¤„ç†å±‚å®æ—¶å¤„ç†å¯ä»¥å®æ—¶äº§ç”Ÿã€ä¼ è¾“ã€è®¡ç®—å¹¶å±•ç¤ºæ•°æ®ã€‚å…¶ç‰¹ç‚¹ä¸»è¦æ˜¯å»¶æ—¶ä½ï¼Œæ•°æ®æ”¶é›† flume(OG/NG) : agent -&gt; storage,å…¶ä¸­å¯ä»¥å˜å½¢ agent -&gt; kafka -&gt; storageæ•°æ®åˆ†æ (storm(æ¯«çº§)ã€spark streaming(ç§’çº§))å­˜å‚¨æ•°æ®åº“ : (Hbaseã€Cassandraã€Impalaã€Redis/memcacheã€MySql) æœåŠ¡å±‚ç‰¹ç‚¹: éšæœºè¯» ã€éå¸¸ç«¯çš„æ—¶é—´å†…è¿”å›ç»“æœã€è¯»å–batch layer å’Œspeed layerç»“æœ,å¹¶å¯¹å…¶å½’å¹¶ Lambdaæ¶æ„å…·ä½“å®ç°","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[]},{"title":"åäºŒç§å¤§æ•°æ®ç»å…¸æ¡ˆä¾‹ä½ åšè¿‡å‡ ä¸ª?","slug":"2018-10-28-12ç§å¤§æ•°æ®ç›¸å…³ç³»ç»Ÿä½ åšè¿‡å‡ ä¸ªï¼Ÿ","date":"2018-10-28T00:00:00.000Z","updated":"2019-11-29T12:20:47.685Z","comments":true,"path":"2018/10/28/2018-10-28-12ç§å¤§æ•°æ®ç›¸å…³ç³»ç»Ÿä½ åšè¿‡å‡ ä¸ªï¼Ÿ/","link":"","permalink":"yihao.ml/2018/10/28/2018-10-28-12ç§å¤§æ•°æ®ç›¸å…³ç³»ç»Ÿä½ åšè¿‡å‡ ä¸ªï¼Ÿ/","excerpt":"","text":"1ç¦»çº¿æ•°æ®å¤„ç†é¡¹ç›®å†…å®¹ä¸ºé€šè¿‡å¯¹ç½‘ç«™è®¿é—®æ—¥å¿—çš„é‡‡é›†å’Œæ¸…æ´—ï¼Œç»“åˆæ•°æ®åº“ä¸­çš„ç»“æ„åŒ–ç”¨æˆ·æ•°æ®ï¼Œç»Ÿè®¡å¹¶å±•ç¤ºç½‘ç«™çš„PVã€UVæƒ…å†µï¼Œä»¥å¯¹ç½‘ç«™çš„è¿è¡Œæƒ…å†µè¿›è¡Œç›‘æ§ã€‚é€šè¿‡æ­¤é¡¹ç›®ï¼Œå›é¡¾å¹¶ä¸²è”å‰é¢è®²è¿°çš„ç¦»çº¿æ•°æ®å¤„ç†ç›¸å…³æŠ€æœ¯ï¼Œå¦‚ï¼šFIuneã€Sqoopã€Hiveã€Sparkç­‰ï¼Œäº†è§£å’ŒæŒæ¡PBçº§æ•°æ®ç¦»çº¿å¤„ç†çš„ä¸€èˆ¬è¿‡ç¨‹å’Œæ¶æ„ã€‚ 2æµå¼æ•°æ®å¤„ç†é¡¹ç›®å†…å®¹ä¸ºé€šè¿‡å¯¹æ•°æ®åº“äº¤æ˜“æ•°æ®ä¿®æ”¹çš„å®æ—¶åŒæ­¥ï¼Œç›‘æ§ç½‘ç«™å®æ—¶äº¤æ˜“æƒ…å†µï¼Œä»¥æé«˜ç½‘ç«™äº¤æ˜“æƒ…å†µç›‘æ§çš„æ—¶æ•ˆæ€§ï¼Œé™ä½ç½‘ç«™è¿è¡Œçš„é£é™©ã€‚ é€šè¿‡æ­¤é¡¹ç›®ï¼Œå›é¡¾å¹¶ä¸²è”å‰é¢è®²è¿°çš„å®æ—¶æ•°æ®å¤„ç†ç›¸å…³æŠ€æœ¯ï¼Œå¦‚ï¼škafkaã€Sparkã€Streaningå’ŒHBaseç­‰ï¼Œäº†è§£å’ŒæŒæ¡å®æ—¶æ•°æ®å¤„ç†çš„ä¸€èˆ¬è¿‡ç¨‹å’Œæ¶æ„ã€‚ 3æ¨èç³»ç»Ÿé¡¹ç›®å†…å®¹ï¼ŒåŸºäºå…¬å¼€æ•°æ®åº“çš„å•†å“æ¨èï¼ŒæŸå¤§å‹äº’é‡‘å…¬å¸äº§å“æ¨èç³»ç»Ÿå‰–æï¼Œ é€šè¿‡å¯¹å…¬å¸å®é™…æ¨èé¡¹ç›®çš„å‰–æå’Œæ ¹æ®çœŸå®æ•°æ®æ­å»ºæ¨èç³»ç»Ÿçš„å®æ“æ¼”ç»ƒï¼Œäº†è§£æ¨èç³»ç»Ÿçš„ä¸€èˆ¬æ¶æ„å’Œå¸¸ç”¨ç®—æ³•ã€‚ 4æœç´¢ç³»ç»Ÿé¡¹ç›®å†…å®¹ï¼Œé€šè¿‡ç½‘ç«™çˆ¬è™«çˆ¬å–ç½‘ç«™æ•°æ®ï¼Œç„¶ååŸºäºKlastlcSeardå’ŒKlbanaæ­å»ºä¸€ä¸ªå®Œæ•´çš„æœç´¢ç³»ç»Ÿã€‚ 5ç³»ç»Ÿè¿è¡Œæƒ…å†µä»ªè¡¨ç›˜é€šè¿‡å¯¹ç½‘ç«™è®¿é—®æ—¥å¿—çš„é‡‡é›†å’Œæ¸…æ´—ï¼Œç»“åˆæ•°æ®åº“ä¸­çš„ç»“æ„åŒ–ç”¨æˆ·æ•°æ®ï¼Œç»Ÿè®¡å¹¶å±•ç¤ºç½‘ç«™çš„PVï¼ŒUVæƒ…å†µï¼Œä»¥å¯¹ç½‘ç«™çš„è¿è¡Œæƒ…å†µè¿›è¡Œç›‘æ§ã€‚é€šè¿‡æ­¤é¡¹ç›®ï¼Œå›é¡¾å¹¶ä¸²è”å‰é¢è®²è¿°çš„ç¦»çº¿æ•°æ®å¤„ç†ç›¸å…³æŠ€æœ¯ï¼Œå¦‚Flumeï¼ŒSqoopï¼ŒHiveï¼ŒSparkç­‰ï¼ŒæŒæ¡PBçº§æ•°æ®ç¦»çº¿å¤„ç†çš„ä¸€èˆ¬è¿‡ç¨‹å’Œæ¶æ„ã€‚ 6å®æ—¶äº¤æ˜“ç›‘æ§ç³»ç»Ÿè¿‡å¯¹æ•°æ®åº“äº¤æ˜“æ•°æ®ä¿®æ”¹çš„å®æ—¶åŒæ­¥ï¼Œç›‘æ§ç½‘ç«™å®æ—¶äº¤æ˜“æƒ…å†µï¼Œä»¥æé«˜ç½‘ç«™äº¤æ˜“æƒ…å†µç›‘æ§çš„æ—¶æ•ˆæ€§ï¼Œé™ä½ç½‘ç«™è¿è¡Œçš„é£é™©ã€‚é€šè¿‡æ­¤é¡¹ç›®ï¼Œå›é¡¾å¹¶ä¸²è”å‰é¢è®²è¿°çš„å®æ—¶æ•°æ®å¤„ç†ç›¸å…³æŠ€æœ¯ï¼Œå¦‚Kafkaï¼ŒSpark Streamingå’ŒHBaseç­‰ï¼ŒæŒæ¡å®æ—¶æ•°æ®å¤„ç†çš„ä¸€èˆ¬è¿‡ç¨‹å’Œæ¶æ„ã€‚ 7æ¨èç³»ç»Ÿç†è®ºä¸å®æˆ˜è®²è§£æ¨èç³»ç»Ÿçš„ç›¸å…³èƒŒæ™¯ï¼Œå¸¸ç”¨ç®—æ³•åŠé€šç”¨æ¶æ„ï¼›åŸºäºå…¬å¼€æ•°æ®é›†ä»é›¶æ„å»ºä¸€ä¸ªç”µå½±æ¨èç³»ç»Ÿã€‚é€šè¿‡å¯¹å…¬å¸å®é™…æ¨èé¡¹ç›®çš„å‰–æå’Œæ ¹æ®çœŸå®æ•°æ®æ­å»ºæ¨èç³»ç»Ÿçš„å®æ“æ¼”ç»ƒï¼Œäº†è§£æ¨èç³»ç»Ÿçš„ä¸€èˆ¬æ¶æ„å’Œå¸¸ç”¨ç®—æ³• 8æ•°æ®ä»“åº“æ­å»ºç†è®ºä¸å®æˆ˜è®²è§£æ•°æ®ä»“åº“æ­å»ºçš„æ–¹æ³•è®ºï¼Œå¸¸ç”¨å»ºæ¨¡ç†è®ºï¼›ä»¥äº’é‡‘å…¬å¸æ•°æ®ä»“åº“æ­å»ºåœºæ™¯ä½œä¸ºåˆ‡å…¥ï¼Œå®ä¾‹æ¼”ç¤ºæ•°æ®ä»“åº“æ­å»ºè¿‡ç¨‹åŠæŠ€æœ¯æ¶æ„ã€‚ 9åˆ†å¸ƒå¼ä¸šåŠ¡ç›‘æ§ç³»ç»Ÿè®²è§£ä¸šåŠ¡ç›‘æ§ç³»ç»Ÿéœ€æ±‚èƒŒæ™¯ï¼ŒåŸºäºå¤§æ•°æ®çš„æŠ€æœ¯æ–¹æ¡ˆï¼›é€šè¿‡å®ä¾‹ä»£ç æ­å»ºå®Œæ•´çš„ä¸šåŠ¡ç›‘æ§ç³»ç»Ÿ 10åŸºäºESçš„æ—¥å¿—ç³»ç»ŸåŸºäºFlumeï¼ŒElasticSearchç­‰æŠ€æœ¯æ­å»ºç³»ç»Ÿæ—¥å¿—æ”¶é›†ä¸æŸ¥è¯¢ç³»ç»Ÿã€‚ 11ä¿¡è´·éœ€æ±‚é¢„æµ‹ç³»ç»Ÿä»¥äº¬ä¸œä¿¡è´·éœ€æ±‚é¢„æµ‹ç«èµ›ä¸ºèƒŒæ™¯ï¼Œå®ä¾‹è®²è§£æ•°æ®æŒ–æ˜é¡¹ç›®ä¸­å¦‚ä½•è®¾è®¡ç‰¹å¾ï¼Œæ¨¡å‹åŸºç¡€ï¼Œå»ºæ¨¡ä»¥åŠè°ƒå‚ç­‰ã€‚ 12ç”¨æˆ·ç”»åƒç³»ç»Ÿè®²è§£ç”¨æˆ·ç”»åƒç³»ç»Ÿçš„éœ€æ±‚èƒŒæ™¯ï¼ŒåŸºäºå¤§æ•°æ®æŠ€æœ¯çš„è§£å†³æ–¹æ¡ˆï¼›é€šè¿‡å®ä¾‹ä»£ç æ¼”ç¤ºç”¨æˆ·ç”»åƒç³»ç»Ÿçš„æ­å»ºã€‚è½¬è‡ªå¤§æ•°æ®å¼€å‘å¸ˆhttps://blog.csdn.net/wj1314250/article/details/80679791","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[]},{"title":"äººè„¸è¯†åˆ«","slug":"2018-10-13-äººè„¸è¯†åˆ«","date":"2018-10-13T00:00:00.000Z","updated":"2019-11-29T12:20:47.684Z","comments":true,"path":"2018/10/13/2018-10-13-äººè„¸è¯†åˆ«/","link":"","permalink":"yihao.ml/2018/10/13/2018-10-13-äººè„¸è¯†åˆ«/","excerpt":"","text":"æœ€è¿‘é¡¹ç›®éœ€è¦è¿›è¡Œäººäººè„¸è¯†åˆ«ã€äººè„¸ç‰¹å¾åˆ†æç›¸å…³å¼€å‘ã€‚åœ¨Raspberry Piä¸­å®‰è£…face_recognitionåº“,githubä»£ç åº“https://github.com/ageitgey/face_recognition Raspberry æ“ä½œç³»ç»Ÿä¿¡æ¯: ç¡¬ä»¶éœ€è¦å‡†å¤‡Raspberry Piä¸»æ¿å’ŒPiCameraæ‘„åƒå¤´ã€‚ å®‰è£…dlibface_recognition ä¾èµ–dlibåº“ï¼Œå…ˆå®‰è£…dlibåº“,å‚è€ƒ https://gist.github.com/ageitgey/1ac8dbe8572f3f533df6269dab35df65 é‡åˆ°çš„é—®é¢˜æè¿°:1.apt-getå¡ä½0 [è¿æ¥åˆ°archive.ubuntu.com],å‚è€ƒhttps://ubuntuqa.com/article/408.html ä¸­çš„æœ€ä½³è§£å†³æ–¹æ¡ˆ è§£å†³é—®é¢˜2.sudo pip3 install face_recognitionæŠ¥é”™ï¼Œé”™è¯¯å¦‚ä¸‹123456789101112Exception:Traceback (most recent call last): File \"/usr/share/python-wheels/urllib3-1.19.1-py2.py3-none-any.whl/urllib3/response.py\", line 298, in _error_catcher .......socket.timeout: The read operation timed outDuring handling of the above exception, another exception occurred:Traceback (most recent call last): File \"/usr/lib/python3/dist-packages/pip/basecommand.py\", line 215, in main .....requests.packages.urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='www.piwheels.org', port=443): Read timed out.å°è¯•æ‰‹åŠ¨å®‰è£…ï¼Œä»è¿™é‡Œhttps://download.csdn.net/download/chentianlong150/10139353ä¸‹è½½äº†ä¸ªface_recognition_modelsï¼Œæ‰‹åŠ¨è£…äº†ä¸€ä¸‹ä»¥åæ ¹æœ¬ä¸æ˜¯face_recognitioné¡¹ç›®ä¹Ÿä¸çŸ¥é“æ˜¯ä¸ªå•¥ä¸œè¥¿äºæ˜¯å¸è½½äº†æœ€åæ²¡åŠæ³•äº†åˆåå¤è¿è¡Œäº†ä¸‹é¢çš„å‘½ä»¤ï¼ˆ3æ¬¡ï¼Œä¸­é—´ä¹Ÿæœ‰å¤±è´¥ï¼‰ã€‚ä½†æœ€åæˆåŠŸäº†ã€‚æ€€ç–‘æ˜¯å¢™çš„åŸå› Orz1$ sudo pip3 install face_recognition3.ç¼ºå°‘libatlas.so.3åº“é”™è¯¯ä¿¡æ¯:12345678Traceback (most recent call last): File \"facerec_on_raspberry_pi.py\", line 9, in &lt;module&gt; import face_recognition File \"/usr/local/lib/python3.5/dist-packages/face_recognition/__init__.py\", line 7, in &lt;module&gt; from .api import load_image_file, face_locations, batch_face_locations, face_landmarks, face_encodings, compare_faces, face_distance File \"/usr/local/lib/python3.5/dist-packages/face_recognition/api.py\", line 4, in &lt;module&gt; import dlibImportError: libatlas.so.3: cannot open shared object file: No such file or directoryæç¤ºæ²¡æœ‰libatlas.so.3 å‚è€ƒhttps://askubuntu.com/questions/719538/libatlas-package1$ sudo apt-get install -y libatlas-*4.æç¤ºæ²¡æœ‰æ‘„åƒå¤´1234Traceback (most recent call last): File \"facerec_on_raspberry_pi.py\", line 10, in &lt;module&gt; import picameraImportError: No module named 'picamera'å®‰è£…æ‘„åƒå¤´åº“12$ sudo apt-get install python3-picamera$ sudo pip3 install --upgrade picamera[array]æœ€å¼€å§‹æ²¡æœ‰æ‘„åƒå¤´æŠ¥é”™ï¼Œä¸Šæ·˜å®ä¹°ä¸ªå§ï¼1picamera.exc.PiCameraError: Camera is not enabled. Try running 'sudo raspi-config' and ensure that the camera has been enabled. picamera ä½¿ç”¨picamera API åœ°å€ï¼šhttps://picamera.readthedocs.io/en/release-1.13/quickstart.html é‡åˆ°çš„é—®é¢˜æè¿°:æ‘„åƒå¤´æ²¡æ’ç´§æŠ¥é”™:123456pi@raspberrypi ~ $ raspistill -o image.jpgmmal: mmal_vc_component_create: failed to create component 'vc.ril.camera' (1:ENOMEM)mmal: mmal_component_create_core: could not create component 'vc.ril.camera' (1)mmal: Failed to create camera componentmmal: main: Failed to create camera componentmmal: Camera is not detected. Please check carefully the camera module is installed correctlyå‚è€ƒä¸‹é¢blogéƒ½æ²¡è§£å†³é—®é¢˜12345https://www.raspberrypi.org/forums/viewtopic.php?f=43&amp;t=101291http://raspberrypi.stackexchange.com/questions/10545/noir-camera-not-workinghttp://www.element14.com/community/thread/31835?start=0&amp;tstart=0http://www.raspberrypi.org/forums/viewtopic.php?f=43&amp;t=79890http://www.raspberrypi.org/forums/viewtopic.php?f=43&amp;p=655380æœ€åå‘ç°æ˜¯æ‘„åƒå¤´ä¸Šé¢æ²¡è£…ç´§(å¥½å‘å‘µâ€¦),æ³¨æ„ä¸æ˜¯ä¸»æ¿ä¸picameraæ¥å£å‡ºæ²¡æ’ç´§ï¼Œæ‘„åƒå¤´æ˜¯å¯è£…å¯æ‹†çš„ï¼Œè§ä¸‹å›¾ã€‚åˆšæ¥è§¦å¯¹æ‘„åƒå¤´æ„é€ äº†è§£ã€‚å‚è€ƒæ–‡æ¡£æ±‡æ€»:Python PILåº“:https://blog.csdn.net/zhangziju/article/details/79123275face_recognition Githubåº“:https://github.com/ageitgey/face_recognitionface_recognitionä¸­æ–‡æ–‡æ¡£:https://www.jianshu.com/p/4dd131567015face_recognition APIä¸­æ–‡:https://www.jianshu.com/p/a0e61f5fd570Raspberry Piå®‰è£…dlibæ–‡æ¡£:https://gist.github.com/ageitgey/1ac8dbe8572f3f533df6269dab35df65macOSæˆ–Ubuntuä¸Šå®‰è£…dlibæ–‡æ¡£:https://gist.github.com/ageitgey/629d75c1baac34dfa5ca2a1928a7aeafPiCarema æ–‡æ¡£ :https://picamera.readthedocs.io/en/release-1.13/install.html","categories":[{"name":"ç‰©è”ç½‘","slug":"ç‰©è”ç½‘","permalink":"yihao.ml/categories/ç‰©è”ç½‘/"}],"tags":[{"name":"Raspberry Pi","slug":"Raspberry-Pi","permalink":"yihao.ml/tags/Raspberry-Pi/"}]},{"title":"æ ¡å¯¹é›†ç¾¤æœåŠ¡å™¨æ—¶é—´","slug":"2018-10-12-æ ¡å¯¹é›†ç¾¤æœåŠ¡å™¨æ—¶é—´","date":"2018-10-12T00:00:00.000Z","updated":"2019-11-29T12:20:47.684Z","comments":true,"path":"2018/10/12/2018-10-12-æ ¡å¯¹é›†ç¾¤æœåŠ¡å™¨æ—¶é—´/","link":"","permalink":"yihao.ml/2018/10/12/2018-10-12-æ ¡å¯¹é›†ç¾¤æœåŠ¡å™¨æ—¶é—´/","excerpt":"","text":"åšåˆ†å¸ƒå¼å¦‚æœæœåŠ¡å™¨çš„æ—¶é—´ä¸åŒæ­¥ä¼šé€ æˆæ„æƒ³ä¸åˆ°çš„é—®é¢˜ï¼Œå†è¿›è¡Œä¹‹å‰æœ€å¥½æ ¡å¯¹æœåŠ¡å™¨æ—¶é—´ã€‚ æ ¡å¯¹è¾“å…¥ date å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰æœåŠ¡å™¨æ—¶é—´å®‰è£…ntpå·¥å…·è¿›è¡Œæ—¶é—´æ ¡å¯¹1$ sudo yum install ntpæ ¡å¯¹æ—¶é—´ä¹‹å‰æ³¨æ„å…ˆå…³é—­é˜²ç«å¢™123$ service iptables stop # å…³é—­é˜²ç«å¢™$ ntpdate cn.pool.ntp.org # åŒæ­¥æ—¶é—´$ service iptables start # å¼€å¯é˜²ç«å¢™","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[]},{"title":"Ubuntu16.04TLSå®‰è£…VirtualBox","slug":"2018-10-09-Ubuntu16.04TLSå®‰è£…VirtualBox","date":"2018-10-09T00:00:00.000Z","updated":"2019-11-29T12:20:47.684Z","comments":true,"path":"2018/10/09/2018-10-09-Ubuntu16.04TLSå®‰è£…VirtualBox/","link":"","permalink":"yihao.ml/2018/10/09/2018-10-09-Ubuntu16.04TLSå®‰è£…VirtualBox/","excerpt":"","text":"æœ€è¿‘å­¦ä¹ ä½¿ç”¨VMwareè™šæ‹Ÿæœºä¸€ç›´CPUé£™å‡ï¼Œå¼€ä¸¤å°ä¸‰å°æ²¡é—®é¢˜ï¼Œä¸€å¼€å¤šå°±å¡é¡¿ã€‚ä¼°è®¡æ˜¯Ubuntuå’ŒVMwareè™šæ‹Ÿæœºå…¼å®¹ä¸æ˜¯é‚£ä¹ˆå¥½ã€‚è¿™è¾¹æ‰“ç®—æ¢ä¸ªVirtualBoxè¯•è¯•ã€‚å°è¯•åˆ°oracleçš„https://www.virtualbox.org/ç½‘ç«™ä¸‹è½½ubuntuå¹³å°æœ€æ–°ç‰ˆçš„virtualboxè½¯ä»¶ï¼Œæ˜¯æˆåŠŸå®‰è£…äº†ï¼Œä½†æ˜¯ä¸€è¿è¡Œå°±æŠ¥å†…æ ¸çš„é”™ã€‚æŠ˜è…¾ä¸¤å¤©ï¼Œå¼€å§‹ä»¥ä¸ºæ˜¯å¿…é¡»è¦é™ä½å†…æ ¸æ‰èƒ½è§£å†³ï¼Œæœ€åå¶ç„¶çœ‹åˆ°askubuntuä¸€ç‰‡æ–‡ç« ï¼Œæœ€åé‡æ–°å¸è½½æˆåŠŸå®‰è£…å‚è€ƒä¸‹é¢ä¸¤ç¯‡blog https://askubuntu.com/questions/947189/cannot-run-virtualbox-on-ubuntu-16-04å’Œhttps://tecadmin.net/install-oracle-virtualbox-on-ubuntu/ç©¿æ’ä¸€ä¸ªå°æ’æ›²ï¼Œsource.listä¿®æ”¹äº†ä»¥åè¿è¡Œsudo apt-get updateä¸€ç›´å¡ä½0 [è¿æ¥åˆ°archive.ubuntu.com]è¯•äº†å¾ˆå¤šåŠæ³•è§£å†³ä¸äº†æ›´æ–°æºçš„é—®é¢˜ï¼Œæœ€åçœ‹åˆ°ä¸‹é¢çš„æ–‡ç« ï¼Œè¯•äº†é‡Œé¢çš„æœ€ä½³è§£å†³æ–¹æ¡ˆè§£å†³å¡0çš„é—®é¢˜https://ubuntuqa.com/article/408.html","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"yihao.ml/tags/Ubuntu/"}]},{"title":"è‡ªåˆ¶ç™¾åº¦ç½‘ç›˜ä¸‹è½½å™¨","slug":"2018-10-08-è‡ªåˆ¶ç™¾åº¦ç½‘ç›˜ä¸‹è½½å™¨","date":"2018-10-08T00:00:00.000Z","updated":"2019-11-29T12:20:47.683Z","comments":true,"path":"2018/10/08/2018-10-08-è‡ªåˆ¶ç™¾åº¦ç½‘ç›˜ä¸‹è½½å™¨/","link":"","permalink":"yihao.ml/2018/10/08/2018-10-08-è‡ªåˆ¶ç™¾åº¦ç½‘ç›˜ä¸‹è½½å™¨/","excerpt":"","text":"æ¯å¤©æ‰‹åŠ¨ä¸‹è½½è§‰å¾—å¾ˆéº»çƒ¦ï¼Œåæ¥æƒ³ç”¨æ ‘æ¢…æ´¾+BaiduPCSæä¸€ä¸ªè‡ªåŠ¨ä¸‹è½½å™¨ï¼Œå®šæ—¶ä¸‹è½½ç½‘ç›˜å†…å®¹åˆ°ç§»åŠ¨ç¡¬ç›˜ä¸Šï¼Œå®ç°äº‘ç›˜åˆ°ç§»åŠ¨ç¡¬ç›˜çš„è‡ªåŠ¨åŒæ­¥ã€‚BaiduPCS-Goç”¨Goè¯­è¨€ç¼–å†™,æ“ä½œç±»ä¼¼äºLinuxï¼Œå¦‚æœä¼šlinuxä½¿ç”¨èµ·æ¥éå¸¸å¾—å¿ƒåº”æ‰‹ï¼Œæ“ä½œåŸºæœ¬ç›¸ä»¿ã€‚ä¸‹é¢è®°å½•ä¸€ä¸‹é‡åˆ°çš„å„ç§å‘ã€‚ æ ‘æ¢…æ´¾æ— æ³•sshåœ¨window ç”¨ssh + wpa_supplicant.conf é…ç½®æ–¹å¼å¤±æ•ˆï¼Œä¸€ç›´æ‰«ä¸åˆ°ipã€‚æ²¡æœ‰æ˜¾ç¤ºå™¨çš„æ ‘æ¢…æ´¾çœŸçš„å¾ˆéš¾ç”¨Orzï¼Œæœ€åå®åœ¨æ²¡è¾™ï¼Œæ¥äº†æ ¹ç½‘çº¿æ’åˆ°äº¤æ¢æœºä¸Šï¼Œä½¿ç”¨ Nmap - Zenmap GUIæ‰«æï¼Œæœ€ç»ˆæ‹¿åˆ°ipè¿™è¾¹é™„ä¸ŠNmapè½¯ä»¶é“¾æ¥è½¯ä»¶æ‰«ææŒ‡ä»¤1nmap -sn 192.168.0.0/24å¦‚æœæ‰«æåˆ°ä¼šæœ‰ç±»ä¼¼ä¸‹é¢çš„ä¿¡æ¯Nmap scan report for 192.168.0.183Host is up (0.0080s latency).MAC Address: B8:27:EB:DB:97:E7 (Raspberry Pi Foundation)è¿™è¾¹æŠŠå‚è€ƒçš„åšå®¢è®°å½•ä¸€ä¸‹https://blog.csdn.net/wongnoubo/article/details/79628313å¦å¤–é™¤äº†Nmapæ‰«ææ„å¤–ï¼Œåœ¨æ‰‹æœºç«¯ä¸‹è½½Fingä¹Ÿå¯ä»¥å®Œæˆæ‰«æã€‚åç»­é…åˆTermiuså¯ä»¥å®ç°æ‰‹æœºç«¯çš„è¿œç¨‹ssh! Permission deniedSSHè¿æ¥respberryä»¥åï¼Œéœ€è¦å°†ç¡¬ç›˜æŒ‚åœ¨åˆ°æ ‘æ¢…æ´¾ä¸Šï¼Œä¸‹è½½çš„æ—¶å€™ç›´æ¥æŒ‡å®šåˆ°ç¡¬ç›˜ç›®å½•ã€‚æŒ‰ç…§å¸¸è§„æŒ‚è½½å¥½ç¡¬ç›˜ï¼Œç»“æœåœ¨å¾€ç¡¬ç›˜å†™æ•°æ®æ—¶é‡åˆ°Permission deniedçš„é”™è¯¯,åæ‰å‘ç°æ˜¯å› ä¸ºæŒ‚è½½æ–¹å¼ä¸æ°å½“ï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•å°±OKäº†ï¼š1$ sudo mount -o uid=pi,gid=pi /dev/sda1 /mnt/1GB_USB_flashå› ä¸ºæ²¡æœ‰å®‰è£…ntfs-3gçš„é©±åŠ¨ä¹ŸæŠ¥é”™äº†ï¼Œè£…ä¸Šé©±åŠ¨è§£å†³é—®é¢˜ï¼š1$ sudo apt-get install ntfs-3ghttps://blog.csdn.net/lovelovelovelovelo/article/details/53862819https://unix.stackexchange.com/questions/195828/permission-denied-on-mounted-devices æ–‡ä»¶åˆ†éš”ç¬¦æ€è·¯ï¼šä½¿ç”¨BaiduPCSæŒ‡ä»¤è¯»å–ç™¾åº¦ç½‘ç›˜å†…å®¹ï¼Œç„¶åé€ä¸€åˆ¤æ–­å†…å®¹åœ¨ç£ç›˜ä¸­æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ä¸‹è½½ã€‚ä½†æ˜¯æ²¡æœ‰æƒ³åˆ°çš„æ˜¯ç½‘ç›˜ä¸­çš„å†…å®¹å¯èƒ½ä¸­é—´å¸¦ç€ç©ºæ ¼ï¼Œ è¿™æ ·æˆ‘åœ¨shellè„šæœ¬é‚£é‡Œé¢é‡åˆ°äº†å¤„ç†ç©ºæ ¼çš„éš¾é¢˜ï¼ŒåƒåŒæµå¤§å­¦ çº¿æ€§ä»£æ•°ç¬¬ä¸€è®².mp4æœ¬æ¥æ˜¯è¦ä¸‹è½½åŒæµå¤§å­¦ çº¿æ€§ä»£æ•°ç¬¬ä¸€è®².mp4ï¼Œç»“æœä¸‹è½½æˆäº†åŒæµå¤§å­¦ã€‚åœ¨ç½‘ä¸Šä¹Ÿæœäº†ä¸€äº›èµ„æ–™ï¼Œæœ‰ä¸€äº›ç½‘å‹æä¾›äº†åˆ©ç”¨IFSå¤„ç†æ–‡ä»¶åä¸­çš„ç©ºæ ¼ï¼Œä½†æ˜¯æ²¡æˆåŠŸï¼Œåœ¨linuxå¤„ç†ç©ºæ ¼ä¸æ˜¯æˆ‘çš„å¼ºé¡¹ï¼Œä¸‹é¢è´´å‡ºæ¥æˆ‘å†™çš„shellï¼Œå¸Œæœ›å„ä¸ºlinuxå¤§ç‰›èƒ½å¸®æˆ‘å‡ºä¸ªå¥½ä¸»æ„ï¼12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#/bin/bash# è®¾ç½®å¹¶å‘çš„è¿›ç¨‹æ•°thread_num=5a=$(date +%H%M%S)# mkfifotempfifo=\"my_temp_fifo\"mkfifo $&#123;tempfifo&#125;# ä½¿æ–‡ä»¶æè¿°ç¬¦ä¸ºéé˜»å¡å¼exec 6&lt;&gt;$&#123;tempfifo&#125;rm -f $&#123;tempfifo&#125;# ä¸ºæ–‡ä»¶æè¿°ç¬¦åˆ›å»ºå ä½ä¿¡æ¯for ((i=1;i&lt;=$&#123;thread_num&#125;;i++))do &#123; echo &#125;done &gt;&amp;6exclusion_column=\"ç›®å½•æ€»æ•°: 10\"# è¿™è¾¹çš„sed æ˜¯å¯¹æ–‡ä»¶åä¸­å¯èƒ½æ˜¯ç©ºæ ¼çš„è¿›è¡Œå¤„ç†for line in `BaiduPCS-Go ls| awk '&#123;for(i=1;i&lt;=4;i++)&#123;$i=\"\"&#125;;print $0&#125;' | sed 's/ /_-_/g'`#for line in `seq 1 10`do &#123; # è§£å†³ç©ºæ ¼é—®é¢˜ original_line=\"$(echo $line | sed s'/_-_/ /g')\" # å»æ‰ç›®å½•æœ€åçš„åˆ†éš”ç¬¦ original_line=$&#123;original_line%*/&#125; if [ -n \"$&#123;original_line&#125;\" ];then echo \"$&#123;original_line&#125; ä¸ä¸ºç©º\" if [[ \"$original_line\" =~ ^ç›®å½•æ€»æ•°.* ]];then echo \"$&#123;original_line&#125; ä¸æ˜¯ç›®å½•æ€»æ•°\" read -u6 &#123; sleep 1 #echo \"$&#123;original_line&#125;\" #BaiduPCS-Go d \"$&#123;line%*/&#125;\" &amp; echo \"\" &gt;&amp;6 &#125; &amp; fi fi &#125;donewait# å…³é—­fd6ç®¡é“exec 6&gt;&amp;-b=$(date +%H%M%S)echo -e \"startTime:\\t$a\"echo -e \"endTime:\\t$b\"ä¸Šé¢çš„å¥—è·¯ä¸è¡Œï¼Œåæ¥æˆ‘å‘ç°ç”¨BaiduPSC d *è¿™ä¸ªå‘½ä»¤ä¼šä¸‹è½½ç›˜å†…æ‰€æœ‰æ•°æ®ï¼Œå¦‚æœæ£€æµ‹åˆ°æœ¬åœ°ç£ç›˜å·²ç»å­˜åœ¨ï¼Œå°±ä¼šè‡ªåŠ¨è·³è¿‡ã€‚ä¸‹é¢æä¾›ä¸€ä¸‹BaiduPSCç›¸å…³APIé“¾æ¥https://github.com/iikira/BaiduPCS-Go æ—¥å¿—ç®¡ç†å°†æ—¥å¿—é‡å®šå‘åˆ°myout.fileæ–‡ä»¶ä¸­,æ–¹ä¾¿åç»­æŸ¥çœ‹1nohup command &gt; myout.file 2&gt;&amp;1 &amp;","categories":[{"name":"ç‰©è”ç½‘","slug":"ç‰©è”ç½‘","permalink":"yihao.ml/categories/ç‰©è”ç½‘/"}],"tags":[{"name":"Raspberry Pi","slug":"Raspberry-Pi","permalink":"yihao.ml/tags/Raspberry-Pi/"}]},{"title":"ä¸€å…ƒçº¿æ€§å›å½’åˆ†æ","slug":"2018-10-07-ä¸€å…ƒçº¿æ€§å›å½’åˆ†æ","date":"2018-10-07T00:00:00.000Z","updated":"2019-11-29T12:20:47.683Z","comments":true,"path":"2018/10/07/2018-10-07-ä¸€å…ƒçº¿æ€§å›å½’åˆ†æ/","link":"","permalink":"yihao.ml/2018/10/07/2018-10-07-ä¸€å…ƒçº¿æ€§å›å½’åˆ†æ/","excerpt":"","text":"å›å½’åˆ†æå°±æ˜¯åˆ©ç”¨æ ·æœ¬(å·²çŸ¥æ•°æ®),äº§ç”Ÿæ‹Ÿåˆæ–¹ç¨‹,æ ¹æ®å›å½’ç»“æœï¼Œå¾—å‡ºå„ä¸ªå› å˜é‡å¯¹ç›®æ ‡å˜é‡äº§ç”Ÿçš„å½±å“ï¼Œè¿˜å¯ä»¥(å¯¹æœªçŸ¥æ•°æ®)è¿›è¡Œé¢„æµ‹ã€‚ è®¡ç®—å®ä¾‹ä¸‹é¢å‚è€ƒè–›æ¯…çš„ä¹¦ä¾‹6.5è¿›è¡Œé˜è¿°ä¸€å…ƒå›å½’æ¨¡å‹çš„è®¡ç®—è¿‡ç¨‹ã€‚ ç”»å‡ºæ•£ç‚¹å›¾æˆ‘ä»¬åˆ©ç”¨Rç”»å‡ºæ•£ç‚¹å›¾123456789101112131415161718192021222324# è¯»å–æ•°æ®ï¼Œç”ŸæˆçŸ©é˜µX &lt;- matrix(c(194.5, 20.79, 1.3179, 131.79,194.3, 20.79, 1.3179, 131.79,197.9, 22.40, 1.3502, 135.02,198.4, 22.67, 1.3555, 135.55,199.4, 23.15, 1.3646, 136.46,199.9, 23.35, 1.3683, 136.83,200.9, 23.89, 1.3782, 137.82,201.1, 23.99, 1.3800, 138.00,201.4, 24.02, 1.3806, 138.06,201.3, 24.01, 1.3805, 138.05,203.6, 25.14, 1.4004, 140.04,204.6, 26.57, 1.4244, 142.44,209.5, 28.49, 1.4547, 145.47,208.6, 27.76, 1.4434, 144.34,210.7, 29.04, 1.4630, 146.30,211.9, 29.88, 1.4754, 147.54,212.2, 30.06, 1.4780, 147.80),ncol=4, byrow=T,dimnames = list(1:17, c(\"F\", \"h\", \"log\", \"log100\")));forbes&lt;-as.data.frame(X);# å°†Fåˆ—æ˜ å°„åœ¨xè½´å’Œlog100åˆ—æ˜ å°„åœ¨yè½´æç»˜å‡ºæ•£ç‚¹å›¾plot(forbes$F,forbes$log100);å¯ä»¥å¤§è‡´çœ‹å‡ºå›¾å½¢ä¹˜çº¿æ€§å¢é•¿è¶‹åŠ¿ï¼Œåšå›å½’åˆ†æï¼Œè®¾çº¿æ€§å›å½’æ–¹ç¨‹ä¸º:y=ax+by=ax+by=ax+bæ ¹æ®çº¿æ€§å›å½’æ–¹ç¨‹ï¼Œåœ¨Rä¸­æç»˜å‡ºlog100å…³äºFçš„å‡½æ•°1234lm.sol&lt;-lm(log100~F,data=forbes);# ç”»å‡ºå›å½’æ–¹ç¨‹abline(lm.sol); Ræ˜¯æ€ä¹ˆç”»å‡ºè¿™æ¡çº¿çš„ï¼Ÿé¦–å…ˆåšæ ·æœ¬ç‚¹åˆ°ä¸€å…ƒå›å½’æ–¹ç¨‹ä¸”å¹³è¡Œä¸Yè½´çš„ä¸€æ¡çº¿æ®µï¼Œå¹¶æ±‚å¾—æ¯ä¸ªæ ·æœ¬ç‚¹çš„è¯¯å·®å€¼,è¿™æ ·é—®é¢˜å°±å¯ä»¥è½¬æ¢ä¸ºæ€ä¹ˆç”»è¿™æ¡ç›´çº¿æ‰èƒ½ä½¿å¾—æ®‹å·®å¹³æ–¹å’Œæœ€å°ä»€ä¹ˆæ˜¯æ®‹å·®å¹³æ–¹å’Œ,å¯¹äºä¸Šå›¾ä¸­æ¯ä¸ªè¯¯å·®å€¼çš„ç»å¯¹å€¼çš„æ€»å’Œç§°ä¸ºæ®‹å·®å’Œï¼Œç”±äºå¸¦ç€ç»å¯¹å€¼æ±‚è§£ä¸å¤ªæ–¹ä¾¿ï¼Œæ‰€ä»¥å¯¹è¯¯å·®å€¼çš„å¹³æ–¹åæ±‚å’Œï¼Œå³ä¸ºæ®‹å·®å¹³æ–¹å’Œf(a,b)=âˆ‘i=1n(Yiâˆ’(aXi+b))2f\\left(a,b\\right)=\\sum_{i=1}^{n}{\\left(Y_i - \\left(\\ aX_i + b \\right)\\right)^2}f(a,b)=â€‹i=1â€‹âˆ‘â€‹nâ€‹â€‹(Yâ€‹iâ€‹â€‹âˆ’( aXâ€‹iâ€‹â€‹+b))â€‹2â€‹â€‹å¯¹äºå‡½æ•°çš„æå€¼é—®é¢˜ï¼Œåˆ©ç”¨é«˜ç­‰æ•°å­¦ä¸­åå¯¼æ•°å®šç†ï¼Œå³$$\\frac{\\delta f}{\\delta a}=0$$å’Œ$$\\frac{\\delta f}{\\delta b}=0$$ã€‚ä¸‹é¢ä¸ºè¯æ˜è¿‡ç¨‹,ç”±äºå…¬å¼å¤ªéš¾æ‰“è¿™è¾¹å°±æ’å›¾äº†ï¼šæœ€ç»ˆæ±‚å¾—aå’Œbçš„å€¼ã€‚æœ‰äº†è¿™ä¸ªå…¬å¼ï¼Œå¯¹äºæœ¬ä¾‹å­ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç®—å‡ºæ‹Ÿåˆç›´çº¿å…·ä½“æ˜¯ä»€ä¹ˆã€‚åˆ†åˆ«æ±‚å‡ºå…¬å¼ä¸­çš„å„ç§å¹³å‡æ•°ï¼Œç„¶åå¸¦å…¥å³å¯ï¼Œæœ€åç®—å‡ºa=0.89546ï¼Œb=-42.13087æœ€ç»ˆçš„å›å½’æ‹Ÿåˆç›´çº¿ä¸ºY=âˆ’42.13087+0.89546XY=-42.13087 + 0.89546XY=âˆ’42.13087+0.89546X è¯„ä»·å›å½’çº¿æ‹Ÿåˆç¨‹åº¦çš„å¥½åå¯ä»¥ä½¿ç”¨Ré‡Œé¢çš„**summary()**å‡½æ•°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚12345678910111213141516171819&gt; summary(lm.sol)Call:lm(formula = log100 ~ F, data = forbes)Residuals: Min 1Q Median 3Q Max -0.32261 -0.14530 -0.06750 0.02111 1.35924 Coefficients: Estimate Std. Error t value Pr(&gt;|t|) (Intercept) -42.13087 3.33895 -12.62 2.17e-09 ***F 0.89546 0.01645 54.45 &lt; 2e-16 ***---Signif. codes: 0 â€˜***â€™ 0.001 â€˜**â€™ 0.01 â€˜*â€™ 0.05 â€˜.â€™ 0.1 â€˜ â€™ 1Residual standard error: 0.3789 on 15 degrees of freedomMultiple R-squared: 0.995, Adjusted R-squared: 0.9946 F-statistic: 2965 on 1 and 15 DF, p-value: &lt; 2.2e-16å‚æ•°è¯¦è¿°Residuals: åˆ—å‡ºäº†æ®‹å·®çš„æœ€å°å€¼ã€ä¸‹å››åˆ†ä¸ºæ•°ã€ä¸­ä½æ•°ã€ä¸Šå››åˆ†ä¸ºæ•°ã€æœ€å¤§å€¼Coefficients : -42.13087è¡¨ç¤ºçš„æ˜¯æˆªè·ã€0.89546è¡¨ç¤ºçš„æ˜¯æ–œç‡,æ¨ç®—çš„ç³»æ•°çš„æ ‡å‡†å·®,tå€¼,P-å€¼(ç»“åˆSignifåšæ˜¾è‘—æ€§æ£€éªŒ)Signif:æ˜¾è‘—æ€§æ ‡è®°,ä¸‰é¢—è¡¨ç¤ºæåº¦æ˜¾è‘—,äºŒé¢—è¡¨ç¤ºé«˜åº¦æ˜¾è‘—,ä¸€é¢—*è¡¨ç¤ºæ˜¾è‘—,åœ†ç‚¹è¡¨ç¤ºä¸å¤ªæ˜¾è‘—,æ²¡æœ‰è®°å·è¡¨ç¤ºä¸æ˜¾è‘—Residual standard error : æ®‹å·®æ ‡å‡†æŸ¥Multiple R-squared : ç›¸å…³ç³»æ•°å¹³æ–¹F-statistic: Fæ£€éªŒå€¼æ¨èä¸€ç¯‡ä¸é”™çš„blogå›å½’åˆ†ææ³•&amp;ä¸€å…ƒçº¿æ€§å›å½’æ“ä½œå’Œè§£é‡Š","categories":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"yihao.ml/categories/æœºå™¨å­¦ä¹ /"}],"tags":[{"name":"R","slug":"R","permalink":"yihao.ml/tags/R/"}]},{"title":"kafkaé›†ç¾¤éƒ¨ç½²","slug":"2018-09-29-kafkaé›†ç¾¤éƒ¨ç½²","date":"2018-09-29T00:00:00.000Z","updated":"2019-11-29T12:20:47.681Z","comments":true,"path":"2018/09/29/2018-09-29-kafkaé›†ç¾¤éƒ¨ç½²/","link":"","permalink":"yihao.ml/2018/09/29/2018-09-29-kafkaé›†ç¾¤éƒ¨ç½²/","excerpt":"","text":"ä¸‹è½½å®‰è£…åŒ…http://kafka.apache.org/downloads.htmlæˆ‘ä¸‹è½½çš„ç‰ˆæœ¬æ˜¯ kafka_2.12-2.0.0.tgz è§£å‹å®‰è£…åŒ…123$ tar -zxvf /export/software/ kafka_2.12-2.0.0.tgz -C /export/servers/$ cd /export/servers/$ ln -s kafka_2.12-2.0.0 kafka ä¿®æ”¹é…ç½®æ–‡ä»¶12$ cp /export/servers/kafka/config/server.properties /export/servers/kafka/config/server.properties.bak$ vi /export/servers/kafka/config/server.propertieså‚è€ƒçš„é…ç½®æ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162// brokerçš„å…¨å±€å”¯ä¸€æ ‡è¯†broker.id=0// ç”¨æ¥ç›‘å¬é“¾æ¥çš„ç«¯å£,produceræˆ–consumerå°†åœ¨æ­¤ç«¯å£å»ºç«‹é“¾æ¥port=9092// å¦‚æœä¸é… ä½¿ç”¨ç»ˆç«¯broker list å‘é€æ•°æ®ä¼šæŠ¥é”™listeners=PLAINTEXT://192.168.1.10:9092// å¤„ç†ç½‘ç»œè¯·æ±‚çš„çº¿ç¨‹æ•°é‡num.network.threads=3// å¤„ç†ç£ç›˜ioçš„çº¿ç¨‹æ•°é‡num.io.threads=8// å‘é€å¥—æ¥å­—çš„ç¼“å†²åŒºå¤§å°socket.send.buffer.bytes=102400// æ¥æ”¶å¥—æ¥å­—çš„ç¼“å†²åŒºåŸŸå¤§å°socket.receive.buffer.bytes=102400// è¯·æ±‚å¥—æ¥å­—çš„ç¼“å†²åŒºå¤§å°socket.request.max.bytes=104857600// æ—¥å¿—å­˜æ”¾ç›®å½•log.dirs=/export/servers/logs/kafka// topicåœ¨å½“å‰brokerä¸Šçš„åˆ†ç‰‡æ•°num.partitions=2// ç”¨æ¥æ¢å¤å’Œæ¸…ç†dataä¸‹æ•°æ®çš„çº¿ç¨‹æ•°é‡num.recovery.threads.per.data.dir=1// segmentæ–‡ä»¶ä¿ç•™çš„æœ€é•¿æ—¶é—´ï¼Œè¶…æ—¶å°†ä¼šè¢«åˆ é™¤offsets.topic.replication.factor=1// æ»šåŠ¨ç”Ÿæˆæ–°çš„segmentæ–‡ä»¶çš„æœ€å¤§æ—¶é—´log.retention.hours=168log.roll.hours=168log.segment.bytes=1073741824log.retention.check.interval.ms=300000// zokeeperçš„é“¾æ¥ç«¯å£zookeeper.connect=localhost:2181zookeeper.connection.timeout.ms=6000# falseæ—¶æ‰§è¡Œtopic delete æ—¶è¿›è¡Œé€»è¾‘åˆ é™¤delete.topic.enable=true åˆ†å‘å®‰è£…åŒ…1234567$ scp -r /export/servers/ kafka_2.12-2.0.0 kafka02:/export/servers// ç„¶ååˆ†åˆ«åœ¨å„æœºå™¨ä¸Šåˆ›å»ºè½¯è¿$ cd /export/servers/$ ln -s kafka_2.12-2.0.0 kafkaå†æ¬¡ä¿®æ”¹é…ç½®æ–‡ä»¶ä¾æ¬¡ä¿®æ”¹å„æœåŠ¡å™¨ä¸Šé…ç½®æ–‡ä»¶çš„çš„broker.idï¼Œåˆ†åˆ«æ˜¯0,1,2ä¸å¾—é‡å¤ã€‚è¿è¡Œä¸‹é¢æŒ‡ä»¤å¯åŠ¨kafkaé›†ç¾¤1$ bin/kafka-server-start.sh config/server.propertiesserver-start.sh config/server.properties1234567### Kafkaå¸¸ç”¨æ“ä½œå‘½ä»¤æŸ¥çœ‹å½“å‰æœåŠ¡å™¨ä¸­çš„æ‰€æœ‰topic```shell$ bin/kafka-topics.sh --list --zookeeper zk01:2181åˆ›å»ºtopic1$ ./kafka-topics.sh --create --zookeeper mini1:2181 --replication-factor 1 --partitions 3 --topic firståˆ é™¤topic1$ sh bin/kafka-topics.sh --delete --zookeeper zk01:2181 --topic testéœ€è¦server.propertiesä¸­è®¾ç½®delete.topic.enable=trueå¦åˆ™åªæ˜¯æ ‡è®°åˆ é™¤æˆ–è€…ç›´æ¥é‡å¯ã€‚é€šè¿‡shellå‘½ä»¤å‘é€æ¶ˆæ¯1$ kafka-console-producer.sh --broker-list 192.168.1.12:9092 --topic firstå¦‚æœæŠ¥é”™å‚è€ƒæ–‡ç« æœ€ä¸‹é¢çš„æŠ¥é”™ä¿¡æ¯é€šè¿‡shellæ¶ˆè´¹æ¶ˆæ¯1$ bin/kafka-console-consumer.sh --bootstrap-server 192.168.1.12:9092 --from-beginning --topic firstæŸ¥çœ‹æ¶ˆè´¹ä½ç½®1$ sh kafka-run-class.sh kafka.tools.ConsumerOffsetChecker --zookeeper zk01:2181 --group testGroupæŸ¥çœ‹æŸä¸ªTopicçš„è¯¦æƒ…1$ sh kafka-topics.sh --topic test --describe --zookeeper zk01:2181 å›°éš¾è®°å½•è¿è¡Œbin/kafka-console-producer.sh --broker-list cor3:9092 --topic firstå‘é€æ¶ˆæ¯æ—¶é”™è¯¯:ERROR Error when sending message to topic first with key: null, value: 0 bytes with error: (org.apache.kafka.clients.producer.internals.ErrorLoggingCallback)org.apache.kafka.common.errors.TimeoutException: Expiring 2 record(s) for first-0: 1625 ms has passed since batch creation plus linger timeè§£å†³åŠæ³•:ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­1listeners=PLAINTEXT://192.168.1.11:9092è¿è¡Œ1bin/kafka-console-producer.sh --broker-list 192.168.1.11:9092 --topic firstå‚è€ƒblog https://blog.csdn.net/lvbinibnsb/article/details/81542893","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Kafka","slug":"Kafka","permalink":"yihao.ml/tags/Kafka/"}]},{"title":"kafkaåŸºæœ¬æ¦‚å¿µ","slug":"2018-09-29-kafkaåŸºæœ¬æ¦‚å¿µ","date":"2018-09-29T00:00:00.000Z","updated":"2019-11-29T12:20:47.681Z","comments":true,"path":"2018/09/29/2018-09-29-kafkaåŸºæœ¬æ¦‚å¿µ/","link":"","permalink":"yihao.ml/2018/09/29/2018-09-29-kafkaåŸºæœ¬æ¦‚å¿µ/","excerpt":"","text":"ç›®å½•å¤§çº²ä»€ä¹ˆæ˜¯kafkaJMSè§„èŒƒJMSæ¶ˆæ¯ä¼ è¾“æ¨¡å‹JMSæ ¸å¿ƒç»„ä»¶Kafkaæ ¸å¿ƒç»„ä»¶ ä»€ä¹ˆæ˜¯kafkaåœ¨æµå¼è®¡ç®—ä¸­ï¼ŒKafkaä¸€èˆ¬ç”¨æ¥ç¼“å­˜æ•°æ®ï¼ŒStormé€šè¿‡æ¶ˆè´¹Kafkaçš„æ•°æ®è¿›è¡Œè®¡ç®—ã€‚KAFKA + STORM +REDISApache Kafkaæ˜¯ä¸€ä¸ªå¼€æºæ¶ˆæ¯ç³»ç»Ÿï¼Œç”±Scalaå†™æˆã€‚æ˜¯ç”±Apacheè½¯ä»¶åŸºé‡‘ä¼šå¼€å‘çš„ä¸€ä¸ªå¼€æºæ¶ˆæ¯ç³»ç»Ÿé¡¹ç›®ã€‚Kafkaæœ€åˆæ˜¯ç”±LinkedInå¼€å‘ï¼Œå¹¶äº2011å¹´åˆå¼€æºã€‚2012å¹´10æœˆä»Apache Incubatoræ¯•ä¸šã€‚è¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯ä¸ºå¤„ç†å®æ—¶æ•°æ®æä¾›ä¸€ä¸ªç»Ÿä¸€ã€é«˜é€šé‡ã€ä½ç­‰å¾…çš„å¹³å°ã€‚Kafkaæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼šç”Ÿäº§è€…ã€æ¶ˆè´¹è€…çš„åŠŸèƒ½ã€‚å®ƒæä¾›äº†ç±»ä¼¼äºJMSçš„ç‰¹æ€§ï¼Œä½†æ˜¯åœ¨è®¾è®¡å®ç°ä¸Šå®Œå…¨ä¸åŒï¼Œæ­¤å¤–å®ƒå¹¶ä¸æ˜¯JMSè§„èŒƒçš„å®ç°ã€‚Kafkaå¯¹æ¶ˆæ¯ä¿å­˜æ—¶æ ¹æ®Topicè¿›è¡Œå½’ç±»ï¼Œå‘é€æ¶ˆæ¯è€…ç§°ä¸ºProducer,æ¶ˆæ¯æ¥å—è€…ç§°ä¸ºConsumer,æ­¤å¤–kafkaé›†ç¾¤æœ‰å¤šä¸ªkafkaå®ä¾‹ç»„æˆï¼Œæ¯ä¸ªå®ä¾‹(server)æˆä¸ºbrokerã€‚æ— è®ºæ˜¯kafkaé›†ç¾¤ï¼Œè¿˜æ˜¯producerå’Œconsumeréƒ½ä¾èµ–äºzookeeperé›†ç¾¤ä¿å­˜ä¸€äº›metaä¿¡æ¯ï¼Œæ¥ä¿è¯ç³»ç»Ÿå¯ç”¨æ€§ JMSè§„èŒƒJMSæ˜¯Javaæä¾›çš„ä¸€å¥—æŠ€æœ¯è§„èŒƒ,ç”¨æ¥å¼‚æ„ç³»ç»Ÿ é›†æˆé€šä¿¡ï¼Œç¼“è§£ç³»ç»Ÿç“¶é¢ˆï¼Œæé«˜ç³»ç»Ÿçš„ä¼¸ç¼©æ€§å¢å¼ºç³»ç»Ÿç”¨æˆ·ä½“éªŒï¼Œä½¿å¾—ç³»ç»Ÿæ¨¡å—åŒ–å’Œç»„ä»¶åŒ–å˜å¾—å¯è¡Œå¹¶æ›´åŠ çµæ´»é€‚ç”¨åœºæ™¯: ç”Ÿäº§æ¶ˆè´¹è€…æ¨¡å¼ï¼ˆç”Ÿäº§è€…ã€æœåŠ¡å™¨ã€æ¶ˆè´¹è€…ï¼‰ JMSæ¶ˆæ¯ä¼ è¾“æ¨¡å‹1.ç‚¹å¯¹ç‚¹æ¨¡å¼ï¼ˆä¸€å¯¹ä¸€ï¼Œæ¶ˆè´¹è€…ä¸»åŠ¨æ‹‰å–æ•°æ®ï¼Œæ¶ˆæ¯æ”¶åˆ°åæ¶ˆæ¯æ¸…é™¤ï¼‰ç‚¹å¯¹ç‚¹æ¨¡å‹é€šå¸¸æ˜¯ä¸€ä¸ªåŸºäºæ‹‰å–æˆ–è€…è½®è¯¢çš„æ¶ˆæ¯ä¼ é€æ¨¡å‹ï¼Œè¿™ç§æ¨¡å‹ä»é˜Ÿåˆ—ä¸­è¯·æ±‚ä¿¡æ¯ï¼Œè€Œä¸æ˜¯å°†æ¶ˆæ¯æ¨é€åˆ°å®¢æˆ·ç«¯ã€‚è¿™ä¸ªæ¨¡å‹çš„ç‰¹ç‚¹æ˜¯å‘é€åˆ°é˜Ÿåˆ—çš„æ¶ˆæ¯è¢«ä¸€ä¸ªä¸”åªæœ‰ä¸€ä¸ªæ¥æ”¶è€…æ¥æ”¶å¤„ç†ï¼Œå³ä½¿æœ‰å¤šä¸ªæ¶ˆæ¯ç›‘å¬è€…ä¹Ÿæ˜¯å¦‚æ­¤ã€‚2.å‘å¸ƒ/è®¢é˜…æ¨¡å¼ï¼ˆä¸€å¯¹å¤šï¼Œæ•°æ®ç”Ÿäº§åï¼Œæ¨é€ç»™æ‰€æœ‰è®¢é˜…è€…ï¼‰å‘å¸ƒè®¢é˜…æ¨¡å‹åˆ™æ˜¯ä¸€ä¸ªåŸºäºæ¨é€çš„æ¶ˆæ¯ä¼ é€æ¨¡å‹ã€‚å‘å¸ƒè®¢é˜…æ¨¡å‹å¯ä»¥æœ‰å¤šç§ä¸åŒçš„è®¢é˜…è€…ï¼Œä¸´æ—¶è®¢é˜…è€…åªåœ¨ä¸»åŠ¨ç›‘å¬ä¸»é¢˜æ—¶æ‰æ¥æ”¶æ¶ˆæ¯ï¼Œè€ŒæŒä¹…è®¢é˜…è€…åˆ™ç›‘å¬ä¸»é¢˜çš„æ‰€æœ‰æ¶ˆæ¯ï¼Œå³æ—¶å½“å‰è®¢é˜…è€…ä¸å¯ç”¨ï¼Œå¤„äºç¦»çº¿çŠ¶æ€ã€‚123queue.putï¼ˆobjectï¼‰ #æ•°æ®ç”Ÿäº§queue.take(object) #æ•°æ®æ¶ˆè´¹ JMSæ ¸å¿ƒç»„ä»¶Destinationï¼šæ¶ˆæ¯å‘é€çš„ç›®çš„åœ°ï¼Œä¹Ÿå°±æ˜¯å‰é¢è¯´çš„Queueå’ŒTopicã€‚Messageï¼šä»å­—é¢ä¸Šå°±å¯ä»¥çœ‹å‡ºæ˜¯è¢«å‘é€çš„æ¶ˆæ¯ã€‚Producerï¼š æ¶ˆæ¯çš„ç”Ÿäº§è€…ï¼Œè¦å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œå¿…é¡»é€šè¿‡è¿™ä¸ªç”Ÿäº§è€…æ¥å‘é€ã€‚MessageConsumerï¼š ä¸ç”Ÿäº§è€…ç›¸å¯¹åº”ï¼Œè¿™æ˜¯æ¶ˆæ¯çš„æ¶ˆè´¹è€…æˆ–æ¥æ”¶è€…ï¼Œé€šè¿‡å®ƒæ¥æ¥æ”¶ä¸€ä¸ªæ¶ˆæ¯ã€‚é€šè¿‡ä¸ConnectionFactoryå¯ä»¥è·å¾—ä¸€ä¸ªconnection,é€šè¿‡connectionå¯ä»¥è·å¾—ä¸€ä¸ªsessionä¼šè¯ã€‚ Kafkaæ ¸å¿ƒç»„ä»¶Topic ï¼šæ¶ˆæ¯æ ¹æ®Topicè¿›è¡Œå½’ç±»Producerï¼šå‘é€æ¶ˆæ¯è€…Consumerï¼šæ¶ˆæ¯æ¥å—è€…brokerï¼šæ¯ä¸ªkafkaå®ä¾‹(server)Zookeeperï¼šä¾èµ–é›†ç¾¤ä¿å­˜metaä¿¡æ¯","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Kafka","slug":"Kafka","permalink":"yihao.ml/tags/Kafka/"}]},{"title":"Matlabå’ŒRçŸ©é˜µè¿ç®—å‘½ä»¤æ±‡æ€»","slug":"2018-09-27-Matlabå’ŒRçŸ©é˜µè¿ç®—å‘½ä»¤æ±‡æ€»","date":"2018-09-27T00:00:00.000Z","updated":"2019-11-29T12:20:47.680Z","comments":true,"path":"2018/09/27/2018-09-27-Matlabå’ŒRçŸ©é˜µè¿ç®—å‘½ä»¤æ±‡æ€»/","link":"","permalink":"yihao.ml/2018/09/27/2018-09-27-Matlabå’ŒRçŸ©é˜µè¿ç®—å‘½ä»¤æ±‡æ€»/","excerpt":"","text":"matlab å¸¸ç”¨å‘½ä»¤çŸ©é˜µåˆ›å»º123a=[1,2,3;4,5,6;7,8,9]b=[1:1:3;4:1:6;7:1:9]c=[linspace(1,3,3); linspace(4,6,3); linspace(7,9,3)]å…¨ä¸º1çš„çŸ©é˜µ12ones(3)ones(3,4)å…¨ä¸º0çš„çŸ©é˜µ12zeros(3)zeros(3,4)åœ¨(0,1)åŒºé—´å‡åŒ€åˆ†å¸ƒçš„éšæœºé˜µ12rand(3)rand(3,4)å•ä½é˜µ1eye()å‡å€¼ä¸º0,æ–¹å·®ä¸º1çš„æ ‡å‡†æ­£æ€åˆ†å¸ƒéšæœºçŸ©é˜µ12randn(3)randn(3,4)å¯¹è§’çŸ©é˜µ12diag([1,2,3,4])diag([1,2,3,4],1)åˆ©ç”¨å°çŸ©é˜µæ„å»ºå¤§çŸ©é˜µ12e=[a;b]f=[a,b]çŸ©é˜µçš„æ‹†åˆ†123456a(2,2)a(1,:)a(:,3)a(1:2,1:2)a(1,1:end)a(end,end)çŸ©é˜µçš„é€†1inv(a)è¡Œåˆ—å¼1det(a)å¯¹è§’çº¿å…ƒç´ 12diag(a)diag(a,1)çŸ©é˜µè½¬ç½®1aâ€™çŸ©é˜µå¼€æ–¹12sqrt(a)a.^0.5åœ¨MATLABä¸­,æœ‰ä¸€ç§ç‰¹æ®Šçš„è¿ç®—,å› ä¸ºå…¶è¿ç®—ç¬¦æ˜¯åœ¨æœ‰å…³ç®—æœ¯è¿ç®—ç¬¦å‰é¢åŠ ç‚¹,æ‰€ä»¥å«ç‚¹è¿ç®—,å¦‚:.*ã€./ã€.\\å’Œ.^ã€‚ä¸¤çŸ©é˜µè¿›è¡Œç‚¹è¿ç®—æ˜¯æŒ‡å®ƒä»¬çš„å¯¹åº”å…ƒç´ è¿›è¡Œç›¸å…³è¿ç®—,è¦æ±‚ä¸¤çŸ©é˜µçš„ç»´å‚æ•°ç›¸åŒã€‚12345a.*ba.\\ba./ba.^2a.^0.5&lt;(å°äº)ã€&lt;=(å°äºæˆ–ç­‰äº)ã€&gt;(å¤§äº)ã€&gt;=(å¤§äºæˆ–ç­‰äº)ã€==(ç­‰äº)ã€~=(ä¸ç­‰äº)123456789a&lt;ba&lt;=ba&gt;ba&gt;=ba==ba~=ba&gt;5a&gt;=5a==5æ‰¾å‡ºaä¸­å¤§äº5çš„å…ƒç´ ä½ç½®1find(a&gt;5)æ”¹å˜ç»´æ•°12a=[1:12]reshape(a,3,4)æ—‹è½¬90åº¦1rot90(b)å·¦å³ç¿»è½¬1fliplr(b) ; flipdim(b,2)ä¸Šä¸‹ç¿»è½¬1flipud(b) ; flipdim(b,1)ä¸Šä¸‰è§’å…ƒç´ 12tril(c)tril(c,1)ä¸‹ä¸‰è§’å…ƒç´ 12triu(c)triu(c,-1)ç¡®å®šçŸ©é˜µçš„ç»´æ•°1size(b)æ±‚çŸ©é˜µçš„è¿¹1trace(c) R å¸¸ç”¨å‘½ä»¤åˆ›å»ºçŸ©é˜µ1234a=matrix(c(1,2,3,4),ncol=2,byrow=T)b=matrix(c(5,6,7,8),ncol=2,byrow=T)c=matrix(c(1,2,3,4),ncol=2,byrow=F)d=matrix(c(5,6,7,8),ncol=2)çŸ©é˜µçº¿æ€§è¿ç®—12345a+ba-b2*a4*ba*bçŸ©é˜µä¹˜æ³•123a%*%bcrossprod(a,b)t(a)%*%bçŸ©é˜µè½¬ç½®12t(a)t(b)t()ä½œç”¨äºå‘é‡ä¸Š123x=c(1:12)t(x)t(t(x))å–æ–¹é˜µçš„å¯¹è§’çº¿å…ƒç´ 1diag(a)æ±‚æ–¹é˜µçš„è¿¹1sum(diag(a))æ„é€ å¯¹è§’çŸ©é˜µ1c=diag(c(1,2,3,4))çŸ©é˜µæ±‚é€†1solve(a)çŸ©é˜µçš„è¡Œåˆ—å¼123det(a)det(b)det(c)","categories":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"yihao.ml/categories/æœºå™¨å­¦ä¹ /"}],"tags":[{"name":"Matlab","slug":"Matlab","permalink":"yihao.ml/tags/Matlab/"}]},{"title":"æ•°æ®ç»“æ„åˆ†å—æŸ¥æ‰¾","slug":"2018-09-26-æ•°æ®ç»“æ„åˆ†å—æŸ¥æ‰¾","date":"2018-09-26T00:00:00.000Z","updated":"2019-11-29T12:20:47.680Z","comments":true,"path":"2018/09/26/2018-09-26-æ•°æ®ç»“æ„åˆ†å—æŸ¥æ‰¾/","link":"","permalink":"yihao.ml/2018/09/26/2018-09-26-æ•°æ®ç»“æ„åˆ†å—æŸ¥æ‰¾/","excerpt":"","text":"åˆ†å—æŸ¥æ‰¾æ˜¯é¡ºåºæŸ¥æ‰¾å’ŒäºŒåˆ†æŸ¥æ‰¾çš„ä¸€ä¸ªæŠ˜ä¸­é€‰æ‹©ã€‚å®ƒç”±ç´¢å¼•è¡¨å’Œå—*nç»„æˆéµå¾ªè¿™æ ·çš„åŸåˆ™ï¼šç´¢å¼•è¡¨ä¸­å­˜æ”¾è¿™å—å†…æœ€å¤§keyå’Œå—çš„å†…å­˜èµ·å§‹åœ°å€,å¹¶ä¸”ç´¢å¼•è¡¨å†…keyç”±å°åˆ°å¤§æ’åˆ—;æ¯ä¸ªå—å†…çš„keyä¸å¿…æœ‰åºã€‚å—çš„å¤§å°å†³å®šè¿™æŸ¥è¯¢çš„æ•ˆç‡ã€‚éšæ„å–ä¼šå½±å“æŸ¥è¯¢é€Ÿåº¦ï¼Œåé¢ä¼šä»‹ç»å—çš„æœ€ä¼˜å¤§å°å¦‚ä½•ç®—å¾—ã€‚åˆ†å—æŸ¥æ‰¾çš„ç»“æ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæŸ¥è¯¢çš„è¿‡ç¨‹åˆ†ä¸ºä¸¤æ­¥ï¼Œå…ˆé€šè¿‡ç´¢å¼•è¡¨ç¡®å®škeyæ‰€åœ¨å—ï¼Œç”±äºç´¢å¼•è¡¨æ˜¯æœ‰åºçš„å¹¶ä¸”æ•°æ®é‡ä¸ä¼šå¾ˆå¤§ã€æ‰€ä»¥ä½¿ç”¨é¡ºåºæˆ–è€…äºŒåˆ†æŸ¥æ‰¾éƒ½å¯ä»¥ã€‚ç¡®å®šåˆ°å—åç”±äºå—å†…æ— åºï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨é¡ºåºæŸ¥æ‰¾ã€‚é‚£ä¹ˆæ±‚å¾—çš„æ€»çš„å¹³å‡æŸ¥æ‰¾é•¿åº¦ä¸ºASLbs=Lb+LwASL_{bs} = L_b + L_wASLâ€‹bsâ€‹â€‹=Lâ€‹bâ€‹â€‹+Lâ€‹wâ€‹â€‹å…¶ä¸­,$$L_b$$ä¸ºæŸ¥æ‰¾ç´¢å¼•è¡¨ç¡®å®šæ‰€åœ¨å—çš„å¹³å‡æŸ¥æ‰¾é•¿åº¦ï¼Œ$$L_w$$ä¸ºåœ¨å—ä¸­æŸ¥æ‰¾å…ƒç´ çš„å¹³å‡æŸ¥æ‰¾é•¿åº¦ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸ºè¿›è¡Œåˆ†å—æŸ¥æ‰¾ï¼Œå¯ä»¥å°†é•¿åº¦ä¸ºnçš„è¡¨å¹³å‡åˆ†ä¸ºbå—ï¼Œæ¯å—å«sä¸ªè®°å½•ï¼Œåˆ™ $$b=\\lceil\\frac{n}{s}\\rceil$$,åˆå‡å®šè¡¨ä¸­æ¯ä¸ªè®°å½•çš„æŸ¥æ‰¾æ¦‚ç‡ç›¸ç­‰ï¼Œåˆ™æ¯ä¸ªå—æŸ¥æ‰¾çš„æ¦‚ç‡ä¸º$$\\frac{1}{b}$$,å—ä¸­æ¯ä¸ªè®°å½•çš„æŸ¥æ‰¾æ¦‚ç‡ä¸º $$\\frac{1}{s}$$è‹¥ç”¨é¡ºåºæŸ¥æ‰¾ç¡®è®¤æ‰€åœ¨å—ï¼Œåˆ™åˆ†å—æŸ¥æ‰¾çš„å¹³å‡æŸ¥æ‰¾é•¿åº¦ä¸ºï¼šASLbs=Lb+Lw=1bâˆ‘j=1bj+1sâˆ‘i=1si=b+12+s+12ASL_{bs} = L_b + L_w = \\frac{1}{b}\\sum_{j=1}^b j + \\frac{1}{s}\\sum_{i=1}^s i = \\frac{b+1}{2} + \\frac{s+1}{2}ASLâ€‹bsâ€‹â€‹=Lâ€‹bâ€‹â€‹+Lâ€‹wâ€‹â€‹=â€‹bâ€‹â€‹1â€‹â€‹â€‹j=1â€‹âˆ‘â€‹bâ€‹â€‹j+â€‹sâ€‹â€‹1â€‹â€‹â€‹i=1â€‹âˆ‘â€‹sâ€‹â€‹i=â€‹2â€‹â€‹b+1â€‹â€‹+â€‹2â€‹â€‹s+1â€‹â€‹ç»§ç»­æ¨å¯¼ASLbs=12(ns+s)+1ASL_{bs} = \\frac{1}{2}\\left(\\frac{n}{s}+s\\right)+1ASLâ€‹bsâ€‹â€‹=â€‹2â€‹â€‹1â€‹â€‹(â€‹sâ€‹â€‹nâ€‹â€‹+s)+1æ­¤æ—¶çš„å¹³å‡æŸ¥æ‰¾é•¿åº¦ä¸ä»…å’Œè¡¨é•¿næœ‰å…³ï¼Œè€Œä¸”å’Œæ¯ä¸€å—ä¸­çš„è®°å½•ä¸ªæ•°ä¹Ÿæœ‰å…³ï¼Œåœ¨ç»™å®šnçš„å‰æä¸‹ï¼Œ sæ˜¯å¯ä»¥é€‰æ‹©çš„ï¼Œå®¹æ˜“è¯æ˜ï¼Œå½“sæ˜¯$$\\sqrt{ n }$$ æ—¶ï¼Œ$$ASL_{bs}$$å–æœ€å°å€¼$$\\sqrt{ n }+1$$ï¼Œè¿™ä¸ªæ¯”å€¼æ¯”é¡ºåºæŸ¥æ‰¾è™½ç„¶å¿«ä½†ä¸åŠäºŒåˆ†æŸ¥æ‰¾ã€‚","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"ubuntu 16.04å®‰è£…matlab","slug":"2018-09-25-ubuntu 16.04å®‰è£…matlab","date":"2018-09-25T00:00:00.000Z","updated":"2019-11-29T12:20:47.680Z","comments":true,"path":"2018/09/25/2018-09-25-ubuntu 16.04å®‰è£…matlab/","link":"","permalink":"yihao.ml/2018/09/25/2018-09-25-ubuntu 16.04å®‰è£…matlab/","excerpt":"","text":"ä¸‹è½½å…ˆä¸‹è½½MATLAB2017a,èµ„æºåœ¨è¿™é‡Œ å®‰è£…é¦–å…ˆæˆ‘ä»¬åœ¨å®¶ç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåå­—éšæ„ï¼Œä½ è‡ªå·±å®šï¼Œæˆ‘è¿™é‡Œå°±å«matlabå§1mkdir matlabéšåæˆ‘ä»¬cdåˆ°ä½ çš„matlabçš„æ–‡ä»¶ç›®å½•ä¸‹ï¼Œç„¶åå…ˆæŠŠç¬¬ä¸€ä¸ªisoæ–‡ä»¶æŒ‚è½½åˆ°ubuntuä¸Š12sudo mount -o loop R2017a_glnxa64_dvd1.iso /home/(ä½ çš„ç”¨æˆ·å)/matlabæ‰§è¡Œmatlabç›®å½•ä¸‹çš„installè¿›è¡Œå®‰è£…1sudo /home/(ä½ çš„ç”¨æˆ·å)/matlab/installç„¶åå°±è¿›å…¥äº†å®‰è£…ç•Œé¢,é€‰æ‹©ç”¨ç§˜é’¥è¿›è¡Œå®‰è£…ï¼Œç„¶åç‚¹å‡»nexté€‰æ‹©yse,ä¸‹ä¸€æ­¥æ¿€æ´»ç 09806-07443-53955-64350-21751-41297,å®‰æ”¾åœ¨MATLABæ–‡ä»¶ä¸‹readme.txtè¿™é‡Œå› ä¸ºæˆ‘å®‰è£…è¿‡äº†ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„æ˜¯installed,ç»§ç»­ç‚¹å‡»nextç„¶ååˆ°äº†60%-70%,ä¼šæç¤ºé€‰æ‹©å¸è½½å½“å‰çš„æŒ‚è½½ç‚¹ï¼Œé€‰æ‹©ç¬¬äºŒä¸ªisoé•œåƒï¼Œæ‰€ä»¥1234sudo umount /home/(ä½ çš„ç”¨æˆ·å)/matlab sudo mount -o loop R2017a_glnxa64_dvd2.iso /home/(ä½ çš„ç”¨æˆ·å)/matlabè¿™é‡Œç¬¬äºŒä¸ªæŒ‚è½½çš„é•œåƒè¦è·Ÿç¬¬ä¸€ä¸ªæŒ‚è½½çš„ä½ç½®è¦ç›¸åŒï¼Œæˆ‘è¿™é‡Œå°±éƒ½æ˜¯matlab,ç„¶åç‚¹å‡»ç»§ç»­å°±å¯ä»¥äº†å®‰è£…å®Œä¹‹åæˆ‘ä»¬æ¥è¿›è¡Œæ¿€æ´»12345sudo mkdir /usr/local/MATLAB/R2017a/bin/licenses/ cd /your/MATLAB/files/path // è¿™é‡Œè‡ªå·±è¦æ ¹æ®è‡ªå·±å®é™…çš„è·¯å¾„æ¥sudo cp license_standalone.lic /usr/local/MATLAB/R2017a/bin/licenses/ sudo cp libmwservices.so /usr/local/MATLAB/R2017a/bin/glnxa64/æŠŠæŒ‚è½½ç»™å¸ä¸‹æ¥1sudo umount /home/(ä½ çš„ç”¨æˆ·å)/matlabç„¶åå¯åŠ¨1sudo /usr/local/MATLAB/R2017a/bin/matlabç„¶åä¼šå¼¹å‡ºæ¿€æ´»æ¡†ï¼Œç„¶åå¯¼å…¥matlabæ–‡ä»¶ç›®å½•ä¸‹é€‰æ‹©license_standalone.licè¿™ä¸ªæ–‡ä»¶ï¼Œå³å¯æ¿€æ´»,å¦‚æœå‡ºç°licesesçš„æƒé™ä¸å¤Ÿ,å°±æ‰§è¡Œä¸‹åˆ—å‘½ä»¤1sudo chmod 777 /usr/local/MATLAB/R2017a/bin/licenses/ç°åœ¨æˆ‘ä»¬æ¥å»ºç«‹ä¸€ä¸ªçš„æ˜¯desktopæ–‡ä»¶ï¼Œæ–¹ä¾¿å¯åŠ¨ï½ï½ï½1234567891011121314151617181.cd ~/.local/share/application2.sudo gedit matlab.desktop------ç„¶åç²˜è´´ä¸‹é¢å­—çœ¼ï¼Œæ— éœ€æ›´æ”¹ï¼Œç›´æ¥ç”¨[Desktop Entry]Type=ApplicationName=MatlabGenericName=Matlab 2017aComment=Matlab:The Language of Technical ComputingExec=sh /usr/local/MATLAB/R2017a/bin/matlab -desktopIcon=/usr/local/MATLAB/R2017a/toolbox/nnet/nnresource/icons/matlab.pngStartupNotify=trueTerminal=falseCategories=Development;Matlab;ç„¶ååœ¨Dashé‡Œæ‰¾åˆ°Matlabï¼ŒæŠŠä»–æ‹–æ‹½åˆ°å¯åŠ¨æ ä¸Šï¼Œæ‹–æ‹½åçš„æ ·å­è¯·çœ‹ç¬¬ä¸€å¹…å›¾ç‚¹å‡»å›¾æ ‡å¯åŠ¨å‘ç°æœ‰æŠ¥é”™ç„¶åæˆ‘ä»¬æ ¹æ®æŠ¥é”™ä¿¡æ¯æç¤ºè¯´åœ¨å®¶ç›®å½•ä¸‹çš„.matlabä¸‹çš„æ–‡ä»¶æ²¡æœ‰æƒé™,äºæ˜¯12cd ~/.matlabchmod 777 R2017a","categories":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"yihao.ml/categories/æœºå™¨å­¦ä¹ /"}],"tags":[{"name":"MatLab","slug":"MatLab","permalink":"yihao.ml/tags/MatLab/"}]},{"title":"æ•°æ®ç»“æ„äºŒåˆ†æŸ¥æ‰¾","slug":"2018-09-19-æ•°æ®ç»“æ„äºŒåˆ†æŸ¥æ‰¾","date":"2018-09-19T00:00:00.000Z","updated":"2019-11-29T12:20:47.679Z","comments":true,"path":"2018/09/19/2018-09-19-æ•°æ®ç»“æ„äºŒåˆ†æŸ¥æ‰¾/","link":"","permalink":"yihao.ml/2018/09/19/2018-09-19-æ•°æ®ç»“æ„äºŒåˆ†æŸ¥æ‰¾/","excerpt":"","text":"å¯¹é¡ºåºæŸ¥æ‰¾æ³•ã€äºŒåˆ†æŸ¥æ‰¾æ³•å’Œåˆ†å—æŸ¥æ‰¾åšç³»ç»Ÿå­¦ä¹ ã€‚ç”¨çš„ä¹¦æ˜¯ä¸¥è€å¸ˆ(ä¸¥è–‡æ•)çš„Cè¯­è¨€ç‰ˆï¼Œä½¿ç”¨scalaé‡æ–°ç¼–å†™äº†ä¸€ä¸‹ã€‚è¯­æ³•ç¨å¾®ä¸åŒæ€è·¯æ˜¯ä¸€æ ·çš„ã€‚ äºŒåˆ†æŸ¥æ‰¾å®ç°ä¸æ¼”ç®—äºŒåˆ†æŸ¥æ‰¾çš„ä¸€ä¸ªå‰ææ˜¯å¿…é¡»ä¿è¯åºåˆ—æœ‰åºï¼Œå‡å¦‚ä¸€ä¸ªæ— åºçš„åºåˆ—æƒ³è¦ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œå®é™…ä¸Šé€Ÿåº¦å¹¶ä¸ä¸€å®šæ¯”é¡ºåºæŸ¥æ‰¾è¦å¿«ï¼Œå› ä¸ºåœ¨è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ä¹‹å‰ï¼Œéœ€è¦ç»è¿‡æ’åºï¼Œè€Œæ’åºå¾€å¾€æ¶ˆè€—çš„æ—¶é—´é¡µæ˜¯å·¨å¤§çš„ã€‚123456789101112131415def binary(arr : Array[Int],elem : Int) : Int = &#123; var low = 1; var hight = arr.length; while (low &lt;= hight)&#123; var mid = ( low + hight ) / 2 if(arr(mid) == elem)&#123; return mid &#125;else if(arr(mid) &gt; elem)&#123; hight = mid - 1 &#125;else&#123; low = mid - 1 &#125; &#125; return 0&#125;è¿™ä¸ªç®—æ³•éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¾ªç¯æ‰§è¡Œçš„æ¡ä»¶æ˜¯low&lt;=hight,è€Œä¸æ˜¯low&lt;hight,å› ä¸ºåœ¨low&lt;hightæ—¶ï¼ŒæŸ¥æ‰¾åŒºé—´è¿˜æœ‰æœ€åä¸€ä¸ªç»“ç‚¹ï¼Œè¿˜è¦è¿›è¡Œä¸€æ­¥æ¯”è¾ƒã€‚ç®—æ³•æ¼”ç®—è¿‡ç¨‹å¦‚ä¸‹å›¾:å‡å¦‚key=21å¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡å…ˆå’Œ56æ¯”ï¼Œå‘ç°key&lt;57ï¼Œæ¥ç€å’Œ19æ¯”,å‘ç°key&gt;19ä»¥æ­¤ç±»æ¨æœ€ç»ˆæ‰¾åˆ°21ã€‚ æ—¶é—´å¤æ‚åº¦è®¡ç®—å…¶å®æˆ‘ä»¬å¯ä»¥æŠŠæŸ¥æ‰¾çš„è¿‡ç¨‹æ˜ å°„æˆå†³ç­–æ ‘ï¼Œäº‹æƒ…å°±ä¼šå˜å¾—æ›´åŠ æœ‰è¶£ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ä»€ä¹ˆæ˜¯æ»¡äºŒå‰æ•°,åƒä¸‹å›¾ä¸­çš„(a)æˆ‘ä»¬éµå¾ªä¸€ä¸ªè§„å¾‹æ ‘çš„å·¦å­æ ‘éƒ½æ¯”æ ¹èŠ‚ç‚¹å°ï¼Œæ ‘çš„å³å­æ ‘éƒ½æ¯”æ ¹å¤§ã€‚éµå¾ªè¿™ä¸ªç­–ç•¥æœ‰åºåºåˆ—æ˜ å°„åå°±ä¼šå˜æˆä¸‹é¢çš„æ ·å­å¯¹ç…§è¿™æ ‘ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œç¬¬ä¸€å±‚çš„æˆ‘ä»¬æœ€å¤šåªç”¨æ¯”ä¸€æ¬¡å°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„å€¼ï¼Œç¬¬äºŒå±‚çš„èŠ‚ç‚¹æƒ³è¦æ‰¾åˆ°å¾—æ¯”ä¸¤æ¬¡ï¼Œç¬¬ä¸‰å±‚çš„èŠ‚ç‚¹æƒ³è¦æ‰¾åˆ°å¾—æ¯”ä¸‰æ¬¡,ç¬¬å››å±‚çš„èŠ‚ç‚¹æƒ³è¦æ‰¾åˆ°å°±å¾—æ¯”å››æ¬¡ã€‚å› ä¸ºæˆ‘ä»¬éµå¾ªç€å·¦å°å³å¤§çš„åŸåˆ™,å‡è®¾æ¯ä¸ªèŠ‚ç‚¹æ‰¾åˆ°çš„æ¦‚ç‡éƒ½æƒ³ç­‰ï¼Œé‚£ä¹ˆå¹³å‡å¯»æ‰¾é•¿åº¦æˆ‘ä»¬å°±å¯ä»¥è®¡ç®—å‡ºæ¥ALS=111(1+2âˆ—2+3âˆ—4+4âˆ—4)=3ALS=\\frac{1}{11} \\left( 1+2*2+3*4+4*4 \\right) = 3ALS=â€‹11â€‹â€‹1â€‹â€‹(1+2âˆ—2+3âˆ—4+4âˆ—4)=3å¥½äº†!11ä¸ªèŠ‚ç‚¹çš„æœ‰åºåºåˆ—åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•çš„å¹³å‡å¯»æ‰¾é•¿åº¦æˆ‘ä»¬ç®—å‡ºæ¥æ˜¯3ã€‚é‚£ä¹ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šå¯¹äºnä¸ªç»“ç‚¹çš„æœ‰åºåºåˆ—ï¼Œå¦‚ä½•æ±‚å‡ºå®ƒçš„å¹³å‡å¯»æ‰¾é•¿åº¦ï¼Ÿå¯¹äºè¿™ä¸ªé—®é¢˜æˆ‘ä»¬éœ€è¦ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œæ»¡äºŒå‰æ•°çš„ç»“ç‚¹æ•°æ€»æ•° $$\\left( s \\right) $$ ä¸æ·±åº¦$$\\left( h \\right) $$ å­˜åœ¨è¿™è¿™æ ·çš„å…¬å¼s=2hâˆ’1s=2^h-1s=2â€‹hâ€‹â€‹âˆ’1æ»¡äºŒå‰æ•°çš„ç¬¬nå±‚çš„èŠ‚ç‚¹æ€»æ•° $$\\left( n \\right) $$ ä¸æ·±åº¦$$\\left( h \\right) $$ å­˜åœ¨è¿™è¿™æ ·çš„å…¬å¼n=2hâˆ’1n=2^{h-1}n=2â€‹hâˆ’1â€‹â€‹ä¸Šé¢çš„å…¬å¼è¿˜å¯ä»¥è½¬æ¢æˆè¿™æ ·çš„å½¢å¼h=âŒŠlog2nâŒ‹+1h = \\lfloor\\log_2 n\\rfloor + 1h=âŒŠlogâ€‹2â€‹â€‹nâŒ‹+1å¯¹äºnä¸ªèŠ‚ç‚¹çš„æœ‰åºåºåˆ—ï¼Œæ˜ å°„åˆ°æ»¡äºŒå‰æ ‘ä¸Šä»¥åï¼Œç¬¬ä¸€å±‚çš„æˆ‘ä»¬æœ€å¤šåªç”¨æ¯”ä¸€æ¬¡å°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„å€¼ï¼Œç¬¬äºŒå±‚å¾—æ¯”ä¸¤æ¬¡,ç¬¬ä¸‰å±‚å¾—æ¯”ä¸‰æ¬¡â€¦ç¬¬nå±‚å°±å¾—æ¯”$$h\\cdot2^{h-1}$$æ¬¡(æç¤º:ç­‰æ¯”æ•°åˆ—é€šå‘å¼)ï¼Œå‡è®¾æ¯ä¸ªèŠ‚ç‚¹æ‰¾åˆ°çš„æ¦‚ç‡éƒ½æƒ³ç­‰ï¼Œåˆ™å¹³å‡å¯»æ‰¾é•¿åº¦ä¸ºALS=1n(1+2âˆ—2+3âˆ—3+â‹¯+(hâˆ’1)âˆ—2hâˆ’2+hâˆ—2hâˆ’1)ALS=\\frac{1}{n}\\left(1+2*2+3*3+ \\cdots + \\left( h-1 \\right) * 2^{h-2} + h * 2^{h-1} \\right)ALS=â€‹nâ€‹â€‹1â€‹â€‹(1+2âˆ—2+3âˆ—3+â‹¯+(hâˆ’1)âˆ—2â€‹hâˆ’2â€‹â€‹+hâˆ—2â€‹hâˆ’1â€‹â€‹)ç»§ç»­æ¨å¯¼ALS=1nâˆ‘j=1hjâ‹…2jâˆ’1ALS=\\frac{1}{n} \\sum_{j=1}^h\\ j\\cdot2^{j-1}ALS=â€‹nâ€‹â€‹1â€‹â€‹â€‹j=1â€‹âˆ‘â€‹hâ€‹â€‹ jâ‹…2â€‹jâˆ’1â€‹â€‹ç»§ç»­æ¨å¯¼ALS=n+1nlog2(n+1)âˆ’1ALS=\\frac{n+1}{n} \\log_2 \\left(n+1\\right) - 1ALS=â€‹nâ€‹â€‹n+1â€‹â€‹logâ€‹2â€‹â€‹(n+1)âˆ’1å½“nè¾ƒå¤§æ—¶ï¼Œæœ‰ä¸‹é¢è¿‘ä¼¼å€¼ALS=log2(n+1)âˆ’1ALS=\\log_2 \\left(n+1\\right) - 1ALS=logâ€‹2â€‹â€‹(n+1)âˆ’1åˆ™äºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º$$\\omicron \\left( \\log_2 n \\right)$$å€ŸåŠ©ä¸‹é¢çš„å›¾å½¢å¯ä»¥çœ‹å‡ºäºŒåˆ†æŸ¥æ‰¾çš„æ•ˆç‡è¦æ¯”é¡ºåºæŸ¥æ‰¾çš„æ•ˆç‡é«˜çš„å¤šï¼Œå½“n&gt;0å¹¶è¶‹å‘äºæ— ç©·æ—¶ï¼Œæ•ˆæœä¼šè¶Šæ¥è¶Šæ˜æ˜¾ã€‚åˆ†å—æŸ¥æ‰¾è§ä¸‹ä¸€èŠ‚","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"æ•°æ®ç»“æ„é¡ºåºæŸ¥æ‰¾","slug":"2018-09-18-æ•°æ®ç»“æ„é¡ºåºæŸ¥æ‰¾","date":"2018-09-18T00:00:00.000Z","updated":"2019-11-29T12:20:47.679Z","comments":true,"path":"2018/09/18/2018-09-18-æ•°æ®ç»“æ„é¡ºåºæŸ¥æ‰¾/","link":"","permalink":"yihao.ml/2018/09/18/2018-09-18-æ•°æ®ç»“æ„é¡ºåºæŸ¥æ‰¾/","excerpt":"","text":"å¯¹é¡ºåºæŸ¥æ‰¾æ³•ã€äºŒåˆ†æŸ¥æ‰¾æ³•å’Œåˆ†å—æŸ¥æ‰¾åšç³»ç»Ÿå­¦ä¹ ã€‚ç”¨çš„ä¹¦æ˜¯ä¸¥è€å¸ˆ(ä¸¥è–‡æ•)çš„Cè¯­è¨€ç‰ˆï¼Œä½¿ç”¨scalaé‡æ–°ç¼–å†™äº†ä¸€ä¸‹ã€‚è¯­æ³•ç¨å¾®ä¸åŒæ€è·¯æ˜¯ä¸€æ ·çš„ã€‚ é¡ºåºæŸ¥æ‰¾è¯´èµ·é¡ºåºæŸ¥æ‰¾ï¼Œå¤§å®¶è‚¯å®šéƒ½è§‰å¾—å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œä¸è¿‡è¿™é‡Œé¢è¿˜æ˜¯æœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„,å‡å¦‚ä»¥å‰ä½ ä¸€ç›´å†™æ— å“¨å…µçš„é¡ºåºæŸ¥æ‰¾ï¼Œé‚£ä½ å°±outäº†,å› ä¸ºå¸¦å“¨å…µçš„é¡ºåºæŸ¥æ‰¾èƒ½ä¸ºä½ çœæ‰å°†è¿‘ä¸€åŠçš„æ—¶é—´;ä¸‹é¢æ˜¯å¯¹ä¸¤ç§å®ç°æ–¹æ³•ä»¥åŠåŸç†è¿›è¡Œè¯´æ˜ã€‚ æ— å“¨å…µ123456def search(arr : Array[Int] ,elem : Int):Int = &#123; var index = -1; for ((x,i) &lt;- arr.view.zipWithIndex) if(x == elem) index = i index&#125;æ€è·¯å¾ˆæ¸…æ™°ï¼Œéå†æ‰€æœ‰æ•°æ®ä¸€ä¸ªä¸€ä¸ªæ¯”,å¦‚æœå‘ç°åŒ¹é…å°±è¿”å›å¯¹åº”ä¸‹æ ‡ã€‚ æœ‰å“¨å…µ12345678910def searchSentry(arr : Array[Int] ,elem : Int,n : Int):Int = &#123; var i = 0 if(arr(n) != elem) arr(n) = elem else return n while(arr(i) != elem) i += 1 if(i &lt; n) return i else return -1&#125;å¸¦å“¨å…µçš„ä¹ä¸€çœ‹è²Œä¼¼ä¸æ— å“¨å…µçš„æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œç„¶è€Œå®è·µè¯æ˜ï¼Œè¿™ä¸ªæ”¹è¿›åœ¨lengthå¤§äº1000æ—¶ï¼Œè¿›è¡ŒæŸ¥è¯¢çš„æ—¶é—´ä¼šå‡å°‘å°†è¿‘ä¸€åŠã€‚åŸç†æ˜¯é€šè¿‡ç›‘è§†å“¨ï¼Œçœå»äº†æ¯æ¬¡éå†éƒ½å»æ£€æµ‹æ˜¯å¦æŸ¥è¯¢å®Œæ¯•çš„æ—¶é—´ã€‚ æ—¶é—´å¤æ‚åº¦è®¡ç®—å¹³å‡æŸ¥æ‰¾é•¿åº¦çš„è®¡ç®—å…¬å¼ASL=âˆ‘i=1nPiCiASL=\\sum_{i=1}^n\\ P_iC_iASL=â€‹i=1â€‹âˆ‘â€‹nâ€‹â€‹ Pâ€‹iâ€‹â€‹Câ€‹iâ€‹â€‹ä»é¡ºåºè¡¨çš„æŸ¥æ‰¾è¿‡ç¨‹å¯è§ï¼Œ$$C_i$$å–å†³äºå…ƒç´ åœ¨è¡¨ä¸­çš„ä½ç½®ï¼Œå‡å¦‚æŸ¥æ‰¾ç¬¬ä¸€ä¸ªè®°å½•æ—¶ï¼Œåªéœ€è¦æŸ¥ä¸€æ¬¡ï¼Œç¬¬nä¸ªè®°å½•æ—¶åˆ™éœ€è¦æŸ¥næ¬¡ã€‚è¿™è¾¹å‡è®¾æ¯ä¸ªå…ƒç´ æŸ¥æ‰¾æ¦‚ç‡ç›¸ç­‰ï¼Œåˆ™Pi=1nP_i=\\frac{1}{n}Pâ€‹iâ€‹â€‹=â€‹nâ€‹â€‹1â€‹â€‹ç»§ç»­æ¨å¯¼ASL=1nâˆ‘i=1ni=1+n2ASL=\\frac{1}{n}\\sum_{i=1}^n\\ i=\\frac{1+n}{2}ASL=â€‹nâ€‹â€‹1â€‹â€‹â€‹i=1â€‹âˆ‘â€‹nâ€‹â€‹ i=â€‹2â€‹â€‹1+nâ€‹â€‹åˆ™é¡ºåºæŸ¥æ‰¾çš„å¹³å‡ç®—æ³•å¤æ‚åº¦ä¸º$$\\omicron \\left( n \\right)$$å¦‚æœæœ‰ç–‘æƒ‘å¯ä»¥çœ‹Data Structure (2nd Edition) 7.2.1http://book.knowsky.com/book_1030305.htmäºŒåˆ†æŸ¥æ‰¾çœ‹ä¸‹ä¸€ç¯‡","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"Rå®‰è£…åŠè¯­è¨€çŸ©é˜µè¿ç®—","slug":"2018-09-16-Rå®‰è£…åŠè¯­è¨€çŸ©é˜µè¿ç®—","date":"2018-09-16T00:00:00.000Z","updated":"2019-11-29T12:20:47.678Z","comments":true,"path":"2018/09/16/2018-09-16-Rå®‰è£…åŠè¯­è¨€çŸ©é˜µè¿ç®—/","link":"","permalink":"yihao.ml/2018/09/16/2018-09-16-Rå®‰è£…åŠè¯­è¨€çŸ©é˜µè¿ç®—/","excerpt":"","text":"Ubuntu16.04ä¸Šå®‰è£…RåŠRStudio,è¿›è¡ŒçŸ©é˜µè¿ç®— å®‰è£…Ræ·»åŠ é•œåƒæº,å°†æºæ·»åŠ åˆ°/etc/apt/sources.listï¼Œæ³¨æ„Ubuntuç‰ˆæœ¬ï¼ˆæœ¬äººUbuntuç‰ˆæœ¬æ˜¯xenialï¼Œå³16.04ã€‚æ ¹æ®ç‰ˆæœ¬æ”¹å˜å¯¹åº”çš„åå­—ã€‚ï¼‰12# Ctrl+Alt+Tæ‰“å¼€ç»ˆç«¯sudo echo \"deb http://cran.rstudio.com/bin/linux/ubuntu xenial/\" | sudo tee -a /etc/apt/sources.listä¸‹è½½å…¬é’¥12gpg --keyserver keyserver.ubuntu.com --recv-key 51716619E084DAB9gpg -a --export 51716619E084DAB9 | sudo apt-key add -å®‰è£…r-base12sudo apt-get updatesudo apt-get install r-base r-base-devéªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥â€œRâ€ï¼Œå‡ºç°Rçš„ä¿¡æ¯åˆ™å®‰è£…æˆåŠŸã€‚å¦‚ï¼š å®‰è£…RStudioç›´æ¥ä»RStudioå®˜ç½‘ä¸‹è½½æ‰€éœ€è¦çš„ç‰ˆæœ¬ã€‚ï¼ˆæœ¬äººä¸‹è½½çš„RStudio 1.1.456 - Ubuntu 16.04+/Debian 9+ (64-bit)ï¼‰ç¬¬ä¸€æ¬¡æ²¡ç¿»å¢™ä¸‹ä¸äº†ï¼Œç¿»å¢™åå®Œç¾è§£å†³ã€‚123sudo apt-get install gdebi-coresudo gdebi rstudio-xenial-1.1.456-amd64.debrm rstudio-xenial-1.1.456-amd64.debè‹¥å®‰è£…æˆåŠŸï¼Œæ‰“å¼€åº”ç”¨ç¨‹åºï¼Œä¼šçœ‹åˆ°Rå’ŒRStudioçš„å›¾æ ‡ã€‚RStudioç•Œé¢ï¼š ç®€å•çš„çŸ©é˜µè¿ç®—å¯¹äºä¸‰ä¸ªçŸ©é˜µA={123456},B={578621},C={5724}A=\\left\\{ \\begin{matrix} 1 &amp; 2 \\\\ 3 &amp; 4 \\\\ 5 &amp; 6 \\end{matrix} \\right\\} , B=\\left\\{ \\begin{matrix} 5 &amp; 7 &amp; 8 \\\\ 6 &amp; 2 &amp; 1 \\end{matrix} \\right\\} , C=\\left\\{ \\begin{matrix} 5 &amp; 7 \\\\ 2 &amp; 4 \\end{matrix} \\right\\}A=â€‹â©â€‹â¨â€‹â§â€‹â€‹â€‹1â€‹3â€‹5â€‹â€‹â€‹2â€‹4â€‹6â€‹â€‹â€‹â­â€‹â¬â€‹â«â€‹â€‹,B={â€‹5â€‹6â€‹â€‹â€‹7â€‹2â€‹â€‹â€‹8â€‹1â€‹â€‹},C={â€‹5â€‹2â€‹â€‹â€‹7â€‹4â€‹â€‹}æ±‚ BAå’ŒBA+Cä½¿ç”¨Rè¿›è¡Œè®¡ç®—12345&gt;a=matrix(c(1,2,3,4,5,6),ncol=2,byrow=T)&gt;b=matrix(c(5,7,8,6,2,1),ncol=3,byrow=T)&gt;c=matrix(c(5,7,2,4),ncol=2,byrow=T)&gt; b%*%a&gt; b%*%a+c","categories":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"yihao.ml/categories/æœºå™¨å­¦ä¹ /"}],"tags":[{"name":"R","slug":"R","permalink":"yihao.ml/tags/R/"}]},{"title":"æ•£åˆ—è¡¨å†²çªè§£å†³ç­–ç•¥","slug":"2018-09-16-æ•£åˆ—è¡¨å†²çªè§£å†³ç­–ç•¥","date":"2018-09-16T00:00:00.000Z","updated":"2019-11-29T12:20:47.679Z","comments":true,"path":"2018/09/16/2018-09-16-æ•£åˆ—è¡¨å†²çªè§£å†³ç­–ç•¥/","link":"","permalink":"yihao.ml/2018/09/16/2018-09-16-æ•£åˆ—è¡¨å†²çªè§£å†³ç­–ç•¥/","excerpt":"","text":"é€‰æ‹©ä¸€ä¸ª&quot;å¥½&quot;çš„æ•£åˆ—å‡½æ•°å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘å†²çªï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¾ˆéš¾å®Œå…¨é¿å…å‘ç”Ÿå†²çªï¼Œæ‰€ä»¥é€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆçš„å¤„ç†å†²çªçš„æ–¹æ³•æ˜¯æ•£åˆ—æ³•çš„å¦ä¸€ä¸ªå…³é”®é—®é¢˜ã€‚åˆ›å»ºæ•£åˆ—è¡¨å’ŒæŸ¥æ‰¾æ•£åˆ—è¡¨éƒ½ä¼šé‡åˆ°å†²çªã€‚ä¸¤ç§æƒ…å†µä¸‹å¤„ç†å†²çªçš„æ–¹æ³•åº”è¯¥ä¸€è‡´ã€‚ä¸‹é¢ä»¥åˆ›å»ºæ•£åˆ—è¡¨ä¸ºä¾‹ï¼Œæ¥è¯´æ˜å¤„ç†å†²çªçš„æ–¹æ³•ã€‚å¤„ç†å†²çªçš„æ–¹æ³•å¯åˆ†ä¸ºä¸¤ç±»ï¼šå¼€æ”¾åœ°å€æ³•å’Œé“¾åœ°å€æ³• å¼€æ”¾åœ°å€æ³•æ ¸å¿ƒåŸç†:æŠŠè®°å½•éƒ½å­˜åœ¨æ•£åˆ—è¡¨æ•°ç»„ä¸­ï¼Œå½“æŸä¸€è®°å½•å…³é”®å­—keyçš„åˆå§‹æ•£åˆ—åœ°å€$$H_0=H(key)$$å‘ç”Ÿå†²çªæ—¶ï¼Œä»¥$$H_0$$ä¸ºåŸºç¡€ï¼Œé‡‡å–åˆé€‚æ–¹æ³•è®¡ç®—å¾—åˆ°å¦ä¸€ä¸ªåœ°å€$$H_1$$,å¦‚æœ$$H_1$$ä»ç„¶å‘ç”Ÿå†²ï¼Œä»¥$$H_1$$ä¸ºåŸºç¡€åœ¨æ±‚ä¸€ä¸‹åœ°å€$$H_2$$ï¼Œè‹¥$$H_2$$ä»ç„¶å†²çªï¼Œåœ¨æ±‚$$H_3$$ä»¥æ­¤ç±»æ¨ã€‚ç›´åˆ°$$H_k$$ä¸å‘ç”Ÿå†²çªä¸ºæ­¢ï¼Œåˆ™$$H_k$$ä¸ºè¯¥è®°å½•åœ¨è¡¨ä¸­çš„æ•£åˆ—åœ°å€ã€‚è¿™ç§æ–¹æ³•åœ¨å¯»æ‰¾â€œä¸‹ä¸€ä¸ªâ€ç©ºçš„æ•£åˆ—åœ°å€æ—¶ï¼ŒåŸæ¥çš„æ•°ç»„ç©ºé—´å¯¹æ‰€æœ‰çš„å…ƒç´ éƒ½æ˜¯å¼€æ”¾çš„ã€‚æ‰€ä»¥ç§°ä¸ºå¼€æ”¾åœ°å€æ³•ã€‚é€šå¸¸æŠŠå¯»æ‰¾â€œä¸‹ä¸€ä¸ªâ€ç©ºä½çš„è¿‡ç¨‹å«åšæ¢æµ‹ï¼Œä¸Šè¿°æ–¹æ³•å¯ç”¨å¦‚ä¸‹å…¬å¼è¡¨ç¤ºï¼šHi=(H(key)+di)%mi=1,2,â‹¯,k(kâ‰¤mâˆ’1)H_i=(H(key)+d_i)\\%m\\quad i=1,2,\\cdots,k(k\\leq m - 1)Hâ€‹iâ€‹â€‹=(H(key)+dâ€‹iâ€‹â€‹)%mi=1,2,â‹¯,k(kâ‰¤mâˆ’1)(1)çº¿æ€§æ¢æµ‹æ³•di=1,2,â‹¯,mâˆ’1d_i=1,2,\\cdots,m-1dâ€‹iâ€‹â€‹=1,2,â‹¯,mâˆ’1è¿™ç§æ¢æµ‹æ–¹æ³•å¯ä»¥å°†æ•£åˆ—è¡¨å‡æƒ³æˆä¸€ä¸ªå¾ªç¯è¡¨ï¼Œå‘ç”Ÿå†²çªæ—¶ï¼Œä»å†²çªåœ°å€çš„ä¸‹ä¸€ä¸ªå•å…ƒé¡ºåºå¯»æ‰¾ç©ºå•å…ƒï¼Œå¦‚æœåˆ°æœ€åä¸€ä¸ªä½ç½®ä¹Ÿæ²¡æ‰¾åˆ°ç©ºå•å…ƒï¼Œåˆ™å›åˆ°è¡¨å¤´å¼€å§‹ç»§ç»­æŸ¥æ‰¾ã€‚ç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªç©ºä½ã€‚å°±æŠŠæ­¤å…ƒç´ æ”¾åœ¨æ­¤ç©ºä½ã€‚å¦‚æœæ‰¾ä¸åˆ°ç©ºä½ï¼Œåˆ™è¯´æ˜æ•£åˆ—è¡¨å·²æ»¡ï¼Œéœ€è¦è¿›è¡Œæº¢å‡ºå¤„ç†ã€‚(2)äºŒæ¬¡æ¢æµ‹æ³•di=12,âˆ’12,22,âˆ’22,32,â‹¯,+k2,âˆ’k2(kâ‰¤m2)d_i=1^2,-1^2,2^2,-2^2,3^2,\\cdots,+k^2,-k^2(k\\leq\\frac{m}{2})dâ€‹iâ€‹â€‹=1â€‹2â€‹â€‹,âˆ’1â€‹2â€‹â€‹,2â€‹2â€‹â€‹,âˆ’2â€‹2â€‹â€‹,3â€‹2â€‹â€‹,â‹¯,+kâ€‹2â€‹â€‹,âˆ’kâ€‹2â€‹â€‹(kâ‰¤â€‹2â€‹â€‹mâ€‹â€‹)ç»“åˆç€çº¿æ€§æ¢æµ‹æ³•æ¥è¯´ï¼Œå†²çªæ—¶ï¼Œå…ˆå¾€å³è¾¹æ‰¾ï¼Œå¦‚æœä¾ç„¶å†²çªå°±ä»å·¦è¾¹å¼€å§‹æ‰¾ã€‚(3)ä¼ªéšæœºæ¢æµ‹æ³•å†²çªæ—¶,$$åŠ ä¸€ä¸ªéšæœºæ•°å†è¿›è¡Œæ¨¡è¿ç®—ä¾‹å¦‚ï¼Œæ•£åˆ—è¡¨çš„é•¿åº¦ä¸º11,æ•£åˆ—å‡½æ•°$$H(key)=key%11$$,å‡è®¾è¡¨ä¸­å·²å¡«æœ‰å…³é”®å­—åˆ†åˆ«ä¸º17ã€60ã€29çš„è®°å½•ã€‚ä¸‹å›¾ï¼Œç°æœ‰å››ä¸ªè®°å½•ï¼Œå…¶å…³é”®å­—ä¸º38ï¼Œç”±æ•£åˆ—å‡½æ•°å¾—åˆ°æ•£åˆ—åœ°å€ä¸º5,äº§ç”Ÿå†²çªã€‚è‹¥ç”¨çº¿æ€§æ¢æµ‹æ³•å¤„ç†æ—¶ï¼Œå¾—åˆ°ä¸‹ä¸€ä¸ªåœ°å€6,ä»ç„¶å†²çªï¼Œåœ¨æ±‚ä¸‹ä¸€ä¸ªåœ°å€7ï¼Œè¿˜æ˜¯å†²çªï¼ŒçŸ¥é“æ•£åˆ—åœ°å€ä¸º8çš„ä½ç½®ï¼Œå®Œæˆæ¢æµ‹è‹¥ç”¨äºŒæ¬¡æ¢æµ‹å‘ï¼Œæ•£åˆ—åœ°å€5å†²çªåï¼Œå¾—åˆ°ä¸‹ä¸€ä¸ªåœ°å€6,è¿˜æ˜¯å†²çªï¼Œå†æ±‚çš„ä¸‹ä¸€ä¸ªåœ°å€æ˜¯4,å®Œæˆæ¢æµ‹è‹¥ä½¿ç”¨ä¼ªéšæœºæ¢æµ‹æ³•ï¼Œå‡è®¾äº§ç”Ÿä¸€çš„ä¼ªéšæœºæ•°ä¸º9,åˆ™è®¡ç®—ä¸‹ä¸€ä¸ªæ•£åˆ—åœ°å€ä¸º$$(5+9)%11=3$$,ç”±äºè„¸å¾ˆå¥½ï¼Œä¸€æ¬¡å°±å®Œæˆæ¢æµ‹ã€‚ä»ä¸Šè¿°çº¿æ€§æ¢æµ‹æ³•çš„å¤„ç†è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç°è±¡ï¼Œå½“è¡¨ä¸­i,i+1,i+2ä½ç½®ä¸Šå·²å¡«æœ‰è®°å½•æ—¶ï¼Œä¸‹ä¸€ä¸ªæ•£åˆ—åœ°å€ä¸ºi,i+1,i+2å’Œi+3çš„è®°å½•éƒ½å°†å¡«å…¥i+3çš„ä½ç½®ï¼Œè¿™ç§åœ¨å¤„ç†å†²çªè¿‡ç¨‹ä¸­å‘ç”Ÿçš„ä¸¤ä¸ªç¬¬ä¸€ä¸ªæ•£åˆ—åœ°å€ä¸åŒçš„è®°å½•äº‰å¤ºåŒä¸€ä¸ªåç»§æ•£åˆ—åœ°å€çš„ç°è±¡ç§°ä½œäºŒæ¬¡èšé›†ï¼ˆæˆ–ç§°ä¸ºå †ç§¯ï¼‰ï¼Œå³åœ¨å¤„ç†åŒä¹‰è¯çš„å†²çªè¿‡ç¨‹ä¸­åˆæ·»åŠ éåŒä¹‰è¯å†²çªã€‚å¯ä»¥çœ‹å‡ºä¸Šè¿°çš„ä¸‰ç§æ–¹æ³•å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œçº¿æ€§æ¢æµ‹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼šåªè¦æ•£åˆ—è¡¨æœªå¡«æ»¡ï¼Œæ€»èƒ½æ‰¾åˆ°ä¸€ä¸ªä¸å‘ç”Ÿå†²çªçš„åœ°å€ã€‚ç¼ºç‚¹æ˜¯ï¼šä¼šäº§ç”ŸäºŒæ¬¡èšé›†ç°è±¡ã€‚äºŒæ¬¡æ¢æµ‹æ³•çš„ä¼˜ç‚¹ï¼šå¯ä»¥é¿å…äºŒæ¬¡èšé›†ã€‚ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼šä¸èƒ½ä¿è¯ä¸€å®šèƒ½æ‰¾åˆ°ä¸å‘ç”Ÿå†²çªçš„åœ°å€ã€‚ é“¾åœ°å€æ³•æ ¸å¿ƒåŸç†ï¼šæŠŠå…·æœ‰ç›¸åŒæ•£åˆ—åœ°å€çš„è®°å½•æ”¾åœ¨åŒä¸€ä¸ªå•é“¾è¡¨ä¸­ï¼Œç§°ä¸ºåŒä¹‰è¯é“¾è¡¨ã€‚æœ‰mä¸ªæ•£åˆ—åœ°å€å°±æœ‰mä¸ªå•é“¾è¡¨,åŒæ—¶ç”¨æ•°ç»„$$HT[0\\cdots m-1]$$å­˜æ”¾å„ä¸ªé“¾è¡¨çš„å¤´æŒ‡é’ˆï¼Œå‡¡æ˜¯æ•£åˆ—è¡¨åœ°å€ä¸ºiçš„è®°å½•éƒ½ä»¥ç»“ç‚¹æ–¹å¼æ’å…¥åˆ°ä»¥$$HT[i]$$ä¸ºå¤´ç»“ç‚¹çš„å•é“¾è¡¨ä¸­ã€‚ä¾‹å¦‚ ä¸€ç»„å…³é”®å­—ä¸º(68,1,14,10,23,27,79,19,20,11,55),è®¾æ•£åˆ—å‡½æ•°ä¸º$$H(key)=key%13$$,ç”¨é“¾è¡¨å¤„ç†åçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå‚è€ƒ: Data Structure (2nd Edition)http://book.knowsky.com/book_1030305.htm","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"yihao.ml/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„/"}],"tags":[]},{"title":"Redis æŒä¹…åŒ–ç­–ç•¥","slug":"2018-09-15-Redisä¸¤ç§æŒä¹…åŒ–æ–¹å¼","date":"2018-09-15T00:00:00.000Z","updated":"2019-11-29T12:20:47.678Z","comments":true,"path":"2018/09/15/2018-09-15-Redisä¸¤ç§æŒä¹…åŒ–æ–¹å¼/","link":"","permalink":"yihao.ml/2018/09/15/2018-09-15-Redisä¸¤ç§æŒä¹…åŒ–æ–¹å¼/","excerpt":"","text":"redisè™½ç„¶æ˜¯ä¸€ä¸ªç¼“å­˜æ•°æ®åº“ï¼Œä½†æ˜¯ä¹Ÿæä¾›äº†æŒä¹…åŒ–æ•°æ®çš„æ–¹æ³•ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼ŒAOFå’ŒRDB AOF å’Œ RDBAOF è®°å½•serveræ”¶åˆ°çš„å†™æ“ä½œåˆ°æ—¥å¿—æ–‡ä»¶ï¼Œåœ¨serveré‡å¯æ—¶é€šè¿‡å›æ”¾è¿™äº›å†™æ“ä½œè±é‡å»ºæ•°æ®é›†ã€‚RDB æŒ‰ç…§ä¸€å®šæ—¶é—´é—´éš”å¯¹æ•°æ®é›†åˆ›å»ºåŸºäºæ—¶é—´ç‚¹çš„å¿«ç…§ AOF é…ç½®æ–¹æ³•ä¿®æ”¹redis.config é…ç½®æ–‡ä»¶,æ‰¾åˆ°appendonlyã€‚é»˜è®¤æ˜¯appendonly no,å¦‚æœè¦å¯åŠ¨éœ€è¦æ”¹æˆappendonly yesæŠŠappendfsyncçš„å€¼æ”¹æˆeverysecå‚æ•°å¤‡æ³¨appendfsync alwaysæ¯æ¬¡æ”¶åˆ°å†™å‘½ä»¤å°±ç«‹å³å¼ºåˆ¶å†™å…¥ç£ç›˜ï¼Œæœ€æ…¢çš„ã€‚appendfsync everysecæ¯ç§’ä¸­å¼ºåˆ¶å†™å…¥ç£ç›˜ä¸€æ¬¡åœ¨æ€§èƒ½å’ŒæŒä¹…åŒ–æ–¹é¢åšçš„æœ€å¥½appendfsync noæ€§èƒ½æœ€å¥½ï¼ŒæŒä¹…åŒ–æ²¡ä¿è¯ RDB é…ç½®æ–¹æ³•é»˜è®¤æƒ…å†µä¸‹ï¼Œredisä¿å­˜æ•°æ®é›†å¿«ç…§åˆ°ç£ç›˜ï¼Œåå­—ä¸ºdump.rdbçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥è®¾ç½®è®©redis N ç§’ä¹‹å†…è‡³å°‘ Mæ¬¡æ•°æ®æ”¹åŠ¨æ—¶è¿›è¡ŒæŒä¹…åŒ–ã€‚æˆ–è€…å¯ä»¥æ‰‹åŠ¨è°ƒç”¨saveæˆ–è€…bgsaveå‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢é…ç½®ä¼šè®©redisæ¯60så†…è‡³å°‘å†™å…¥1000æ¬¡æ—¶è‡ªåŠ¨è½¬å­˜æ•°æ®é›†åˆ°ç£ç›˜save 60 1000","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"yihao.ml/tags/Redis/"}]},{"title":"Redisé›†ç¾¤éƒ¨ç½²","slug":"2018-09-15-Redisé›†ç¾¤éƒ¨ç½²","date":"2018-09-15T00:00:00.000Z","updated":"2019-11-29T12:20:47.678Z","comments":true,"path":"2018/09/15/2018-09-15-Redisé›†ç¾¤éƒ¨ç½²/","link":"","permalink":"yihao.ml/2018/09/15/2018-09-15-Redisé›†ç¾¤éƒ¨ç½²/","excerpt":"","text":"redis æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„&lt;K,V&gt;åˆ†å¸ƒå¼ç¼“å­˜æ•°æ®åº“ã€‚å‚è€ƒåšå®¢http://blog.csdn.net/myrainblues/article/details/25881535 å®‰è£…Redis3é›†ç¾¤ï¼ˆ3å°Linux storm1,storm2,storm3ï¼‰1.ä¸‹è½½redisçš„ç¨³å®šç‰ˆæœ¬ä¸‹è½½åœ°å€http://download.redis.io/releases/éœ€è¦æ³¨æ„çš„æ˜¯redisç‰ˆæœ¬ä¸€å®šè¦åœ¨3.xä»¥ä¸Šï¼Œä¸ç„¶ä¸æ”¯æŒé›†ç¾¤2.ä¸Šä¼ redisåˆ°æœåŠ¡å™¨1for n in &#123;1..5&#125;; do scp redis-4.0.11.tar.gz zyh@cor$n:/usr/local/src/; done3.è§£å‹12$ tar -zxvf redis-4.0.11.tar.gz -C ./éœ€è¦æ³¨æ„çš„æ˜¯åœ¨æ“ä½œä¹‹å‰ä¸€å®šè¦ä¿è¯æƒé™æ­£ç¡®4.è¿›å…¥åˆ°æºç åŒ…ä¸­ï¼Œç¼–è¯‘å¹¶å®‰è£…redis123cd /usr/local/src/redis-3.0.7/make &amp;&amp; make installè¿›å…¥/usr/local/bin æŸ¥çœ‹å®‰è£…åçš„ç»“æœè§£é‡Šä¸€ä¸‹åç»­æ¯”è¾ƒå…³é”®çš„å‡ ä¸ªå‘½ä»¤åç§°ä½œç”¨å¤‡æ³¨redis-serverå¯åŠ¨redisæœåŠ¡redis-cliå¯åŠ¨å®¢æˆ·ç«¯redis-trib.rbå¯åŠ¨redis-clusteréœ€è¦rubyçš„æ”¯æŒæ‰èƒ½ç”¨ï¼Œæ–‡ä»¶å­˜æ”¾åœ¨/redis/src/ç›®å½•ä¸‹makeç¼–è¯‘éœ€è¦GCCçš„æ”¯æŒ,redis-tribå·¥å…·åˆ™éœ€è¦rubyå’Œgemçš„æ”¯æŒ,ä¸‹é¢è¯´ä¸€ä¸‹rubyå’Œgemçš„å®‰è£…5.å®‰è£…æ‰€æœ‰ä¾èµ–å®‰è£…gcc1yum -y install gccå®‰è£…rubyå’Œgem1yum -y install ruby rubygemsä½¿ç”¨gemä¸‹è½½redisé›†ç¾¤çš„é…ç½®è„šæœ¬1gem install redisgem installçš„å®‰è£…åŒ…ä¼šæ”¾åœ¨/usr/lib/ruby/gems/1.8/cacheç›®å½•ä¸‹å¦‚æœé‡åˆ°redis requires Ruby version &gt;= 2.2.2çš„é—®é¢˜è§£å†³æ–¹æ¡ˆ:https://www.jianshu.com/p/0a5de7dc0254åŸå› æ˜¯Rubyçš„ç‰ˆæœ¬å¤ªä½ï¼Œåªè¦å‡çº§Rubyçš„ç‰ˆæœ¬å³å¯ã€‚è¿™è¾¹ç§»é™¤ruby 2.0.0ç‰ˆæœ¬ï¼Œé‡æ–°å®‰è£… 2.3.3ç‰ˆæœ¬å³å¯è§£å†³é—®é¢˜å¦‚æœredisæ‰€åœ¨æœåŠ¡å™¨ä¸èƒ½ä¸Šç½‘æ€ä¹ˆåŠ?æ¯”å¦‚æƒ³è¦å°†ä¸‹è½½å¥½çš„redis-3.2.2.gemæ‹·è´åˆ°å…¶ä»–æœåŠ¡å™¨ï¼Œæ‰‹åŠ¨å®‰è£…å³å¯shell cd /usr/lib/ruby/gems/1.8/cache for n in {2..6}; do scp redis-3.2.2.gem 192.168.0.3$n:$PWD; doneåœ¨éœ€è¦å®‰è£…çš„æœºå™¨ä¸Šæ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…1gem install --local /usr/lib/ruby/gems/1.8/cache/redis-3.2.2.gem7.éƒ¨ç½²storm2å’Œstorm3ç”¨åŒæ ·çš„æ–¹å¼åœ¨å…¶ä»–çš„æœºå™¨ä¸Šç¼–è¯‘å®‰è£…redis8.ä¿®æ”¹æ‰€æœ‰æœºå™¨çš„é…ç½®æ–‡ä»¶redis.conf1234567port 6379 #ç«¯å£pidfile /var/run/redis-6379.pid daemonize yescluster-enabled yesappendonly yesappendfsync no #AOF ç­–ç•¥ï¼Œå‚è€ƒä¸Šç¯‡åšå®¢bind $&#123;host&#125;9.å¯åŠ¨æ‰€æœ‰æœºå™¨ä¸Šçš„redisèŠ‚ç‚¹1redis-server /etc/redis.conf10.ä½¿ç”¨redis-tribé…ç½®redisé›†ç¾¤12cd /usr/local/src/redis-4.0.11/src/sudo cp /usr/local/src/redis-4.0.11/src/redis-trib.rb /usr/local/bin/æ£€æŸ¥é˜²ç«å¢™ï¼Œå¦‚æœå¼€å¯éœ€è¦å…³é—­1service iptables statusä½¿ç”¨redis-trib.rbé›†ç¾¤æ„å»ºå·¥å…·å¯åŠ¨é›†ç¾¤1redis-trib.rb create --replicas 0 192.168.1.19:6379 192.168.1.20:6379 192.168.1.21:6379é‡åˆ° Can I set the above configuration? (type â€˜yesâ€™ to accept):è¾“å…¥yeså›è½¦å³å¯è¿™è¾¹è¿è¡Œä»¥åæŠ¥äº†ä¸ªé”™è¯¯ERR Slot 0 is already busy (Redis::CommandError)åŸå› æ˜¯å› ä¸ºä¹‹å‰æˆ‘å·²ç»é…ç½®è¿‡ä¸€æ¬¡ï¼Œå†æ¬¡ä½¿ç”¨å°±ä¼šå‡ºç°slot 0è¢«å ç”¨çš„ç»“æœï¼Œç”¨redis-cli ç™»å½•åˆ°æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œ flushall å’Œ cluster reset å°±å¯ä»¥äº†ã€‚åšå®¢:https://blog.csdn.net/xiaojin21cen/article/details/70445545å¯åŠ¨æˆåŠŸå:11.æµ‹è¯•åœ¨storm1èŠ‚ç‚¹ä¸Šsetä¸€ä¸ªå€¼ï¼Œåœ¨storm2ä¸ŠæŸ¥çœ‹å€¼,storm1çš„ip 192.168.1.19 ;storm2çš„ ip 192.168.1.2012redis-cli -h storm1 -p 6379set zyh zyhåœ¨storm2ä¸ŠæŸ¥çœ‹12redis-cli -h storm2 -p 6379get zyhæŠ¥äº†é”™è¯¯:(error) MOVED 166 192.168.1.19:6379è§£å†³åŠæ³•:åœ¨é“¾æ¥å®¢æˆ·ç«¯æ—¶å¸¦ä¸Š-cå‚æ•°,å‚è€ƒhttps://www.oschina.net/question/1259683_21339541redis-cli -c -h storm2 -p 6379","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"yihao.ml/tags/Redis/"}]},{"title":"ArrayList æºç åˆ¨æ","slug":"2018-09-14-ArrayListæºç åˆ¨æ","date":"2018-09-14T00:00:00.000Z","updated":"2019-11-29T12:20:47.677Z","comments":true,"path":"2018/09/14/2018-09-14-ArrayListæºç åˆ¨æ/","link":"","permalink":"yihao.ml/2018/09/14/2018-09-14-ArrayListæºç åˆ¨æ/","excerpt":"","text":"ArrayListæ˜¯Listçš„æ˜¯ä¸€ä¸ªå®ç°ï¼Œæ˜¯ä¸€ä¸ªé¡ºåºå®¹å™¨ï¼Œæ·»åŠ çš„æ—¶å€™å¦‚æœå®¹å™¨ä¸å¤Ÿï¼Œä¼šè‡ªåŠ¨æ‰©å®¹ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ArrayListæ˜¯ä¸åŒä¸å¾—ï¼Œå¦‚æœæƒ³åŒæ­¥å¯ä»¥è‡ªå·±æ‰‹åŠ¨å®ç°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Vectorã€‚ArrayListåº•å±‚ä½¿ç”¨çš„æ˜¯æ•°ç»„ã€‚åœ¨æºç ä¸­å¯ä»¥çœ‹åˆ°transient Object[] elementData;è¢«transientä¿®é¥°çš„å˜é‡ä¼šè¢«ç¦æ­¢åºåˆ—åŒ– æºç è¿½è¸ª set()ç®€æ˜ç›´æ„ï¼Œå°†element æ”¾åˆ°indexä½ç½®set(),è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯elementData[index] = element;èµ‹å€¼çš„æ˜¯å¼•ç”¨,å°†elementçš„å¼•ç”¨ç»™äº†elemntData[index]123456789public E set(int index, E element) &#123; // æ£€æŸ¥ç´¢å¼• rangeCheck(index); E oldValue = elementData(index); elementData[index] = element; // è¿™é‡Œèµ‹å€¼çš„æ˜¯å¼•ç”¨ return oldValue;&#125; get()è·å–indexä½ç½®çš„å…ƒç´ 12345public E get(int index) &#123; rangeCheck(index); return (E)elementData(index); &#125; add()æ·»åŠ çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œadd(E e)å’Œadd(int index, E element)ï¼Œä¸¤ä¸ªæ–¹æ³•åº•å±‚éƒ½æ˜¯å¾€æ•°ç»„ä¸­æ·»åŠ å…ƒç´ 123456789101112131415public boolean add(E e) &#123; ensureCapacityInternal(size + 1); elementData[size++] = e; return true;&#125;public void add(int index, E element) &#123; rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!! System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++;&#125;åœ¨æ·»åŠ æ—¶å¦‚æœç©ºé—´ä¸å¤Ÿä¼šä½¿ç”¨è°ƒç”¨è¿›è¡Œæ‰©å®¹ï¼Œ grow(minCapacity)12345678910private void grow(int minCapacity) &#123; int oldCapacity = elementData.length; int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); // æ‹“å±•ç©ºé—´ä¸ºåŸæ¥çš„1.5å€ if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); // elementData = Arrays.copyOf(elementData, newCapacity); // æ‹“å±•ç©ºé—´å®Œæˆå¤åˆ¶&#125; remove()1234567891011121314public E remove(int index) &#123; rangeCheck(index); modCount++; E oldValue = elementData(index); int numMoved = size - index - 1; if (numMoved &gt; 0) System.arraycopy(elementData, index+1, elementData, index, numMoved); elementData[--size] = null; // è®©GC è¿›è¡Œåƒåœ¾å›æ”¶ return oldValue;&#125;","categories":[{"name":"ç¼–ç¨‹è¯­è¨€","slug":"ç¼–ç¨‹è¯­è¨€","permalink":"yihao.ml/categories/ç¼–ç¨‹è¯­è¨€/"}],"tags":[{"name":"Java","slug":"Java","permalink":"yihao.ml/tags/Java/"}]},{"title":"springbooté›†æˆredis","slug":"2018-09-9-springboot é›†æˆredis","date":"2018-09-09T00:00:00.000Z","updated":"2019-11-29T12:20:47.683Z","comments":true,"path":"2018/09/09/2018-09-9-springboot é›†æˆredis/","link":"","permalink":"yihao.ml/2018/09/09/2018-09-9-springboot é›†æˆredis/","excerpt":"","text":"æ•´åˆredisåˆ°springboot 1.åœ¨pomä¸­é…ç½®redisçš„ç›¸å…³ä¾èµ–åŒ…ï¼š12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-redis&lt;/artifactId&gt; &lt;version&gt;1.3.8.RELEASE&lt;/version&gt;&lt;/dependency&gt; 2.application.yml12345678910spring: redis: host: 127.0.0.1 port: 6379 password: pass1234 pool: max-active: 100 max-idle: 10 max-wait: 100000 timeout: 0 3. ç¼–å†™RedisConfig.java123456789101112131415161718192021222324252627282930@Configuration@EnableAutoConfigurationpublic class RedisConfig &#123; @Bean @ConfigurationProperties(prefix = \"spring.redis.pool\") public JedisPoolConfig getRedisConfig()&#123; JedisPoolConfig config = new JedisPoolConfig(); return config; &#125; @Bean @ConfigurationProperties(prefix = \"spring.redis\") public JedisConnectionFactory getConnectionFactory() &#123; JedisConnectionFactory factory = new JedisConnectionFactory(); factory.setUsePool(true); JedisPoolConfig config = getRedisConfig(); factory.setPoolConfig(config); return factory; &#125; @Bean public RedisTemplate&lt;?, ?&gt; getRedisTemplate() &#123; JedisConnectionFactory factory = getConnectionFactory(); RedisTemplate&lt;?, ?&gt; template = new StringRedisTemplate(factory); return template; &#125;&#125; 4.RedisService.java12345678910111213141516171819202122232425262728293031323334public interface RedisService &#123; /** * setå­˜æ•°æ® * @param key * @param value * @return */ boolean set(String key, String value); /** * getè·å–æ•°æ® * @param key * @return */ String get(String key); /** * è®¾ç½®æœ‰æ•ˆå¤©æ•° * @param key * @param expire * @return */ boolean expire(String key, long expire); /** * ç§»é™¤æ•°æ® * @param key * @return */ boolean remove(String key);&#125; 5.RedisServiceImpl.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051@Service(\"redisService\")public class RedisServiceImpl implements RedisService &#123; @Resource private RedisTemplate&lt;String, ?&gt; redisTemplate; @Override public boolean set(final String key, final String value) &#123; boolean result = redisTemplate.execute(new RedisCallback&lt;Boolean&gt;() &#123; @Override public Boolean doInRedis(RedisConnection connection) throws DataAccessException &#123; RedisSerializer&lt;String&gt; serializer = redisTemplate.getStringSerializer(); connection.set(serializer.serialize(key), serializer.serialize(value)); return true; &#125; &#125;); return result; &#125; @Override public String get(final String key) &#123; String result = redisTemplate.execute(new RedisCallback&lt;String&gt;() &#123; @Override public String doInRedis(RedisConnection connection) throws DataAccessException &#123; RedisSerializer&lt;String&gt; serializer = redisTemplate.getStringSerializer(); byte[] value = connection.get(serializer.serialize(key)); return serializer.deserialize(value); &#125; &#125;); return result; &#125; @Override public boolean expire(final String key, long expire) &#123; return redisTemplate.expire(key, expire, TimeUnit.SECONDS); &#125; @Override public boolean remove(final String key) &#123; boolean result = redisTemplate.execute(new RedisCallback&lt;Boolean&gt;() &#123; @Override public Boolean doInRedis(RedisConnection connection) throws DataAccessException &#123; RedisSerializer&lt;String&gt; serializer = redisTemplate.getStringSerializer(); connection.del(key.getBytes()); return true; &#125; &#125;); return result; &#125;&#125;","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"yihao.ml/tags/Spring/"}]},{"title":"springboot å¿«é€Ÿåº”ç”¨","slug":"2018-09-9-springboot å¿«é€Ÿåº”ç”¨","date":"2018-09-09T00:00:00.000Z","updated":"2019-11-29T12:20:47.682Z","comments":true,"path":"2018/09/09/2018-09-9-springboot å¿«é€Ÿåº”ç”¨/","link":"","permalink":"yihao.ml/2018/09/09/2018-09-9-springboot å¿«é€Ÿåº”ç”¨/","excerpt":"","text":"æ•´åˆspringboot Mybatiså¿«é€Ÿåº”ç”¨ï¼Œæ•´ç†å‡ºæ¥æ–¹ä¾¿åæœŸå¿«é€ŸæŸ¥è¯¢ä½¿ç”¨ã€‚ é¢å¤–åŠŸèƒ½PageHelper åˆ†é¡µæ’ä»¶mybatis generator è‡ªåŠ¨ç”Ÿæˆä»£ç æ’ä»¶ æ­¥éª¤ 1.åˆ›å»ºä¸€ä¸ªspringbooté¡¹ç›®ï¼š 2.åˆ›å»ºé¡¹ç›®çš„æ–‡ä»¶ç»“æ„ä»¥åŠjdkçš„ç‰ˆæœ¬ 3.é€‰æ‹©é¡¹ç›®æ‰€éœ€è¦çš„ä¾èµ–ç„¶åç‚¹å‡»finish 5.çœ‹ä¸€ä¸‹æ–‡ä»¶çš„ç»“æ„ï¼š 6.æŸ¥çœ‹ä¸€ä¸‹pom.xmlï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.winter&lt;/groupId&gt; &lt;artifactId&gt;springboot-mybatis-demo&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;springboot-mybatis-demo&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.6.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.7&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.3.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.35&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-core&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt; &lt;artifactId&gt;jackson-datatype-joda&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt; &lt;artifactId&gt;jackson-module-parameter-names&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- åˆ†é¡µæ’ä»¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt; &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.2&lt;/version&gt; &lt;/dependency&gt; &lt;!-- alibabaçš„druidæ•°æ®åº“è¿æ¥æ±  --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.0&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;!-- mybatis generator è‡ªåŠ¨ç”Ÿæˆä»£ç æ’ä»¶ --&gt; &lt;plugin&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt; &lt;configuration&gt; &lt;configurationFile&gt;$&#123;basedir&#125;/src/main/resources/generator/generatorConfig.xml&lt;/configurationFile&gt; &lt;overwrite&gt;true&lt;/overwrite&gt; &lt;verbose&gt;true&lt;/verbose&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; 7.é¡¹ç›®ä¸ä½¿ç”¨application.propertiesæ–‡ä»¶ è€Œä½¿ç”¨æ›´åŠ ç®€æ´çš„application.ymlæ–‡ä»¶ï¼šå°†åŸæœ‰çš„resourceæ–‡ä»¶å¤¹ä¸‹çš„application.propertiesæ–‡ä»¶åˆ é™¤ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„application.ymlé…ç½®æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637server: port: 8080spring: datasource: name: test url: jdbc:mysql://127.0.0.1:3306/depot username: root password: root # ä½¿ç”¨druidæ•°æ®æº type: com.alibaba.druid.pool.DruidDataSource driver-class-name: com.mysql.jdbc.Driver filters: stat maxActive: 20 initialSize: 1 maxWait: 60000 minIdle: 1 timeBetweenEvictionRunsMillis: 60000 minEvictableIdleTimeMillis: 300000 validationQuery: select 'x' testWhileIdle: true testOnBorrow: false testOnReturn: false poolPreparedStatements: true maxOpenPreparedStatements: 20## è¯¥é…ç½®èŠ‚ç‚¹ä¸ºç‹¬ç«‹çš„èŠ‚ç‚¹ï¼Œæœ‰å¾ˆå¤šåŒå­¦å®¹æ˜“å°†è¿™ä¸ªé…ç½®æ”¾åœ¨springçš„èŠ‚ç‚¹ä¸‹ï¼Œå¯¼è‡´é…ç½®æ— æ³•è¢«è¯†åˆ«mybatis: mapper-locations: classpath:mapping/*.xml #æ³¨æ„ï¼šä¸€å®šè¦å¯¹åº”mapperæ˜ å°„xmlæ–‡ä»¶çš„æ‰€åœ¨è·¯å¾„ type-aliases-package: com.winter.model # æ³¨æ„ï¼šå¯¹åº”å®ä½“ç±»çš„è·¯å¾„#pagehelperåˆ†é¡µæ’ä»¶pagehelper: helperDialect: mysql reasonable: true supportMethodsArguments: true params: count=countSql 8.åˆ›å»ºæ•°æ®åº“ï¼š123456789CREATE DATABASE mytest;CREATE TABLE t_user( user_id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, user_name VARCHAR(255) NOT NULL , password VARCHAR(255) NOT NULL , phone VARCHAR(255) NOT NULL) ENGINE=INNODB AUTO_INCREMENT=1000 DEFAULT CHARSET=utf8; 9.ä½¿ç”¨mybatis generator è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼šé…ç½®pom.xmlä¸­generator æ’ä»¶æ‰€å¯¹åº”çš„é…ç½®æ–‡ä»¶ ${basedir}/src/main/resources/generator/generatorConfig.xml123456789101112131415161718192021222324252627282930313233343536&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;!DOCTYPE generatorConfiguration PUBLIC \"-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN\" \"http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd\"&gt;&lt;generatorConfiguration&gt; &lt;!-- æ•°æ®åº“é©±åŠ¨:é€‰æ‹©ä½ çš„æœ¬åœ°ç¡¬ç›˜ä¸Šé¢çš„æ•°æ®åº“é©±åŠ¨åŒ…--&gt; &lt;classPathEntry location=\"E:\\developer\\mybatis-generator-core-1.3.2\\lib\\mysql-connector-java-5.1.25-bin.jar\"/&gt; &lt;context id=\"DB2Tables\" targetRuntime=\"MyBatis3\"&gt; &lt;commentGenerator&gt; &lt;property name=\"suppressDate\" value=\"true\"/&gt; &lt;!-- æ˜¯å¦å»é™¤è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Š trueï¼šæ˜¯ ï¼š false:å¦ --&gt; &lt;property name=\"suppressAllComments\" value=\"true\"/&gt; &lt;/commentGenerator&gt; &lt;!--æ•°æ®åº“é“¾æ¥URLï¼Œç”¨æˆ·åã€å¯†ç  --&gt; &lt;jdbcConnection driverClass=\"com.mysql.jdbc.Driver\" connectionURL=\"jdbc:mysql://127.0.0.1/mytest\" userId=\"root\" password=\"root\"&gt; &lt;/jdbcConnection&gt; &lt;javaTypeResolver&gt; &lt;property name=\"forceBigDecimals\" value=\"false\"/&gt; &lt;/javaTypeResolver&gt; &lt;!-- ç”Ÿæˆæ¨¡å‹çš„åŒ…åå’Œä½ç½®--&gt; &lt;javaModelGenerator targetPackage=\"com.winter.model\" targetProject=\"src/main/java\"&gt; &lt;property name=\"enableSubPackages\" value=\"true\"/&gt; &lt;property name=\"trimStrings\" value=\"true\"/&gt; &lt;/javaModelGenerator&gt; &lt;!-- ç”Ÿæˆæ˜ å°„æ–‡ä»¶çš„åŒ…åå’Œä½ç½®--&gt; &lt;sqlMapGenerator targetPackage=\"mapping\" targetProject=\"src/main/resources\"&gt; &lt;property name=\"enableSubPackages\" value=\"true\"/&gt; &lt;/sqlMapGenerator&gt; &lt;!-- ç”ŸæˆDAOçš„åŒ…åå’Œä½ç½®--&gt; &lt;javaClientGenerator type=\"XMLMAPPER\" targetPackage=\"com.winter.mapper\" targetProject=\"src/main/java\"&gt; &lt;property name=\"enableSubPackages\" value=\"true\"/&gt; &lt;/javaClientGenerator&gt; &lt;!-- è¦ç”Ÿæˆçš„è¡¨ tableNameæ˜¯æ•°æ®åº“ä¸­çš„è¡¨åæˆ–è§†å›¾å domainObjectNameæ˜¯å®ä½“ç±»å--&gt; &lt;table tableName=\"t_user\" domainObjectName=\"User\" enableCountByExample=\"false\" enableUpdateByExample=\"false\" enableDeleteByExample=\"false\" enableSelectByExample=\"false\" selectByExampleQueryId=\"false\"&gt;&lt;/table&gt; &lt;/context&gt;&lt;/generatorConfiguration&gt;ç‚¹å‡»run-Edit Configurationsæ·»åŠ é…ç½®è¿è¡Œ ,åŒä¸€å¼ è¡¨ä¸€å®šä¸è¦è¿è¡Œå¤šæ¬¡ï¼Œå› ä¸ºmapperçš„æ˜ å°„æ–‡ä»¶ä¸­ä¼šç”Ÿæˆå¤šæ¬¡çš„ä»£ç ï¼Œå¯¼è‡´æŠ¥é”™æœ€åç”Ÿæˆçš„æ–‡ä»¶ä»¥åŠç»“æ„ï¼š 10. ç”Ÿæˆçš„æ–‡ä»¶UserMapper.java12345678910111213141516171819package com.winter.mapper;import com.winter.model.User;public interface UserMapper &#123; int deleteByPrimaryKey(Integer userId); int insert(User record); int insertSelective(User record); User selectByPrimaryKey(Integer userId); int updateByPrimaryKeySelective(User record); int updateByPrimaryKey(User record); //è¿™ä¸ªæ–¹å¼æˆ‘è‡ªå·±åŠ çš„ List&lt;User&gt; selectAllUser();&#125;User.java12345678910111213141516171819202122232425262728293031323334353637383940414243package com.winter.model;public class User &#123; private Integer userId; private String userName; private String password; private String phone; public Integer getUserId() &#123; return userId; &#125; public void setUserId(Integer userId) &#123; this.userId = userId; &#125; public String getUserName() &#123; return userName; &#125; public void setUserName(String userName) &#123; this.userName = userName == null ? null : userName.trim(); &#125; public String getPassword() &#123; return password; &#125; public void setPassword(String password) &#123; this.password = password == null ? null : password.trim(); &#125; public String getPhone() &#123; return phone; &#125; public void setPhone(String phone) &#123; this.phone = phone == null ? null : phone.trim(); &#125;&#125;UserMapper.xml12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\" &gt;&lt;mapper namespace=\"com.winter.mapper.UserMapper\" &gt; &lt;resultMap id=\"BaseResultMap\" type=\"com.winter.model.User\" &gt; &lt;id column=\"user_id\" property=\"userId\" jdbcType=\"INTEGER\" /&gt; &lt;result column=\"user_name\" property=\"userName\" jdbcType=\"VARCHAR\" /&gt; &lt;result column=\"password\" property=\"password\" jdbcType=\"VARCHAR\" /&gt; &lt;result column=\"phone\" property=\"phone\" jdbcType=\"VARCHAR\" /&gt; &lt;/resultMap&gt; &lt;sql id=\"Base_Column_List\" &gt; user_id, user_name, password, phone &lt;/sql&gt; &lt;select id=\"selectByPrimaryKey\" resultMap=\"BaseResultMap\" parameterType=\"java.lang.Integer\" &gt; select &lt;include refid=\"Base_Column_List\" /&gt; from t_user where user_id = #&#123;userId,jdbcType=INTEGER&#125; &lt;/select&gt; &lt;!-- è¿™ä¸ªæ–¹æ³•æ˜¯æˆ‘è‡ªå·±åŠ çš„ --&gt; &lt;select id=\"selectAllUser\" resultMap=\"BaseResultMap\"&gt; select &lt;include refid=\"Base_Column_List\" /&gt; from t_user &lt;/select&gt; &lt;delete id=\"deleteByPrimaryKey\" parameterType=\"java.lang.Integer\" &gt; delete from t_user where user_id = #&#123;userId,jdbcType=INTEGER&#125; &lt;/delete&gt; &lt;insert id=\"insert\" parameterType=\"com.winter.model.User\" &gt; insert into t_user (user_id, user_name, password, phone) values (#&#123;userId,jdbcType=INTEGER&#125;, #&#123;userName,jdbcType=VARCHAR&#125;, #&#123;password,jdbcType=VARCHAR&#125;, #&#123;phone,jdbcType=VARCHAR&#125;) &lt;/insert&gt; &lt;insert id=\"insertSelective\" parameterType=\"com.winter.model.User\" &gt; insert into t_user &lt;trim prefix=\"(\" suffix=\")\" suffixOverrides=\",\" &gt; &lt;if test=\"userId != null\" &gt; user_id, &lt;/if&gt; &lt;if test=\"userName != null\" &gt; user_name, &lt;/if&gt; &lt;if test=\"password != null\" &gt; password, &lt;/if&gt; &lt;if test=\"phone != null\" &gt; phone, &lt;/if&gt; &lt;/trim&gt; &lt;trim prefix=\"values (\" suffix=\")\" suffixOverrides=\",\" &gt; &lt;if test=\"userId != null\" &gt; #&#123;userId,jdbcType=INTEGER&#125;, &lt;/if&gt; &lt;if test=\"userName != null\" &gt; #&#123;userName,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test=\"password != null\" &gt; #&#123;password,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test=\"phone != null\" &gt; #&#123;phone,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;/trim&gt; &lt;/insert&gt; &lt;update id=\"updateByPrimaryKeySelective\" parameterType=\"com.winter.model.User\" &gt; update t_user &lt;set &gt; &lt;if test=\"userName != null\" &gt; user_name = #&#123;userName,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test=\"password != null\" &gt; password = #&#123;password,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test=\"phone != null\" &gt; phone = #&#123;phone,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;/set&gt; where user_id = #&#123;userId,jdbcType=INTEGER&#125; &lt;/update&gt; &lt;update id=\"updateByPrimaryKey\" parameterType=\"com.winter.model.User\" &gt; update t_user set user_name = #&#123;userName,jdbcType=VARCHAR&#125;, password = #&#123;password,jdbcType=VARCHAR&#125;, phone = #&#123;phone,jdbcType=VARCHAR&#125; where user_id = #&#123;userId,jdbcType=INTEGER&#125; &lt;/update&gt;&lt;/mapper&gt; 11.æ‰“å¼€ç±»SpringbootMybatisDemoApplication.javaï¼Œè¿™ä¸ªæ˜¯springbootçš„å¯åŠ¨ç±»ã€‚æˆ‘ä»¬éœ€è¦æ·»åŠ ç‚¹ä¸œè¥¿ï¼š123456789101112131415package com.winter;import org.mybatis.spring.annotation.MapperScan;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@SpringBootApplication@MapperScan(\"com.winter.mapper\")//å°†é¡¹ç›®ä¸­å¯¹åº”çš„mapperç±»çš„è·¯å¾„åŠ è¿›æ¥å°±å¯ä»¥äº†public class SpringbootMybatisDemoApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringbootMybatisDemoApplication.class, args); &#125;&#125;æ³¨æ„ï¼šä¸€å®šè¦è®°å¾—åŠ @MapperScan 12.åˆ°è¿™é‡Œæ‰€æœ‰çš„æ­å»ºå·¥ä½œéƒ½å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æµ‹è¯•çš„å·¥ä½œï¼Œæ²¡ä½¿ç”¨junit4è¿›è¡Œæµ‹è¯•ï¼šé¦–å…ˆçœ‹ä¸€ä¸‹å®Œæˆä¹‹åçš„æ–‡ä»¶çš„ç»“æ„ç¼–å†™UserController.java123456789101112131415161718192021222324252627282930313233package com.winter.Controller;import com.winter.model.User;import com.winter.service.UserService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;/** * Created by Administrator on 2017/8/16. */@Controller@RequestMapping(value = \"/user\")public class UserController &#123; @Autowired private UserService userService; @ResponseBody @RequestMapping(value = \"/add\", produces = &#123;\"application/json;charset=UTF-8\"&#125;) public int addUser(User user)&#123; return userService.addUser(user); &#125; @ResponseBody @RequestMapping(value = \"/all/&#123;pageNum&#125;/&#123;pageSize&#125;\", produces = &#123;\"application/json;charset=UTF-8\"&#125;) public Object findAllUser(@PathVariable(\"pageNum\") int pageNum, @PathVariable(\"pageSize\") int pageSize)&#123; return userService.findAllUser(pageNum,pageSize); &#125;&#125;ç¼–å†™UserService.java123456789101112131415package com.winter.service;import com.winter.model.User;import java.util.List;/** * Created by Administrator on 2017/8/16. */public interface UserService &#123; int addUser(User user); List&lt;User&gt; findAllUser(int pageNum, int pageSize);&#125;ç¼–å†™UserServiceImpl.java123456789101112131415161718192021222324252627282930313233343536373839package com.winter.service.impl;import com.github.pagehelper.PageHelper;import com.winter.mapper.UserMapper;import com.winter.model.User;import com.winter.service.UserService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.List;/** * Created by Administrator on 2017/8/16. */@Service(value = \"userService\")public class UserServiceImpl implements UserService &#123; @Autowired private UserMapper userMapper;//è¿™é‡Œä¼šæŠ¥é”™ï¼Œä½†æ˜¯å¹¶ä¸ä¼šå½±å“ @Override public int addUser(User user) &#123; return userMapper.insertSelective(user); &#125; /* * è¿™ä¸ªæ–¹æ³•ä¸­ç”¨åˆ°äº†æˆ‘ä»¬å¼€å¤´é…ç½®ä¾èµ–çš„åˆ†é¡µæ’ä»¶pagehelper * å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨serviceå±‚ä¼ å…¥å‚æ•°ï¼Œç„¶åå°†å‚æ•°ä¼ é€’ç»™ä¸€ä¸ªæ’ä»¶çš„ä¸€ä¸ªé™æ€æ–¹æ³•å³å¯ï¼› * pageNum å¼€å§‹é¡µæ•° * pageSize æ¯é¡µæ˜¾ç¤ºçš„æ•°æ®æ¡æ•° * */ @Override public List&lt;User&gt; findAllUser(int pageNum, int pageSize) &#123; //å°†å‚æ•°ä¼ ç»™è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥å®ç°ç‰©ç†åˆ†é¡µäº†ï¼Œéå¸¸ç®€å•ã€‚ PageHelper.startPage(pageNum, pageSize); return userMapper.selectAllUser(); &#125;&#125; 13.è¿è¡Œmainæ–¹æ³•ä½¿ç”¨postmanæµ‹è¯•æ·»åŠ ç”¨æˆ·æŸ¥è¯¢æ¥å£ä¸åšæ¼”ç¤ºè®¿é—®localhost:8080/user/all/1/2è‡³æ­¤springboot æ•´åˆmybatiså°±å®Œæˆäº†ã€‚æ„Ÿè°¢åšä¸»çš„åˆ†äº«,ä¼ é€é—¨","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"yihao.ml/tags/Spring/"}]},{"title":"è…¾è®¯TCaptchaæ»‘å—éªŒè¯ç é›†æˆ","slug":"2018-09-06-è…¾è®¯TCaptchaæ»‘å—éªŒè¯ç é›†æˆ","date":"2018-09-06T00:00:00.000Z","updated":"2019-11-29T12:20:47.677Z","comments":true,"path":"2018/09/06/2018-09-06-è…¾è®¯TCaptchaæ»‘å—éªŒè¯ç é›†æˆ/","link":"","permalink":"yihao.ml/2018/09/06/2018-09-06-è…¾è®¯TCaptchaæ»‘å—éªŒè¯ç é›†æˆ/","excerpt":"","text":"è…¾è®¯TCaptchaæ»‘å—éªŒè¯ç é›†æˆï¼Œä¸»è¦æ˜¯å› ä¸ºå…è´¹ã€‚å‚è€ƒæ–‡æ¡£https://007.qq.com/captcha/#/gettingStart åå°é›†æˆåœ¨webå±‚ç™»å½•æ¥å£ä¸­æ·»åŠ æ ¡éªŒé€»è¾‘,è¿™è¾¹å…³é”®ç‚¹æ˜¯verifyTicketæ–¹æ³•æ˜¯æ€ä¹ˆåšæ ¡éªŒçš„1234567891011String ip = AddressHelper.getIpAddr(request);if(request.getMethod().toUpperCase().equals(\"POST\")) &#123; // éªŒè¯ç æ˜¯å¦æœ‰æ•ˆ if (!tCaptchaUtil.verifyTicket(ticket, randstr, ip)) &#123; apiResultEntity = PushDataUtil.setData(ConstantDefine.ApiCallResult_Code_17002, ConstantDefine.ApiCallResult_Code_17262, null); modelAndView.setViewName(\"redirect:\" + loginPage); modelAndView.addObject(apiResultEntity); return modelAndView; &#125;&#125;ç¼–å†™tcaptcha.properties123# TCaptchatcaptcha.appId=xxxxxxxxtcaptcha.appSecret=xxxxxxxxç¼–å†™TCaptchaUtilå·¥å…·ç±»åœ¨webåˆå§‹åŒ–åå°†appidå’ŒappSecretæ³¨å…¥åˆ°å·¥å…·ç±»ä¸­12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class TCaptchaUtil &#123; private static final Logger logger = LogManager.getLogger(TCaptchaUtil.class); private String appId; private String appSecret; private OkHttpClient httpClient; private static final String VERIFY_URL = \"https://ssl.captcha.qq.com/ticket/verify?aid=%s&amp;AppSecretKey=%s&amp;Ticket=%s&amp;Randstr=%s&amp;UserIP=%s\"; public TCaptchaUtil(String appId, String appSecret) &#123; this.appId = appId; this.appSecret = appSecret; this.httpClient = new OkHttpClient(); &#125; // å‰å°ä¼šå°†ticketå’Œrandä¼ è¿‡æ¥ï¼Œåå°æ ¹æ®è¿™ä¸ªå€¼è¿›è¡ŒéªŒè¯,éªŒè¯é€šè¿‡è¿”å›true public boolean verifyTicket(String ticket, String rand, String userIp) &#123; // \"https://ssl.captcha.qq.com/ticket/verify?aid=%s&amp;AppSecretKey=%s&amp;Ticket=%s&amp;Randstr=%s&amp;UserIP=%s\"; HttpUrl url = new HttpUrl.Builder() .scheme(\"https\") .host(\"ssl.captcha.qq.com\") .addPathSegment(\"ticket\") .addPathSegment(\"verify\") .addQueryParameter(\"aid\", this.appId) .addQueryParameter(\"AppSecretKey\", this.appSecret) .addQueryParameter(\"Ticket\", ticket) .addQueryParameter(\"Randstr\", rand)// .addQueryParameter(\"UserIP\", \"116.231.187.102\") .addQueryParameter(\"UserIP\", userIp) .build(); Request request = new Request.Builder().url(url).build(); try &#123; Response response = httpClient.newCall(request).execute(); if (response.code() == 200) &#123; JSONObject jsonResp = JSONObject.parseObject(response.body().string()); if (jsonResp.getInteger(\"response\") == 1) &#123; return true; &#125; else &#123; logger.info(\"è…¾è®¯éªŒè¯ç éªŒè¯å¤±è´¥ï¼š\" + response.body().string()); &#125; &#125; else &#123; logger.info(\"è…¾è®¯éªŒè¯ç éªŒè¯å¤±è´¥ï¼š\" + response.body().string()); &#125; &#125; catch (IOException e) &#123; logger.catching(e); return false; &#125; return false; &#125;&#125;åœ¨application.xmlä¸­é…ç½®TCaptcha12345&lt;!-- TCaptcha é…ç½® --&gt;&lt;bean class=\"com.bim.bdip.cloud.home.util.TCaptchaUtil\"&gt; &lt;constructor-arg value=\"$&#123;tcaptcha.appId&#125;\"/&gt; &lt;constructor-arg value=\"$&#123;tcaptcha.appSecret&#125;\"/&gt;&lt;/bean&gt; å‰å°é›†æˆå‰å°æ·»åŠ js &lt;script src=&quot;https://ssl.captcha.qq.com/TCaptcha.js&quot;&gt;&lt;/script&gt;ç”¨æˆ·è®°å½•ä¸´æ—¶å˜é‡æ•°æ®&lt;input type=&quot;hidden&quot; name=&quot;ticket&quot; value=&quot;&quot;&gt;&lt;input type=&quot;hidden&quot; name=&quot;randstr&quot; value=&quot;&quot;&gt;æ·»åŠ ç™»å½•æŒ‰é’®&lt;button id=&quot;TencentCaptcha&quot; data-appid=&quot;xxxxxx&quot; data-cbfn=&quot;login&quot; class=&quot;am-btn-secondary&quot; type=&quot;button&quot;&gt;ç™»å½•&lt;/button&gt;å½“æŒ‰ä¸‹å›è½¦é”®æ˜¯è§¦å‘,å¹¶ç”Ÿæˆæ»‘å—éªŒè¯ç 1234567891011$(document).keyup(function(event)&#123; if(user == \"true\")&#123; if(event.keyCode == 13)&#123; new TencentCaptcha( 'appid', loginCallback, &#123;&#125; ).show(); &#125; &#125;&#125;);å½“æ»‘å—éªŒè¯ç éªŒè¯æˆåŠŸåä¼šèµ°å›æ‰å‡½æ•°,å¹¶è§¦å‘ç™»å½•æ–¹æ³•12345window.loginCallback = function(res) &#123; if(res.ret === 0) &#123; login(res.ticket, res.randstr); &#125;&#125;;ä¸‹é¢æ˜¯çœŸæ­£çš„ç™»å½•æ–¹æ³•12345678910111213141516171819function login(ticket, randstr)&#123; $(\"#login_form input[name='ticket']\").val(ticket); $(\"#login_form input[name='randstr']\").val(randstr); var identifier = $(\"#login_form input[name='identifier']\").val().trim(); var credential = $(\"#login_form input[name='credential']\").val().trim(); if(identifier=='')&#123; Dialog.alert(\"è´¦å·ä¸èƒ½ä¸ºç©º!\"); return; &#125; if(credential=='')&#123; Dialog.alert(\"å¯†ç ä¸èƒ½ä¸ºç©º!\"); return; &#125; var loginForm = $(\"#login_form\"); loginForm.attr(\"action\",\"$&#123;pageContext.request.contextPath &#125;/user/login\"); loginForm.submit();&#125;","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[]},{"title":"influxdbä½¿ç”¨åŠæ€»ç»“","slug":"2018-09-06-influxdbå°ç»“","date":"2018-09-06T00:00:00.000Z","updated":"2019-11-29T12:20:47.677Z","comments":true,"path":"2018/09/06/2018-09-06-influxdbå°ç»“/","link":"","permalink":"yihao.ml/2018/09/06/2018-09-06-influxdbå°ç»“/","excerpt":"","text":"æ–¹ä¾¿ä»¥åæŸ¥è¯¢ï¼Œåšä¸€ä¸ªç®€å•æ€»ç»“ å¢ç›¸å…³CLIç»ˆç«¯ä¸‹æ’å…¥æ•°æ®insert weather,altitude=1000,area=åŒ— temperature=11,humidity=-4ä»¥httpå½¢å¼æ’å…¥æ•°æ®curl -i -XPOST 'http://localhost:8086/write?db=testDB' --data-binary 'weather,altitude=1000,area=åŒ— temperature=11,humidity=-4' æŸ¥CLIç»ˆç«¯ä¸‹æŸ¥è¯¢SELECT * FROM weather ORDER BY time DESC LIMIT 3ä»¥httpå½¢å¼æŸ¥è¯¢curl -G 'http://localhost:8086/query?pretty=true' --data-urlencode &quot;db=testDB&quot; --data-urlencode &quot;q=SELECT * FROM weather ORDER BY time DESC LIMIT 3&quot; åº“ç›¸å…³åˆ›å»ºæ•°æ®åº“CREATE DATABASE &quot;db_name&quot;æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“SHOW DATABASESåˆ é™¤æ•°æ®åº“DROP DATABASE &quot;db_name&quot;USE mydb è¡¨ç›¸å…³æ˜¾ç¤ºæ‰€æœ‰è¡¨SHOW MEASUREMENTSåˆ›å»ºè¡¨å¹¶æ’å…¥æ•°æ®insert weather,altitude=1000,area=åŒ— temperature=11,humidity=-4åˆ é™¤è¡¨DROP MEASUREMENT &quot;measurementName&quot; ä¿å­˜ç­–ç•¥ç›¸å…³Points : æŒ‡çš„æ˜¯ç”±Tagsã€Fieldså’Œtimestampç»„æˆçš„ä¸€è¡Œæ•°æ®InfluxDBæ²¡æœ‰æä¾›ç›´æ¥åˆ é™¤Pointsçš„æ–¹æ³•ï¼Œä½†æ˜¯å®ƒæä¾›äº†Retention Policiesã€‚ä¸»è¦ç”¨äºæŒ‡å®šæ•°æ®çš„ä¿ç•™æ—¶é—´ï¼šå½“æ•°æ®è¶…è¿‡äº†æŒ‡å®šçš„æ—¶é—´ä¹‹åï¼Œå°±ä¼šè¢«åˆ é™¤ã€‚æ˜¾ç¤ºtestDBæ‰€æœ‰çš„ä¿å­˜ç­–ç•¥SHOW RETENTION POLICIES ON &quot;testDB&quot;åˆ›å»ºä¸€ä¸ªæ–°çš„ç­–ç•¥CREATE RETENTION POLICY &quot;rp_name&quot; ON &quot;db_name&quot; DURATION 30d REPLICATION 1 DEFAULTä¿®æ”¹ç­–ç•¥ALTER RETENTION POLICY &quot;rp_name&quot; ON db_name&quot; DURATION 3w DEFAULTåˆ é™¤ç­–ç•¥DROP RETENTION POLICY &quot;rp_name&quot; ON &quot;db_name&quot; è¿ç»­æŸ¥è¯¢å½“æ•°æ®è¶…è¿‡ä¿å­˜ç­–ç•¥é‡ŒæŒ‡å®šçš„æ—¶é—´ä¹‹åï¼Œå°±ä¼šè¢«åˆ é™¤ã€‚å¦‚æœæˆ‘ä»¬ä¸æƒ³å®Œå…¨åˆ é™¤æ‰ï¼Œæ¯”å¦‚åšä¸€ä¸ªæ•°æ®ç»Ÿè®¡é‡‡æ ·ï¼šæŠŠåŸå…ˆæ¯ç§’çš„æ•°æ®ï¼Œå­˜ä¸ºæ¯å°æ—¶çš„æ•°æ®ï¼Œè®©æ•°æ®å ç”¨çš„ç©ºé—´å¤§å¤§å‡å°‘ï¼ˆä»¥é™ä½ç²¾åº¦ä¸ºä»£ä»·ï¼‰ã€‚è¿™å°±éœ€è¦InfluxDBæä¾›çš„ï¼šè¿ç»­æŸ¥è¯¢ï¼ˆContinuous Queriesï¼‰ã€‚æ˜¾ç¤ºæ‰€æœ‰çš„continuous querySHOW CONTINUOUS QUERIESä½¿ç”¨ä¸‹é¢å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„ continuous queriesç¤ºä¾‹åœ¨testDBåº“ä¸­æ–°å»ºäº†ä¸€ä¸ªåä¸º cq_30m çš„è¿ç»­æŸ¥è¯¢ï¼Œæ¯ä¸‰ååˆ†é’Ÿå–ä¸€ä¸ªtemperatureå­—æ®µçš„å¹³å‡å€¼ï¼ŒåŠ å…¥ weather30m è¡¨ä¸­ã€‚continuous queryCREATE CONTINUOUS QUERY cq_30m ON testDB BEGIN SELECT mean(temperature) INTO weather30m FROM weather GROUP BY time(30m)å­—æ®µè¯´æ˜cq_30mè¿ç»­æŸ¥è¯¢çš„åå­—testDBå…·ä½“çš„æ•°æ®åº“åmean(temperature)ç®—å¹³å‡æ¸©åº¦weatherå½“å‰è¡¨åweather30må­˜æ–°æ•°æ®çš„è¡¨å30mæ—¶é—´é—´éš”ä¸º30åˆ†é’Ÿåˆ é™¤DROP CONTINUOUS QUERY &lt;cq_name&gt; ON &lt;database_name&gt; ç”¨æˆ·ç®¡ç†ç›¸å…³æ˜¾ç¤ºç”¨æˆ·SHOW USERSåˆ›å»ºç”¨æˆ·CREATE USER &quot;username&quot; WITH PASSWORD 'password'åˆ›å»ºç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·CREATE USER &quot;username&quot; WITH PASSWORD 'password' WITH ALL PRIVILEGESåˆ é™¤ç”¨æˆ·DROP USER &quot;username&quot;æ„Ÿè°¢åšä¸»çš„åˆ†äº«ï¼Œå¿«é€Ÿå…¥é—¨å¾ˆä¸é”™ä¼ é€é—¨1ä¼ é€é—¨2å®˜æ–¹æ–‡æ¡£ä¼ é€é—¨","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"InfluxDB","slug":"InfluxDB","permalink":"yihao.ml/tags/InfluxDB/"}]},{"title":"åŸºäºSparkçš„ç½‘ç«™æµè§ˆæ•°æ®ç»Ÿè®¡ä¸åˆ†æ","slug":"2018-09-3-åŸºäºSparkçš„ç½‘ç«™æµè§ˆæ•°æ®ç»Ÿè®¡ä¸åˆ†æ","date":"2018-09-03T00:00:00.000Z","updated":"2019-11-29T12:20:47.682Z","comments":true,"path":"2018/09/03/2018-09-3-åŸºäºSparkçš„ç½‘ç«™æµè§ˆæ•°æ®ç»Ÿè®¡ä¸åˆ†æ/","link":"","permalink":"yihao.ml/2018/09/03/2018-09-3-åŸºäºSparkçš„ç½‘ç«™æµè§ˆæ•°æ®ç»Ÿè®¡ä¸åˆ†æ/","excerpt":"","text":"ä½¿ç”¨sparkå¯¹ç½‘ç«™çš„æµè§ˆæƒ…å†µè¿›è¡Œç»Ÿè®¡åˆ†æï¼Œç”Ÿæˆæ•°æ®ä¼šè¾“å‡ºåˆ°HDFSä¸Šã€‚è¿™è¾¹ä½¿ç”¨çš„æ•°æ®æºæ–‡ä»¶æ˜¯nginxæ—¥å¿—ã€‚tmp.logngnixçš„access.logçš„æ ¼å¼,æ‘˜æŠ„éƒ¨åˆ†æ—¥å¿—123456789101112131415127.0.0.1 - - [05/Sep/2018:23:18:22 +0800] \"GET /4DAnalog/clashreport/delete HTTP/1.1\" 502 575 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:22 +0800] \"GET /favicon.ico HTTP/1.1\" 502 575 \"http://localhost:8080/4DAnalog/clashreport/delete\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:40 +0800] \"GET /4DAnalog/clashreport/find HTTP/1.1\" 502 575 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:40 +0800] \"GET /favicon.ico HTTP/1.1\" 502 575 \"http://localhost:8080/4DAnalog/clashreport/find\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:42 +0800] \"GET /4DAnalog/clashreport/find HTTP/1.1\" 502 575 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:42 +0800] \"GET /favicon.ico HTTP/1.1\" 502 575 \"http://localhost:8080/4DAnalog/clashreport/find\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:43 +0800] \"GET /4DAnalog/clashreport/find HTTP/1.1\" 502 575 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:43 +0800] \"GET /favicon.ico HTTP/1.1\" 502 575 \"http://localhost:8080/4DAnalog/clashreport/find\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:43 +0800] \"GET /4DAnalog/clashreport/find HTTP/1.1\" 502 575 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:44 +0800] \"GET /favicon.ico HTTP/1.1\" 502 575 \"http://localhost:8080/4DAnalog/clashreport/find\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:52 +0800] \"GET /4DAnalog/clashreport/delete HTTP/1.1\" 502 575 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:53 +0800] \"GET /favicon.ico HTTP/1.1\" 502 575 \"http://localhost:8080/4DAnalog/clashreport/delete\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:59 +0800] \"GET /4DAnalog/chat/delete HTTP/1.1\" 502 575 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"127.0.0.1 - - [05/Sep/2018:23:18:59 +0800] \"GET /favicon.ico HTTP/1.1\" 502 575 \"http://localhost:8080/4DAnalog/chat/delete\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\" å‰æœŸå‡†å¤‡éœ€è¦æå‰å‡†å¤‡å¥½tmp.logä¸Šä¼ åˆ°hdfsæ–‡ä»¶ç³»ç»Ÿä¸Šhdfs dfs -put ~/tmp.log /urlcount/ ç¯å¢ƒæ­å»ºåŠä»£ç ç¼–å†™1.åˆ›å»ºmavené¡¹ç›®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.zonegood&lt;/groupId&gt; &lt;artifactId&gt;hellospark&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;encoding&gt;UTF-8&lt;/encoding&gt; &lt;scala.version&gt;2.10.6&lt;/scala.version&gt; &lt;scala.compat.version&gt;2.10&lt;/scala.compat.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.scala-lang&lt;/groupId&gt; &lt;artifactId&gt;scala-library&lt;/artifactId&gt; &lt;version&gt;$&#123;scala.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.spark&lt;/groupId&gt; &lt;artifactId&gt;spark-core_2.10&lt;/artifactId&gt; &lt;version&gt;1.5.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.spark&lt;/groupId&gt; &lt;artifactId&gt;spark-streaming_2.10&lt;/artifactId&gt; &lt;version&gt;1.5.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt; &lt;artifactId&gt;hadoop-client&lt;/artifactId&gt; &lt;version&gt;2.6.2&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;sourceDirectory&gt;src/main/scala&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;src/test/scala&lt;/testSourceDirectory&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt; &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt; &lt;version&gt;3.2.0&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;goal&gt;testCompile&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;args&gt; &lt;arg&gt;-make:transitive&lt;/arg&gt; &lt;arg&gt;-dependencyfile&lt;/arg&gt; &lt;arg&gt;$&#123;project.build.directory&#125;/.scala_dependencies&lt;/arg&gt; &lt;/args&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; &lt;version&gt;2.18.1&lt;/version&gt; &lt;configuration&gt; &lt;useFile&gt;false&lt;/useFile&gt; &lt;disableXmlReport&gt;true&lt;/disableXmlReport&gt; &lt;includes&gt; &lt;include&gt;**/*Test.*&lt;/include&gt; &lt;include&gt;**/*Suite.*&lt;/include&gt; &lt;/includes&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt; &lt;version&gt;2.3&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;shade&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;filters&gt; &lt;filter&gt; &lt;artifact&gt;*:*&lt;/artifact&gt; &lt;excludes&gt; &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt; &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt; &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt; &lt;/excludes&gt; &lt;/filter&gt; &lt;/filters&gt; &lt;transformers&gt; &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt; &lt;mainClass&gt;com.zomegood.hellospark.WordCount&lt;/mainClass&gt; &lt;/transformer&gt; &lt;/transformers&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;å¦‚æœæ²¡æœ‰src/main/scalaç›®å½•ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»º2.æ–°å»ºä¼´ç”Ÿå¯¹è±¡com.zomegood.UrlCount.Main.scala1234567891011121314151617181920212223package com.zomegood.UrlCountimport org.apache.spark.&#123;SparkConf, SparkContext&#125;/** * @author zyh * @create 18-9-5 ä¸‹åˆ11:32 * ç»Ÿè®¡URLè®¿é—®æ¬¡æ•° */object Main &#123; def main(args : Array[String]) : Unit = &#123; val conf = new SparkConf().setAppName(\"UrlCount\") val sc = new SparkContext(conf) // å…ˆå°†nginxæ—¥å¿—ç”¨ç©ºæ ¼ç¬¦åˆ†å‰²å¼€ï¼Œç¬¬7ä¸ªä½ç½®çš„urlï¼Œåç»­ä»æ–°å°†urlç»„åˆæˆæ–°çš„Tuple(url,1) // Array((/4DAnalog/clashreport/delete,1), (/favicon.ico,1), (/4DAnalog/clashreport/find,1), (/favicon.ico,1), (/4DAnalog/clashreport/find,1), (/favicon.ico,1), (/4DAnalog/clashreport/find,1), (/favicon.ico,1), (/4DAnalog/clashreport/find,1)) var rdd1 = sc.textFile(args(0)).map(_.split(\" \")).map(arr =&gt; (arr(6),1)); // æ ¹æ®Tuple çš„æ¯ä¸ªkeyè¿›è¡Œåˆ†ç»„ç»Ÿè®¡ rdd1.reduceByKey(_+_).saveAsTextFile(args(1)); sc.stop() &#125;&#125;3.ä½¿ç”¨mavenæ‰“jaråŒ…è¿è¡Œmvn clean package ä»¥é›†ç¾¤æ–¹å¼è¿è¡Œbin/spark-submit --class com.zomegood.UrlCount.Main --master spark://cor1:7077 --executor-memory 512m --total-executor-cores 2 â€¦/spark-mvn-1.0-SNAPSHOT.jar hdfs://cor1:9000/urlcount/tmp.log hdfs://cor1:9000/urlcount/outä½¿ç”¨saveAsTextFileè¿è¡Œç»“æœå­˜åˆ°hdfsä¸Š","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Spark","slug":"Spark","permalink":"yihao.ml/tags/Spark/"}]},{"title":"sparké›†ç¾¤æ­å»º","slug":"2018-08-27-sparké›†ç¾¤æ­å»º","date":"2018-08-27T00:00:00.000Z","updated":"2019-11-29T12:20:47.676Z","comments":true,"path":"2018/08/27/2018-08-27-sparké›†ç¾¤æ­å»º/","link":"","permalink":"yihao.ml/2018/08/27/2018-08-27-sparké›†ç¾¤æ­å»º/","excerpt":"","text":"è¿™è¾¹ä½¿ç”¨VMåˆ›å»º3å°cor1ã€cor2ã€cor4è™šæ‹Ÿæœºï¼Œé…ç½®å¥½ç½‘ç»œã€å…³é—­é˜²ç«å¢™ä¹‹ç±»çš„å°±ä¸å¤šè¯¦è¿°ã€åˆ°sparkå®˜ç½‘ä¸‹è½½ç¨‹åºåŒ…spark-1.6.1-bin-hadoop2.6éœ€è¦æ³¨æ„çš„æ˜¯è™šæ‹Ÿæœºå†…å­˜ä¸èƒ½åˆ†é…çš„å¤ªå°ï¼Œä¸ç„¶ä¼šå¯¼è‡´å¯åŠ¨å¤±è´¥ã€‚(è¿™è¾¹ä¹Ÿåœ¨è€ƒè™‘å†æ‹“å±•ä¸ª8Gå†…å­˜æ¡äº†ï¼Œå¯æƒœç°åœ¨çš„å†…å­˜æ¡çœŸçš„æ˜¯å¾ˆè´µã€‚ã€‚)æˆ‘æ‰“ç®—åœ¨cor1ä¸Šå¯åŠ¨Masterï¼Œåœ¨cor2å’Œcor4ä¸Šå¯åŠ¨Workerã€‚åˆ†é…çš„å†…å­˜åˆ†åˆ«ä¸º(1G,2G,2G) æ¦‚è¿°å¼€å§‹ä¹‹å‰è¿™è¾¹åœ¨/ç›®å½•ä¸‹äº‹å…ˆåˆ›å»ºä¸€ä¸ª /export/servers/ç›®å½•ï¼Œè¯¥ç›®å½•ç”¨äºå­˜æ”¾å¤§æ•°æ®ç›¸å…³çš„å®‰è£…åŒ…ã€æ¯”å¦‚hadoopã€hiveã€stormç­‰ç­‰ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚åŒæ—¶åˆ›å»ºä¸€ä¸ªä¸“é—¨çš„ç”¨æˆ·hadoopï¼Œåœ¨ä½¿ç”¨è¿™æ–¹é¢ä¸œè¥¿çš„æ—¶å€™åˆ‡æ¢åˆ°è¯¥è§’è‰²ã€‚ä¸è¦å¿˜è®°ä¿®æ”¹ /export/servers/ ç›®å½•çš„æƒé™ç»„ 1.è§£å‹ä½¿ç”¨ä¸‹é¢å‘½ä»¤è§£å‹$ tar -zxvf spark-1.6.1-bin-hadoop2.6.tgz -C /export/servers/ 2.é…ç½®é…ç½®spark-env.shæ–‡ä»¶,åœ¨å°¾éƒ¨è¿½åŠ ä¸‹é¢ä»£ç 123export JAVA_HOME=/usr/local/jdk1.8.0_161/export SPARK_MASTER_IP=spark1export SPARK_MASTER_PORT=7077å°†workeræ‰€åœ¨æœºå™¨çš„ipå†™åœ¨slavesæ–‡ä»¶ä¸­12cor2cor4 3.åˆ†å‘å°†é…ç½®å¥½çš„sparkåˆ†å‘åˆ°cor2ã€cor4æœºå™¨ä¸Š$ scp -r spark-1.6.1/ hadoop@cor2:/export/servers 4.è¿è¡Œ$ /sbin/start-all.shå¯åŠ¨åå¯ä»¥ä½¿ç”¨ 127.0.0.1:8080è®¿é—® æ¥è®¿é—®sparkwebç«¯ 5.spark-shellsparkä¸ºç¼–ç¨‹äººå‘˜ä¸“é—¨æä¾›äº†spark-shellï¼Œè¯¥åŠŸèƒ½å¯ä»¥ä½¿å¼€å‘è€…ä»¥ç»ˆç«¯å½¢å¼ç¼–å†™scalaï¼Œè¿›è¡Œä»£ç è°ƒè¯•ï¼Œååˆ†æ–¹ä¾¿è¿è¡Œspark-shell$ bin/spark-shell --master spark://cor1:7077 --executor-memory 512m --total-executor-cores 2å‚æ•°è¯´æ˜--master spark://cor1:7077æŒ‡å®šMasteråœ°å€--executor-memory 512mæŒ‡å®šæ¯ä¸ªWorkerå¯ç”¨å†…å­˜ä¸º512m--total-executor-coresæŒ‡å®šæ•´ä¸ªé›†ç¾¤ä½¿ç”¨cpuæ ¸æ•° 6.å†™ä¸ªç®€å•çš„wordcountå¯åŠ¨hdfsï¼Œä¸Šä¼ wordcount.txtåˆ°hdfsä¸Š$ sc.textFile(â€œhdfs://cor1:9000/wordcount.txtâ€).flatMap(_.split(&quot; &quot;)).map((_,1)).reduceByKey(_+_).saveAsTextFile(â€œhdfs://cor1:9000/outâ€)","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Spark","slug":"Spark","permalink":"yihao.ml/tags/Spark/"}]},{"title":"virtualenvæ­å»º","slug":"2018-08-26-virtualenvæ­å»º","date":"2018-08-26T00:00:00.000Z","updated":"2019-11-29T12:20:47.676Z","comments":true,"path":"2018/08/26/2018-08-26-virtualenvæ­å»º/","link":"","permalink":"yihao.ml/2018/08/26/2018-08-26-virtualenvæ­å»º/","excerpt":"","text":"python è™šæ‹Ÿç¯å¢ƒåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ mkvirtualenv testè¿›å…¥è™šæ‹Ÿç¯å¢ƒ workon teståˆ—å‡ºæ‰€æœ‰è™šæ‹Ÿç¯å¢ƒ workonç¦»å¼€è™šæ‹Ÿç¯å¢ƒ deactivateåˆ é™¤è™šæ‹Ÿç¯å¢ƒ rmvirtualenc test","categories":[{"name":"ç¼–ç¨‹è¯­è¨€","slug":"ç¼–ç¨‹è¯­è¨€","permalink":"yihao.ml/categories/ç¼–ç¨‹è¯­è¨€/"}],"tags":[{"name":"Python3","slug":"Python3","permalink":"yihao.ml/tags/Python3/"}]},{"title":"scalaéšå¼è½¬æ¢åº”ç”¨","slug":"2018-08-26-scalaéšå¼è½¬æ¢åº”ç”¨","date":"2018-08-26T00:00:00.000Z","updated":"2019-11-29T12:20:47.675Z","comments":true,"path":"2018/08/26/2018-08-26-scalaéšå¼è½¬æ¢åº”ç”¨/","link":"","permalink":"yihao.ml/2018/08/26/2018-08-26-scalaéšå¼è½¬æ¢åº”ç”¨/","excerpt":"","text":"éšå¼è½¬æ¢æ˜¯scalaçš„ä¸€ä¸ªéš¾ç‚¹ï¼Œä¸‹é¢å‡ ä¸ªæ¡ˆä¾‹ç”¨æ¥å¸®åŠ©ç†è§£å®ƒã€‚æ¡ˆä¾‹ä¸€ï¼šæƒ³è¦å¢å¼ºæŸä¸€ä¸ªç³»ç»Ÿç±»çš„æ–¹æ³•,æ¯”å¦‚ä¸ºscala.reflect.io.File æ·»åŠ ä¸€ä¸ªreadæ–¹æ³•,å®ç°ç±»ä¼¼ä¸‹é¢çš„å†™æ³•,12val file = File(filePath)print(file.read())å…·ä½“å®ç°1234567891011class RichFile(file : File) &#123; def read() : String = &#123; Source.formFile(file.path).mkString &#125;&#125;// éšå¼è½¬æ¢åªèƒ½å†™åœ¨ä¼´ç”Ÿå¯¹è±¡ä¸­object RichFile&#123; implicit def file2RichFile(file : File) : RichFile = new RichFile(file)&#125;åœ¨å¦ä¸€ä¸ªç±»çš„mainæ–¹æ³•ä¸­è°ƒç”¨12345def main(args : Array[String]) : Unit = &#123; import RichFile._ println(File(\"/home/zyh/1.txt\").read()) &#125;æ¡ˆä¾‹äºŒ: æ¯”è¾ƒPersonä¸­å¹´é¾„çš„å¤§å° ,è¿™é‡Œä¸å±€é™Personï¼Œå¯ä»¥ç”¨æ³›å‹Tç¼–å†™è‡ªå®šä¹‰çš„Personç±»1234class Person (var name:String , var age : Int)&#123; &#125;æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ¯”è¾ƒçš„æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬å†™æˆè¿™æ ·ï¼Œç¼–è¯‘å™¨æ˜¯ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“Tæ˜¯ä»€ä¹ˆï¼Œæ‰€æœ‰åœ¨ä½¿ç”¨&gt;çš„æ—¶å€™å°±ä¼šæŠ¥é”™12def compare[T](a:T,b:T) = if(a&gt;b) a else bæˆ‘ä»¬è¦æƒ³ä¸‹é¢è¿™æ ·å»å†™12345678910111213141516object ComparePerson&#123; // #1 æ¯”è¾ƒå¤§å° def compare[T] (a:T,b:T) (implicit order : T =&gt; Ordered[T])= if(a&gt;b) a else b // #2 åªå®šä¹‰#1.æ˜¯ä¸èƒ½æ¯”è¾ƒçš„ï¼Œå› ä¸ºa,b ç³»ç»Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ‰€ä»¥ &gt; ä¸èƒ½ä½¿ç”¨,è¿™è¾¹è§£å†³çš„æ–¹æ³•æ˜¯åˆ©ç”¨éšå¼è½¬æ¢å‘Šè¯‰ç³»ç»Ÿ implicit val person2Ordered = (person : Person) =&gt; new Ordered[Person] &#123; override def compare(that : Person) = &#123; that.age - person.age &#125; &#125; // #3 è¿˜å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ›¿æ¢2,ä»»é€‰å…¶ä¸€ implicit def person2Ordered(person : Person) = new Ordered[Person]&#123; override def compare..... &#125;&#125;åœ¨ä¸»ç¨‹åºä¸­è°ƒç”¨ComparePerson.compare(p1,p2)å³å¯,ä½¿ç”¨ä¹‹å‰ä¸€å®šè¦å¼•å…¥éšå¼è½¬æ¢çš„æ–¹æ³•ï¼Œimport ComparePerson._","categories":[{"name":"ç¼–ç¨‹è¯­è¨€","slug":"ç¼–ç¨‹è¯­è¨€","permalink":"yihao.ml/categories/ç¼–ç¨‹è¯­è¨€/"}],"tags":[{"name":"Scala","slug":"Scala","permalink":"yihao.ml/tags/Scala/"}]},{"title":"minecraftæ¸¸æˆæ’ä»¶å¼€å‘","slug":"2018-08-20-minecraftæ¸¸æˆæ’ä»¶å¼€å‘","date":"2018-08-20T00:00:00.000Z","updated":"2019-11-29T12:20:47.675Z","comments":true,"path":"2018/08/20/2018-08-20-minecraftæ¸¸æˆæ’ä»¶å¼€å‘/","link":"","permalink":"yihao.ml/2018/08/20/2018-08-20-minecraftæ¸¸æˆæ’ä»¶å¼€å‘/","excerpt":"","text":"æœ¬æœºç¯å¢ƒï¼šlinuxä¸‹çš„javaå¼€å‘minecraftæ¸¸æˆæ’ä»¶ï¼Œç”¨mavenç¼–è¯‘æ‰“jaråŒ…ã€‚ æ¦‚è¿°æ­£å¼å¼€å‘ä¹‹å‰éœ€è¦å‡†å¤‡ä¸Šé¢æåˆ°çš„ä»¥å¤–ï¼Œè¿˜éœ€è¦å‡†å¤‡æœåŠ¡ç«¯ä¸‹è½½é“¾æ¥å’Œå®¢æˆ·ç«¯æ¸¸æˆæ’ä»¶å¼€å‘å¥½ä»¥åï¼Œä¼šä½¿ç”¨mavenæ‰“æˆjaråŒ…ï¼Œæ”¾åœ¨ æœåŠ¡ç«¯çš„ plugins ç›®å½•ä¸‹å³å¯ç”Ÿæ•ˆã€‚ ç¯å¢ƒæ­å»ºå¤§è‡´æ­¥éª¤:1.åˆ›å»ºmavené¡¹ç›®2.ä¿®æ”¹pom.xmlæ–‡ä»¶3.ä¸‹è½½mincecraftæœåŠ¡å™¨4.é…ç½®mincecraftæœåŠ¡å™¨5.å¯åŠ¨mincraftå®¢æˆ·ç«¯6.ç¼–å†™ç¬¬ä¸€ä¸ªå‘½ä»¤æ’ä»¶7.mavenæ‰“åŒ… 1.åˆ›å»ºmavené¡¹ç›® 2.ä¿®æ”¹pom.xmlæ–‡ä»¶è¿™é‡Œç”¨çš„æ˜¯Bukkitçš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹ä»“åº“123456&lt;repositories&gt; &lt;repository&gt; &lt;id&gt;spigot-repo&lt;/id&gt; &lt;url&gt;https://hub.spigotmc.org/nexus/content/repositories/snapshots/&lt;/url&gt; &lt;/repository&gt;&lt;/repositories&gt;æ¥ç€å¼•å…¥å¼€å‘åº“12345678910111213141516&lt;dependency&gt; &lt;groupId&gt;org.bukkit&lt;/groupId&gt; &lt;artifactId&gt;bukkit&lt;/artifactId&gt; &lt;version&gt;1.12.2-R0.1-SNAPSHOT&lt;/version&gt;&lt;!--change this value depending on the version or use LATEST--&gt; &lt;type&gt;jar&lt;/type&gt; &lt;scope&gt;runtime&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.spigotmc&lt;/groupId&gt; &lt;artifactId&gt;spigot-api&lt;/artifactId&gt; &lt;version&gt;1.12.2-R0.1-SNAPSHOT&lt;/version&gt;&lt;!--change this value depending on the version--&gt; &lt;type&gt;jar&lt;/type&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;ä½¿ç”¨maven-assembly-pluginæ’ä»¶æ‰“jaråŒ…12345678910111213141516171819202122&lt;plugin&gt; &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;descriptorRefs&gt; &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt; &lt;/descriptorRefs&gt; &lt;!--&lt;archive&gt; &lt;manifest&gt; &lt;mainClass&gt;org.bukkit.Server&lt;/mainClass&gt; &lt;/manifest&gt; &lt;/archive&gt;--&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;make-assembly&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;single&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; 3.ä¸‹è½½mincecraftæœåŠ¡å™¨craftbukkit-1.7.2-R0.4-20140316.221310-4.jarhttps://getbukkit.org/ 4.é…ç½®æœåŠ¡å™¨1.ç¼–å†™run.shè„šæœ¬ï¼Œå¯åŠ¨æœåŠ¡å™¨$ touch run.sh123#!/bin/bashecho \"start bukkit server\"java -Xms1024M -Xmx1024M -jar craftbukkit-1.7.2-R0.4-20140316.221310-4.jarä¿®æ”¹run.shä¸ºå¯æ‰§è¡Œæ–‡ä»¶$ chmod 777 run.shè¿è¡Œrun.shè„šæœ¬$ ./run.shå¯åŠ¨ä»¥åä¼šå‘ç°å½“å‰ç›®å½•ä¼šç”Ÿæˆå¾ˆå¤šæ–‡ä»¶2.ä¿®æ”¹æœåŠ¡å™¨å‚æ•°server.properties1234567891011121314151617181920212223242526272829303132333435#Minecraft server properties#Thu Aug 16 00:01:18 CST 2018generator-settings=op-permission-level=4allow-nether=trueonline-model=falselevel-name=worldenable-query=falseallow-flight=falseannounce-player-achievements=trueserver-port=25565level-type=DEFAULTenable-rcon=falseforce-gamemode=falselevel-seed=server-ip=max-build-height=256spawn-npcs=truewhite-list=falsespawn-animals=truehardcore=falsesnooper-enabled=trueonline-mode=falseresource-pack=pvp=truedifficulty=1enable-command-block=truegamemode=0player-idle-timeout=0max-players=20spawn-monsters=truegenerate-structures=trueview-distance=10spawn-protection=16motd=A Minecraft Serverå…·ä½“é…ç½®å¯ä»¥æŸ¥çœ‹wikié‡æ–°å¯åŠ¨æœåŠ¡å™¨ä½¿å…¶ç”Ÿæ•ˆã€‚ 5.å¯åŠ¨mincraftå®¢æˆ·ç«¯æƒ³è¦å¯åŠ¨minecraftå®¢æˆ·ç«¯ï¼Œéœ€è¦æå‰å‡†å¤‡ä¸€ä¸ªå¯åŠ¨å™¨ã€‚minecraftå¯åŠ¨å™¨å’Œminecraftå®¢æˆ·ç«¯è¿™ç¯‡åšå®¢https://www.linuxidc.com/Linux/2016-04/129764.htmæœ‰ä¸‹è½½é“¾æ¥ï¼Œä¸è¿‡é‡Œé¢çš„minecraftå®¢æˆ·ç«¯å¯åŠ¨ä¼šæŠ›å¼‚å¸¸ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ˜¯linuxçš„åŸå› ï¼Œåœ¨ä¸‹è½½1.7.2çš„æ—¶å€™æŸäº›jaråŒ…æŸåå¯¼è‡´æ— æ³•æ­£å¸¸å¯åŠ¨,åç»­é€šè¿‡æ’æŸ¥æ‰¾åˆ°æŸåçš„jarï¼Œä»æ–°åˆ°ç½‘ä¸Šä¸‹è½½å®Œå¥½çš„jaræ‰å¾—ä»¥è§£å†³ã€‚å¦‚æœä½ ç”¨çš„ä¹Ÿæ˜¯linuxï¼Œå¯ä»¥è”ç³»æˆ‘ï¼Œä¸ºä½ æä¾›ä¸€ä¸ªå®Œå¥½ç‰ˆæœ¬ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä»ç½‘ä¸Šæœä¸€ä¸‹ï¼Œå¾ˆå¥½è§£å†³çš„ã€‚ä¸‹è½½å¥½å¯åŠ¨å™¨å’Œå®¢æˆ·ç«¯ä»¥åï¼Œæˆ‘ä»¬å…ˆè¿è¡Œå¯åŠ¨å™¨ï¼ŒåŒæœåŠ¡ç«¯ä¸€æ ·ï¼Œç¼–å†™run.sh è„šæœ¬è¿è¡Œminecraftå¯åŠ¨å™¨,run.shå†…å®¹å¦‚ä¸‹:1234#!/bin/bashecho \"run minecraft client on linux os...\"java -jar HMCL-2.1.7.jarä½¿ç”¨ä¸‹é¢å‘½ä»¤è¿è¡Œå¯åŠ¨å™¨$ ./run.shè¿›å…¥æ¸¸æˆï¼Œé€‰æ‹©Multiplayerå¼€å¯å¤šäººæ¸¸æˆå³å¯ 6.ç¼–å†™ç¬¬ä¸€ä¸ªå‘½ä»¤æ’ä»¶è¿™ä¸ªå‘½ä»¤æš‚æ—¶å«åšexampleï¼Œå½“ç”¨æˆ·åœ¨æ¸¸æˆå†…è¾“å…¥exampleæ—¶ï¼Œä½œå‡ºç›¸åº”æç¤ºå½“æœåŠ¡å™¨å¯åŠ¨ä»¥åï¼Œä¼šåŠ è½½æ”¾åœ¨pluginç›®å½•ä¸‹å®ç°JavaPluginçš„ç±»ï¼Œè§¦å‘å®ƒçš„onEnableæ–¹æ³•åœ¨src/main/javaä¸‹åˆ›å»ºFirstPlugin.java1234567891011121314151617181920212223242526package com.zonegood;import org.bukkit.entity.Player;import org.bukkit.plugin.java.JavaPlugin;/** * @author zyh */public final class FirstPlugin extends JavaPlugin &#123; @Override public void onEnable() &#123; this.getLogger().info(\"FirstPlugin running...\"); // åŠ è½½CommandExampleæŒ‡ä»¤ this.getCommand(\"example\").setExecutor(new CommondExample()); &#125; @Override public void onDisable() &#123; for (Player player : getServer().getOnlinePlayers())&#123; this.getLogger().info(\"disable method\" + player.getName()); &#125; &#125;&#125;è¿™è¾¹å¯¹æŒ‡ä»¤ç±»è¿›è¡Œå°è£…ï¼ŒæŒ‡ä»¤éœ€è¦å®ç°CommandExecutorç±»ï¼Œå®ç°onCommandæ–¹æ³•ï¼Œå½“ç³»ç»Ÿæ£€æµ‹åˆ°æœ‰äººå‘é€exampleæŒ‡ä»¤æ—¶ï¼ŒonCommandæ–¹æ³•å°±ä¼šè¢«è§¦å‘ï¼Œå½“ç„¶å‰ææ˜¯ï¼Œå®ƒå¿…é¡»å·²è¢«æ³¨å†Œã€‚åœ¨src/main/java/ç›®å½•ä¸‹åˆ›å»ºCommondExample.java1234567891011121314151617181920212223242526package com.zonegood;import org.bukkit.command.Command;import org.bukkit.command.CommandExecutor;import org.bukkit.command.CommandSender;import org.bukkit.entity.Player;/** * @author zyh */public class CommondExample implements CommandExecutor&#123; private static final String commandName = \"example\"; @Override public boolean onCommand(CommandSender commandSender, Command command, String s, String[] strings) &#123; if(commandName.equalsIgnoreCase(command.getName()))&#123; ((Player)commandSender).sendMessage(((Player)commandSender).getName() + \"execute example command\"); return true; &#125; return false; &#125;&#125;åœ¨src/resources/ç›®å½•ä¸‹åˆ›å»ºplugin.yml,åœ¨é‡Œé¢æˆ‘ä»¬éœ€è¦å¯¹exampleæŒ‡ä»¤è¿›è¡Œæè¿°aliases å¯ä»¥ç†è§£ä¸ºexampleæŒ‡ä»¤çš„æ˜µç§°ï¼Œåœ¨æ¸¸æˆå†…è¾“å…¥a1,a2 ç­‰ä»·äºè¾“å…¥exampleé™¤æ­¤ä¹‹å¤–é‡Œé¢è¿˜æœ‰å…¶ä»–å‚æ•°ï¼Œè¯¦æƒ…å‚è€ƒwiki1234567891011121314151617name: firstpluginversion: 1.0description: This plugin is so 31337. You can set yourself on fire.# We could place every author in the authors list, but chose not to for illustrative purposes# Also, having an author distinguishes that person as the project lead, and ensures their# name is displayed firstauthor: Zyhauthors: [zyh]website: http://www.zonegood.commain: com.zonegood.FirstPlugincommands: example: description: Set yourself on fire. aliases: [a1,a2] usage: Syntax error! Simply type /&amp;lt;command&amp;gt; to ignite yourself.é¡¹ç›®çš„æ•´ä½“ç›®å½•ç»“æ„ 7.mavenæ‰“åŒ…ä¸‹é¢çš„æŒ‡ä»¤ä¼šå°†ç¼–å†™å¥½çš„ä»£ç ç¼–è¯‘æ‰“åŒ…æˆjarï¼Œæ”¾åœ¨targetç›®å½•ä¸‹$ mvn clean packageå¯ä»¥çœ‹åˆ°Building jar: /media/zyh/workspace/workspace/IDEA/bukiitplugin/target/bukiitplugin-1.0-SNAPSHOT.jarå°†bukiitplugin-1.0-SNAPSHOT.jaræ‹·è´åˆ°server/plugins/ç›®å½•ä¸‹é‡æ–°å¯åŠ¨æœåŠ¡å™¨å³å¯ èµ„æ–™å®˜æ–¹å¼€å‘æ–‡æ¡£ï¼šhttps://bukkit.gamepedia.com/Main_PageDevelopersä¸€æ å°±æ˜¯äº†","categories":[{"name":"æ¸¸æˆå¼€å‘","slug":"æ¸¸æˆå¼€å‘","permalink":"yihao.ml/categories/æ¸¸æˆå¼€å‘/"}],"tags":[{"name":"Minecraft","slug":"Minecraft","permalink":"yihao.ml/tags/Minecraft/"}]},{"title":"maven exclusion","slug":"2018-08-17-maven exclusion","date":"2018-08-17T00:00:00.000Z","updated":"2019-11-29T12:20:47.675Z","comments":true,"path":"2018/08/17/2018-08-17-maven exclusion/","link":"","permalink":"yihao.ml/2018/08/17/2018-08-17-maven exclusion/","excerpt":"","text":"æ€ä¹ˆä½¿ç”¨dependency exclusionsæˆ‘ä»¬å¯ä»¥åœ¨pom.xmlä¸­çš„&lt;dependency&gt; ä¸‹æ·»åŠ &lt;exclusions&gt;,åƒè¿™æ ·1234567891011121314151617&lt;project&gt; ... &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;sample.ProjectA&lt;/groupId&gt; &lt;artifactId&gt;Project-A&lt;/artifactId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;!-- declare the exclusion here --&gt; &lt;groupId&gt;sample.ProjectB&lt;/groupId&gt; &lt;artifactId&gt;Project-B&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; dependency exclusion å·¥ä½œåŸç†ä»¥åŠä»€ä¹ˆæ—¶å€™ä½¿ç”¨123456Project-A -&gt; Project-B -&gt; Project-D &lt;! -- This dependency should be excluded --&gt; -&gt; Project-E -&gt; Project-F -&gt; Project Cè¿™ä¸ªå›¾å±•ç¤ºäº†Aä¾èµ–B,C Bä¾èµ–D Dä¾èµ–EF,é»˜è®¤çš„é¡¹ç›®Açš„ classPath å°†åŒ…å«B,C,D,E,Fåœºæ™¯ï¼šæˆ‘ä»¬ä¸å¸Œæœ›é¡¹ç›®Dè¢«ä¾èµ–åˆ°é¡¹ç›®Açš„classPathä¸­ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å¼€å‘æ—¶çŸ¥é“é¡¹ç›®Aä¸­çš„åŠŸèƒ½æ ¹æœ¬ä¸éœ€è¦é¡¹ç›®Dï¼Œè¿™ä¸ªæ—¶å€™é¡¹ç›®Bçš„å¼€å‘äººå‘˜å¯ä»¥åœ¨è‡ªå·±çš„pom.xmlä¸­æä¾›é¡¹ç›®çš„ä¾èµ–æ€§&lt;optional&gt;true&lt;/optional&gt;,åƒè¿™æ ·:123456&lt;dependency&gt; &lt;groupId&gt;sample.ProjectD&lt;/groupId&gt; &lt;artifactId&gt;ProjectD&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;å¦‚æœé¡¹ç›®Bæ²¡æœ‰è¿™æ ·åšï¼Œä½œä¸ºæœ€åæ‰‹æ®µï¼Œä½ å¯ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­ä½¿ç”¨excludeï¼Œåƒè¿™æ ·123456789101112131415161718192021&lt;project&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;sample.ProjectA&lt;/groupId&gt; &lt;artifactId&gt;Project-A&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; ... &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;sample.ProjectB&lt;/groupId&gt; &lt;artifactId&gt;Project-B&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;sample.ProjectD&lt;/groupId&gt; &lt;!-- Exclude Project-D from Project-B --&gt; &lt;artifactId&gt;Project-D&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt;è¿™ä¸ªæ—¶å€™å‡å¦‚æˆ‘ä»¬å°†é¡¹ç›®Aå®‰è£…åˆ°æœ¬åœ°ä»“åº“ï¼Œproject-xä¾èµ–äº†project-A,é‚£ä¹ˆproject-Dä»ç„¶å¯ä»¥åœ¨é¡¹ç›®Xä¸­è¢«æ’å‡ºåœ¨å¤–","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"yihao.ml/tags/Maven/"}]},{"title":"Gitå‘½ä»¤æ±‡æ€»","slug":"2018-08-16-Gitå‘½ä»¤æ±‡æ€»","date":"2018-08-16T00:00:00.000Z","updated":"2019-11-29T12:20:47.674Z","comments":true,"path":"2018/08/16/2018-08-16-Gitå‘½ä»¤æ±‡æ€»/","link":"","permalink":"yihao.ml/2018/08/16/2018-08-16-Gitå‘½ä»¤æ±‡æ€»/","excerpt":"","text":"ä¸ºäº†æ–¹ä¾¿æŸ¥é˜…ï¼Œåœ¨è¿™è¾¹åšä¸€ä¸ªå°ç»“ ç‰ˆæœ¬å›é€€HEADæŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œå› æ­¤ï¼ŒGitå…è®¸æˆ‘ä»¬åœ¨ç‰ˆæœ¬çš„å†å²ä¹‹é—´ç©¿æ¢­ï¼Œä½¿ç”¨å‘½ä»¤git reset --hard commit_idã€‚ç©¿æ¢­å‰ï¼Œç”¨git logå¯ä»¥æŸ¥çœ‹æäº¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›é€€åˆ°å“ªä¸ªç‰ˆæœ¬ï¼Œç±»ä¼¼çš„è¿˜æœ‰git log --pretty=onlineã€git log --graphè¦é‡è¿”æœªæ¥ï¼Œç”¨git reflogæŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ã€‚ æ’¤é”€ä¿®æ”¹åœºæ™¯1ï¼šå½“ä½ æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæƒ³ç›´æ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹æ—¶ï¼Œç”¨å‘½ä»¤git checkout -- fileã€‚åœºæ™¯2ï¼šå½“ä½ ä¸ä½†æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œè¿˜æ·»åŠ åˆ°äº†æš‚å­˜åŒºæ—¶ï¼Œæƒ³ä¸¢å¼ƒä¿®æ”¹ï¼Œåˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥ç”¨å‘½ä»¤git reset HEAD &lt;file&gt;ï¼Œå°±å›åˆ°äº†åœºæ™¯1ï¼Œç¬¬äºŒæ­¥æŒ‰åœºæ™¯1æ“ä½œã€‚åœºæ™¯3ï¼šå·²ç»æäº¤äº†ä¸åˆé€‚çš„ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“æ—¶ï¼Œæƒ³è¦æ’¤é”€æœ¬æ¬¡æäº¤ï¼Œæ‰§è¡Œgit reset --hard commit_idï¼Œä¸è¿‡å‰ææ˜¯æ²¡æœ‰æ¨é€åˆ°è¿œç¨‹åº“ã€‚ åˆ é™¤æ–‡ä»¶åˆ é™¤æœ¬åœ°rm fileåœºæ™¯1ï¼šå¦‚æœåˆ é”™äº†ï¼Œå› ä¸ºç‰ˆæœ¬åº“é‡Œè¿˜æœ‰å‘¢ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆè½»æ¾åœ°æŠŠè¯¯åˆ çš„æ–‡ä»¶æ¢å¤åˆ°æœ€æ–°ç‰ˆæœ¬ git checkout -- test.txtåœºæ™¯2ï¼šçœŸæ­£åˆ é™¤ git rm fileåˆ æ‰ï¼Œå¹¶ä¸”git commit æ·»åŠ è¿œç¨‹åº“è¦å…³è”ä¸€ä¸ªè¿œç¨‹åº“ï¼Œä½¿ç”¨å‘½ä»¤git remote add origin git@server-name:path/repo-name.gitå…³è”åï¼Œä½¿ç”¨å‘½ä»¤git push -u origin masterç¬¬ä¸€æ¬¡æ¨é€masteråˆ†æ”¯çš„æ‰€æœ‰å†…å®¹ ä»è¿œç¨‹åº“å…‹éš†git clone åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯Gité¼“åŠ±å¤§é‡ä½¿ç”¨åˆ†æ”¯ï¼šæŸ¥çœ‹åˆ†æ”¯ï¼šgit branchåˆ›å»ºåˆ†æ”¯ï¼šgit branch &lt;name&gt;åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout &lt;name&gt;åˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout -b &lt;name&gt;åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼šå…ˆåˆ‡æ¢åˆ°&lt;name&gt;åˆ†æ”¯,ç„¶åæ‰§è¡Œgit merge &lt;name&gt;åˆ é™¤åˆ†æ”¯ï¼šgit branch -d &lt;name&gt; åˆ†æ”¯ç®¡ç†ç­–ç•¥åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æŒ‰ç…§å‡ ä¸ªåŸºæœ¬åŸåˆ™è¿›è¡Œåˆ†æ”¯ç®¡ç†ï¼šé¦–å…ˆï¼Œmasteråˆ†æ”¯åº”è¯¥æ˜¯éå¸¸ç¨³å®šçš„ï¼Œä¹Ÿå°±æ˜¯ä»…ç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå¹³æ—¶ä¸èƒ½åœ¨ä¸Šé¢å¹²æ´»ï¼›é‚£åœ¨å“ªå¹²æ´»å‘¢ï¼Ÿå¹²æ´»éƒ½åœ¨devåˆ†æ”¯ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œdevåˆ†æ”¯æ˜¯ä¸ç¨³å®šçš„ï¼Œåˆ°æŸä¸ªæ—¶å€™ï¼Œæ¯”å¦‚1.0ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œå†æŠŠdevåˆ†æ”¯åˆå¹¶åˆ°masterä¸Šï¼Œåœ¨masteråˆ†æ”¯å‘å¸ƒ1.0ç‰ˆæœ¬ï¼›ä½ å’Œä½ çš„å°ä¼™ä¼´ä»¬æ¯ä¸ªäººéƒ½åœ¨devåˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åˆ†æ”¯ï¼Œæ—¶ä¸æ—¶åœ°å¾€devåˆ†æ”¯ä¸Šåˆå¹¶å°±å¯ä»¥äº†ã€‚æ‰€ä»¥ï¼Œå›¢é˜Ÿåˆä½œçš„åˆ†æ”¯çœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼šGitåœ¨åšmergeæ—¶ä¼šç”¨Fast forwardæ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¸æƒ³ä¸¢æ‰ä¿¡æ¯å°±éœ€è¦è¿™æ ·åšï¼Œgit merge --no-ff -m &quot;merge with no-ff&quot; devå…¶ä¸­--no-ffå‚æ•°ï¼Œè¡¨ç¤ºç¦ç”¨Fast forward æš‚å­˜å½“æ‰‹å¤´å·¥ä½œæ²¡æœ‰å®Œæˆæ—¶ï¼Œå…ˆæŠŠå·¥ä½œç°åœºgit stashä¸€ä¸‹ï¼Œç„¶åå»ä¿®å¤bugï¼Œä¿®å¤åï¼Œå†git stash popï¼Œå›åˆ°å·¥ä½œç°åœºã€‚å¯ä»¥ä½¿ç”¨git stash listæŸ¥çœ‹å·²æš‚å­˜çš„å†…å®¹ å¤šäººåä½œæäº¤ä»£ç çš„æµç¨‹æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ï¼Œä½¿ç”¨git remote -vï¼›æœ¬åœ°æ–°å»ºçš„åˆ†æ”¯å¦‚æœä¸æ¨é€åˆ°è¿œç¨‹ï¼Œå¯¹å…¶ä»–äººå°±æ˜¯ä¸å¯è§çš„ï¼›ä»æœ¬åœ°æ¨é€åˆ†æ”¯ï¼Œä½¿ç”¨git push origin branch-nameï¼Œå¦‚æœæ¨é€å¤±è´¥ï¼Œå…ˆç”¨git pullæŠ“å–è¿œç¨‹çš„æ–°æäº¤ï¼›åœ¨æœ¬åœ°åˆ›å»ºå’Œè¿œç¨‹åˆ†æ”¯å¯¹åº”çš„åˆ†æ”¯ï¼Œä½¿ç”¨git checkout -b branch-name origin/branch-nameï¼Œæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯çš„åç§°æœ€å¥½ä¸€è‡´ï¼›å»ºç«‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„å…³è”ï¼Œä½¿ç”¨git branch --set-upstream branch-name origin/branch-nameï¼›ä»è¿œç¨‹æŠ“å–åˆ†æ”¯ï¼Œä½¿ç”¨git pullï¼Œå¦‚æœæœ‰å†²çªï¼Œè¦å…ˆå¤„ç†å†²çªã€‚ rebaseåœ¨å¤šäººå¼€å‘æ¨¡å¼ä¸‹ï¼Œå¾€å¾€å¾ˆå®¹æ˜“å‘ç”Ÿå†²çªï¼Œæœ‰äº›å°ä¼™ä¼´å¾€è¿œç«¯æ¨é€ä»¥åå‘ç°è«åå…¶å¦™ä¼šå¤šä¸€ä¸ªcommitï¼Œå¯¼è‡´ä¸èƒ½æ˜¯ä¸€æ¡å¹²å‡€çš„ç›´çº¿,å¼ºè¿«ç—‡æ ‡è¯†æ ¹æœ¬å—ä¸äº†ã€‚åƒä¸‹å›¾ä¸€æ ·ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨git rebaseè§£å†³é—®é¢˜æˆ‘ä»¬åœ¨pullæ—¶ä¹Ÿå¯ä»¥åŠ è¿™æ ·çš„å‚æ•° git pull --no-commit --rebase origin masteræ¥è§£å†³é—®é¢˜è§£å†³åçš„æ ·å­å¦‚æœæ„Ÿåˆ°å¾ˆç–‘æƒ‘è¿™è¾¹æ¨èä¸¤ä¸ªå¾ˆä¸é”™çš„å­¦ä¹ èµ„æ–™:git bookã€å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ å¯¹æ¯”git diff commit-id-1 commit-id-2 --stat å¿½ç•¥æŸä¸ªæ–‡ä»¶git update-index --assume-unchanged config.xml","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Git","slug":"Git","permalink":"yihao.ml/tags/Git/"}]},{"title":"å¸¸ç”¨çš„mavenæ’ä»¶","slug":"2018-08-15-maven plugin","date":"2018-08-15T00:00:00.000Z","updated":"2019-11-29T12:20:47.674Z","comments":true,"path":"2018/08/15/2018-08-15-maven plugin/","link":"","permalink":"yihao.ml/2018/08/15/2018-08-15-maven plugin/","excerpt":"","text":"maven-compiler-pluginç¼–è¯‘Javaæºç ï¼Œä¸€èˆ¬åªéœ€è®¾ç½®ç¼–è¯‘çš„jdkç‰ˆæœ¬123456789&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.6.0&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;/configuration&gt;&lt;/plugin&gt;æˆ–è€…åœ¨propertiesè®¾ç½®jdkç‰ˆæœ¬12345&lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;/properties&gt; maven-dependency-pluginç”¨äºå¤åˆ¶ä¾èµ–çš„jaråŒ…åˆ°æŒ‡å®šçš„æ–‡ä»¶å¤¹é‡Œ1234567891011121314151617&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt; &lt;version&gt;2.10&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;copy-dependencies&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;copy-dependencies&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;outputDirectory&gt;$&#123;project.build.directory&#125;/lib&lt;/outputDirectory&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; maven-jar-pluginæ‰“æˆjaræ—¶ï¼Œè®¾å®šmanifestçš„å‚æ•°ï¼Œæ¯”å¦‚æŒ‡å®šè¿è¡Œçš„Main classï¼Œè¿˜æœ‰ä¾èµ–çš„jaråŒ…ï¼ŒåŠ å…¥classpathä¸­1234567891011121314&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt; &lt;version&gt;2.4&lt;/version&gt; &lt;configuration&gt; &lt;archive&gt; &lt;manifest&gt; &lt;addClasspath&gt;true&lt;/addClasspath&gt; &lt;classpathPrefix&gt;/data/lib&lt;/classpathPrefix&gt; &lt;mainClass&gt;com.zhang.spring.App&lt;/mainClass&gt; &lt;/manifest&gt; &lt;/archive&gt; &lt;/configuration&gt;&lt;/plugin&gt; wagon-maven-pluginç”¨äºä¸€é”®éƒ¨ç½²ï¼ŒæŠŠæœ¬åœ°æ‰“åŒ…çš„jaræ–‡ä»¶ï¼Œä¸Šä¼ åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œå¹¶æ‰§è¡ŒæœåŠ¡å™¨ä¸Šçš„shellå‘½ä»¤12345678910111213141516&lt;plugin&gt; &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt; &lt;artifactId&gt;wagon-maven-plugin&lt;/artifactId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;configuration&gt; &lt;serverId&gt;crawler&lt;/serverId&gt; &lt;fromDir&gt;target&lt;/fromDir&gt; &lt;includes&gt;*.jar,*.properties,*.sh&lt;/includes&gt; &lt;url&gt;sftp://59.110.162.178/home/zhangxianhe&lt;/url&gt; &lt;commands&gt; &lt;command&gt;chmod 755 /home/zhangxianhe/update.sh&lt;/command&gt; &lt;command&gt;/home/zhangxianhe/update.sh&lt;/command&gt; &lt;/commands&gt; &lt;displayCommandOutputs&gt;true&lt;/displayCommandOutputs&gt; &lt;/configuration&gt;&lt;/plugin&gt; tomcat7-maven-pluginç”¨äºè¿œç¨‹éƒ¨ç½²Java Webé¡¹ç›®12345678910&lt;plugin&gt; &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt; &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt; &lt;version&gt;2.2&lt;/version&gt; &lt;configuration&gt; &lt;url&gt;http://59.110.162.178:8080/manager/text&lt;/url&gt; &lt;username&gt;linjinbin&lt;/username&gt; &lt;password&gt;linjinbin&lt;/password&gt; &lt;/configuration&gt;&lt;/plugin&gt; maven-shade-pluginç”¨äºæŠŠå¤šä¸ªjaråŒ…ï¼Œæ‰“æˆ1ä¸ªjaråŒ…ä¸€èˆ¬Javaé¡¹ç›®éƒ½ä¼šä¾èµ–å…¶ä»–ç¬¬ä¸‰æ–¹jaråŒ…ï¼Œæœ€ç»ˆæ‰“åŒ…æ—¶ï¼Œå¸Œæœ›æŠŠå…¶ä»–jaråŒ…åŒ…å«åœ¨ä¸€ä¸ªjaråŒ…é‡Œ12345678910111213141516171819202122232425&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt; &lt;version&gt;2.4.3&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;shade&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;transformers&gt; &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt; &lt;manifestEntries&gt; &lt;Main-Class&gt;com.meiyou.topword.App&lt;/Main-Class&gt; &lt;X-Compile-Source-JDK&gt;$&#123;maven.compile.source&#125;&lt;/X-Compile-Source-JDK&gt; &lt;X-Compile-Target-JDK&gt;$&#123;maven.compile.target&#125;&lt;/X-Compile-Target-JDK&gt; &lt;/manifestEntries&gt; &lt;/transformer&gt; &lt;/transformers&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt;","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"yihao.ml/tags/Maven/"}]},{"title":"æ‰‹å†™åŸºäºAkkaçš„RPCé€šä¿¡æ¡†æ¶","slug":"2018-08-15-åŸºäºAkka çš„Rpcé€šä¿¡æ¡†æ¶","date":"2018-08-15T00:00:00.000Z","updated":"2019-11-29T12:20:47.674Z","comments":true,"path":"2018/08/15/2018-08-15-åŸºäºAkka çš„Rpcé€šä¿¡æ¡†æ¶/","link":"","permalink":"yihao.ml/2018/08/15/2018-08-15-åŸºäºAkka çš„Rpcé€šä¿¡æ¡†æ¶/","excerpt":"","text":"sparkæ˜¯ä¸€ä¸ªå¹¶è¡Œåˆ†å¸ƒå¼çš„è®¡ç®—æ¡†æ¶ï¼Œå…¶è®¾è®¡é˜¶æ®µè‚¯å®šè¦è€ƒè™‘åˆ°æ•°æ®çš„äº¤äº’ã€‚é‚£ä¹ˆsparkæ˜¯æ€ä¹ˆè¿›è¡Œæ•°æ®äº¤äº’çš„ï¼ŸSparkæ˜¯ç”¨Scalaç¼–å†™çš„ï¼Œä»Šå¤©æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨Scalaè®¾è®¡ä¸€ä¸ªRpcé€šä¿¡æœåŠ¡ è®¾è®¡æ€è·¯akka.actor.Actor ç»„ä»¶å®ƒäºservletæœ‰ç‚¹ç±»ä¼¼ï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªservletï¼Œå®ƒåŒæ ·ä¹Ÿæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸ,preStartä¼šåœ¨æ„é€ å‡½æ•°æ‰§è¡Œä»¥åè¢«è°ƒç”¨ï¼Œreceiveä¼šåœ¨æ¥æ”¶åˆ°æ¶ˆæ¯ä»¥åè¢«è°ƒç”¨Actorä¸­æˆ‘ä»¬åˆ†å‡ºä¸¤ç±»ï¼Œä¸€ä¸ªå«Masterï¼Œä¸€ä¸ªå«WorkerMaster æ˜¯å¤´å¤´Workeræ˜¯å°å¼Ÿï¼Œå°±åƒYarné‡Œé¢çš„resourceManageå’ŒnodeManageã€HDFSä¸­çš„NameNodeå’ŒdataNodeä¸€æ ·,æ— è§„çŸ©ä¸æˆæ–¹åœ†ï¼Œä»£ç é‡Œé¢ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚1.worker å¯åŠ¨å,åœ¨preStartæ–¹æ³•ä¸­ä¸masterå»ºç«‹é“¾æ¥ï¼Œå‘Masterå‘é€æ³¨å†Œæ¶ˆæ¯ï¼ˆå°†workerçš„ä¿¡æ¯é€šè¿‡æ ·ä¾‹ç±»å°è£…èµ·æ¥å‘é€ç»™masterï¼‰2.Masteræ¥æ”¶åˆ°Workerçš„æ³¨å†Œæ¶ˆæ¯åå°†workerçš„ä¿¡æ¯ä¿å­˜èµ·æ¥ï¼Œå‘workeråé¦ˆæ³¨å†ŒæˆåŠŸ3.Workerå®šæœŸè¦å‘masterå‘é€å¿ƒè·³(é˜²æ­¢workeræŒ‚æ‰)4.å¦‚æœworkeré•¿æ—¶é—´ä¸å›å¤ï¼Œå°±æŠŠè‡ªå·±å†…å­˜ä¸­çš„ä¿¡æ¯æ¸…é™¤ï¼Œé˜²æ­¢å°†ä»»åŠ¡åˆ†é…ç»™æ­»æ‰çš„worker åˆ›å»ºmavené¡¹ç›®åˆ›å»ºä¸€ä¸ªç©ºçš„mavené¡¹ç›®pom.xml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889&lt;properties&gt; ... &lt;scala.version&gt;2.10.6&lt;/scala.version&gt; &lt;scala.compat.version&gt;2.10&lt;/scala.compat.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.scala-lang&lt;/groupId&gt; &lt;artifactId&gt;scala-library&lt;/artifactId&gt; &lt;version&gt;$&#123;scala.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt; &lt;artifactId&gt;akka-actor_2.10&lt;/artifactId&gt; &lt;version&gt;2.3.14&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt; &lt;artifactId&gt;akka-remote_2.10&lt;/artifactId&gt; &lt;version&gt;2.3.14&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;sourceDirectory&gt;src/main/scala&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;src/test/scala&lt;/testSourceDirectory&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt; &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt; &lt;version&gt;3.2.2&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;goal&gt;testCompile&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;args&gt; &lt;arg&gt;-make:transitive&lt;/arg&gt; &lt;arg&gt;-dependencyfile&lt;/arg&gt; &lt;arg&gt;$&#123;project.build.directory&#125;/.scala_dependencies&lt;/arg&gt; &lt;/args&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt; &lt;version&gt;2.4.3&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;shade&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;filters&gt; &lt;filter&gt; &lt;artifact&gt;*:*&lt;/artifact&gt; &lt;excludes&gt; &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt; &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt; &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt; &lt;/excludes&gt; &lt;/filter&gt; &lt;/filters&gt; &lt;transformers&gt; &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt; &lt;resource&gt;reference.conf&lt;/resource&gt; &lt;/transformer&gt; &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt; &lt;mainClass&gt;com.zonegood.Master&lt;/mainClass&gt; &lt;/transformer&gt; &lt;/transformers&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt;å¦‚æœæ²¡æœ‰src/main/scala éœ€è¦æ‰‹åŠ¨åˆ›å»º ç¼–å†™Master123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172package com.zonegoodimport akka.actor.&#123;Actor, ActorSystem, Props&#125;import com.typesafe.config.ConfigFactoryimport com.zonegood.MessageBox._import scala.collection.mutableimport scala.concurrent.duration._class Master extends Actor&#123; val hashMap = new mutable.HashMap[String,WorkerInfo]() val CHECK_INTERVAL = 15000 override def preStart(): Unit = &#123; println(\"master run...\") import context.dispatcher // æ³¨å†Œå®šæ—¶task å¦‚æœworkeré•¿æ—¶é—´ä¸å›å¤ï¼Œå°±æŠŠè‡ªå·±å†…å­˜ä¸­çš„ä¿¡æ¯æ¸…é™¤ï¼Œé˜²æ­¢å°†ä»»åŠ¡åˆ†é…ç»™æ­»æ‰çš„worker context.system.scheduler.schedule(0 millis,CHECK_INTERVAL millis, self,CheckTimeOutWorker) &#125; override def receive: Receive = &#123; case WorkerStartedMessage(workerId:String,workerInfo : WorkerInfo) =&gt; &#123; println(\"worker connect\") // å°†workerä¿¡æ¯ hashMap.put(workerId,workerInfo) // å‘workeråé¦ˆæ³¨å†ŒæˆåŠŸ sender ! RegisterSuccessMessage &#125; case HeartBeatMessage(workerId:String) =&gt;&#123; // åˆ·æ–°æœ¬åœ°workerçš„çŠ¶æ€ if(hashMap.contains(workerId))&#123; val worker = hashMap(workerId) worker.flashTime = System.currentTimeMillis() &#125; &#125; case CheckTimeOutWorker =&gt;&#123; // æ‹¿åˆ°çš„æ˜¯è¶…æ—¶çš„æ¶ˆæ¯ï¼Œæ£€æµ‹workeræ˜¯å¦è¶…æ—¶ val currentTime = System.currentTimeMillis() val remove = hashMap.filter(t =&gt; (currentTime - t._2.flashTime) &gt; CHECK_INTERVAL) for (e &lt;- remove)&#123; hashMap -= e._1 &#125; println(hashMap.size) &#125; case HeartBeatSendMessage(workerId) =&gt;&#123; // æ›´æ–° val workerInfo = hashMap(workerId) workerInfo.flashTime = System.currentTimeMillis() &#125; &#125;&#125;object Master&#123; def main(args : Array[String]) :Unit = &#123; val host = args(0) val port = args(1).toInt val configStr = s\"\"\" |akka.actor.provider = \"akka.remote.RemoteActorRefProvider\" |akka.remote.netty.tcp.hostname = \"$host\" |akka.remote.netty.tcp.port = \"$port\" \"\"\".stripMargin val conf = ConfigFactory.parseString(configStr) val masterSystem = ActorSystem(\"masterSystem\",conf) masterSystem.actorOf(Props[Master],\"masterActor\") masterSystem.awaitTermination() &#125;&#125; ç¼–å†™Worker123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263package com.zonegoodimport java.util.UUIDimport akka.actor.&#123;Actor, ActorSelection, ActorSystem, Props&#125;import com.typesafe.config.ConfigFactoryimport com.zonegood.MessageBox.&#123;HeartBeatMessage, HeartBeatSendMessage, RegisterSuccessMessage, WorkerStartedMessage&#125;import scala.concurrent.duration._class Worker(id:String,masterHost:String,masterPort:Int) extends Actor with Serializable&#123; var master : ActorSelection = _ private[this] val HEART_BEAT_INTERVAL = 10000 val workerInfo = new WorkerInfo() override def preStart(): Unit = &#123; // connect master master = context.actorSelection( s\"akka.tcp://masterSystem@$masterHost:$masterPort/user/masterActor\") // register master ! new WorkerStartedMessage(this.id,workerInfo) &#125; override def receive: Receive = &#123; case RegisterSuccessMessage =&gt; &#123; // æ³¨å†Œç›‘å¬å™¨ import context.dispatcher context.system.scheduler.schedule(0 millis, HEART_BEAT_INTERVAL millis , self, HeartBeatMessage) &#125; case HeartBeatMessage =&gt; &#123; // resend message to master master ! new HeartBeatSendMessage(this.id) &#125; &#125;&#125;object Worker&#123; def main(args : Array[String]) : Unit = &#123; val host = args(0) val port = args(1).toInt val masterHost = args(2) val masterPort = args(3).toInt val configStr = s\"\"\" |akka.actor.provider = \"akka.remote.RemoteActorRefProvider\" |akka.remote.netty.tcp.hostname = \"$host\" |akka.remote.netty.tcp.port = \"$port\" \"\"\".stripMargin val conf = ConfigFactory.parseString(configStr) val workerSystem = ActorSystem(\"workerSystem\",conf) workerSystem.actorOf(Props(new Worker(UUID.randomUUID().toString,masterHost,masterPort)),\"workerActor\") workerSystem.awaitTermination() &#125;&#125; æ ·ä¾‹ç±»123456789package com.zonegoodobject MessageBox &#123; case class WorkerStartedMessage(workerId:String,workerInfo : WorkerInfo) case class RegisterSuccessMessage() case class CheckTimeOutWorker() case class HeartBeatMessage(workerId:String) case class HeartBeatSendMessage(workerId:String)&#125; å°è£…æ•°æ®ç±»123456package com.zonegoodclass WorkerInfo extends Serializable&#123; var flashTime = System.currentTimeMillis()&#125; ä½¿ç”¨maven-shade-pluginæ’ä»¶æ‰“åŒ…1.æ‰“åŒ…Masteræ‰§è¡Œ jarä¿®æ”¹pom.xml123&lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt; &lt;mainClass&gt;com.zonegood.Master&lt;/mainClass&gt;&lt;/transformer&gt;è¿è¡Œ mvn clean packagemv target/my-scala-rpc-1.0-SNAPSHOT.jar ~/workspace/master.jar2.æ‰“åŒ…Workeræ‰§è¡Œ jaråŒç† æ‰“å‡ºworker.jarè¿›å…¥åˆ°~/workspaceä½ å°±å¯ä»¥çœ‹åˆ°æ–°çš„ä¸¤ä¸ªjaræ–‡ä»¶ è¿è¡Œ$ cd ~/workspace$ java -jar master.jar 127.0.0.1 8888$ java -jar worker.jar 127.0.0.1 7001 127.0.0.1 8888$ java -jar worker.jar 127.0.0.1 7002 127.0.0.1 8888$ java -jar worker.jar 127.0.0.1 7003 127.0.0.1 8888æŸ¥çœ‹è¿è¡Œç»“æœå…³é—­å…¶ä¸­ä¸€ä¸ªWorkeræŸ¥çœ‹consoleç»“æœ","categories":[{"name":"ç¼–ç¨‹è¯­è¨€","slug":"ç¼–ç¨‹è¯­è¨€","permalink":"yihao.ml/categories/ç¼–ç¨‹è¯­è¨€/"}],"tags":[{"name":"Scala","slug":"Scala","permalink":"yihao.ml/tags/Scala/"}]},{"title":"git -- å¿½ç•¥æŸä¸ªæ–‡ä»¶","slug":"2018-08-08-gitignore é…ç½®","date":"2018-08-08T00:00:00.000Z","updated":"2019-11-29T12:20:47.673Z","comments":true,"path":"2018/08/08/2018-08-08-gitignore é…ç½®/","link":"","permalink":"yihao.ml/2018/08/08/2018-08-08-gitignore é…ç½®/","excerpt":"","text":"ä¿®æ”¹ .gitignore æ–‡ä»¶åœ¨gitä¸­å¦‚æœæƒ³å¿½ç•¥æ‰æŸä¸ªæ–‡ä»¶ï¼Œä¸è®©è¿™ä¸ªæ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¿®æ”¹ .gitignore æ–‡ä»¶çš„æ–¹æ³•ã€‚ä¸¾ä¾‹ï¼š.gitignoreæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132# Android generatedbin/gen/classes/gen-external-apklibs/# Antlocal.properties# Maventarget/release.properties# Eclipse.classpath.project.externalToolBuilders/.metadata.settings# IntelliJ*.iml*.ipr*.iws.idea/out/# Mac.DS_Store# gitignore.gitignore ä½¿ç”¨å‘½ä»¤.gitignoreåªèƒ½å¿½ç•¥é‚£äº›åŸæ¥æ²¡æœ‰è¢«trackçš„æ–‡ä»¶ï¼Œå¦‚æœæŸäº›æ–‡ä»¶å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œåˆ™ä¿®æ”¹.gitignoreæ˜¯æ— æ•ˆçš„ã€‚æ­£ç¡®çš„åšæ³•æ˜¯åœ¨æ¯ä¸ªcloneä¸‹æ¥çš„ä»“åº“ä¸­æ‰‹åŠ¨è®¾ç½®ä¸è¦æ£€æŸ¥ç‰¹å®šæ–‡ä»¶çš„æ›´æ”¹æƒ…å†µã€‚git update-index --assume-unchanged FILEåœ¨FILEå¤„è¾“å…¥è¦å¿½ç•¥çš„æ–‡ä»¶ã€‚å¦‚æœè¦è¿˜åŸçš„è¯ï¼Œä½¿ç”¨å‘½ä»¤ï¼šgit update-index --no-assume-unchanged FILE ä½¿ç”¨.git/info/excludegit è¿˜æä¾›äº†å¦ä¸€ç§ exclude çš„æ–¹å¼æ¥åšåŒæ ·çš„äº‹æƒ…ï¼Œä¸åŒçš„æ˜¯ .gitignore è¿™ä¸ªæ–‡ä»¶æœ¬èº«ä¼šæäº¤åˆ°ç‰ˆæœ¬åº“ä¸­å»ã€‚ç”¨æ¥ä¿å­˜çš„æ˜¯å…¬å…±çš„éœ€è¦æ’é™¤çš„æ–‡ä»¶ã€‚è€Œ .git/info/exclude è¿™é‡Œè®¾ç½®çš„åˆ™æ˜¯ä½ è‡ªå·±æœ¬åœ°éœ€è¦æ’é™¤çš„æ–‡ä»¶ã€‚ ä»–ä¸ä¼šå½±å“åˆ°å…¶ä»–äººã€‚ä¹Ÿä¸ä¼šæäº¤åˆ°ç‰ˆæœ¬åº“ä¸­å»ã€‚ä¸¾ä¾‹ï¼š1234567891011121314151617181920212223242526# git ls-files --others --exclude-from=.git/info/exclude# Lines that start with '#' are comments.# For a project mostly in C, the following would be a good set of# exclude patterns (uncomment them if you want to use them):# *.[oa]# *~.gradle/.idea/.settings/appcompat_v7/bin/build/gen/gradle/out/proguard/ship/target/.classpath.gitignore.idea.project.readme.update-config*.imllocal.properties.gitignore è¿˜æœ‰ä¸ªæœ‰æ„æ€çš„å°åŠŸèƒ½ï¼Œ ä¸€ä¸ªç©ºçš„ .gitignore æ–‡ä»¶ å¯ä»¥å½“ä½œæ˜¯ä¸€ä¸ª placeholder ã€‚å½“ä½ éœ€è¦ä¸ºé¡¹ç›®åˆ›å»ºä¸€ä¸ªç©ºçš„ log ç›®å½•æ—¶ï¼Œ è¿™å°±å˜çš„å¾ˆæœ‰ç”¨ã€‚ ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª log ç›®å½• åœ¨é‡Œé¢æ”¾ç½®ä¸€ä¸ªç©ºçš„ .gitignore æ–‡ä»¶ã€‚è¿™æ ·å½“ä½  clone è¿™ä¸ª repo çš„æ—¶å€™ git ä¼šè‡ªåŠ¨çš„åˆ›å»ºå¥½ä¸€ä¸ªç©ºçš„ log ç›®å½•äº†ã€‚","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Git","slug":"Git","permalink":"yihao.ml/tags/Git/"}]},{"title":"Raspberry Piå¾®å‹è®¡ç®—æœºçš„ä½¿ç”¨","slug":"2018-07-28-Raspberry Pi-Raspberry Piå¾®å‹è®¡ç®—æœºçš„ä½¿ç”¨","date":"2018-07-28T00:00:00.000Z","updated":"2019-11-29T12:20:47.673Z","comments":true,"path":"2018/07/28/2018-07-28-Raspberry Pi-Raspberry Piå¾®å‹è®¡ç®—æœºçš„ä½¿ç”¨/","link":"","permalink":"yihao.ml/2018/07/28/2018-07-28-Raspberry Pi-Raspberry Piå¾®å‹è®¡ç®—æœºçš„ä½¿ç”¨/","excerpt":"","text":"ç®€è¿°Raspberry Pi(ä¸­æ–‡åä¸ºâ€œæ ‘è“æ´¾â€,ç®€å†™ä¸ºRPiï¼Œ(æˆ–è€…RasPi / RPI)ï¼Œåªæœ‰ä¿¡ç”¨å¡å¤§å°çš„å¾®å‹ç”µè„‘ï¼Œå…¶ç³»ç»ŸåŸºäºLinuxã€‚ å…ˆä»ŠRaspberry Piå·²ç»å¯ä»¥å®‰è£…å¹¶è¿è¡ŒWindowæ“ä½œç³»ç»Ÿã€‚Raspberry Piæ˜¯ä¸€æ¬¾åŸºäºARMçš„å¾®å‹ç”µè„‘ä¸»æ¿ï¼Œä»¥SD/MicroSDå¡ä¸ºå†…å­˜ç¡¬ç›˜ï¼Œå¡ç‰‡ä¸»æ¿å‘¨å›´æœ‰1/2/4ä¸ªUSBæ¥å£å’Œä¸€ä¸ª10/100 ä»¥å¤ªç½‘æ¥å£ï¼ˆAå‹æ²¡æœ‰ç½‘å£ï¼‰ï¼Œå¯è¿æ¥é”®ç›˜ã€é¼ æ ‡å’Œç½‘çº¿ï¼ŒåŒæ—¶æ‹¥æœ‰è§†é¢‘æ¨¡æ‹Ÿä¿¡å·çš„ç”µè§†è¾“å‡ºæ¥å£å’ŒHDMIé«˜æ¸…è§†é¢‘è¾“å‡ºæ¥å£ï¼Œä»¥ä¸Šéƒ¨ä»¶å…¨éƒ¨æ•´åˆåœ¨ä¸€å¼ ä»…æ¯”ä¿¡ç”¨å¡ç¨å¤§çš„ä¸»æ¿ä¸Šï¼Œå…·å¤‡æ‰€æœ‰PCçš„åŸºæœ¬åŠŸèƒ½åªéœ€æ¥é€šç”µè§†æœºå’Œé”®ç›˜ï¼Œå°±èƒ½æ‰§è¡Œå¦‚ç”µå­è¡¨æ ¼ã€æ–‡å­—å¤„ç†ã€ç©æ¸¸æˆã€æ’­æ”¾é«˜æ¸…è§†é¢‘ç­‰è¯¸å¤šåŠŸèƒ½ã€‚ Raspberry Pi Bæ¬¾åªæä¾›ç”µè„‘æ¿ï¼Œæ— å†…å­˜ã€ç”µæºã€é”®ç›˜ã€æœºç®±æˆ–è¿çº¿ã€‚æ ‘è“æ´¾çš„ç”Ÿäº§æ˜¯é€šè¿‡æœ‰ç”Ÿäº§è®¸å¯çš„ä¸‰å®¶å…¬å¸Element 14/Premier Farnellã€RS ComponentsåŠEgomanã€‚è¿™ä¸‰å®¶å…¬å¸éƒ½åœ¨ç½‘ä¸Šå‡ºå”®æ ‘è“æ´¾ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨è¯¸å¦‚äº¬ä¸œã€æ·˜å®ç­‰å›½å†…ç½‘ç«™è´­ä¹°åˆ°ä½ æ‰€æƒ³è¦çš„æ ‘è“æ´¾ã€‚æ ‘è“æ´¾åŸºé‡‘ä¼šæä¾›äº†åŸºäºARMçš„Debianå’ŒArch Linuxçš„å‘è¡Œç‰ˆä¾›å¤§ä¼—ä¸‹è½½ã€‚è¿˜è®¡åˆ’æä¾›æ”¯æŒPythonä½œä¸ºä¸»è¦ç¼–ç¨‹è¯­è¨€ï¼Œæ”¯æŒJavaã€BBC BASIC (é€šè¿‡ RISC OS æ˜ åƒæˆ–è€…Linuxçš„&quot;Brandy Basic&quot;å…‹éš†)ã€C å’ŒPerlç­‰ç¼–ç¨‹è¯­è¨€.æ‘˜è‡ªç™¾åº¦ç™¾ç§‘ å‰æœŸå‡†å¤‡å¦‚æœæƒ³ç©Raspberry Pi,æ¥å…ˆä»è½¯ç¡¬ä»¶ä¸¤æ–¹é¢æ¥åˆ—ä¸€ä¸‹å‰æœŸçš„å‡†å¤‡ã€‚ ç¡¬ä»¶1.Raspberry Piä¸»æ¿ (238 RMB)åœ¨ä¹°ä¸»æ¿çš„æ—¶å€™ï¼Œåº—å®¶å¾€å¾€ä¼šç»™ä½ æ¨èå¾ˆå¤šé…ä»¶ï¼Œæ¯”å¦‚ç”µæºã€SDå¡ã€æ•£çƒ­ç‰‡ã€å¤–å£³ç­‰ç­‰ï¼Œä¸ä¹°ä¹Ÿä¸å½±å“æ­£å¸¸ä½¿ç”¨ï¼Œæˆ‘è´­ä¹°çš„æ—¶å€™ä»€ä¹ˆé…ä»¶éƒ½æ²¡è¦ï¼Œåªè¦äº†ä¸€ä¸ªä¸»æ¿å…³äºç”µæºçš„è¯ï¼Œæˆ‘ç”¨çš„æ˜¯å°ç±³çš„æ‰‹æœºå……ç”µå™¨ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹è¯´æ˜ä¹¦ä¸Šæ ‡æ˜ç”µæºè¦ç”¨5V-2Açš„ç”µæºï¼Œå¦‚æœä¸æ˜¯5V-2Açš„æœ€å¥½è¿˜æ˜¯åˆ«ç”¨ã€‚å½“ç„¶å¦‚æœæ˜¯ä¸ªä¸å·®é’±çš„å½“æˆ‘å•¥éƒ½æ²¡è¯´ã€‚ï¼ˆåœŸè±ªä¸€èµ·ç©å•Šï¼ï¼vï¼‰2.SDå¡ (59 RMB)SDå¡æˆ‘è¿™è¾¹æ˜¯å•ç‹¬è´­ä¹°çš„ï¼Œä¹°çš„æ˜¯é—ªè¿ª32Gçš„ï¼Œå¬æœ‹å‹è¯´8Gå°±å·²ç»å¤Ÿç”¨äº†ï¼Œå¦‚æœä½ è§‰å¾—å¤ªå°å¯ä»¥ä¹°16G(40+ RMB)ã€‚32G ç¡®å®æœ‰ç‚¹å¤ªå¤§äº†ã€‚3.è¯»å¡å™¨(6 RMB)è¯»å¡å™¨æ˜¯åœ¨SDå¡write OSæ—¶ç”¨çš„ã€‚æˆ‘è¿™è¾¹ä»ä¾¿åˆ©åº—ä¹°äº†ä¸€ä¸ªä¾¿å®œè´§6å—é’±ã€‚ è½¯ä»¶è½¯ä»¶éœ€è¦å‡†å¤‡ä¸‰ä¸ªï¼Œä¸‰ä¸ªè½¯ä»¶éƒ½æ˜¯ä¸ºäº†åˆ¶ä½œSDè€Œå‡†å¤‡çš„1.SDFormatterç”¨è¿™ä¸ªæ›´æ˜¯åŒ–SDå¡2.Win32DiskImagerè¿™ä¸ªæ˜¯å¾€SDå¡ä¸­å†™æ“ä½œç³»ç»Ÿç”¨çš„3.RASPBIAN OSRASPBIAN OSå®ƒæ˜¯æ ‘æ¢…æ´¾åŸºé‡‘ä¼šä¸“é—¨ä¾æ®debainæ“ä½œç³»ç»Ÿæ”¹å‡ºæ¥çš„ä¸€ä¸ªæ–°çš„å®šåˆ¶åŒ–çš„æ“ä½œç³»ç»Ÿã€‚ä¹Ÿæ˜¯å®˜æ–¹æ¨èå®‰è£…çš„ä¸€æ¬¾æ“ä½œç³»ç»Ÿã€‚è¿™è¾¹æ²¹ä¸¤ä¸ªä¸åŒç‰ˆæœ¬RASPBIAN STRETCH WITH DESKTOP : ä¼šå¸¦ç€æ¡Œé¢ä¸€èµ·å®‰è£…RASPBIAN STRETCH LITE ï¼š åªå®‰è£…å‘½ä»¤è¡Œï¼Œä¸å®‰è£…æ¡Œé¢å…³äºé€‰æ‹©å“ªä¸ªï¼Œå…¨åœ¨ä¸ªäººï¼Œæƒ³è¦æ¡Œé¢å°±å®‰ç¬¬ä¸€ä¸ªã€‚æˆ‘ä½¿ç”¨çš„ç¬¬ç¬¬äºŒä¸ªä¸å¸¦æ¡Œé¢çš„ã€‚ åˆ¶ä½œSDå¡å…·ä½“æµç¨‹ä¹Ÿå¾ˆç®€å•ï¼Œè¿™è¾¹å¤§æ¦‚è¯´ä¸€ä¸‹ï¼Œç”¨è¯»å¡å™¨å°†SDå¡ä¸ç”µè„‘è¿æ¥èµ·æ¥ï¼Œç”¨SDFormatteræ ¼å¼åŒ–SDå¡ï¼Œå¯åŠ¨Win32DiskImagerï¼Œé€‰æ‹©ä¸‹å¥½çš„é•œåƒï¼Œç‚¹å‡»writeå†™å…¥SDç­‰å¾…æˆåŠŸå³å¯ã€‚ SSHè¿™è¾¹æ²¡æœ‰ç½‘çº¿ï¼Œä¹Ÿæ²¡æœ‰æ˜¾ç¤ºå™¨ï¼Œé‚£ä¹ˆè¦æ€ä¹ˆsshï¼Ÿå…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ 1.æ–¹æ¡ˆä¸€å‰æä½ éœ€è¦å‡†å¤‡ä¸€ä¸ªlinuxæ“ä½œç³»ç»Ÿã€‚æ’ä¸ŠSDå¡ï¼Œå¦‚æœä½ æ˜¯linuxæ“ä½œç³»ç»Ÿï¼Œé™¤äº†ç¬¬ä¸€ä¸ªbootç›˜ç¬¦æ„å¤–ï¼Œä½ å°±èƒ½çœ‹åˆ°ç¬¬äºŒä¸ªç›˜ç¬¦ï¼Œå«&quot;rootfs&quot;$ sudo vim rootfs/etc/wap_supplicant/wpa_supplicant.confåœ¨å…¶ä¸­æ·»åŠ ä¸‹æ®µä»£ç 1234network=&#123;ssid=\"your wifi name\"psk=\"your wifi password\"&#125;è¿›å…¥åˆ°ä¸rootfså¹¶åˆ—çš„bootç›®å½•,åœ¨å…¶ä¸­æ·»åŠ ä¸€ä¸ªç©ºçš„åå­—ä¸ºsshçš„æ–‡ä»¶$ touch boot/sshæ‹”å‡ºSDå¡ï¼Œå°†SDå¡æ’å…¥Raspberry Piä¸»æ¿å¡æ§½ä¸­ï¼Œæ’ä¸Šå°ç±³æ‰‹æœºå……ç”µå™¨ï¼Œåœ¨äº‹å…ˆç™»å½•å¥½çš„è·¯ç”±å™¨ç®¡ç†ç•Œé¢æŸ¥çœ‹IPå˜åŒ–ã€‚æ–°å¢çš„é‚£ä¸ªIPå°±æ˜¯Raspberry Piçš„ipäº†ç„¶åå°±å¯ä»¥æ„‰å¿«çš„é“¾æ¥sshäº†ã€‚é»˜è®¤å¸å·:piå¯†ç :raspberry$ ssh pi@192.168.100.109å‡å¦‚æ²¡æœ‰linuxæ“ä½œç³»ç»Ÿï¼Œæˆ‘ä»¬å°±ä¸èƒ½ä¿®æ”¹/etc/wpa_supplicant ç›®å½•ä¸‹çš„ wpa_supplicant.confæ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å¯ä»¥å°è¯•æ–¹æ¡ˆäºŒ 2.æ–¹æ¡ˆäºŒæ’ä¸ŠSDå¡,å› ä¸ºæ˜¯windowæ‰€ä»¥åªèƒ½çœ‹åˆ°bootåˆ†åŒºï¼Œåœ¨bootåˆ†åŒºä¸‹æ–°å»º ç©ºçš„sshæ–‡ä»¶å†åˆ›å»ºä¸€ä¸ªwpa_supplicant.confå°†ä¸‹æ®µä»£ç æ›¿æ¢è¿›å»1234567ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdevupdate_config=1network=&#123;ssid=\"your wifi name\"psk=\"your wifi password\"&#125;å°†å†…å­˜å¡æ‹”å‡ºé‡æ–°æ’å…¥æ¥ä¸Šç”µæº,æ“ä½œç³»ç»Ÿä¼šå°†bootä¸‹çš„wpa_supplicant.conf,æ›¿æ¢åˆ°/etc/wpa_supplicant/ç›®å½•ä¸‹ã€‚æœ€ååŒä¸Šæ‰¾åˆ°ipï¼Œè¿›è¡Œsshå°±å¥½äº†ä¸‹é¢è¯´ä¸€ä¸‹æˆ‘åœ¨æ¢ç´¢è¿™å—æ—¶è¸©è¿‡çš„å‘å…³äºwpa_supplicant.confé‡Œé¢çš„å†™æ³•ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œå¼€å§‹å‚è€ƒäº†ä¸¤ç¯‡æ–‡ç« ï¼Œé‡Œé¢çš„é…ç½®æˆ‘è¯•äº†è¯•éƒ½ä¸è¡Œï¼ŒæŠ˜è…¾äº†ä¸€ä¸‹åˆï¼Œå…¶ä¸­çš„å¿ƒé…¸ä¸€è¨€éš¾å°½ï¼Œå°½ç®¡å¦‚æ­¤è¿™è¾¹è¿˜æ˜¯é™„ä¸Šé“¾æ¥åœ°å€é“¾æ¥ä¸€ï¼Œé“¾æ¥äºŒç»è¿‡è¸©å‘ä»¥åï¼Œè¿™è¾¹å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œäº†è°ƒæ•´æœ€åæ‰æˆåŠŸã€‚å°±æ˜¯æŠŠé‡Œé¢çš„ç¬¬ä¸€è¡Œcountry=xx åˆ æ‰.çŒœæµ‹çš„åŸå› æ˜¯ï¼Œå› ä¸ºxxå¡«å†™çš„å¹¶ä¸æ­£ç¡®å¯¼è‡´æ— æ³•æ­£å¸¸é“¾æ¥wifiã€‚è¿™è¾¹å¹²è„†å°±æŠŠå®ƒåˆ æ‰ï¼Œå› ä¸ºåˆ æ‰å°±æ˜¯é»˜è®¤çš„äº†ï¼Œäº‹å®è¯æ˜åˆ æ‰å®ƒä»¥åwifiå°±å¯ä»¥è¿äº†ï¼ŒçŒœæµ‹æ˜¯æ­£ç¡®çš„ã€‚","categories":[{"name":"ç‰©è”ç½‘","slug":"ç‰©è”ç½‘","permalink":"yihao.ml/categories/ç‰©è”ç½‘/"}],"tags":[{"name":"Raspberry Pi","slug":"Raspberry-Pi","permalink":"yihao.ml/tags/Raspberry-Pi/"}]},{"title":"sqlserverä¸­orå’Œandä¼˜å…ˆçº§é—®é¢˜","slug":"2018-07-27-sqlserver-sqlserverä¸­orå’Œandä¼˜å…ˆçº§é—®é¢˜","date":"2018-07-27T00:00:00.000Z","updated":"2019-11-29T12:20:47.672Z","comments":true,"path":"2018/07/27/2018-07-27-sqlserver-sqlserverä¸­orå’Œandä¼˜å…ˆçº§é—®é¢˜/","link":"","permalink":"yihao.ml/2018/07/27/2018-07-27-sqlserver-sqlserverä¸­orå’Œandä¼˜å…ˆçº§é—®é¢˜/","excerpt":"","text":"ä»Šå¤©å‘ç°å†™çš„æ¥å£æœ‰é—®é¢˜,æ’æŸ¥åˆ°æœ€åå‘ç°å› ä¸ºè‡ªå·±å¿½ç•¥äº†sqlserverä¸­orå’Œandçš„ä¼˜å…ˆçº§ï¼Œå¯¼è‡´æŸ¥è¯¢çš„æ•°æ®ä¸æ­£ç¡®ã€‚å…³äºä»–ä»¬çš„ä½¿ç”¨è§ä¸‹é¢çš„ä¾‹å­æ¯”å¦‚æƒ³è¦æŸ¥è¯¢é«˜ä¸‰2ç­2000å¹´å‡ºç”Ÿæˆ–è€…æ˜¯2002å¹´å‡ºç”Ÿçš„æ‰€æœ‰ç”·ç”Ÿï¼Œé‚£ä¹ˆsqlåº”è¯¥è¿™ä¹ˆå†™1select * from tb_class where sex = 'male' and (birth = '2000' or birth = '2002')è¿˜æœ‰å¦ä¸€ç§å†™æ³•ï¼Œå¯ä»¥ç”¨inä»£æ›¿or1select * from tb_class where sex = 'male' and birth in ( '2000' , '2002')","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[]},{"title":"NoClassDefFoundErrorå’ŒClassNotFoundExceptioçš„åŒºåˆ«","slug":"2018-06-29-Exception-NoClassDefFoundErrorå’ŒClassNotFoundExceptioçš„åŒºåˆ«","date":"2018-06-29T00:00:00.000Z","updated":"2019-11-29T12:20:47.671Z","comments":true,"path":"2018/06/29/2018-06-29-Exception-NoClassDefFoundErrorå’ŒClassNotFoundExceptioçš„åŒºåˆ«/","link":"","permalink":"yihao.ml/2018/06/29/2018-06-29-Exception-NoClassDefFoundErrorå’ŒClassNotFoundExceptioçš„åŒºåˆ«/","excerpt":"","text":"é—®é¢˜æè¿°å°ä¼™ä¼´çªç„¶è¯´æ–°éƒ¨ç½²çš„ä¼ä¸šçº§æŸåŠŸèƒ½ä¸èƒ½ç”¨äº†ï¼Œåˆ°çº¿ä¸ŠæŸ¥çœ‹ï¼Œå‘ç°è®¿é—®ç•Œé¢æŠ¥ NoClassDefFoundError com.xxxx.xxxx.xxx.java å¼‚å¸¸ã€‚ é—®é¢˜æ’æŸ¥ä¹ä¸€çœ‹NoClassDefFoundErrorè²Œä¼¼æ˜¯ç±»æ²¡æ‰¾åˆ°ï¼Œä½ ä¼šå‘ç°tomcatä¸­å¹¶æ²¡æœ‰ç¼ºå°‘ä»»ä½•classã€‚é‚£ä¹ˆè¿™ä¸ªå¼‚å¸¸åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ã€‚çœ‹ä¸‹é¢javaä»£ç :12345678910111213141516171819202122public class Constants &#123; static String ABC = \"abc\"; static &#123; if (1 == 1) throw new RuntimeException(); &#125;&#125;public class Test &#123; public static void main(String[] args) &#123; new Thread() &#123; public void run() &#123; String s2 = Constants.ABC; &#125; &#125;.start(); try &#123; Thread.sleep(1000); &#125; catch (Exception e) &#123; &#125; String s = Constants.ABC; &#125;&#125;åœ¨è¿è¡Œä¸Šé¢ç¨‹åºåï¼Œä¼šæŠ¥NoClassDefFoundErrorå¼‚å¸¸ï¼ŒåŸå› æ˜¯ï¼šåœ¨åˆå§‹åŒ–Constantsç±»æ—¶è°ƒç”¨äº†staticé™æ€ä»£ç å—æŠ›äº†å¼‚å¸¸ã€‚æ‰€ä»¥å†æ¬¡ä½¿ç”¨Constantsç±»æ—¶å°±æŠ¥äº†è¿™ä¸ªé”™è¯¯äº†ã€‚ è§£å†³é‚£ä¹ˆé—®é¢˜å®šä½åˆ°äº†ä»¥åï¼Œåˆ°çº¿ä¸Šå¯¹com.xxxx.xxxx.xxx.class è¿›è¡Œåç¼–è¯‘ å‘ç°æœ‰è¿™æ ·ä¸€æ®µä»£ç 123456789101112static&#123; // ... String sql = \"select cversion from license\"; st = rs.executeSql(sql); while(st.next())&#123; if( StringUtil.isNullOrEmpty(st.getString(1)))&#123; throw new Exception(); &#125; // ... &#125; // ....&#125;åˆ°æ•°æ®åº“æŸ¥äº†ä¸€ä¸‹licenseè¡¨,å‘ç°cversion å­—æ®µçš„å€¼ä¸ºnull","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"Alipayå¯¹æ¥","slug":"2018-07-24-alipay-Alipayæ”¯ä»˜å®é›†æˆ","date":"2018-06-24T00:00:00.000Z","updated":"2019-11-29T12:20:47.672Z","comments":true,"path":"2018/06/24/2018-07-24-alipay-Alipayæ”¯ä»˜å®é›†æˆ/","link":"","permalink":"yihao.ml/2018/06/24/2018-07-24-alipay-Alipayæ”¯ä»˜å®é›†æˆ/","excerpt":"","text":"åœ¨å¼€å§‹å¼€å‘ä¹‹å‰ï¼Œéœ€è¦é€šè¿‡å‘é˜¿é‡Œç”³è¯·è·å–ç›¸å…³ä¿¡æ¯ï¼Œä¸»è¦å°±æ˜¯å®¡æ ¸ï¼Œå®¡æ ¸é€šè¿‡åä¼šå¾—åˆ°ç›¸å…³å‚æ•°éšåä¸springåšé›†æˆ,è¿™è¾¹çš„æ€è·¯æ˜¯ç”±springå®¹å™¨å»ç®¡ç†DefaultAlipayClientå’ŒAlipayPaymentAlipayPaymentæ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„æ¥å£DefaultAlipayClient æ˜¯é˜¿é‡Œæä¾›ç»™æˆ‘ä»¬çš„æ¥å£12345678910&lt;bean class=\"com.alipay.api.DefaultAlipayClient\" name=\"alipayClient\" autowire=\"byName\"&gt; &lt;constructor-arg value=\"$&#123;alipay.gateway&#125;\"/&gt; &lt;constructor-arg value=\"$&#123;alipay.appId&#125;\"/&gt; &lt;constructor-arg value=\"$&#123;alipay.appPrivateKey&#125;\"/&gt; &lt;constructor-arg value=\"json\"/&gt; &lt;constructor-arg value=\"utf-8\"/&gt; &lt;constructor-arg value=\"$&#123;alipay.appPublicKey&#125;\"/&gt; &lt;constructor-arg value=\"RSA2\"/&gt;&lt;/bean&gt;&lt;bean class=\"com.bim.bdip.cloud.home.payment.AlipayPayment\" name=\"alipayPayment\" autowire=\"byName\"/&gt; è´­ä¹°ç•Œé¢å…¥å£12345678910111213141516171819// è´­ä¹°å…‘æ¢ç @RequestMapping(method = RequestMethod.POST, value = \"/buy\", produces = \"text/html\")@ResponseBodypublic String buyRedeemCode(HttpServletRequest request, HttpServletResponse response) throws PaymentException, IOException &#123; HttpSession session = request.getSession(); BimUser bimUser = (BimUser) session.getAttribute(ConstantDefine.LOGIN_SESSION_USER); if (bimUser == null) &#123; String page = \"/page/bdip/baseModel/index\"; response.sendRedirect(page); &#125; long uId = bimUser.getId(); String redeemCodeLevel = request.getParameter(\"redeemCodeLevel\"); String paymentMethod = request.getParameter(\"paymentMethod\"); Object[] param = new Object[]&#123;redeemCodeLevel, uId, paymentMethod&#125;; Parameter parameter = new Parameter(BizServiceDefine.bimOrderService, \"buyRedeemCode\").setParam(param); parameter = bizProvider.execute(parameter); BimOrder order = parameter == null ? null : (BimOrder) parameter.getModel(); return alipayPayment.pay(order).getBody();&#125; ä¸šåŠ¡å±‚1.é”å®šå•†å“ï¼Œç¦æ­¢ä»–äººè´­ä¹°2.ç”Ÿæˆè®¢å•123456789101112131415161718192021222324252627282930@Overridepublic BimOrder buyRedeemCode(String redeemCodeLevel, Long uid, String paymentMethod) &#123; BimOrder order = new BimOrder(); BimRedeemLevel redeemLevel = new BimRedeemLevel(); redeemLevel.setLevel(redeemCodeLevel); redeemLevel = bimRedeemLevelMapper.selectOne(redeemLevel); Wrapper&lt;BimRedeemCode&gt; wrapper = new EntityWrapper&lt;&gt;(); wrapper = wrapper.where(\"redeem_level_id = &#123;0&#125;\", redeemLevel.getId()) .and(\"status = 0\") // æœªå”®å‡º .and(\"redeem_code_type = 1\"); // çº¿ä¸Šè´­ä¹° List&lt;BimRedeemCode&gt; bimRedeemCodes = bimRedeemCodeMapper.selectList(wrapper); if (bimRedeemCodes.size() == 0) &#123; return null; &#125; String subject = String.format(\"è´­ä¹° %.2fåŸƒå¸ å…‘æ¢ç \", redeemLevel.getIcoinAmount()); BimRedeemCode redeemCode = bimRedeemCodes.get(0); redeemCode.setStatus(ConstantDefine.REDEEM_CODE_STATUS_LOCKED); bimRedeemCodeMapper.updateById(redeemCode); order.setAmount(redeemLevel.getAmount()); order.setPayExpireTime(new Date(new Date().getTime() + 1800000l)); // åŠå°æ—¶è¿‡æœŸ order.setCurrencyType(ConstantDefine.CURRENCY_CNY); order.setCommodityTypeId(1l); order.setPaymentMethod(paymentMethod); order.setCreatedRole(0); // ç”¨æˆ· order.setUserId(uid); order.setProductId(redeemCode.getId()); order.setSubject(subject); return this.addBimOrder(order);&#125; alipayPayment æ˜¯ä¸ºäº†å¯¹æ¥åšä¸€ä¸ªç®€å•çš„å°è£…ã€‚1.alipayClient2.returnUrl3.notifyUrl12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152@Servicepublic class AlipayPayment implements IPayment &#123; private Logger logger = LogManager.getLogger(this.getClass()); @Autowired private AlipayClient alipayClient; @Value(\"$&#123;alipay.returnUrl&#125;\") private String returnUrl; @Value(\"$&#123;alipay.notifyUrl&#125;\") private String notifyUrl; @Override public PaymentResult pay(BimOrder order) throws PaymentException &#123; AlipayTradePagePayRequest request = new AlipayTradePagePayRequest(); AlipayTradePagePayModel model = new AlipayTradePagePayModel(); request.setReturnUrl(returnUrl); request.setNotifyUrl(notifyUrl); JSONObject bizContent = new JSONObject(); bizContent.put(\"out_trade_no\", order.getOrderNumber()); bizContent.put(\"product_code\", \"FAST_INSTANT_TRADE_PAY\");// bizContent.put(\"total_amount\", order.getAmount()); bizContent.put(\"total_amount\", 0.01); // è®¾ç½®æ¶ˆè´¹é‡‘é¢ bizContent.put(\"subject\", order.getSubject()); bizContent.put(\"body\", order.getSubject()); request.setBizContent(bizContent.toJSONString()); PaymentResult paymentResult = new PaymentResult(); try &#123; AlipayResponse response = alipayClient.pageExecute(request); String body = response.getBody(); paymentResult.setResultType(PaymentResultType.BODY); paymentResult.setBody(body); &#125; catch (AlipayApiException e) &#123; logger.catching(e); throw new PaymentException(e); &#125; return paymentResult; &#125; @Override public boolean refund(BimOrder order) &#123; return false; &#125; @Override public boolean cancel(BimOrder order) &#123; return false; &#125;&#125;pay æ¥å£è´Ÿè´£å°†ç”Ÿæˆå¥½çš„Orderè®¢å•ä¿¡æ¯å‘é€ç»™é˜¿é‡Œï¼Œç„¶åé˜¿é‡Œé‚£è¾¹ä¼šè¿”å›ä¸€ä¸ªç»“æœ1234567891011121314public class PaymentResult &#123; private String redirectUrl; private String body; private PaymentResultType resultType; private String orderNo; private Date expireTime; // ====== setter and getter =====&#125;public enum PaymentResultType &#123; REDIRECT, BODY&#125;å½“ç”¨æˆ·æ”¯ä»˜ä»¥åï¼Œå°±ä¼šèµ°æˆ‘ä»¬å†™çš„å›è°ƒå‡½æ•°,returnUrl å’Œ notifyUrlä¿©å‚æ•°å®ç°å·²ç»åœ¨Common-config.propertieså†™å¥½alipay.returnUrl=http://cloud.bimbdip.com/callbacks/paymentReturnalipay.notifyUrl=http://cloud.bimbdip.com/callbacks/paymentNotify1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071@Controller@Api(value = \"å›è°ƒ\")@RequestMapping(\"/callbacks\")@PropertySources(value = &#123;@PropertySource(\"classpath:Common-config.properties\"), @PropertySource(\"classpath:user_space_size.properties\")&#125;)public class CallbacksController &#123; @Autowired private IBizProvider bizProvider; @Autowired private AlipayClient alipayClient; @Value(\"$&#123;alipay.publicKey&#125;\") private String alipayPublicKey; @ApiOperation(value = \"æ”¯ä»˜å®notify\") @RequestMapping(method = RequestMethod.POST, value = \"/alipayNotify\", produces = \"text/plain;charset=UTF-8\") public @ResponseBody String alipayNotify(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; Map&lt;String, String&gt; map = new HashMap&lt;&gt;(); for (String key : request.getParameterMap().keySet()) &#123; map.put(key, request.getParameter(key)); &#125; boolean signatureVerified = AlipaySignature.rsaCheckV1(map, alipayPublicKey, \"utf-8\", \"RSA2\"); if (signatureVerified) &#123; String orderNumber = request.getParameter(\"out_trade_no\"); String paymentOrderNumber = request.getParameter(\"trade_no\"); this.alipayOrderPaid(orderNumber, paymentOrderNumber); &#125; return \"success\"; &#125; /* * æ”¯ä»˜å®Return */ @ApiOperation(value = \"æ”¯ä»˜å®return\") @RequestMapping(method = RequestMethod.GET, value = \"/alipayReturn\") public String alipayReturn(HttpServletRequest request, HttpServletResponse response) throws AlipayApiException &#123; Map&lt;String, String&gt; params = new HashMap&lt;&gt;(); Map&lt;String, String[]&gt; requestParams = request.getParameterMap(); for (Iterator&lt;String&gt; iter = requestParams.keySet().iterator(); iter.hasNext(); ) &#123; String name = (String) iter.next(); String[] values = (String[]) requestParams.get(name); String valueStr = \"\"; for (int i = 0; i &lt; values.length; i++) &#123; valueStr = (i == values.length - 1) ? valueStr + values[i] : valueStr + values[i] + \",\"; &#125; //ä¹±ç è§£å†³ï¼Œè¿™æ®µä»£ç åœ¨å‡ºç°ä¹±ç æ—¶ä½¿ç”¨// valueStr = new String(valueStr.getBytes(\"ISO-8859-1\"), \"utf-8\"); params.put(name, valueStr); &#125; boolean signatureVerified = AlipaySignature.rsaCheckV1(params, alipayPublicKey, \"utf-8\", \"RSA2\"); if (signatureVerified) &#123; String orderNumber = request.getParameter(\"out_trade_no\"); String paymentOrderNumber = request.getParameter(\"trade_no\"); this.alipayOrderPaid(orderNumber, paymentOrderNumber); &#125; else &#123; return \"forward:/page/bdip/user/index\"; &#125; return \"forward:/page/bdip/redeemcode/record\"; &#125; private void alipayOrderPaid(String orderNumber, String paymentOrderNumber) &#123; Object[] param = new Object[]&#123;orderNumber, \"ALIPAY\", paymentOrderNumber&#125;; Parameter parameter = new Parameter(BizServiceDefine.bimOrderService, \"orderPaid\").setParam(param); bizProvider.execute(parameter); &#125;&#125; å…³äºreturnUrlå’ŒnotifyUrlä¹°å®¶ä»˜æ¬¾æˆåŠŸä»¥å,æ”¯ä»˜å®é‚£è¾¹ä¼šè°ƒç”¨returnUrlæ¥å£ï¼Œè·³è½¬åˆ°ç›¸åº”ç•Œé¢å±•ç¤ºç»™ç”¨æˆ·çœ‹ã€‚åªæœ‰å½“ç”¨æˆ·ä»˜æ¬¾æˆåŠŸä»¥åæ‰æœ‰æ•ˆnotifyUrlï¼Œæ˜¯ç”¨æˆ·åå°é€šä¿¡å­˜åœ¨çš„ï¼Œå½“ç”¨æˆ·ä»˜æ¬¾æˆåŠŸä»¥åï¼Œæ”¯ä»˜å®ä¼šè°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨è¿™ä¸ªæ¥å£ä¸­ä¿®æ”¹è®¢å•çŠ¶æ€ä»¥åŠå•†å“çŠ¶æ€ï¼ŒæˆåŠŸä»¥åè¿”å›ä¸€ä¸ª&quot;success&quot;å³å¯è€ƒè™‘åˆ°å®‰å…¨æ€§é—®é¢˜ä»£ç ä¸­ä½¿ç”¨äº†RSAéå¯¹ç§°åŠ å¯†åè®®å¯¹é€šä¿¡çš„ä¿¡æ¯è¿›è¡ŒåŠ è§£å¯†ã€‚(AlipaySignature.rsaCheckV1)è‡³æ­¤åŸºç¡€å¼€å‘åº”è¯¥å°±å·²ç»ç»“æŸäº†ã€‚æ ¹æ®å®æ™¯æƒ…å†µåšå…·ä½“è°ƒæ•´","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[]},{"title":"hbaseé›†ç¾¤æ­å»º","slug":"2018-06-21-hbase-hbaseé›†ç¾¤æ­å»º","date":"2018-06-21T00:00:00.000Z","updated":"2019-11-29T12:20:47.671Z","comments":true,"path":"2018/06/21/2018-06-21-hbase-hbaseé›†ç¾¤æ­å»º/","link":"","permalink":"yihao.ml/2018/06/21/2018-06-21-hbase-hbaseé›†ç¾¤æ­å»º/","excerpt":"","text":"æœ¬æœºç¯å¢ƒUbuntu 16.0.4 TLSVmware Workstation 14.1.1hadoop 2.7.3 ï¼ˆé›†ç¾¤ï¼‰zookeeper 3.4.10 (é›†ç¾¤)å‰æå·²ç»åœ¨VMä¸­éƒ¨ç½²å¥½Hadoop å’ŒZookeeperé›†ç¾¤ã€‚æœ¬æ¬¡ä½¿ç”¨3å°ä¸»æœºåˆ†åˆ«ä¸ºcor1ã€cor2ã€cor3ï¼Œåœ¨éƒ¨ç½²Hbaseä¹‹å‰é¦–å…ˆç¡®ä¿zookeeperå’Œhadoopå®Œå¥½ä¸”å¯ç”¨ã€‚ ä¸‹è½½apacheå®˜æ–¹ä¸‹è½½,é€‰å–çš„ç‰ˆæœ¬æ˜¯hbase-2.0.1-bin.tar.gzã€‚å…³äºhbaseå’Œhadoopç‰ˆæœ¬çš„å¯¹åº”å…³ç³»ï¼Œè¿™è¾¹ç»™ä¸€ä¸ªblogåšå‚è€ƒhttps://blog.csdn.net/vtopqx/article/details/77882491ï¼Œå°ä¼™ä¼´ä¹Ÿå¯ä»¥å»çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œä¼šæ›´è¯¦ç»†ä¸€äº›ã€‚ å®‰è£…è§£å‹åˆ°å½“å‰ç›®å½•$ tar -zxvf hbase-2.0.1-bin.tar.gz -C ./è¿›å»confç›®å½•ç¼–è¾‘hbase-env.shæ–‡ä»¶$ vim hbase-env.sh12345678910111213# the java implementation to use. 1.7+ requiredexport JAVA_HOME=/opt/jdk//jdk1.8.0_66# export JAVA_HOME=/usr/java/jdk1.8.0_66# è®¾ç½®æ—¥å¿—ç›®å½•å’ŒPIDç›®å½•export HBASE_LOG_DIR=/data/bigdata/logs/hbaseexport HBASE_PID_DIR=/data/bigdata/data/hbase# ä½¿ç”¨å¤–éƒ¨zookeeperexport HBASE_MANAGES_ZK=falseç¼–è¾‘hbase-site.xml,å…³äºæ¯ä¸ªå‚æ•°çš„è¯¦ç»†æè¿°å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£çš„ç¬¬7ç« èŠ‚7. Default Configurationä¸­æŸ¥åˆ°è¿™è¾¹å°±ä¸åšè¯¦è¿°,é™„ä¸Šé“¾æ¥http://hbase.apache.org/book.html#config.files$ vi hbase-site.xml12345678910111213141516171819202122232425&lt;configuration&gt; &lt;property&gt; &lt;name&gt;hbase.tmp.dir&lt;/name&gt; &lt;value&gt;/home/hadoop/hbase-2.0.1/data&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.rootdir&lt;/name&gt; &lt;value&gt;hdfs://cor1:9000/hbase&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.cluster.distributed&lt;/name&gt; &lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt; &lt;value&gt;cor1:2181,cor2:2181,cor3:2181&lt;/value&gt; &lt;/property&gt;&lt;property&gt; &lt;name&gt;hbase.zookeeper.property.clientPort&lt;/name&gt; &lt;value&gt;2181&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt; &lt;value&gt;/home/hadoop/zookeeper/data&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt;é…ç½®conf/regionserversï¼Œå†™åœ¨è¯¥æ–‡ä»¶ä¸­çš„å°†è¢«è®¤ä¸ºæ˜¯ä»èŠ‚ç‚¹ï¼Œåœ¨ä¸»èŠ‚ç‚¹ä¸Šè¿è¡Œbin/start-hbase.shä»¥åï¼Œä¼šè‡ªåŠ¨å¯åŠ¨ä»èŠ‚ç‚¹ã€‚ åˆ†å‘ä½¿ç”¨scpå‘½ä»¤ï¼Œå°†é…ç½®å¥½çš„hbaseåˆ†å‘ç»™å…¶ä»–cor2å’Œcor3èŠ‚ç‚¹$ scp -r hbase-2.0.1 hadoop@cor2:/home/hadoop$ scp -r hbase-2.0.1 hadoop@cor2:/home/hadoop å¯åŠ¨è¿›å…¥åˆ°hbaseæ ¹ç›®å½•æ‰§è¡Œä¸‹é¢å‘½ä»¤å°±å¯ä»¥è¿è¡Œhbase,éœ€è¦æå‰ç¡®ä¿zookeeperå’Œhadoopé›†ç¾¤æ­£å¸¸è¿è¡Œã€‚$ bin/start-hbase.sh æµ‹è¯•ä¸Hadoopä¸€æ ·ï¼ŒhbaseåŒæ ·ä¸ºæˆ‘ä»¬æä¾›äº†å¥½çœ‹çš„WEB UIç•Œé¢masterregionServerhttp://cor1:16010http://cor1:16030æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æœ¬åœ°CLIä¸­ä½¿ç”¨å‘½ä»¤è¿›å…¥hbase shell$ bin/hbase shell æ¡ˆä¾‹1.æŸ¥çœ‹æœ‰å“ªäº›è¡¨1hbase(main)&gt; list2.åˆ›å»ºè¡¨12345# è¯­æ³•ï¼šcreate &lt;table&gt;, &#123;NAME =&gt; &lt;family&gt;, VERSIONS =&gt; &lt;VERSIONS&gt;&#125;# ä¾‹å¦‚ï¼šåˆ›å»ºè¡¨t1ï¼Œæœ‰ä¸¤ä¸ªfamily nameï¼šf1ï¼Œf2ï¼Œä¸”ç‰ˆæœ¬æ•°å‡ä¸º2hbase(main)&gt; create 't1',&#123;NAME =&gt; 'f1', VERSIONS =&gt; 2&#125;,&#123;NAME =&gt; 'f2', VERSIONS =&gt; 2&#125;3.åˆ é™¤è¡¨12hbase(main)&gt; disable 't1'hbase(main)&gt; drop 't1'4.æŸ¥çœ‹è¡¨çš„ç»“æ„1234# è¯­æ³•ï¼šdescribe &lt;table&gt;# ä¾‹å¦‚ï¼šæŸ¥çœ‹è¡¨t1çš„ç»“æ„hbase(main)&gt; describe 't1'5.ä¿®æ”¹è¡¨ç»“æ„ä¿®æ”¹è¡¨ç»“æ„å¿…é¡»å…ˆdisable123456# è¯­æ³•ï¼šalter 't1', &#123;NAME =&gt; 'f1'&#125;, &#123;NAME =&gt; 'f2', METHOD =&gt; 'delete'&#125;# ä¾‹å¦‚ï¼šä¿®æ”¹è¡¨test1çš„cfçš„TTLä¸º180å¤©hbase(main)&gt; disable 'test1'hbase(main)&gt; alter 'test1',&#123;NAME=&gt;'body',TTL=&gt;'15552000'&#125;,&#123;NAME=&gt;'meta', TTL=&gt;'15552000'&#125;hbase(main)&gt; enable 'test1'6.æ·»åŠ æ•°æ®1234# è¯­æ³•ï¼šput &lt;table&gt;,&lt;rowkey&gt;,&lt;family:column&gt;,&lt;value&gt;,&lt;timestamp&gt;# ä¾‹å¦‚ï¼šç»™è¡¨t1çš„æ·»åŠ ä¸€è¡Œè®°å½•ï¼šrowkeyæ˜¯rowkey001ï¼Œfamily nameï¼šf1ï¼Œcolumn nameï¼šcol1ï¼Œvalueï¼švalue01ï¼Œtimestampï¼šç³»ç»Ÿé»˜è®¤hbase(main)&gt; put 't1','rowkey001','f1:col1','value01'7.æŸ¥è¯¢æ•°æ®12345678910111213141516171819202122232425# è¯­æ³•ï¼šget &lt;table&gt;,&lt;rowkey&gt;,[&lt;family:column&gt;,....]# ä¾‹å¦‚ï¼šæŸ¥è¯¢è¡¨t1ï¼Œrowkey001ä¸­çš„f1ä¸‹çš„col1çš„å€¼hbase(main)&gt; get 't1','rowkey001', 'f1:col1'# æˆ–è€…ï¼šhbase(main)&gt; get 't1','rowkey001', &#123;COLUMN=&gt;'f1:col1'&#125;# æŸ¥è¯¢è¡¨t1ï¼Œrowke002ä¸­çš„f1ä¸‹çš„æ‰€æœ‰åˆ—å€¼hbase(main)&gt; get 't1','rowkey001'# è¯­æ³•ï¼šscan &lt;table&gt;, &#123;COLUMNS =&gt; [ &lt;family:column&gt;,.... ], LIMIT =&gt; num&#125;# å¦å¤–ï¼Œè¿˜å¯ä»¥æ·»åŠ STARTROWã€TIMERANGEå’ŒFITLERç­‰é«˜çº§åŠŸèƒ½# ä¾‹å¦‚ï¼šæ‰«æè¡¨t1çš„å‰5æ¡æ•°æ®hbase(main)&gt; scan 't1',&#123;LIMIT=&gt;5&#125;# è¯­æ³•ï¼šcount &lt;table&gt;, &#123;INTERVAL =&gt; intervalNum, CACHE =&gt; cacheNum&#125;# INTERVALè®¾ç½®å¤šå°‘è¡Œæ˜¾ç¤ºä¸€æ¬¡åŠå¯¹åº”çš„rowkeyï¼Œé»˜è®¤1000ï¼›CACHEæ¯æ¬¡å»å–çš„ç¼“å­˜åŒºå¤§å°ï¼Œé»˜è®¤æ˜¯10ï¼Œè°ƒæ•´è¯¥å‚æ•°å¯æé«˜æŸ¥è¯¢é€Ÿåº¦# ä¾‹å¦‚ï¼ŒæŸ¥è¯¢è¡¨t1ä¸­çš„è¡Œæ•°ï¼Œæ¯100æ¡æ˜¾ç¤ºä¸€æ¬¡ï¼Œç¼“å­˜åŒºä¸º500hbase(main)&gt; count 't1', &#123;INTERVAL =&gt; 100, CACHE =&gt; 500&#125;8.åˆ é™¤æ•°æ®12345678910111213141516# è¯­æ³•ï¼šdelete &lt;table&gt;, &lt;rowkey&gt;, &lt;family:column&gt; , &lt;timestamp&gt;,å¿…é¡»æŒ‡å®šåˆ—å# ä¾‹å¦‚ï¼šåˆ é™¤è¡¨t1ï¼Œrowkey001ä¸­çš„f1:col1çš„æ•°æ®hbase(main)&gt; delete 't1','rowkey001','f1:col1'# æ³¨ï¼šå°†åˆ é™¤æ”¹è¡Œf1:col1åˆ—æ‰€æœ‰ç‰ˆæœ¬çš„æ•°æ®# è¯­æ³•ï¼šdeleteall &lt;table&gt;, &lt;rowkey&gt;, &lt;family:column&gt; , &lt;timestamp&gt;ï¼Œå¯ä»¥ä¸æŒ‡å®šåˆ—åï¼Œåˆ é™¤æ•´è¡Œæ•°æ®# ä¾‹å¦‚ï¼šåˆ é™¤è¡¨t1ï¼Œrowk001çš„æ•°æ®hbase(main)&gt; deleteall 't1','rowkey001'# è¯­æ³•ï¼š truncate &lt;table&gt;# å…¶å…·ä½“è¿‡ç¨‹æ˜¯ï¼šdisable table -&gt; drop table -&gt; create table# ä¾‹å¦‚ï¼šåˆ é™¤è¡¨t1çš„æ‰€æœ‰æ•°æ®hbase(main)&gt; truncate 't1'å‰äº›æ—¥å­å»æ—¥æœ¬æ—…æ¸¸ï¼Œblogåœæ›´å‡ å¤©ã€‚åé¢éœ€è¦ç»§ç»­åŠ æ²¹äº†ï¼ï¼","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Hbase","slug":"Hbase","permalink":"yihao.ml/tags/Hbase/"}]},{"title":"ä¸ºä»€ä¹ˆä½¿ç”¨scala","slug":"2018-05-22-scala-ä¸ºä»€ä¹ˆä½¿ç”¨scala","date":"2018-05-22T00:00:00.000Z","updated":"2019-11-29T12:20:47.670Z","comments":true,"path":"2018/05/22/2018-05-22-scala-ä¸ºä»€ä¹ˆä½¿ç”¨scala/","link":"","permalink":"yihao.ml/2018/05/22/2018-05-22-scala-ä¸ºä»€ä¹ˆä½¿ç”¨scala/","excerpt":"","text":"è¿‘æœŸScalaååˆ†ç«ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯sparkçš„åŸå› ;å½“ç„¶å¦ä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› ï¼ŒScalaæœ¬èº«ç¡®å®ä¹Ÿæ˜¯ä¸€ä¸ªååˆ†ä¸é”™çš„è¯­è¨€,Scalaæ˜¯ä¸€é—¨å¤šèŒƒå¼ç¼–ç¨‹è¯­è¨€ï¼Œä»¥JVMä¸ºç›®æ ‡ç¯å¢ƒï¼Œå°†é¢å‘å¯¹è±¡å’Œå‡½æ•°å¼ç¼–ç¨‹æœ‰æœºåœ°ç»“åˆåœ¨ä¸€èµ·ï¼Œå¸¦æ¥ç‹¬ç‰¹çš„ç¼–ç¨‹ä½“éªŒã€‚è™½ç„¶JDK 8ä»¥åä¹Ÿæ¨å‡ºäº†lambda,ä½†æ˜¯Scalaä¸å…¶ç›¸æ¯”è¿˜æ˜¯ç•¥èƒœä¸€ç­¹ã€‚Scalaçš„ä½œè€…Martin Oderskyæ—©æœŸæ›¾æ˜¯JVMçš„æ ¸å¿ƒä»£ç æä¾›è€…ï¼Œæ‰€ä»¥ä»–åœ¨ç¼–å†™Scalaæ—¶ä¹Ÿå°½é‡å¼¥è¡¥Javaä¸­å­˜åœ¨çš„ä¸è¶³ã€‚Martin Oderskyæ›¾è¯´â€œæ²¡æœ‰ä¸€é—¨é¢„è¨€èƒ½åƒScalaè¿™æ ·,è®©æˆ‘äº§ç”ŸæŒç»­çš„å…´è¶£å’Œçƒ­æƒ…ï¼Œè®©æˆ‘é‡æ–°æ„Ÿå—åˆ°å­¦ä¹ ã€æ€è€ƒå’Œè§£å†³é—®é¢˜çš„ä¹è¶£â€ã€‚æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ Scalaåº•å±‚ä¹Ÿæ˜¯è·‘åœ¨JVMä¸Šçš„ï¼Œæ‰€ä»¥å®ƒä¸Javaé›†æˆåº¦éå¸¸é«˜ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¿Scalaè°ƒç”¨å·²ç»å†™å¥½çš„Javaæ¥å£å®ç°æ— ç¼å¯¹æ¥ã€‚ç›®å‰å·²ç»æœ‰å¾ˆå¤šå…¬å¸å’Œä¸ªäººé‡‡ç”¨Scalaæ¥æ„å»ºä»–ä»¬çš„å¹³å°å’Œåº”ç”¨ï¼Œä½œä¸ºJVMä¸Šç¬¬ä¸€ä¸ªè·å¾—å¹¿æ³›æˆåŠŸçš„éJavaè¯­è¨€ï¼ŒScalaæ­£ä»¥å®ƒç‹¬ç‰¹çš„é­…åŠ›å¸å¼•ç€è¶Šæ¥è¶Šå¤šäººçš„çƒ­æƒ…æŠ•å…¥ã€‚Scalaè¯­è¨€è¡¨è¾¾èƒ½åŠ›ååˆ†å¼ºï¼Œä¸€è¡Œä»£ç æŠµå¾—ä¸ŠJavaå¤šè¡Œï¼Œå¼€å‘é€Ÿåº¦å¿«ï¼›Scalaæ˜¯é™æ€ç¼–è¯‘çš„ï¼Œæ‰€ä»¥å’ŒJRuby,Groovyæ¯”èµ·æ¥é€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚å¯ä»¥çœ‹åˆ°ä¸Šå›¾ä¸­Sacalaç¨‹åºå‘˜å·¥ä½œçŠ¶æ€ç•¥æ˜¾è½»æ¾ã€‚ å®‰è£…åˆ°Scalaå®˜ç½‘https://www.scala-lang.org/download/ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿå®‰è£…ç¨‹åºå¹¶å®‰è£…,åç»­é…ç½®å¥½ç¯å¢ƒå˜é‡ Hellowordåˆ›å»ºHelloScala.scalaæ–‡ä»¶12345678object HelloScala&#123; def main(args:Array[String]) &#123; println(&quot;hello scala!&quot;); &#125;&#125;ç¼–è¯‘$ scalac HelloScala.scalaè¿è¡Œ$ scala HelloScala","categories":[{"name":"ç¼–ç¨‹è¯­è¨€","slug":"ç¼–ç¨‹è¯­è¨€","permalink":"yihao.ml/categories/ç¼–ç¨‹è¯­è¨€/"}],"tags":[{"name":"Scala","slug":"Scala","permalink":"yihao.ml/tags/Scala/"}]},{"title":"vueç¯å¢ƒæ­å»º","slug":"2018-05-12-vue-vueç¯å¢ƒæ­å»º","date":"2018-05-12T00:00:00.000Z","updated":"2019-11-29T12:20:47.669Z","comments":true,"path":"2018/05/12/2018-05-12-vue-vueç¯å¢ƒæ­å»º/","link":"","permalink":"yihao.ml/2018/05/12/2018-05-12-vue-vueç¯å¢ƒæ­å»º/","excerpt":"","text":"ç›®å½•å®‰è£…vueè„šæ‰‹æ¶åˆå§‹åŒ–é¡¹ç›®è¿è¡Œé¡¹ç›® å®‰è£…vueè„šæ‰‹æ¶sudo npm install -g vue-cli#åˆå§‹åŒ–é¡¹ç›®ä½¿ç”¨listå¯ä»¥æŸ¥çœ‹å·²å­˜åœ¨çš„æ¨¡æ¿ã€‚vue listç”¨initå‘½ä»¤æ‰§è¡Œé»˜è®¤æ¨¡æ¿æ˜¯webpackæ¥åˆå§‹åŒ–é¡¹ç›®sellvue init webpack sell è¿è¡Œé¡¹ç›®ä½¿ç”¨npm æ„å»ºé¡¹ç›®(åœ¨initæ—¶æŒ‡å®šçš„æ˜¯yarnï¼Œè¿™é‡Œå°±ä½¿ç”¨yarn install)ï¼Œinstallä¼šä¸‹è½½é¡¹ç›®å…·å¤‡çš„ä¾èµ–åŒ…npm installç„¶åå°±å¯ä»¥è¿è¡Œé¡¹ç›®äº†npm run devè®¿é—®localhost:8080","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"yihao.ml/categories/å‰ç«¯/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"yihao.ml/tags/Vue/"}]},{"title":"try-catchå½±å“æ€§èƒ½ï¼Ÿ","slug":"2018-05-12-java-try-catchæ€§èƒ½é—®é¢˜","date":"2018-05-12T00:00:00.000Z","updated":"2019-11-29T12:20:47.669Z","comments":true,"path":"2018/05/12/2018-05-12-java-try-catchæ€§èƒ½é—®é¢˜/","link":"","permalink":"yihao.ml/2018/05/12/2018-05-12-java-try-catchæ€§èƒ½é—®é¢˜/","excerpt":"","text":"ä»Šå¤©åœ¨å®¡æŸ¥ä»£ç æ—¶ï¼Œå‘ç°è‡ªå·±çš„æŸ¥è¯¢æ¥å£å¹¶æ²¡æœ‰try-catchã€‚å¼€å§‹è¿™æ ·å†™æ˜¯å› ä¸ºè§‰å¾—å†™try-catchæ²¡å¿…è¦ï¼ŒæŸ¥è¯¢ä¸å¯èƒ½ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œä½†åæ¥æƒ³äº†æƒ³åˆä¸å¤ªå¯¹ï¼Œå‡å¦‚ä»¥åæ‹“å±•æ¥å£ï¼Œåœ¨æŸ¥è¯¢ååˆç”¨äº†æŸ¥è¯¢åä¿¡æ¯å‘¢ï¼Ÿå°±ä¼šæŠ›ç©ºæŒ‡é’ˆå¼‚å¸¸äº†ï¼ä¸ºäº†ä¿è¯æ¥å£çš„å¥å£®æ€§ï¼Œæœ€å¥½è¿˜æ˜¯è¦åŠ ä¸Štry-catchã€‚é‚£ä¹ˆåˆ°åº•try-catchå½±ä¸å½±å“ç¨‹åºæ‰§è¡Œçš„é€Ÿåº¦ï¼Ÿç½‘ä¸Šä¹Ÿæœ‰å¥½å¤šç±»ä¼¼çš„åšå®¢ï¼Œå»è§£é‡Šè¿™ä¸ªé—®é¢˜ã€‚ç»“æœæ˜¯ï¼štry-catchä¸å½±å“æ€§èƒ½ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šè¯´ï¼Œå¦‚æœä¸æ˜¯ç™¾ä¸‡çº§åˆ«çš„æ•°æ®å¹¶å‘ï¼Œtry-catchå¯¹ç¨‹åºçš„å½±å“æ˜¯å¾®ä¹å…¶å¾®çš„ã€‚æœ‰äººåšè¿‡ä¾‹å­ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹å‚è€ƒblogåœ¨stackoverflowä¸Šè€å¤–ä¹Ÿå¸®ç€è®²äº†ä¸€ä¸‹try-catchçš„è¿è¡Œæœºåˆ¶å‚è€ƒé“¾æ¥1å‚è€ƒé“¾æ¥2æ€»ç»“:å¦‚æœåœ¨è¿è¡Œæ—¶ï¼Œç¨‹åºæŠ›äº†å¼‚å¸¸å°±ä¼šå»æŸ¥å¼‚å¸¸è¡¨,è¿™æ˜¯å½±å“æ€§èƒ½çš„ä¸»è¦åŸå› ã€‚è‡³äºåœ¨å“ªé‡Œå†™try-catchï¼Œå…¶å®åªæ˜¯å½±å“äº†å¼‚å¸¸è¡¨é‡Œçš„ä¸¤ä¸ªå˜é‡è€Œå·²ï¼ˆèµ·å§‹åœ°å€ã€ç»“æŸåœ°å€ï¼‰ï¼Œå†™åœ¨å“ªé‡Œè·Ÿæ‡‰ä¸å½±å“æ€§èƒ½æ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"forgeå¼€å‘ç¯å¢ƒSetup","slug":"2018-05-12-forge-forgeå¼€å‘ç¯å¢ƒSetup","date":"2018-05-12T00:00:00.000Z","updated":"2019-11-29T12:20:47.669Z","comments":true,"path":"2018/05/12/2018-05-12-forge-forgeå¼€å‘ç¯å¢ƒSetup/","link":"","permalink":"yihao.ml/2018/05/12/2018-05-12-forge-forgeå¼€å‘ç¯å¢ƒSetup/","excerpt":"","text":"windowsä¸‹æ­å»ºforgeå®˜ç½‘æä¾›çš„æ¡ˆä¾‹é“¾æ¥,ç¼–è¯‘å™¨ä½¿ç”¨vscodeã€‚ ç›®å½•å®‰è£… nodeå®‰è£… gitå®‰è£… MongoDBæ³¨å†ŒAutodesk Developerå¸å·é…ç½®é¡¹ç›®å¯åŠ¨é¡¹ç›® å®‰è£… nodeæ¨èä½¿ç”¨nvmå®‰è£…,github ä¸‹è½½å¹¶å®‰è£…æœ€æ–°ç‰ˆçš„nvmã€‚ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€å‘½ä»¤æç¤ºç¬¦è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š123nvm install 8.11.1npm install -g --production windows-build-toolsnpm install -g cross-envé…ç½®npmä»¥åŠyarnæ‰“å¼€powershellæˆ–å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå°†npmä½¿ç”¨æ·˜å®çš„é•œåƒè¿›è¡ŒåŠ é€Ÿå¹¶å®‰è£…yarnï¼š123npm config set registry=https://registry.npm.taobao.orgnpm install -g yarnyarn config set registry https://registry.npm.taobao.org å®‰è£… gitå®‰è£…gitå‘½ä»¤è¡Œå®¢æˆ·ç«¯æˆ–SourceTreeç­‰GUIå®¢æˆ·ç«¯ã€‚å‘½ä»¤è¡Œä¸‹è¾“å…¥$ git clone https://github.com/Autodesk-Forge/forge-rcdb.nodejs.gitGUIå®¢æˆ·ç«¯ç”¨ç•Œé¢æ“ä½œå°†https://github.com/Autodesk-Forge/forge-rcdb.nodejs.git cloneåˆ°æœ¬åœ°ã€‚ å®‰è£… MongoDBä¸‹è½½Robo 3tå®¢æˆ·ç«¯ ï¼ˆ https://robomongo.org/download ï¼‰ã€‚è¿æ¥æœ¬åœ°mongoï¼ˆé»˜è®¤ä¸ç”¨è®¤è¯ç›´æ¥è¿æ¥ï¼‰åˆ›å»ºdatabase: forge-rcdbç»™è¯¥databaseåˆ›å»ºç”¨æˆ·ï¼Œå¹¶æˆäºˆreadWriteæƒé™ã€‚å°†forge-rcdbé¡¹ç›®ä¸­ resources\\db\\dev ç›®å½•ä¸‹çš„æ•°æ®å¯¼å…¥mongodbã€‚mongodbç›¸å…³ä¸€äº›æŒ‡ä»¤:1234sudo service mongod startmongo -uroot -pmongoimport -h localhost:27017 -d forge-rcdb /home/zyh/workspace/nodejs/forge-rcdb.nodejs/resources/db/devless /etc/mongod.conf æ³¨å†ŒAutodesk Developerå¸å·è®¿é—® https://developer.autodesk.com/myapps/create åˆ›å»º Appã€‚Callback URLè®¾ä¸º http://localhost:3000/api/forge/callback/oauth ã€‚è®°å½•ä¸‹Client IDä»¥åŠClient Secret é…ç½®é¡¹ç›®ç¼–è¾‘forge-rcdbé¡¹ç›®ä¸­çš„config\\development.config.js å°†databaseéƒ¨åˆ†çš„è®¾ç½®ä¸ºåˆšå®‰è£…çš„mongodbçš„ä¿¡æ¯ã€‚å¯é€‰ï¼šå°†Client Idä»¥åŠClient Secretæ›¿æ¢æ‰Client Idä»¥åŠClient Secretéƒ¨åˆ†ã€‚åœ¨forge-rcdbé¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œyarn install å¯åŠ¨é¡¹ç›®æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯ä»¥å¯åŠ¨é¡¹ç›®ï¼šcross-env NODE_ENV=development HOT_RELOADING=true FORGE_DEV_CLIENT_SECRET=FORGE_DEV_CLIENT_ID=npm startè‹¥ä¸Šä¸€æ­¥ä¸­å°†Client Idä»¥åŠSecretå†™å…¥åˆ°é…ç½®æ–‡ä»¶ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨é¡¹ç›®cross-env NODE_ENV=development HOT_RELOADING=true npm start","categories":[{"name":"Autodesk","slug":"Autodesk","permalink":"yihao.ml/categories/Autodesk/"}],"tags":[{"name":"Forge","slug":"Forge","permalink":"yihao.ml/tags/Forge/"}]},{"title":"æ•°æ®æ ·æœ¬çš„ç¦»æ•£ç¨‹åº¦è®¡ç®—","slug":"2018-05-10-ubuntu-æ•°æ®æ ·æœ¬çš„ç¦»æ•£ç¨‹åº¦è®¡ç®—","date":"2018-05-10T00:00:00.000Z","updated":"2019-11-29T12:20:47.668Z","comments":true,"path":"2018/05/10/2018-05-10-ubuntu-æ•°æ®æ ·æœ¬çš„ç¦»æ•£ç¨‹åº¦è®¡ç®—/","link":"","permalink":"yihao.ml/2018/05/10/2018-05-10-ubuntu-æ•°æ®æ ·æœ¬çš„ç¦»æ•£ç¨‹åº¦è®¡ç®—/","excerpt":"","text":"ç»Ÿè®¡æ•°æ®æ ·æœ¬çš„ç¦»æ•£ç¨‹åº¦æ–¹æ³•å¤§è‡´å¯åˆ†ä¸ºä¸‰ç§ï¼šæå·®ã€æ–¹å·®ã€æ ‡å‡†å·®ï¼Œæ ·æœ¬æ•°æ®æå·®åªèƒ½ç®€å•è®¡ç®—æ•°æ®å­˜åœ¨çš„åŒºé—´åˆ†å¸ƒèŒƒå›´æƒ…å†µï¼Œå®ƒåœ¨è®¡ç®—ç¦»æ•£ç¨‹åº¦æ—¶å­˜åœ¨ç€å¾ˆå¤§çš„é—®é¢˜ã€‚è®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼šæå·® = æ ·æœ¬æ•°æ®æœ€å¤§å€¼ - æ ·æœ¬æ•°æ®æœ€å°å€¼æ–¹å·®è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼šÏƒ2=1Nâˆ‘i=1N(xiâˆ’Î¼)2\\sigma^2=\\frac{1}{N}\\sum_{i=1}^N{\\left(x_i-\\mu\\right)^2}Ïƒâ€‹2â€‹â€‹=â€‹Nâ€‹â€‹1â€‹â€‹â€‹i=1â€‹âˆ‘â€‹Nâ€‹â€‹(xâ€‹iâ€‹â€‹âˆ’Î¼)â€‹2â€‹â€‹å¦‚æœè§‰å¾—è®¡ç®—æ¯”è¾ƒéº»çƒ¦å¯ä»¥ç”¨æ¨å¯¼åçš„å…¬å¼è®¡ç®—æ–¹å·®ç›¸æ¯”æå·®è€Œè¨€ï¼Œå¯ä»¥å‡†ç¡®æè¿°æ•°æ®æ ·æœ¬çš„ç¦»æ•£ç¨‹åº¦,ä½†æ˜¯å®ƒä¹Ÿå­˜åœ¨è¿™é—®é¢˜ã€‚å°±æ˜¯åœ¨æè¿°æ•°æ®æ ·æœ¬çš„ç¦»æ•£åº¦æ—¶ä¼šä¸¢å¤±å•ä½ç²¾åº¦ï¼Œè¿™æ˜¯å› ä¸ºåœ¨åŸæ ·æœ¬çš„åŸºç¡€ä¸Šè¿›è¡Œäº†å¹³æ–¹æ“ä½œã€‚å‡å¦‚åŸæ ·æœ¬çš„æ¯ä¸ªæ•°éƒ½æœ‰å•ä½ç±³(m),é‚£ä¹ˆæˆ‘ä»¬åœ¨æ±‚æ–¹å·®åï¼Œç±³å°±å˜æˆäº†å¹³æ–¹ç±³ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†æ ‡å‡†å·®,è®¡ç®—å…¬å¼åªéœ€è¦å¯¹æ–¹å·®å¼€æ–¹å°±å¯ä»¥äº†ã€‚Ïƒ=Ïƒ22\\sigma=\\sqrt[2]{\\sigma^2}Ïƒ=â€‹2â€‹â€‹âˆšâ€‹Ïƒâ€‹2â€‹â€‹â€‹â€‹â€‹","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[]},{"title":"ubuntu16.04 Teamviewerä¸èƒ½è¿œç¨‹æ§åˆ¶","slug":"2018-05-08-ubuntu-ubuntu16.04ä¸èƒ½è¿œç¨‹æ§åˆ¶.1","date":"2018-05-08T00:00:00.000Z","updated":"2019-11-29T12:20:47.668Z","comments":true,"path":"2018/05/08/2018-05-08-ubuntu-ubuntu16.04ä¸èƒ½è¿œç¨‹æ§åˆ¶.1/","link":"","permalink":"yihao.ml/2018/05/08/2018-05-08-ubuntu-ubuntu16.04ä¸èƒ½è¿œç¨‹æ§åˆ¶.1/","excerpt":"","text":"é—®é¢˜æè¿°é€šè¿‡windows 7æ——èˆ°ç‰ˆ å¯ä»¥è¿æ¥ubuntuçš„TeamViewerï¼Œä½†æ˜¯é¼ æ ‡ä¸èƒ½æ§åˆ¶ç”µè„‘ã€‚ubuntuçš„ç‰ˆæœ¬æ˜¯16.04TLS,TeamViewer çš„ç‰ˆæœ¬æ˜¯ 13 è§£å†³å¼€å§‹ä»¥ä¸ºæ˜¯Ubuntuä¸­TeamViewerçš„æƒé™æ²¡æœ‰å¼€ï¼Œä½†æ˜¯åæ¥çœ‹äº†çœ‹æƒé™æ˜¯å¼€ç€çš„åœ¨ç½‘ä¸Šæœç´¢äº†å¥½ä¹…ï¼Œå„ç§è¯´æ³•éƒ½æœ‰ï¼Œè¯•äº†å¥½å¤šéƒ½æ²¡ç”¨ã€‚æœ€åé€šè¿‡åœ¨askubuntuæœç´¢TeamViewerå…³é”®å­—ï¼Œä¸€é¡µä¸€é¡µçœ‹çœ‹äº†10å‡ é¡µæŠŠé—®é¢˜è§£å†³äº†ï¼Œè¿˜æ˜¯å›½å¤–ç½‘ç«™é è°±å•Šã€‚ä¸èƒ½è®¿é—®çš„åŸå› æ˜¯å› ä¸ºubuntuæœ¬æœºæŸäº›ä¾èµ–åŒ…æ²¡æœ‰è£…å¯¼è‡´çš„ã€‚å°è¯•è¿è¡Œä¸‹é¢æŒ‡ä»¤:$ sudo apt-get install libjpeg62:i386 libxinerama1:i386 libxrandr2:i386 libxtst6:i386 ca-certificateså¯ä»¥çœ‹åˆ°æœ¬æœºè¿è¡Œä»¥ååˆå®‰è£…äº†ä¸¤ä¸ªåŒ… libjpeg62:i386 å’Œ libxtst6:i386ï¼Œåº”è¯¥å°±æ˜¯å®ƒä¿©çš„åŸå› äº†ã€‚å¦å¤–é™„ä¸Šè§£å†³é—®é¢˜çš„å¸–å­https://askubuntu.com/questions/764228/teamviewer-11-wont-run-on-ubuntu-16-04-64-bit","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"yihao.ml/tags/Ubuntu/"}]},{"title":"Azkabanä»»åŠ¡è°ƒåº¦ç³»ç»Ÿéƒ¨ç½²","slug":"2018-05-05-hadoop-Azkabanéƒ¨ç½²","date":"2018-05-05T00:00:00.000Z","updated":"2019-11-29T12:20:47.667Z","comments":true,"path":"2018/05/05/2018-05-05-hadoop-Azkabanéƒ¨ç½²/","link":"","permalink":"yihao.ml/2018/05/05/2018-05-05-hadoop-Azkabanéƒ¨ç½²/","excerpt":"","text":"æ¦‚è¿° ä¸ºä»€ä¹ˆéœ€è¦å·¥ä½œæµè°ƒåº¦ç³»ç»Ÿä¸€ä¸ªå®Œæ•´çš„æ•°æ®åˆ†æç³»ç»Ÿé€šå¸¸éƒ½æ˜¯ç”±å¤§é‡ä»»åŠ¡å•å…ƒç»„æˆï¼šshellè„šæœ¬ç¨‹åºï¼Œjavaç¨‹åºï¼Œmapreduceç¨‹åºã€hiveè„šæœ¬ç­‰å„ä»»åŠ¡å•å…ƒä¹‹é—´å­˜åœ¨æ—¶é—´å…ˆååŠå‰åä¾èµ–å…³ç³»ä¸ºäº†å¾ˆå¥½åœ°ç»„ç»‡èµ·è¿™æ ·çš„å¤æ‚æ‰§è¡Œè®¡åˆ’ï¼Œéœ€è¦ä¸€ä¸ªå·¥ä½œæµè°ƒåº¦ç³»ç»Ÿæ¥è°ƒåº¦æ‰§è¡Œï¼›ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼ŒæŸä¸ªä¸šåŠ¡ç³»ç»Ÿæ¯å¤©äº§ç”Ÿ20GåŸå§‹æ•°æ®ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½è¦å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œå¤„ç†æ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºï¼š1ã€ é€šè¿‡Hadoopå…ˆå°†åŸå§‹æ•°æ®åŒæ­¥åˆ°HDFSä¸Šï¼›2ã€ å€ŸåŠ©MapReduceè®¡ç®—æ¡†æ¶å¯¹åŸå§‹æ•°æ®è¿›è¡Œè½¬æ¢ï¼Œç”Ÿæˆçš„æ•°æ®ä»¥åˆ†åŒºè¡¨çš„å½¢å¼å­˜å‚¨åˆ°å¤šå¼ Hiveè¡¨ä¸­ï¼›3ã€ éœ€è¦å¯¹Hiveä¸­å¤šä¸ªè¡¨çš„æ•°æ®è¿›è¡ŒJOINå¤„ç†ï¼Œå¾—åˆ°ä¸€ä¸ªæ˜ç»†æ•°æ®Hiveå¤§è¡¨ï¼›4ã€ å°†æ˜ç»†æ•°æ®è¿›è¡Œå¤æ‚çš„ç»Ÿè®¡åˆ†æï¼Œå¾—åˆ°ç»“æœæŠ¥è¡¨ä¿¡æ¯ï¼›5ã€ éœ€è¦å°†ç»Ÿè®¡åˆ†æå¾—åˆ°çš„ç»“æœæ•°æ®åŒæ­¥åˆ°ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œä¾›ä¸šåŠ¡è°ƒç”¨ä½¿ç”¨ã€‚ å·¥ä½œæµè°ƒåº¦å®ç°æ–¹å¼ç®€å•çš„ä»»åŠ¡è°ƒåº¦ï¼šç›´æ¥ä½¿ç”¨linuxçš„crontabæ¥å®šä¹‰ï¼›å¤æ‚çš„ä»»åŠ¡è°ƒåº¦ï¼šå¼€å‘è°ƒåº¦å¹³å°æˆ–ä½¿ç”¨ç°æˆçš„å¼€æºè°ƒåº¦ç³»ç»Ÿï¼Œæ¯”å¦‚ooizeã€azkabanç­‰ å¸¸è§å·¥ä½œæµè°ƒåº¦ç³»ç»Ÿå¸‚é¢ä¸Šç›®å‰æœ‰è®¸å¤šå·¥ä½œæµè°ƒåº¦å™¨åœ¨hadoopé¢†åŸŸï¼Œå¸¸è§çš„å·¥ä½œæµè°ƒåº¦å™¨æœ‰Oozie, Azkaban,Cascading,Hamakeç­‰ å„ç§è°ƒåº¦å·¥å…·ç‰¹æ€§å¯¹æ¯”ä¸‹é¢çš„è¡¨æ ¼å¯¹ä¸Šè¿°å››ç§hadoopå·¥ä½œæµè°ƒåº¦å™¨çš„å…³é”®ç‰¹æ€§è¿›è¡Œäº†æ¯”è¾ƒï¼Œå°½ç®¡è¿™äº›å·¥ä½œæµè°ƒåº¦å™¨èƒ½å¤Ÿè§£å†³çš„éœ€æ±‚åœºæ™¯åŸºæœ¬ä¸€è‡´ï¼Œä½†åœ¨è®¾è®¡ç†å¿µï¼Œç›®æ ‡ç”¨æˆ·ï¼Œåº”ç”¨åœºæ™¯ç­‰æ–¹é¢è¿˜æ˜¯å­˜åœ¨æ˜¾è‘—çš„åŒºåˆ«ï¼Œåœ¨åšæŠ€æœ¯é€‰å‹çš„æ—¶å€™ï¼Œå¯ä»¥æä¾›å‚è€ƒç‰¹æ€§HamakeOozieAzkabanCascadingå·¥ä½œæµæè¿°è¯­è¨€XMLXML (xPDL based)text file with key/value pairsJava APIä¾èµ–æœºåˆ¶data-drivenexplicitexplicitexplicitæ˜¯å¦è¦webå®¹å™¨NoYesyesyesè¿›åº¦è·Ÿè¸ªconsole/log messagesweb pageweb pageJava APIHadoop jobè°ƒåº¦æ”¯æŒNoYesyesyesè¿è¡Œæ¨¡å¼command line utilitydaemondaemonAPIPigæ”¯æŒYESYesyesyesäº‹ä»¶é€šçŸ¥nononoyeséœ€è¦å®‰è£…NoYesyesnoæ”¯æŒçš„hadoopç‰ˆæœ¬0.18+0.20+currently unknown0.18+é‡è¯•æ”¯æŒnoworkflownode evelyesyesè¿è¡Œä»»æ„å‘½ä»¤yesyesyesyesAmazon EMRæ”¯æŒyesnocurrently unknownyes Azkabanä¸Oozieå¯¹æ¯”å¯¹å¸‚é¢ä¸Šæœ€æµè¡Œçš„ä¸¤ç§è°ƒåº¦å™¨ï¼Œç»™å‡ºä»¥ä¸‹è¯¦ç»†å¯¹æ¯”ï¼Œä»¥ä¾›æŠ€æœ¯é€‰å‹å‚è€ƒã€‚æ€»ä½“æ¥è¯´ï¼Œooizeç›¸æ¯”azkabanæ˜¯ä¸€ä¸ªé‡é‡çº§çš„ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼ŒåŠŸèƒ½å…¨é¢ï¼Œä½†é…ç½®ä½¿ç”¨ä¹Ÿæ›´å¤æ‚ã€‚å¦‚æœå¯ä»¥ä¸åœ¨æ„æŸäº›åŠŸèƒ½çš„ç¼ºå¤±ï¼Œè½»é‡çº§è°ƒåº¦å™¨azkabanæ˜¯å¾ˆä¸é”™çš„å€™é€‰å¯¹è±¡ã€‚è¯¦æƒ…å¦‚ä¸‹:åŠŸèƒ½ä¸¤è€…å‡å¯ä»¥è°ƒåº¦mapreduce,pig,java,è„šæœ¬å·¥ä½œæµä»»åŠ¡ä¸¤è€…å‡å¯ä»¥å®šæ—¶æ‰§è¡Œå·¥ä½œæµä»»åŠ¡å·¥ä½œæµå®šä¹‰Azkabanä½¿ç”¨Propertiesæ–‡ä»¶å®šä¹‰å·¥ä½œæµOozieä½¿ç”¨XMLæ–‡ä»¶å®šä¹‰å·¥ä½œæµå·¥ä½œæµä¼ å‚Azkabanæ”¯æŒç›´æ¥ä¼ å‚ï¼Œä¾‹å¦‚${input}Oozieæ”¯æŒå‚æ•°å’ŒELè¡¨è¾¾å¼ï¼Œä¾‹å¦‚${fs:dirSize(myInputDir)}å®šæ—¶æ‰§è¡ŒAzkabançš„å®šæ—¶æ‰§è¡Œä»»åŠ¡æ˜¯åŸºäºæ—¶é—´çš„Oozieçš„å®šæ—¶æ‰§è¡Œä»»åŠ¡åŸºäºæ—¶é—´å’Œè¾“å…¥æ•°æ®èµ„æºç®¡ç†Azkabanæœ‰è¾ƒä¸¥æ ¼çš„æƒé™æ§åˆ¶ï¼Œå¦‚ç”¨æˆ·å¯¹å·¥ä½œæµè¿›è¡Œè¯»/å†™/æ‰§è¡Œç­‰æ“ä½œOozieæš‚æ— ä¸¥æ ¼çš„æƒé™æ§åˆ¶å·¥ä½œæµæ‰§è¡ŒAzkabanæœ‰ä¸¤ç§è¿è¡Œæ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯soloserver mode(executor serverå’Œweb serveréƒ¨ç½²åœ¨åŒä¸€å°èŠ‚ç‚¹)å’Œmulti server mode(executor serverå’Œweb serverå¯ä»¥éƒ¨ç½²åœ¨ä¸åŒèŠ‚ç‚¹)Oozieä½œä¸ºå·¥ä½œæµæœåŠ¡å™¨è¿è¡Œï¼Œæ”¯æŒå¤šç”¨æˆ·å’Œå¤šå·¥ä½œæµå·¥ä½œæµç®¡ç†Azkabanæ”¯æŒæµè§ˆå™¨ä»¥åŠajaxæ–¹å¼æ“ä½œå·¥ä½œæµOozieæ”¯æŒå‘½ä»¤è¡Œã€HTTP RESTã€Java APIã€æµè§ˆå™¨æ“ä½œå·¥ä½œæµ Azkabanä»‹ç»Azkabanæ˜¯ç”±Linkedinå¼€æºçš„ä¸€ä¸ªæ‰¹é‡å·¥ä½œæµä»»åŠ¡è°ƒåº¦å™¨ã€‚ç”¨äºåœ¨ä¸€ä¸ªå·¥ä½œæµå†…ä»¥ä¸€ä¸ªç‰¹å®šçš„é¡ºåºè¿è¡Œä¸€ç»„å·¥ä½œå’Œæµç¨‹ã€‚Azkabanå®šä¹‰äº†ä¸€ç§KVæ–‡ä»¶æ ¼å¼æ¥å»ºç«‹ä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶æä¾›ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„webç”¨æˆ·ç•Œé¢ç»´æŠ¤å’Œè·Ÿè¸ªä½ çš„å·¥ä½œæµã€‚å®ƒæœ‰å¦‚ä¸‹åŠŸèƒ½ç‰¹ç‚¹ï¼šWebç”¨æˆ·ç•Œé¢æ–¹ä¾¿ä¸Šä¼ å·¥ä½œæµæ–¹ä¾¿è®¾ç½®ä»»åŠ¡ä¹‹é—´çš„å…³ç³»è°ƒåº¦å·¥ä½œæµè®¤è¯/æˆæƒ(æƒé™çš„å·¥ä½œ)èƒ½å¤Ÿæ€æ­»å¹¶é‡æ–°å¯åŠ¨å·¥ä½œæµæ¨¡å—åŒ–å’Œå¯æ’æ‹”çš„æ’ä»¶æœºåˆ¶é¡¹ç›®å·¥ä½œåŒºå·¥ä½œæµå’Œä»»åŠ¡çš„æ—¥å¿—è®°å½•å’Œå®¡è®¡ Azkabanå®‰è£…éƒ¨ç½² å‡†å¤‡å·¥ä½œAzkaban WebæœåŠ¡å™¨azkaban-web-server-2.5.0.tar.gzAzkabanæ‰§è¡ŒæœåŠ¡å™¨azkaban-executor-server-2.5.0.tar.gzMySQLç›®å‰azkabanåªæ”¯æŒ mysql,éœ€å®‰è£…mysqlæœåŠ¡å™¨,æœ¬æ–‡æ¡£ä¸­é»˜è®¤å·²å®‰è£…å¥½mysqlæœåŠ¡å™¨,å¹¶å»ºç«‹äº† rootç”¨æˆ·,å¯†ç  root.ä¸‹è½½åœ°å€:http://azkaban.github.io/downloads.html å®‰è£…å°†å®‰è£…æ–‡ä»¶ä¸Šä¼ åˆ°é›†ç¾¤,æœ€å¥½ä¸Šä¼ åˆ°å®‰è£… hiveã€sqoopçš„æœºå™¨ä¸Š,æ–¹ä¾¿å‘½ä»¤çš„æ‰§è¡Œåœ¨å½“å‰ç”¨æˆ·ç›®å½•ä¸‹æ–°å»º azkabantoolsç›®å½•,ç”¨äºå­˜æ”¾æºå®‰è£…æ–‡ä»¶.æ–°å»ºazkabanç›®å½•,ç”¨äºå­˜æ”¾azkabanè¿è¡Œç¨‹åº 1.azkaban webæœåŠ¡å™¨å®‰è£…è§£å‹azkaban-web-server-2.5.0.tar.gzå‘½ä»¤: tar â€“zxvf azkaban-web-server-2.5.0.tar.gzå°†è§£å‹åçš„azkaban-web-server-2.5.0 ç§»åŠ¨åˆ° azkabanç›®å½•ä¸­,å¹¶é‡æ–°å‘½å webserver123mv azkaban-web-server-2.5.0 ../azkabancd ../azkabanmv azkaban-web-server-2.5.0 server 2.azkaban æ‰§è¡Œæœå™¨å®‰è£…è§£å‹azkaban-executor-server-2.5.0.tar.gzå‘½ä»¤:tar â€“zxvf azkaban-executor-server-2.5.0.tar.gzå°†è§£å‹åçš„azkaban-executor-server-2.5.0 ç§»åŠ¨åˆ° azkabanç›®å½•ä¸­,å¹¶é‡æ–°å‘½å executor123mv azkaban-executor-server-2.5.0 ../azkabancd ../azkabanmv azkaban-executor-server-2.5.0 executorazkabanè„šæœ¬å¯¼å…¥è§£å‹: azkaban-sql-script-2.5.0.tar.gzå‘½ä»¤:tar â€“zxvf azkaban-sql-script-2.5.0.tar.gzå°†è§£å‹åçš„mysql è„šæœ¬,å¯¼å…¥åˆ°mysqlä¸­:è¿›å…¥mysql1234mysql&gt; create database azkaban;mysql&gt; use azkaban;Database changedmysql&gt; source/home/hadoop/azkaban-2.5.0/create-all-sql-2.5.0.sql; åˆ›å»ºSSLé…ç½®å‚è€ƒåœ°å€: http://docs.codehaus.org/display/JETTY/How+to+configure+SSLå‘½ä»¤: keytool -keystore keystore -alias jetty -genkey -keyalg RSAè¿è¡Œæ­¤å‘½ä»¤å,ä¼šæç¤ºè¾“å…¥å½“å‰ç”Ÿæˆ keystorçš„å¯†ç åŠç›¸åº”ä¿¡æ¯,è¾“å…¥çš„å¯†ç è¯·åŠ³è®°,ä¿¡æ¯å¦‚ä¸‹:è¾“å…¥keystoreå¯†ç ï¼šå†æ¬¡è¾“å…¥æ–°å¯†ç :æ‚¨çš„åå­—ä¸å§“æ°æ˜¯ä»€ä¹ˆï¼Ÿ[Unknown]ï¼šæ‚¨çš„ç»„ç»‡å•ä½åç§°æ˜¯ä»€ä¹ˆï¼Ÿ[Unknown]ï¼šæ‚¨çš„ç»„ç»‡åç§°æ˜¯ä»€ä¹ˆï¼Ÿ[Unknown]ï¼šæ‚¨æ‰€åœ¨çš„åŸå¸‚æˆ–åŒºåŸŸåç§°æ˜¯ä»€ä¹ˆï¼Ÿ[Unknown]ï¼šæ‚¨æ‰€åœ¨çš„å·æˆ–çœä»½åç§°æ˜¯ä»€ä¹ˆï¼Ÿ[Unknown]ï¼šè¯¥å•ä½çš„ä¸¤å­—æ¯å›½å®¶ä»£ç æ˜¯ä»€ä¹ˆ[Unknown]ï¼š CNCN=Unknown, OU=Unknown, O=Unknown,L=Unknown, ST=Unknown, C=CN æ­£ç¡®å—ï¼Ÿ[å¦]ï¼š yè¾“å…¥çš„ä¸»å¯†ç  ï¼ˆå¦‚æœå’Œ keystore å¯†ç ç›¸åŒï¼ŒæŒ‰å›è½¦ï¼‰ï¼š å†æ¬¡è¾“å…¥æ–°å¯†ç :å®Œæˆä¸Šè¿°å·¥ä½œå,å°†åœ¨å½“å‰ç›®å½•ç”Ÿæˆ keystore è¯ä¹¦æ–‡ä»¶,å°†keystore è€ƒè´åˆ° azkaban webæœåŠ¡å™¨æ ¹ç›®å½•ä¸­.å¦‚:cp keystore azkaban/server é…ç½®æ–‡ä»¶æ³¨ï¼šå…ˆé…ç½®å¥½æœåŠ¡å™¨èŠ‚ç‚¹ä¸Šçš„æ—¶åŒº1ã€å…ˆç”Ÿæˆæ—¶åŒºé…ç½®æ–‡ä»¶Asia/Shanghaiï¼Œç”¨äº¤äº’å¼å‘½ä»¤ tzselect å³å¯2ã€æ‹·è´è¯¥æ—¶åŒºæ–‡ä»¶ï¼Œè¦†ç›–ç³»ç»Ÿæœ¬åœ°æ—¶åŒºé…ç½®cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtimeazkaban webæœåŠ¡å™¨é…ç½®è¿›å…¥azkaban webæœåŠ¡å™¨å®‰è£…ç›®å½• confç›®å½•v ä¿®æ”¹azkaban.propertiesæ–‡ä»¶å‘½ä»¤vi azkaban.properties å†…å®¹è¯´æ˜å¦‚ä¸‹:#Azkaban Personalization Settingsazkaban.name=Test #æœåŠ¡å™¨UIåç§°,ç”¨äºæœåŠ¡å™¨ä¸Šæ–¹æ˜¾ç¤ºçš„åå­—azkaban.label=My Local Azkaban #æè¿°azkaban.color=#FF3601 #UIé¢œè‰²azkaban.default.servlet.path=/index #web.resource.dir=web/ #é»˜è®¤æ ¹webç›®å½•default.timezone.id=Asia/Shanghai #é»˜è®¤æ—¶åŒº,å·²æ”¹ä¸ºäºšæ´²/ä¸Šæµ· é»˜è®¤ä¸ºç¾å›½#Azkaban UserManager classuser.manager.class=azkaban.user.XmlUserManager #ç”¨æˆ·æƒé™ç®¡ç†é»˜è®¤ç±»user.manager.xml.file=conf/azkaban-users.xml #ç”¨æˆ·é…ç½®,å…·ä½“é…ç½®å‚åŠ ä¸‹æ–‡#Loader for projectsexecutor.global.properties=conf/global.properties # globalé…ç½®æ–‡ä»¶æ‰€åœ¨ä½ç½®azkaban.project.dir=projects #database.type=mysql #æ•°æ®åº“ç±»å‹mysql.port=3306 #ç«¯å£å·mysql.host=localhost #æ•°æ®åº“è¿æ¥IPmysql.database=azkaban #æ•°æ®åº“å®ä¾‹åmysql.user=root #æ•°æ®åº“ç”¨æˆ·åmysql.password=root #æ•°æ®åº“å¯†ç mysql.numconnections=100 #æœ€å¤§è¿æ¥æ•°# Velocity dev modevelocity.dev.mode=false# JettyæœåŠ¡å™¨å±æ€§.jetty.maxThreads=25 #æœ€å¤§çº¿ç¨‹æ•°jetty.ssl.port=8443 #Jetty SSLç«¯å£jetty.port=8081 #Jettyç«¯å£jetty.keystore=keystore #SSLæ–‡ä»¶åjetty.password=123456 #SSLæ–‡ä»¶å¯†ç jetty.keypassword=123456 #Jettyä¸»å¯†ç  ä¸ keystoreæ–‡ä»¶ç›¸åŒjetty.truststore=keystore #SSLæ–‡ä»¶åjetty.trustpassword=123456 # SSLæ–‡ä»¶å¯†ç # æ‰§è¡ŒæœåŠ¡å™¨å±æ€§executor.port=12321 #æ‰§è¡ŒæœåŠ¡å™¨ç«¯å£# é‚®ä»¶è®¾ç½®mail.sender=xxxxxxxx@163.com #å‘é€é‚®ç®±mail.host=smtp.163.com #å‘é€é‚®ç®±smtpåœ°å€mail.user=xxxxxxxx #å‘é€é‚®ä»¶æ—¶æ˜¾ç¤ºçš„åç§°mail.password=********** #é‚®ç®±å¯†ç job.failure.email=xxxxxxxx@163.com #ä»»åŠ¡å¤±è´¥æ—¶å‘é€é‚®ä»¶çš„åœ°å€job.success.email=xxxxxxxx@163.com #ä»»åŠ¡æˆåŠŸæ—¶å‘é€é‚®ä»¶çš„åœ°å€lockdown.create.projects=false #cache.directory=cache #ç¼“å­˜ç›®å½•v azkaban æ‰§è¡ŒæœåŠ¡å™¨executoré…ç½®è¿›å…¥æ‰§è¡ŒæœåŠ¡å™¨å®‰è£…ç›®å½•conf,ä¿®æ”¹azkaban.propertiesvi azkaban.properties#Azkabandefault.timezone.id=Asia/Shanghai #æ—¶åŒº# Azkaban JobTypes æ’ä»¶é…ç½®azkaban.jobtype.plugin.dir=plugins/jobtypes #jobtype æ’ä»¶æ‰€åœ¨ä½ç½®#Loader for projectsexecutor.global.properties=conf/global.propertiesazkaban.project.dir=projects#æ•°æ®åº“è®¾ç½®database.type=mysql #æ•°æ®åº“ç±»å‹(ç›®å‰åªæ”¯æŒmysql)mysql.port=3306 #æ•°æ®åº“ç«¯å£å·mysql.host=192.168.20.200 #æ•°æ®åº“IPåœ°å€mysql.database=azkaban #æ•°æ®åº“å®ä¾‹åmysql.user=root #æ•°æ®åº“ç”¨æˆ·åmysql.password=root #æ•°æ®åº“å¯†ç mysql.numconnections=100 #æœ€å¤§è¿æ¥æ•°# æ‰§è¡ŒæœåŠ¡å™¨é…ç½®executor.maxThreads=50 #æœ€å¤§çº¿ç¨‹æ•°executor.port=12321 #ç«¯å£å·(å¦‚ä¿®æ”¹,è¯·ä¸webæœåŠ¡ä¸­ä¸€è‡´) executor.flow.threads=30 #çº¿ç¨‹æ•°v ç”¨æˆ·é…ç½®è¿›å…¥azkaban webæœåŠ¡å™¨confç›®å½•,ä¿®æ”¹azkaban-users.xmlvi azkaban-users.xml å¢åŠ  ç®¡ç†å‘˜ç”¨æˆ· &lt;user username=&quot;azkaban&quot; password=&quot;azkaban&quot; roles=&quot;admin&quot; groups=&quot;azkaban&quot; /&gt; &lt;user username=&quot;metrics&quot; password=&quot;metrics&quot; roles=&quot;metrics&quot;/&gt; `&lt;user username=&quot;admin&quot; password=&quot;admin&quot; roles=&quot;admin,metrics&quot; /&gt;` &lt;role name=&quot;admin&quot; permissions=&quot;ADMIN&quot; /&gt; &lt;role name=&quot;metrics&quot; permissions=&quot;METRICS&quot;/&gt; å¯åŠ¨ webæœåŠ¡å™¨åœ¨azkaban webæœåŠ¡å™¨ç›®å½•ä¸‹æ‰§è¡Œå¯åŠ¨å‘½ä»¤bin/azkaban-web-start.shæ³¨:åœ¨webæœåŠ¡å™¨æ ¹ç›®å½•è¿è¡Œæˆ–è€…å¯åŠ¨åˆ°åå°nohup bin/azkaban-web-start.sh 1&gt;/tmp/azstd.out 2&gt;/tmp/azerr.out &amp; æ‰§è¡ŒæœåŠ¡å™¨åœ¨æ‰§è¡ŒæœåŠ¡å™¨ç›®å½•ä¸‹æ‰§è¡Œå¯åŠ¨å‘½ä»¤bin/azkaban-executor-start.shæ³¨:åªèƒ½è¦æ‰§è¡ŒæœåŠ¡å™¨æ ¹ç›®å½•è¿è¡Œå¯åŠ¨å®Œæˆå,åœ¨æµè§ˆå™¨(å»ºè®®ä½¿ç”¨è°·æ­Œæµè§ˆå™¨)ä¸­è¾“å…¥https://æœåŠ¡å™¨IPåœ°å€:8443 ,å³å¯è®¿é—®azkabanæœåŠ¡äº†.åœ¨ç™»å½•ä¸­è¾“å…¥åˆšæ‰æ–°çš„æˆ·ç”¨ååŠå¯†ç ,ç‚¹å‡» login. Azkabanå®æˆ˜Azkabaå†…ç½®çš„ä»»åŠ¡ç±»å‹æ”¯æŒcommandã€java Commandç±»å‹å•ä¸€jobç¤ºä¾‹1ã€åˆ›å»ºjobæè¿°æ–‡ä»¶vi command.job123#command.jobtype=commandcommand=echo 'hello'2ã€å°†jobèµ„æºæ–‡ä»¶æ‰“åŒ…æˆzipæ–‡ä»¶zip -r command.zip command.job3ã€é€šè¿‡azkabançš„webç®¡ç†å¹³å°åˆ›å»ºprojectå¹¶ä¸Šä¼ jobå‹ç¼©åŒ…é¦–å…ˆåˆ›å»ºprojectä¸Šä¼ zipåŒ…4ã€å¯åŠ¨æ‰§è¡Œè¯¥job Commandç±»å‹å¤šjobå·¥ä½œæµflow1ã€åˆ›å»ºæœ‰ä¾èµ–å…³ç³»çš„å¤šä¸ªjobæè¿°ç¬¬ä¸€ä¸ªjobï¼šfoo.job123# foo.jobtype=commandcommand=echo fooç¬¬äºŒä¸ªjobï¼šbar.jobä¾èµ–foo.job1234# bar.jobtype=commanddependencies=foocommand=echo bar2ã€å°†æ‰€æœ‰jobèµ„æºæ–‡ä»¶æ‰“åˆ°ä¸€ä¸ªzipåŒ…ä¸­3ã€åœ¨azkabançš„webç®¡ç†ç•Œé¢åˆ›å»ºå·¥ç¨‹å¹¶ä¸Šä¼ zipåŒ…4ã€å¯åŠ¨å·¥ä½œæµflow HDFSæ“ä½œä»»åŠ¡1ã€åˆ›å»ºjobæè¿°æ–‡ä»¶123#fs.jobtype=commandcommand=/home/hadoop/apps/hadoop-2.6.1/bin/hadoop fs -mkdir /azaz2ã€å°†jobèµ„æºæ–‡ä»¶æ‰“åŒ…æˆzipæ–‡ä»¶3ã€é€šè¿‡azkabançš„webç®¡ç†å¹³å°åˆ›å»ºprojectå¹¶ä¸Šä¼ jobå‹ç¼©åŒ…4ã€å¯åŠ¨æ‰§è¡Œè¯¥job MAPREDUCEä»»åŠ¡Mrä»»åŠ¡ä¾ç„¶å¯ä»¥ä½¿ç”¨commandçš„jobç±»å‹æ¥æ‰§è¡Œ1ã€åˆ›å»ºjobæè¿°æ–‡ä»¶ï¼ŒåŠmrç¨‹åºjaråŒ…ï¼ˆç¤ºä¾‹ä¸­ç›´æ¥ä½¿ç”¨hadoopè‡ªå¸¦çš„examplejarï¼‰123# mrwc.jobtype=commandcommand=/home/hadoop/apps/hadoop-2.6.1/bin/hadoop jar hadoop-mapreduce-examples-2.6.1.jar wordcount /wordcount/input /wordcount/azout2ã€å°†æ‰€æœ‰jobèµ„æºæ–‡ä»¶æ‰“åˆ°ä¸€ä¸ªzipåŒ…ä¸­3ã€åœ¨azkabançš„webç®¡ç†ç•Œé¢åˆ›å»ºå·¥ç¨‹å¹¶ä¸Šä¼ zipåŒ…4ã€å¯åŠ¨job HIVEè„šæœ¬ä»»åŠ¡l åˆ›å»ºjobæè¿°æ–‡ä»¶å’Œhiveè„šæœ¬Hiveè„šæœ¬ï¼š test.sql1234567891011121314151617use default;load data local inpath '/home/hadoop/demo.json' into table statis;insert into table statis_newselect get_json_object(line,'$.username') as username,get_json_object(line,'$.visitdate') as visitdate,get_json_object(line,'$.visit') as visitdate,get_json_object(line,'$.visit') as sumvisit from statis;insert overwrite table statis_newselect A.username,A.visitdate,max(A.visit) as visit,sum(B.visit) as sumvisitfrom (select username,visitdate,sum(visit) as visitfrom statis_newgroup by username,visitdate)Ainner join(select username,visitdate,sum(visit) as visitfrom statis_newgroup by username,visitdate)Bon A.username = B.usernamewhere B.visitdate &lt;= A.visitdategroup by A.username,A.visitdate;Jobæè¿°æ–‡ä»¶ï¼šhivef.job123# hivef.jobtype=commandcommand=/home/hadoop/apps/hive/bin/hive -f 'test.sql'2ã€å°†æ‰€æœ‰jobèµ„æºæ–‡ä»¶æ‰“åˆ°ä¸€ä¸ªzipåŒ…ä¸­3ã€åœ¨azkabançš„webç®¡ç†ç•Œé¢åˆ›å»ºå·¥ç¨‹å¹¶ä¸Šä¼ zipåŒ…4ã€å¯åŠ¨jobæ„Ÿè°¢åšä¸»åˆ†äº«ï¼Œå¾ˆä¸é”™çš„èµ„æ–™å¾ˆå…¨é¢ï¼Œè½¬è½½ä¸€æ³¢https://blog.csdn.net/hblfyla/article/details/74384915","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Azkaban","slug":"Azkaban","permalink":"yihao.ml/tags/Azkaban/"}]},{"title":"MapReduceå°ä¾‹å­","slug":"2018-05-04-hadoop-MapReduceå°ä¾‹å­","date":"2018-05-04T00:00:00.000Z","updated":"2019-11-29T12:20:47.667Z","comments":true,"path":"2018/05/04/2018-05-04-hadoop-MapReduceå°ä¾‹å­/","link":"","permalink":"yihao.ml/2018/05/04/2018-05-04-hadoop-MapReduceå°ä¾‹å­/","excerpt":"","text":"æ¡ˆä¾‹ä¸€ : ç»Ÿè®¡å•è¯å‡ºç°ä¸ªæ•°a b a b aa b a b ab a b a b a b ab a ba,1 a,1 a,1 a,1 a,1 a,1 a,1 a,1 a,1 | b,1 b,1 b,1 b,1 b,1 b,1 b,1 b,1 b,1k -&gt; a values -&gt; 1 ,1 ,1 ,1 ,1 ,1 ,1 ,1 ,1sum = 0for (int i=0; values.length ; i++){sum ++;}æ¡ˆä¾‹äºŒ : ç»Ÿè®¡æ‰‹æœºä¸Šä¸‹è¡Œæµé‡17654565484 80000000 600017654565484 80000000 600017654565484 80000000 600017654565484 80000000 600017654565484 80000000 600017654565484 80000000 600015565658787 54455455 546465415565658787 54455455 546465415565658787 54455455 546465415565658787 54455455 546465415565658787 54455455 546465417654565484,bean 17654565484,bean 17654565484,bean 17654565484,bean | 15565658787,bean 15565658787,bean 15565658787,bean 15565658787,beank -&gt; 17654565484 values -&gt; bean ,bean ,bean ,beansumUpStream = 0sumDownStream = 0for (int i=0; values.length ; i++){sumUpStream += bean.upStream();sumDownStream += bean.DOwnStream();}æ¡ˆä¾‹ä¸‰ : ç»Ÿè®¡ä¸¤ä¸ªäººçš„å…±åŒå¥½å‹A : B,C,DB : E,F,DC : E,DB,A C,A D,A E,B F,B D,B E,C D,C -&gt; B,A | C,A | D,A D,B D,C | E,B E,C | F,BB : AC : AD : A ,B ,CE : B ,CF : BA ,Bçš„å¥½å‹æ˜¯DA ,Cçš„å¥½å‹æ˜¯D","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"MapReduce","slug":"MapReduce","permalink":"yihao.ml/tags/MapReduce/"}]},{"title":"flumeæ—¥å¿—æ”¶é›†ç³»ç»Ÿéƒ¨ç½²","slug":"2018-05-04-hadoop-flumeæ—¥å¿—æ”¶é›†","date":"2018-05-04T00:00:00.000Z","updated":"2019-11-29T12:20:47.666Z","comments":true,"path":"2018/05/04/2018-05-04-hadoop-flumeæ—¥å¿—æ”¶é›†/","link":"","permalink":"yihao.ml/2018/05/04/2018-05-04-hadoop-flumeæ—¥å¿—æ”¶é›†/","excerpt":"","text":"flume æ˜¯clouderaæä¾›çš„ä¸€ä¸ªé«˜å¯é ã€é«˜å¯ç”¨ã€åˆ†å¸ƒå¼çš„æ—¥å¿—é‡‡é›†ã€èšåˆå’Œä¼ è¾“çš„å·¥å…·ï¼Œflumeæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥æ–¹ä¾¿çš„å®šä¹‰å„ç§sources(ä»å“ªæ”¶)å’Œsinks(æ”¾åœ¨å“ª)ï¼Œæ¥é€‚åº”æˆ‘ä»¬ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ã€‚ ä½¿ç”¨è¿›å…¥flumeçš„ç›®å½•ï¼Œä¿®æ”¹confä¸‹çš„flume-env.shï¼Œåœ¨é‡Œé¢é…ç½®JAVA_HOME 1. ä»ç½‘ç»œç«¯å£æ¥æ”¶æ•°æ®ï¼Œä¸‹æ²‰åˆ°loggeråœ¨flumeçš„confç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå°†ä¸‹é¢å†…å®¹å†™è¿›å»1234567891011121314151617181920212223242526# Name the components on this agent#ç»™é‚£ä¸‰ä¸ªç»„ä»¶å–ä¸ªåå­—a1.sources = r1a1.sinks = k1a1.channels = c1# Describe/configure the source#ç±»å‹, ä»ç½‘ç»œç«¯å£æ¥æ”¶æ•°æ®,åœ¨æœ¬æœºå¯åŠ¨, æ‰€ä»¥localhost, type=spoolDiré‡‡é›†ç›®å½•æº,ç›®å½•é‡Œæœ‰å°±é‡‡a1.sources.r1.type = netcata1.sources.r1.bind = localhosta1.sources.r1.port = 44444# Describe the sinka1.sinks.k1.type = logger# Use a channel which buffers events in memory#ä¸‹æ²‰çš„æ—¶å€™æ˜¯ä¸€æ‰¹ä¸€æ‰¹çš„, ä¸‹æ²‰çš„æ—¶å€™æ˜¯ä¸€ä¸ªä¸ªeventChannelå‚æ•°è§£é‡Šï¼š#capacityï¼šé»˜è®¤è¯¥é€šé“ä¸­æœ€å¤§çš„å¯ä»¥å­˜å‚¨çš„eventæ•°é‡#trasactionCapacityï¼šæ¯æ¬¡æœ€å¤§å¯ä»¥ä»sourceä¸­æ‹¿åˆ°æˆ–è€…é€åˆ°sinkä¸­çš„eventæ•°é‡a1.channels.c1.type = memorya1.channels.c1.capacity = 1000a1.channels.c1.transactionCapacity = 100# Bind the source and sink to the channela1.sources.r1.channels = c1a1.sinks.k1.channel = c1å¯åŠ¨å‘½ä»¤ï¼š å‘Šè¯‰flumå¯åŠ¨ä¸€ä¸ªagent,æŒ‡å®šé…ç½®å‚æ•°, --name:agentçš„åå­—$ bin/flume-ng agent --conf conf --conf-file conf/netcat-logger.conf --name a1 -Dflume.root.logger=INFO,console 2. ç›‘è§†æ–‡ä»¶å¤¹123456789101112131415161718192021222324############### Name the components on this agenta1.sources = r1a1.sinks = k1a1.channels = c1# Describe/configure the source#ç›‘å¬ç›®å½•,spoolDiræŒ‡å®šç›®å½•, fileHeaderè¦ä¸è¦ç»™æ–‡ä»¶å¤¹å‰å åa1.sources.r1.type = spooldira1.sources.r1.spoolDir = /home/hadoop/flumespoola1.sources.r1.fileHeader = true# Describe the sinka1.sinks.k1.type = logger# Use a channel which buffers events in memorya1.channels.c1.type = memorya1.channels.c1.capacity = 1000a1.channels.c1.transactionCapacity = 100# Bind the source and sink to the channela1.sources.r1.channels = c1a1.sinks.k1.channel = c1å¯åŠ¨å‘½ä»¤ï¼š$ bin/flume-ng agent -c ./conf -f ./conf/spool-logger.conf -n a1 -Dflume.root.logger=INFO,consoleæ³¨:æµ‹è¯•ï¼š å¾€/home/hadoop/flumeSpoolæ”¾æ–‡ä»¶ï¼ˆmv ././xxxFile /home/hadoop/flumeSpoolï¼‰ï¼Œä½†æ˜¯ä¸è¦åœ¨é‡Œé¢ç”Ÿæˆæ–‡ä»¶ 3.ç”¨tailå‘½ä»¤è·å–æ•°æ®ï¼Œä¸‹æ²‰åˆ°hdfs123456789101112131415161718192021222324252627282930313233343536373839404142######### Name the components on this agenta1.sources = r1a1.sinks = k1a1.channels = c1# Describe/configure the sourcea1.sources.r1.type = execa1.sources.r1.command = tail -F /home/hadoop/log/test.loga1.sources.r1.channels = c1# Describe the sinka1.sinks.k1.type = hdfsa1.sinks.k1.channel = c1a1.sinks.k1.hdfs.path = /flume/events/%y-%m-%d/%H%M/a1.sinks.k1.hdfs.filePrefix = events-# æ¯ä¸ª10åˆ†é’Ÿé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„æ—¶é—´ç›®å½•a1.sinks.k1.hdfs.round = truea1.sinks.k1.hdfs.roundValue = 10a1.sinks.k1.hdfs.roundUnit = minute# æ–‡ä»¶çš„æ»šåŠ¨å‘¨æœŸ(ç§’)a1.sinks.k1.hdfs.rollInterval = 3# æ–‡ä»¶å¤§å°æ»šåŠ¨(bytes)a1.sinks.k1.hdfs.rollSize = 20# å†™å…¥å¤šå°‘ä¸ªeventåæ»šåŠ¨,äº‹ä»¶ä¸ªæ•°a1.sinks.k1.hdfs.rollCount = 5a1.sinks.k1.hdfs.batchSize = 1a1.sinks.k1.hdfs.useLocalTimeStamp = true#ç”Ÿæˆçš„æ–‡ä»¶ç±»å‹ï¼Œé»˜è®¤æ˜¯Sequencefileï¼Œå¯ç”¨DataStreamï¼Œåˆ™ä¸ºæ™®é€šæ–‡æœ¬a1.sinks.k1.hdfs.fileType = DataStream# Use a channel which buffers events in memorya1.channels.c1.type = memorya1.channels.c1.capacity = 1000a1.channels.c1.transactionCapacity = 100# Bind the source and sink to the channela1.sources.r1.channels = c1a1.sinks.k1.channel = c1å¯åŠ¨å‘½ä»¤ï¼šbin/flume-ng agent -c conf -f conf/tail-hdfs.conf -n a1 4. å¤šä¸ªagentä¸²è”agent1é…ç½®å¦‚ä¸‹:1234567891011121314151617181920212223# Name the components on this agenta1.sources = r1a1.sinks = k1a1.channels = c1# Describe/configure the sourcea1.sources.r1.type = avroa1.sources.r1.channels = c1a1.sources.r1.bind = 0.0.0.0a1.sources.r1.port = 4141# Describe the sinka1.sinks.k1.type = logger# Use a channel which buffers events in memorya1.channels.c1.type = memorya1.channels.c1.capacity = 1000a1.channels.c1.transactionCapacity = 100# Bind the source and sink to the channela1.sources.r1.channels = c1a1.sinks.k1.channel = c1å¯åŠ¨:$ bin/flume-ng agent --conf conf --conf-file conf/avro-hdfs.conf --name a1 -Dflume.root.logger=DEBUG,consoleagent2é…ç½®å¦‚ä¸‹:1234567891011121314151617181920212223242526272829################### Name the components on this agenta1.sources = r1a1.sinks = k1a1.channels = c1# Describe/configure the sourcea1.sources.r1.type = execa1.sources.r1.command = tail -F /home/hadoop/log/test.loga1.sources.r1.channels = c1# Describe the sinka1.sinks = k1a1.sinks.k1.type = avroa1.sinks.k1.channel = c1a1.sinks.k1.hostname = hadoop01a1.sinks.k1.port = 4141a1.sinks.k1.batch-size = 2# Use a channel which buffers events in memorya1.channels.c1.type = memorya1.channels.c1.capacity = 1000a1.channels.c1.transactionCapacity = 100# Bind the source and sink to the channela1.sources.r1.channels = c1a1.sinks.k1.channel = c1å¯åŠ¨å‘½ä»¤ï¼š$ bin/flume-ng agent --conf conf --conf-file conf/tail-avro-avro-logger.conf --name a1 -Dflume.root.logger=DEBUG,console","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Flume","slug":"Flume","permalink":"yihao.ml/tags/Flume/"}]},{"title":"æ­å»ºåŸºäºHadoopçš„Hiveæ•°æ®ä»“åº“","slug":"2018-05-03-hadoop-æ­å»ºåŸºäºHadoopçš„Hiveæ•°æ®ä»“åº“","date":"2018-05-03T00:00:00.000Z","updated":"2019-11-29T12:20:47.666Z","comments":true,"path":"2018/05/03/2018-05-03-hadoop-æ­å»ºåŸºäºHadoopçš„Hiveæ•°æ®ä»“åº“/","link":"","permalink":"yihao.ml/2018/05/03/2018-05-03-hadoop-æ­å»ºåŸºäºHadoopçš„Hiveæ•°æ®ä»“åº“/","excerpt":"","text":"Hiveæ˜¯åŸºäºHadoopçš„ä¸€ä¸ªæ•°æ®ä»“åº“ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç»“æ„åŒ–çš„æ•°æ®æ˜ å°„ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œä¸ºæ­¤æä¾›ç±»ä¼¼ä¸SQLçš„HQLæ¥æŸ¥è¯¢æ•°æ®ã€‚ä½¿ç”¨Hiveå¯ä»¥æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œç¼©çŸ­å¼€å‘å‘¨æœŸï¼Œæœ€é‡è¦çš„æ˜¯å®ƒé™ä½äº†ç¼–å†™MapReduceç¼–å†™çš„éš¾åº¦ï¼Œå¯èƒ½åœ¨åº”å¯¹å¾ˆå¤æ‚çš„mapReduceç¨‹åºæ—¶,æˆ‘ä»¬åªéœ€è¦å†™ä¸€æ¡ç®€å•çš„sqlå°±å¯ä»¥å®ç°å…·ä½“åŠŸèƒ½äº†ã€‚ å®‰è£…æˆ‘ä»¬å¯ä»¥ä»Hiveçš„å®˜ç½‘https://hive.apache.org/ä¸‹è½½å¯¹åº”çš„å®‰è£…åŒ…ã€‚è¿™é‡Œæˆ‘ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯1.2.1ã€‚ 1.ä¿®æ”¹é…ç½®æ–‡ä»¶$ cp hive-env.sh.template hive-env.shåœ¨æœ«å°¾åŠ ä¸Šä¸‹é¢è¯­å¥ï¼Œé…ç½®å¥½ç¯å¢ƒå˜é‡1234export JAVA_HOME=/usr/local/jdk1.8.0_161export HADOOP_HOME=/home/hadoop/hadoop-2.7.3export HIVE_HOME=/home/hadoop/apache-hive-1.2.1-binexport HIVE_CONF_DIR=/data/apache-hive-1.2.2-bin/confåˆ›å»º conf/hive-site.xmlæ–‡ä»¶$ cd conf;touch hive-site.xmlåœ¨é‡Œé¢æŒ‡å®šè¦é“¾æ¥çš„æ•°æ®åº“,javax.jdo.option.ConnectionURLå‚æ•°ç”¨äºæŒ‡å®šæˆ‘ä»¬å­˜æ”¾æ•°æ®å…ƒçš„åœ°æ–¹123456789101112131415161718&lt;configuration&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt; &lt;value&gt;jdbc:mysql://zyh:3306/hivedb?createDatabaseIfNotExist=true&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt; &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt; &lt;value&gt;root&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt; &lt;value&gt;root&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt;ä»€ä¹ˆæ˜¯å…ƒæ•°æ®ï¼Ÿå…ƒæ•°æ®å°±æ˜¯å¯ä»¥ç†è§£ä¸ºæè¿°æ•°æ®çš„æ•°æ®ï¼Œè¿™è¾¹å†™çš„æ˜¯æœ¬æœºçš„mysql,è¿™äº›æè¿°æ•°æ®çš„æ•°æ®ä¼šå­˜åœ¨mysqlçš„hiveåº“ä¸­ï¼Œä½ å¯ä»¥åœ¨å¯åŠ¨hiveä»¥åæŸ¥çœ‹ä¸€ä¸‹mysqlæ•°æ®è¿™äº›æ•°æ®åˆ°åº•é•¿ä»€ä¹ˆæ ·å­ã€‚æ‹·è´hadoopç›®å½•ä¸‹é…ç½®æ–‡ä»¶åˆ°å½“å‰ç›®å½•$ cp $HADOOP_HOME/etc/hadoop/core-site.xml .$ cp $HADOOP_HOME/etc/hadoop/hdfs-site.xml . 2.å¯åŠ¨Hiveä¸‹é¢ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥å¯åŠ¨$ cd apache-hive-1.2.1-bin ; bin/hiveæˆ–è€…$ hive --service hiveserver2 --hiveconf hive.server2.thrift.port=10000 --hiveconf hive.root.logger=INFO,console$ bin/beeline -u jdbc:hive2://cor1:10000 -n hadoopæˆ‘ä½¿ç”¨çš„æ˜¯ç¬¬ä¸€ç§æ–¹æ³• Hiveä¸€äº›ç®€å•æ“ä½œä¸‹é¢æ˜¯ä¸€äº›ç®€å•çš„æ“ä½œã€‚ 1.åˆ›å»ºå¤–éƒ¨è¡¨create external table extertable(id string,name string) row format delimited fields terminated by â€˜,â€™; 2.æ’å…¥æ•°æ®ç°åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªæ–‡æœ¬extertable.txt,åœ¨é‡Œé¢è¾“å…¥ä¸‹é¢å†…å®¹1234561,zhangsan2,lisi3,wangwu4,tom5,jerry6,cettyä½¿ç”¨ä¸‹é¢å‘½ä»¤å°±å¯ä»¥å°†æ•°æ®å¯¼å…¥åˆ°è¡¨ä¸­load data local inpath â€˜xxxx/xxxx/extertable.txtâ€™ into table extertable; 3.æŸ¥è¯¢select * from extertable; Hiveåˆ†æ¡¶å…¶å®Hiveçš„æœ¬è´¨è¿˜æ˜¯åœ¨å¸®åŠ©æˆ‘ä»¬è¿è¡ŒMapReduceï¼Œå®ƒä¼šå°†HQLæŒ‰æ¨¡æ¿è½¬åŒ–æˆæŒ‡å®šMapReduceä»£ç ã€‚è¿™é‡Œè¯´ä¸€ä¸‹Hiveåˆ†æ¡¶çš„æ¦‚å¿µï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯åˆ†æ¡¶ï¼Œä¸ºä»€ä¹ˆä¼šç”¨åˆ†æ¡¶ã€‚æˆ‘ä»¬çŸ¥é“åœ¨è¿è¡ŒMapReduceç¨‹åºæ—¶ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªReduce Taskæ¥å¤„ç†ä¸åŒpartitionçš„æ•°æ®ï¼ŒHiveçš„åˆ†æ¡¶å°±å¯ä»¥å¾ˆå¥½çš„å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå°†ä¸åŒçš„reduce task ç”Ÿæˆçš„æ•°æ®å¯¼å…¥åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­å¥æ¥åˆ›å»ºä¸€ä¸ªå¸¦åˆ†æ¡¶çš„è¡¨ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨åˆ†æ¡¶è¡¨æ—¶ï¼Œé”™è¯¯çš„åšæ³•æ˜¯ç›´æ¥å¾€è¡¨é‡Œinsertæ•°æ®ï¼Œè¿™æ˜¯ä¸å¯¹çš„ã€‚æ­£ç¡®çš„æ€è·¯æ˜¯ï¼Œä»å…¶ä»–çš„è¡¨ä¸­æŸ¥è¯¢å‡ºæ•°æ®ï¼Œç„¶åæ’å…¥åˆ°è¯¥è¡¨ä¸­ã€‚create table student(id int, age int,name string) partitioned by (stat_data string) clustered by (id) sorted by (age) into 2 buckets row format delimited fields terminated by â€˜,â€™;é‚£ä¹ˆåˆ†æ¡¶åæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿæœ€å¤§çš„å¥½å¤„åº”è¯¥æ˜¯æé«˜joinçš„æ•ˆç‡ã€‚æ•°æ®ç»è¿‡åˆ†åŒºï¼Œæ’åºåï¼Œç›¸åŒçš„idä¼šè¢«æ”¾åœ¨åŒä¸€ä¸ªæ¡¶å†…ï¼Œè¿™æ—¶å†åšé“¾æ¥æŸ¥è¯¢æ—¶ï¼Œå°±ä¸ä¼šéå†å…¨è¡¨ã€‚ Hive è‡ªå®šä¹‰å‡½æ•°Hiveä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šå†…ç½®å‡½æ•°ã€‚é™¤æ­¤ä¹‹å¤–è¿˜æä¾›äº†è‡ªå®šä¹‰çš„æ¥å£ï¼Œè¯´å…¶ä¸­ä¸€ç§å®ç°å¥—è·¯ç»§æ‰¿UDF 1. ç»§æ‰¿UDFï¼Œå¹¶é‡è½½evaluateæ–¹æ³•12345678910package com.bim.hive;import org.apache.hadoop.hive.ql.exec.UDF;import org.apache.hadoop.io.Text;public final class Lower extends UDF &#123; public Text evaluate(final Text s)&#123; if(s==null)&#123;return null;&#125; return new Text(s.toString().toLowerCase()); &#125;&#125; 2.æ‰“æˆjaråŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨è¿™è¾¹æ¨èä½¿ç”¨Eclipseæ‰“åŒ…æˆjarï¼Œæˆ‘ä½¿ç”¨IDEAæ‰“åŒ…å¥½ä¹…ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚ã€‚ 3.å°†jaråŒ…æ·»åŠ åˆ°hiveçš„classpathadd JAR /home/hadoop/udf.jar; 4.4ã€ åˆ›å»ºä¸´æ—¶å‡½æ•°ä¸å¼€å‘å¥½çš„java classå…³è”create temporary function toprovince as â€˜cn.itcast.bigdata.udf.ToProvinceâ€™;","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Hive","slug":"Hive","permalink":"yihao.ml/tags/Hive/"}]},{"title":"HDFSæºç åˆ¨æ-FileSystemåˆå§‹åŒ–","slug":"2018-04-27-hdfs-HDFSæºç åˆ¨æ-FileSystemåˆå§‹åŒ–","date":"2018-04-27T00:00:00.000Z","updated":"2019-11-29T12:20:47.663Z","comments":true,"path":"2018/04/27/2018-04-27-hdfs-HDFSæºç åˆ¨æ-FileSystemåˆå§‹åŒ–/","link":"","permalink":"yihao.ml/2018/04/27/2018-04-27-hdfs-HDFSæºç åˆ¨æ-FileSystemåˆå§‹åŒ–/","excerpt":"","text":"ç†ä¸€ä¸‹HDFSä¸Šä¼ çš„å·¥ä½œåŸç†ï¼Œç„¶åè¿½ä¸€ä¸‹æºç ã€‚ä¸Šä¼ å·¥ä½œåŸç†å’Œæºç åˆ¨ææ”¾ä¸‹ä¸€ç¯‡æ€»ç»“ã€‚æœ¬æœºç¯å¢ƒ:æ“ä½œç³»ç»Ÿubuntu 16.0.4TLShadoopç‰ˆæœ¬hadoop-2.7.3HAå¦ï¼ˆéšä¾¿æ­äº†ä¸ªåˆ†å¸ƒå¼ï¼‰ HDFSä¸Šä¼ æ–‡ä»¶åŸç†å›¾Clientä¼šå°†æ–‡ä»¶åˆ‡åˆ†æˆæŒ‡å®šå¤§å°çš„å—(block),å—çš„å¤§å°é»˜è®¤128MClientä¼šä»ç¬¬ä¸€ä¸ªå—å¼€å§‹ï¼Œå‘NameNodeå‘èµ·ä¸Šä¼ æ–‡ä»¶è¯·æ±‚ï¼Œé€šè¿‡RPCä¸NameNodeå»ºç«‹é€šè®¯ã€‚DataNodeå®šæ—¶å‘NameNodeæ±‡æŠ¥è‡ªå·±æŒæœ‰çš„æ•°æ®ä¿¡æ¯(å¿ƒè·³æœºåˆ¶)ã€‚NameNodeæ”¶åˆ°ä¸Šä¼ æ–‡ä»¶è¯·æ±‚é€‰æ‹©åˆé€‚çš„DataNodeèŠ‚ç‚¹ä¿¡æ¯(MetaData)è¿”å›ç»™Clientã€‚Clientè¯»å–MetaDataä¸DataNode2å»ºç«‹é“¾æ¥ï¼Œå¹¶å‘Šè¯‰DataNode_2ï¼Œè¿˜æƒ³æŠŠè¿™ä»½æ–‡ä»¶ä¼ é€ç»™DataNode_3å’ŒDataNode_4ï¼Œéšåæ•°æ®ä»¥packetæ•°æ®åŒ…çš„å½¢å¼ä¼ è¾“ï¼Œä¸­é—´ä¼šç»è¿‡chunkæ ¡éªŒç­‰ã€‚dataNode_2æ‹¿åˆ°æ•°æ®å°†æ•°æ®å­˜å…¥ç£ç›˜ï¼Œä¸dataNode_3å»ºç«‹è¿æ¥ï¼Œä¼ ç»™dataNode_3,åŒç†å®ŒæˆdataNode_4ä¼ è¾“ã€‚ä¸­é—´åªè¦æœ‰ä¸€ä¸ªæˆåŠŸåŠåˆ¤å®šä¸ºæˆåŠŸã€‚ å…ƒæ•°æ®å­˜å‚¨å¯ä»¥å°†å…ƒæ•°æ®ç†è§£ä¸ºæè¿°æ•°æ®çš„æ•°æ®,çº¢è‰²éƒ¨åˆ†å°±æ˜¯å…ƒæ•°æ®ã€‚å…ƒæ•°æ®æ˜¯ä»fsimageæ–‡ä»¶ä¸­è¯»å–å‡ºæ¥çš„ï¼Œåœ¨æˆ‘ä»¬å¯¹hdfsè¿›è¡Œæ“ä½œæ—¶ï¼Œå…ƒæ•°æ®éƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆfsimageçš„æ•°æ®æ˜¯è°å†™è¿›å»çš„ï¼ŸSecondNameNodeä¸­ç”¨äº†ä¸€ç§æœºåˆ¶å¯ä»¥å¸®åŠ©å®ç°è¿™ä¸ªæ“ä½œï¼Œå«checkPointã€‚è¿™çš„æ°´æœ‰ç‚¹ç¥ï¼Œåç»­ä¸“é—¨è¿›è¡Œè¯¦è¿°ã€‚ HDFSä¸‹è½½æ–‡ä»¶åŸç†å›¾Clientè¯·æ±‚NameNodeä¸‹è½½BLK_1å—æ•°æ®,NameNodeæŸ¥æ‰¾MetaDataå…ƒæ•°æ®NameNodeå°†MetaDataå…ƒæ•°æ®è¿”å›ç»™ClientClientä¸å…ƒæ•°æ®ä¸­ä»»æ„ä¸€å°æœºå™¨å»ºç«‹é“¾æ¥å¹¶ä¸‹è½½æ•°æ®(é‡å¤æ­¤è¿‡ç¨‹ä¸‹è½½BLK_2)åœ¨FileOutputStreamä¸­å®ŒæˆBLK_1å—å’ŒBLK_2å—çš„åˆå¹¶ FileSystemåˆå§‹åŒ–æºç åˆ†ææˆ‘ä»¬å…ˆç®€å•ä½¿ç”¨hadoopæä¾›çš„APIæ¥å®ç°æ–‡ä»¶çš„ä¸Šä¼ ä¸‹è½½ï¼ˆæ–‡ä»¶åˆ é™¤ã€æ”¹åç­‰æ“ä½œæ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œä¸æ¼”ç¤ºï¼‰ã€‚ä¸ç®¡æˆ‘ä»¬è¿›è¡Œä»€ä¹ˆæ“ä½œï¼Œåªè¦æ˜¯å¯¹hdfsä¸Šçš„æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œå¿…é¡»å¯¹FileSystemè¿›è¡Œåˆå§‹åŒ–ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ†æFileSystemçš„åˆå§‹åŒ–ï¼š12345678static&#123; try&#123; // æ‰“æ–­ç‚¹ fs = FileSystem.get(new URI(\"hdfs://cor1:9000\"),configuration); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125;&#125;1234567891011121314151617public static FileSystem get(URI uri, Configuration conf) throws IOException &#123; String scheme = uri.getScheme(); String authority = uri.getAuthority(); if(scheme == null &amp;&amp; authority == null) &#123; return get(conf); &#125; else &#123; if(scheme != null &amp;&amp; authority == null) &#123; URI disableCacheName = getDefaultUri(conf); if(scheme.equals(disableCacheName.getScheme()) &amp;&amp; disableCacheName.getAuthority() != null) &#123; return get(disableCacheName, conf); &#125; &#125; String disableCacheName1 = String.format(\"fs.%s.impl.disable.cache\", new Object[]&#123;scheme&#125;); // æ³¨æ„è¿™é‡Œçš„CACHE.get(uri,conf)è·Ÿè¿›å» return conf.getBoolean(disableCacheName1, false)?createFileSystem(uri, conf):CACHE.get(uri, conf); &#125;&#125;12345FileSystem get(URI uri, Configuration conf) throws IOException &#123; FileSystem.Cache.Key key = new FileSystem.Cache.Key(uri, conf); // è·Ÿè¿›å» return this.getInternal(uri, conf, key);&#125;è¿™ä¸ªæ–¹æ³•æœ€ç»ˆè¿”å›FileSystemçš„å­ç±»DistributedFileSystem123456789101112131415161718192021222324252627282930313233private FileSystem getInternal(URI uri, Configuration conf, FileSystem.Cache.Key key) throws IOException &#123; FileSystem fs; // è¿™é‡Œä½¿ç”¨äº†å•ä¾‹æ¨¡å¼ï¼Œç¬¬ä¸€æ¬¡åˆå§‹åŒ–fileSystemçš„æ—¶å€™ä¼šç¨å¾®æ…¢ç‚¹ï¼Œåç»­å†æ¥æ‹¿å°±ç›´æ¥ä»mapé‡Œé¢å– synchronized(this) &#123; fs = (FileSystem)this.map.get(key); &#125; if(fs != null) &#123; return fs; &#125; else &#123; // è·Ÿè¿›å» fs = FileSystem.createFileSystem(uri, conf); synchronized(this) &#123; FileSystem oldfs = (FileSystem)this.map.get(key); if(oldfs != null) &#123; fs.close(); return oldfs; &#125; else &#123; if(this.map.isEmpty() &amp;&amp; !ShutdownHookManager.get().isShutdownInProgress()) &#123; ShutdownHookManager.get().addShutdownHook(this.clientFinalizer, 10); &#125; fs.key = key; this.map.put(key, fs); if(conf.getBoolean(\"fs.automatic.close\", true)) &#123; this.toAutoClose.add(key); &#125; return fs; &#125; &#125; &#125;&#125;1234567private static FileSystem createFileSystem(URI uri, Configuration conf) throws IOException &#123; Class clazz = getFileSystemClass(uri.getScheme(), conf); FileSystem fs = (FileSystem)ReflectionUtils.newInstance(clazz, conf); // è·Ÿè¿›å»æ³¨æ„ç›´æ¥ç‚¹æ˜¯ä¸è¡Œçš„ï¼Œåœ¨DistributedFileSystemçš„initializeæ–¹æ³•ä¸Šæ‰“æ–­ç‚¹ fs.initialize(uri, conf); return fs;&#125;1234567891011121314public void initialize(URI uri, Configuration conf) throws IOException &#123; super.initialize(uri, conf); this.setConf(conf); String host = uri.getHost(); if(host == null) &#123; throw new IOException(\"Incomplete HDFS URI, no host: \" + uri); &#125; else &#123; this.homeDirPrefix = conf.get(\"dfs.user.home.dir.prefix\", \"/user\"); // åœ¨è¿™é‡Œåˆå§‹åŒ–DFSClientå¹¶æŒ‡å‘fileSystemé‡Œçš„ä¸€ä¸ªå¼•ç”¨ this.dfs = new DFSClient(uri, conf, this.statistics); this.uri = URI.create(uri.getScheme() + \"://\" + uri.getAuthority()); this.workingDir = this.getHomeDirectory(); &#125;&#125;1234567891011121314151617181920212223242526272829@VisibleForTestingpublic DFSClient(URI nameNodeUri, ClientProtocol rpcNamenode, Configuration conf, Statistics stats) throws IOException &#123; this.clientRunning = true; this.r = new Random(); this.filesBeingWritten = new HashMap(); SpanReceiverHost.get(conf, \"dfs.client.htrace.\"); this.traceSampler = (new SamplerBuilder(TraceUtils.wrapHadoopConf(\"dfs.client.htrace.\", conf))).build(); this.dfsClientConf = new DFSClient.Conf(conf); if(this.dfsClientConf.useLegacyBlockReaderLocal) &#123; LOG.debug(\"Using legacy short-circuit local reads.\"); &#125; // ä»£ç å¤ªå¤šç›´æˆªäº†éƒ¨åˆ†ä»£ç  ..... if(proxyInfo != null) &#123; this.dtService = proxyInfo.getDelegationTokenService(); this.namenode = (ClientProtocol)proxyInfo.getProxy(); &#125; else if(rpcNamenode != null) &#123; Preconditions.checkArgument(nameNodeUri == null); this.namenode = rpcNamenode; this.dtService = null; &#125; else &#123; Preconditions.checkArgument(nameNodeUri != null, \"null URI\"); proxyInfo = NameNodeProxies.createProxy(conf, nameNodeUri, ClientProtocol.class, nnFallbackToSimpleAuth); this.dtService = proxyInfo.getDelegationTokenService(); // åˆå§‹åŒ–ä»£ç†å¯¹è±¡,è´Ÿè´£RPCè¿œç¨‹è°ƒç”¨,æŒ‡å‘DFSClientçš„namenodeå¼•ç”¨,å½“å®¢æˆ·ç«¯æ‹¿åˆ°äº†NameNodeçš„ä»£ç†å¯¹è±¡åï¼Œå³ä¸NameNodeå»ºç«‹äº†RPCé€šä¿¡ this.namenode = (ClientProtocol)proxyInfo.getProxy(); &#125; .....&#125;åˆ°æ­¤ï¼ŒFileSystemçš„åˆå§‹åŒ–å°±åŸºæœ¬å®Œæˆã€‚åç»­åˆ†æä¸Šä¼ ã€ä¸‹è½½æºç ï¼Œç„¶åç†ä¸€ä¸‹SecondNameNodeçš„CheckPointæœºåˆ¶ã€‚æœ¬äººæ°´å¹³æœ‰é™ï¼Œä¸å½“ä¹‹å¤„å¸Œæœ›å„ä½é«˜æ‰‹æŒ‡æ­£ã€‚å¦å¤–æ’å…¥æ˜¯åœ¨wordä¸­ç”»çš„ï¼Œçœ‹èµ·æ¥ä¸ç²¾è‡´è¯·è§è°…ã€‚","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"HDFS","slug":"HDFS","permalink":"yihao.ml/tags/HDFS/"}]},{"title":"FTPå¤šçº¿ç¨‹æ‰¹é‡æ–‡ä»¶ä¸‹è½½","slug":"2018-04-25-thread-FTPå¤šçº¿ç¨‹æ‰¹é‡æ–‡ä»¶ä¸‹è½½","date":"2018-04-25T00:00:00.000Z","updated":"2019-11-29T12:20:47.663Z","comments":true,"path":"2018/04/25/2018-04-25-thread-FTPå¤šçº¿ç¨‹æ‰¹é‡æ–‡ä»¶ä¸‹è½½/","link":"","permalink":"yihao.ml/2018/04/25/2018-04-25-thread-FTPå¤šçº¿ç¨‹æ‰¹é‡æ–‡ä»¶ä¸‹è½½/","excerpt":"","text":"æœ€è¿‘æ¥åˆ°ä¸ªä¸šåŠ¡éœ€è¦ä½¿ç”¨FTPæ‹‰å–æœåŠ¡å™¨ä¸Šæ•°æ®ã€‚è¦æ±‚å¯ä»¥ä»»æ„æŒ‡å®šä¸‹è½½å¯¹åº”ç›®å½•æ•°æ®ï¼Œå¹¶ä¸”ç›®å½•ç»“æ„ä¿æŒè¦ã€‚å¤„ç†çš„æ•°æ®æ–‡ä»¶ç‰¹ç‚¹åˆ†æ•£è€Œä¸”å¾ˆå¤§ã€‚å¤„ç†çš„æ€è·¯å¤§æ¦‚æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯åœ¨æœåŠ¡ç«¯å‹ç¼©æˆzipï¼Œç„¶åä¼ è¿‡æ¥ã€‚äºŒæ˜¯ä½¿ç”¨å¤šçº¿ç¨‹å•ä¸ªå•ä¸ªæ–‡ä»¶ä¼ è¾“ã€‚åœ¨è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ç¬¬äºŒä¸­æ–¹æ³•ã€‚ æ€è·¯1.æœåŠ¡ç«¯æä¾›ä¸€ä¸ªè¿”å›æŒ‡å®šæ–‡ä»¶ä¸‹çš„List&lt;String&gt; files2.å®¢æˆ·ç«¯æ‹¿åˆ°filesæ–‡ä»¶åˆ—è¡¨ï¼Œéå†å•ä¸ªå•ä¸ªæ–‡ä»¶è¯·æ±‚æœåŠ¡ç«¯æ‹‰å–æ•°æ® FTPä¸‹è½½ä½¿ç”¨12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061public static boolean downloadFromFtp(String middlePath, String fileName, String localPath) throws IOException &#123; return downloadFromFtp(url, port, username, password,middlePath, fileName, localPath); &#125; public static boolean downloadFromFtp(String url, int port, String username, String password, String path, String fileName, String localpath) throws IOException &#123; boolean flag = false; FTPClient ftp = new FTPClient();//org.apache.commons.net.ftp int reply; try &#123; if (port &gt; -1) &#123; ftp.connect(url, port); &#125; else &#123; ftp.connect(url);//ftpé»˜è®¤çš„ç«¯å£æ˜¯21 &#125; //å¾ˆå¤šäººå†™çš„æ˜¯ç”¨ftp.getReplyCode()ç»™è·å–è¿æ¥çš„è¿”å›å€¼,ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´storeFileStreamè¿”å›null ftp.login(username, password); ftp.enterLocalActiveMode(); ftp.setFileType(FTPClient.BINARY_FILE_TYPE); reply = ftp.getReplyCode(); if (!FTPReply.isPositiveCompletion(reply)) &#123; ftp.disconnect(); return flag; &#125; //åˆ‡æ¢ç›®å½• æ­¤å¤„å¯ä»¥åˆ¤æ–­,åˆ‡æ¢å¤±è´¥å°±è¯´æ˜ftpä¸Šé¢æ²¡æœ‰è¿™ä¸ªè·¯å¾„ ftp.changeWorkingDirectory(path); //ä¸Šä¼ æ–‡ä»¶ OutputStream out = null; InputStream in = null; //åˆ›å»ºæœ¬åœ°çš„æ–‡ä»¶æ—¶å€™è¦æŠŠç¼–ç æ ¼å¼è½¬å›æ¥ File localDir = new File(localpath +\"/\" + path); if(!localDir.exists())&#123; localDir.mkdirs(); &#125; fileName = new String(fileName.getBytes(\"ISO-8859-1\"), \"utf-8\"); File localFile = new File(localpath + \"/\" + path + \"/\" + fileName); out = new FileOutputStream(localFile); //ftp.enterLocalPassiveMode(); in = ftp.retrieveFileStream(fileName); byte[] byteArray = new byte[4096]; int read = 0; while ((read = in.read(byteArray)) != -1) &#123; out.write(byteArray, 0, read); &#125; //è¿™å¥å¾ˆé‡è¦ è¦å¤šæ¬¡æ“ä½œè¿™ä¸ªftpçš„æµçš„é€šé“,è¦ç­‰ä»–çš„æ¯æ¬¡å‘½ä»¤å®Œæˆ ftp.completePendingCommand(); out.flush(); out.close(); ftp.logout(); flag = true; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; if (ftp.isConnected()) &#123; ftp.disconnect(); &#125; &#125; return flag; &#125;downloadFromFtpä¼ å…¥å‚æ•°è¯´æ˜Stringå‚æ•°è§£é‡Šurlftpçš„ipåœ°å€portftpçš„ç«¯å£(é»˜è®¤21)usernameportftpç”¨æˆ·åpasswordftpå¯†ç pathç‰¹åˆ«é‡è¦ï¼Œä¸€å¼€æŠ¥è¾“å…¥æµä¸ºnullå°±æ˜¯å› ä¸ºå®ƒå†™é”™äº†;å‡å¦‚ä½ çš„ftpæ ¹ç›®å½•ä¸ºC:/ftp/,ä½ æƒ³è¦ä¸‹è½½C:/ftp/xxx/ä¸‹çš„æ–‡ä»¶,é‚£ä¹ˆpathå°±è¦å†™xxx/fileNameä¸‹è½½æ–‡ä»¶çš„åç§°localpathä¸‹è½½åˆ°æœ¬åœ°çš„è·¯å¾„ serverè¿”å›åˆ¶å®šæ–‡ä»¶åˆ—è¡¨ç”¨æˆ·ç»™å®šä¸€ä¸ªpathï¼ŒæŸ¥å¤„pathä¸‹æ‰€æœ‰çš„æ–‡ä»¶ï¼Œæ”¾åœ¨listï¼Œä»¥jsonå½¢å¼è¿”å›ã€‚12345678910111213// é€’å½’æŸ¥è¯¢æ‰€æœ‰çš„æ–‡ä»¶public ArrayList listFiles(String path,ArrayList files)&#123; File directory = new File(path); File[] currentFiles = directory.listFiles(); for (File file:currentFiles) &#123; if (file.isDirectory())&#123; listFiles(file.getPath(),files); &#125;else&#123; files.add(file); &#125; &#125; return files;&#125; clientè·å–è¿”å›åˆ—è¡¨ä¸‹è½½æ–‡ä»¶å››ç±»çº¿ç¨‹æ± åŸºæœ¬çš„çº¿ç¨‹æ± æ¦‚è¿°ï¼Œè¿™è¾¹æŒ‰éœ€æ±‚é€‰æ‹©ï¼Œæˆ‘è¿™é‡Œé€‰äº†å®šé•¿çº¿ç¨‹æ± FixedThreadPoolFixedThreadPool å®šé•¿çš„çº¿ç¨‹æ± ï¼Œåˆå§‹åŒ–æ—¶æŒ‡å®šçº¿ç¨‹çš„ä¸ªæ•°ï¼Œå½“çº¿ç¨‹æ± ä¸­çº¿ç¨‹è¢«ç”¨å®Œæ—¶ï¼Œå…¶ä»–ä»»åŠ¡é˜»å¡ç­‰å¾…CachedThreadPool ä¸å®šé•¿çº¿ç¨‹æ± ï¼Œæ— é™æ‰©å¤§çš„çº¿ç¨‹æ± ï¼Œæ¥å‡ ä¸ªä»»åŠ¡åˆ†é…å‡ ä¸ªçº¿ç¨‹ã€‚SimpleThreadPool å•ä¾‹çº¿ç¨‹ï¼Œåº•å±‚é‡‡ç”¨LinkedBlockQueueå®ç°ï¼Œé™¤äº†æ’åœ¨é˜Ÿåˆ—æœ€å‰é¢çš„çº¿ç¨‹ä»¥å¤–çš„å…¶ä»–çº¿ç¨‹éƒ½è¦ç­‰ç€ã€‚ScheduleThreadPol åœ¨åˆå§‹åŒ–æ—¶å¯ä»¥æŒ‡å®šæ—¶é—´å¸®åŠ©æˆ‘ä»¬å¤„ç†å»¶æ—¶ä»»åŠ¡å’Œå®šæ—¶ä»»åŠ¡ã€‚å®¢æˆ·ç«¯çš„æ€è·¯:1.ä½¿ç”¨HttpClientä»åå°å‘é€è¯·æ±‚è·å–å¾…ä¸‹è½½filesåˆ—è¡¨2.å°†DownloadThreadåˆ†é…ç»™FixedThreadPoolè¿è¡Œè¿™è¾¹ä¸»è¦çœ‹DownloadThread.javaå¦‚ä½•ç¼–å†™ï¼Œä»¥åŠå¦‚ä½•åˆ†é…ç»™fixedThreadPoolDownloadThread.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package com.bim.task;import com.bim.common.FtpUtils;import java.util.List;public class DownLoadThread implements Runnable &#123; List files = null; String ftpPath = null; String baseLocalPath = null; public DownLoadThread(List files,String ftpPath,String baseLocalPath)&#123; this.files = files; this.ftpPath = ftpPath; this.baseLocalPath = baseLocalPath; &#125; // ä¸‹è½½æ–‡ä»¶çš„å…·ä½“ä¸šåŠ¡ // ftpPath ftpåœ°å€ï¼ˆc:/ftpï¼‰ // baseLocalPath ç›®æ ‡åœ°å€ private void downloadFile(String file,String ftpPath,String baseLocalPath) throws Exception&#123; String dllPath = file.toString().replaceAll(\"\\\\\\\\\",\"/\"); int lastIndexOf = dllPath.lastIndexOf(\"/\"); String middlePath = \"/\"; if(ftpPath.length() - 1 &lt;= lastIndexOf)&#123; middlePath = dllPath.substring(ftpPath.length(),lastIndexOf+1); &#125; String fileName = dllPath.substring(lastIndexOf + 1,dllPath.length()); System.out.println(\"filename\" + fileName); System.out.println(\"baseLocalPath\" + baseLocalPath); System.out.println(\"å¼€å§‹ä¸‹è½½:\" + middlePath + fileName + \"åˆ°æœ¬åœ°\" + baseLocalPath); // è°ƒç”¨ftpä¸‹è½½æ–‡ä»¶ FtpUtils.downloadFromFtp(middlePath,fileName,baseLocalPath); System.out.println(middlePath + fileName + \"ä¸‹è½½æˆåŠŸ\"); &#125; @Override public void run() &#123; try&#123; while(!files.isEmpty())&#123; String file = null; synchronized(files)&#123; file = (String) files.get(0); files.remove(0); &#125; downloadFile(file,ftpPath,baseLocalPath); &#125; &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125;&#125;ä¸»ç¨‹åºæ‹¿åˆ°filesåçš„é€»è¾‘ä»£ç éƒ¨åˆ†1234567891011121314151617public class PullFileClient &#123; private static ExecutorService fixedThreadPool = Executors.newFixedThreadPool(10); public static void main(String[] args) throws IOException &#123; Map&lt;String,Object&gt; resultMap = client.sendGet(requestUrl); Object code = resultMap.get(\"code\"); // è·å–æ–‡ä»¶åˆ—è¡¨æ•°æ® List files = (List) resultMap.get(\"data\"); // ftpçš„æ ¹ç›®å½• (c:/ftp) String ftpPath = \"c:/FTP/\"; String baseLocalPath = \"/home/zyh/Documents/tmp4/\"; fixedThreadPool.execute(new DownLoadThread(files,ftpPath,baseLocalPath)); fixedThreadPool.shutdown(); &#125; &#125;","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"FTP","slug":"FTP","permalink":"yihao.ml/tags/FTP/"}]},{"title":"MapReduceçš„Shuffleæœºåˆ¶","slug":"2018-04-22-mapreduce-mapreduceçš„shuffleæœºåˆ¶","date":"2018-04-22T00:00:00.000Z","updated":"2019-11-29T12:20:47.662Z","comments":true,"path":"2018/04/22/2018-04-22-mapreduce-mapreduceçš„shuffleæœºåˆ¶/","link":"","permalink":"yihao.ml/2018/04/22/2018-04-22-mapreduce-mapreduceçš„shuffleæœºåˆ¶/","excerpt":"","text":"åœ¨ç¼–å†™MapReduceï¼Œå¯åŠ¨ä¸»ç¨‹åºä»¥åï¼Œåˆ°åº•maptaskå’Œreducetaskä¹‹é—´æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿæ•°æ®æ˜¯å¦‚ä½•è¿›è¡Œæ’åºçš„ï¼Ÿ1.inputFormat:æˆ‘ä»¬çŸ¥é“mapreduceä¸»ç¨‹åºåˆå§‹åŒ–jobä»¥åä¼šå¯¹è¾“å…¥çš„æ•°æ®è¿›è¡Œåˆ‡ç‰‡è§„åˆ’ï¼Œç”Ÿæˆjob.splitæ–‡ä»¶ï¼ŒinputFormatä¼šè¯»å–job.splitæ–‡ä»¶ï¼Œæ ¹æ®ä¿¡æ¯ä»DHFSä¸­æ‰¾åˆ°è¦è¯»å–çš„æ•°æ®,è°ƒç”¨recordReaderå°†æ•°æ®è¯»æˆä¸€è¡Œ,ä¼ å…¥mapperä¸­,é»˜è®¤çš„ä½¿ç”¨çš„æ˜¯TextInputFormat2.å½“æˆ‘ä»¬åœ¨mapperè°ƒç”¨writeå,outputCollectorä¼šå°†è¾“å‡ºçš„æ•°æ®å†™å…¥ç¯å½¢ç¼“å†²åŒºä¸­3.ç¯å½¢ç¼“å†²å™¨çš„å¤§å°é»˜è®¤ä¸º100Mï¼Œå½“ç¯å½¢ç¼“å†²åŒºçš„å†…å®¹è¾¾åˆ°è‡ªèº«å®¹é‡çš„80%å,è¿›è¡Œæº¢å‡ºæ“ä½œï¼Œç”Ÿæˆå¤šä¸ªæ–‡ä»¶ã€‚æœŸé—´ä¼šç»è¿‡4ã€5ã€6è¿™å‡ ä¸ªæ“ä½œ4.æˆ‘ä»¬å¯ä»¥åœ¨è¯¥ç±»ä¸­å®šä¹‰è¦åˆ†å‡ ä¸ªåŒºï¼Œä¾‹å¦‚hashCode % reduceTask,è¿™æ ·æˆ‘ä»¬å¯ä»¥ä½¿ç”¨job.setNumReduceTaskåŠ¨æ€åˆ’åˆ†åˆ†åŒºå¤§å°5.å¯¹åˆ†åŒºä¸­çš„åºåˆ—è¿›è¡Œæ’åºã€‚åŒæ ·æ’åºçš„æ–¹å¼å¯ä»¥æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åšè°ƒæ•´6.æº¢å‡ºè¿™ä¸ªæ“ä½œæ˜¯ç”±ä¸€ä¸ªå«åšspillerçš„ç»„ä»¶å®Œæˆçš„ï¼Œå½“ç¼“å­˜åŒºæ•°æ®è¾¾åˆ°åˆ¶å®šæ ‡å‡†åè¿›è¡Œæº¢å‡ºåˆ°æ–‡ä»¶æ“ä½œã€‚8.GroupingComparaorç»„ä»¶ï¼Œå®ƒå¯ä»¥å¯¹reducetaskæœ€ç»ˆå½¢æˆçš„æ–‡ä»¶çš„å†…å®¹è¿›è¡Œåˆ†ç»„ã€‚åœ¨WordCountçš„mapperç¨‹åºä¸­ï¼Œè¾“å‡ºwrite(word,1)ç»è¿‡shuffleå¤„ç†åçš„æ•°æ®å°±æ˜¯ä¸€ä¸ªç»è¿‡åˆ†ç»„åçš„æœ‰åºæ•°æ®ã€‚reducetaskçš„reduce(k,values)ä¼šè¯»çš„å°±æ˜¯æ¯ä¸€ç»„çš„æ•°æ®ã€‚GroupingComparaorç»„ä»¶çš„é€»è¾‘ä¼šå°†æ–‡ä»¶å†…å®¹åˆ†æˆä¸‰ä¸ªç»„,ç¬¬ä¸€ç»„&lt;a,1&gt;&lt;a,1&gt;&lt;a,1&gt;ã€‚ç¬¬äºŒç»„&lt;c,1&gt;&lt;c,1&gt;â€¦é‚£ä¹ˆè¿™å°±æ„å‘³ç€,reducetaskç¬¬ä¸€æ¬¡reduceçš„kä¸ºa,valuesä¸º1,1,1;ç¬¬äºŒæ¬¡reduceçš„kä¸ºc,valuesä¸º1,1ã€‚9.å°†åˆ†ç»„åçš„æ•°æ®æŒ‰ç»„åˆ†æ‰¹æ¬¡å‘ç»™reducetaskçš„reduceæ–¹æ³•ã€‚10.writeä»¥åOutputFormatç»„ä»¶ä¼šè°ƒç”¨RecordWriterï¼Œå°†å†…å®¹ä¸Šä¼ åˆ°hdfsä¸­ã€‚æœ¬äººæ°´å¹³æœ‰é™ï¼Œä¸å½“ä¹‹å¤„å¸Œæœ›å„ä½é«˜æ‰‹æŒ‡æ­£ã€‚å¦å¤–æ’å…¥æ˜¯åœ¨ç”»å›¾ä¸­ç”»çš„ï¼Œçœ‹èµ·æ¥ä¸ç²¾è‡´è¯·è§è°…ã€‚http://www.zonegood.com","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"MapReduce","slug":"MapReduce","permalink":"yihao.ml/tags/MapReduce/"}]},{"title":"MapReduceåˆ‡ç‰‡è§„åˆ’æºç å‰–æ","slug":"2018-04-22-mapreduce-MapReduceåˆ‡ç‰‡è§„åˆ’æºç åˆ¨æ","date":"2018-04-22T00:00:00.000Z","updated":"2019-11-29T12:20:47.662Z","comments":true,"path":"2018/04/22/2018-04-22-mapreduce-MapReduceåˆ‡ç‰‡è§„åˆ’æºç åˆ¨æ/","link":"","permalink":"yihao.ml/2018/04/22/2018-04-22-mapreduce-MapReduceåˆ‡ç‰‡è§„åˆ’æºç åˆ¨æ/","excerpt":"","text":"åˆ‡ç‰‡è§„åˆ’æœ€ç»ˆä¼šå½¢æˆä¸€ä¸ªæ–‡ä»¶job.splitã€‚é‡Œé¢å­˜æ”¾è¿™åˆ‡ç‰‡ä¿¡æ¯ï¼Œé¦–å…ˆè¦æ˜ç¡®ä¸€ç‚¹æ˜¯maptaskçš„æ•°é‡äºåˆ‡ç‰‡çš„æ•°é‡æœ‰ç›´æ¥å¯¹åº”å…³ç³»ã€‚mrappmasteråœ¨å¯åŠ¨maptaskæ—¶ï¼Œä¼šå»job.splitæ–‡ä»¶ä¸­æ‰¾åˆ‡ç‰‡ä¿¡æ¯ï¼Œæœ‰å‡ ä¸ªåˆ‡ç‰‡å°±å¯åŠ¨å‡ ä¸ªmaptaskï¼Œæ¯ä¸ªåˆ‡ç‰‡åˆ†é…ä¸€ä¸ªmaptaskå¹¶è¡Œå®ä¾‹ã€‚æˆ‘ä»¬é€šè¿‡è¿½æºç ï¼Œæ‰¾åˆ°äº†è¿™ä¸ªæ–‡ä»¶ã€‚MapReduceæ¡†æ¶ä¼šæŠŠå®ƒå­˜åœ¨æˆ‘ä»¬æœ¬æœºçš„æŸä¸ªè·¯å¾„ã€‚å®ƒæ˜¯MapReduceå¯¹äºå¾…å¤„ç†æ•°æ®çš„ä¸€ä¸ªæè¿°ä¿¡æ¯æ–‡ä»¶ã€‚å…³äºåˆ‡ç‰‡éœ€è¦æ³¨æ„çš„å‡ ç‚¹:æ–‡ä»¶æ˜¯æ€ä¹ˆè¿›è¡Œåˆ‡åˆ†çš„ï¼Ÿåˆ‡ç‰‡çš„å¤§å°æ˜¯æ€ä¹ˆæ§åˆ¶çš„ï¼Ÿ æºç è¿½è¸ªæ ¹æ®æºç è¿½è¸ªï¼Œå‘ç°åˆ‡ç‰‡çš„åˆ’åˆ†æ˜¯åœ¨FileInputFormatçš„getSplits()æ–¹æ³•ä¸­å®Œæˆçš„ã€‚getSplitsçš„å¤§è‡´ä¸šåŠ¡é€»è¾‘å¯åˆ†ä¸ºä¸‹åˆ—å‡ ä¸ªé˜¶æ®µæ ¹æ®é…ç½®æ–‡ä»¶æ‹¿åˆ°åˆ‡ç‰‡å¤§å°ï¼Œæºç Math.max(minSize, Math.min(maxSize, blockSize));(å¦‚æœæˆ‘ä»¬æ²¡æœ‰è®¾ç½®è¿‡mapreduce.input.fileinputformat.split.minsizeï¼Œmapreduce.input.fileinputformat.split.maxsize,é‚£ä¹ˆé»˜è®¤çš„åˆ‡ç‰‡å¤§å°ä¸º128Mï¼ŒåŠä¸ºhdfsä¸­blockå—å¤§å°)æ ¹æ®ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œè·å–æ–‡ä»¶è§„åˆ’çš„ä¸Šä¼ ç›®å½•ã€‚ï¼ˆhdfs-&gt; hdfs://â€¦/.staging/jobidæˆ–file-&gt;file://â€¦/.staging/jobidï¼‰æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„hdfsç›®å½•æ‰¾åˆ°å¯¹åº”çš„æ‰€æœ‰æ–‡ä»¶éå†æ‰€æœ‰æ–‡ä»¶ï¼Œæ‹¿åˆ°æ–‡ä»¶çš„å…ƒæ•°æ®ï¼Œå¯¹æ¯ä¸ªæ–‡ä»¶è¿›è¡Œåˆ‡ç‰‡è§„åˆ’è§„åˆ’çš„ä¸€ä¸ªç­–ç•¥ï¼šæ ¹æ®æ‹¿åˆ°çš„åˆ‡ç‰‡å¤§å°æ¥åˆ‡æ¯ä¸ªæ–‡ä»¶,å‡å¦‚æ–‡ä»¶å¤§å°ä¸º300M,åˆ‡ç‰‡å¤§å°ä¸º128M,é‚£ä¹ˆèµ°å®Œå¾ªç¯åæ–‡ä»¶ä¼šè¢«åˆ†ä¸º3å—(0-128,128-256,256-300)å°†åˆ‡ç‰‡å°è£…ä¸ºjob.splitç”Ÿæˆå…¶ä»–ä¿¡æ¯,æ¯”å¦‚job.xml(æ‰€æœ‰çš„å‚æ•°ä¿¡æ¯)ã€‚å°†ç”Ÿæˆçš„æ‰€æœ‰æ–‡ä»¶ä»¥æµçš„å½¢å¼å†™åˆ°æŒ‡å®šä¸Šä¼ ç›®å½•ï¼Œä¹Ÿå°±æ˜¯hdfs://â€¦/.staging/jobidä¸€æ­¥ä¸€æ­¥æ–­ç‚¹è°ƒè¯•,é€šè¿‡æœ¬åœ°è¿è¡ŒMapReduceç¨‹åº,è¿›å…¥debugã€‚å…ˆåœ¨job.waitForCompletion(true);æ‰“æ–­ç‚¹ã€‚å‘ç°ä¼šè¿›å…¥submitter.submitJobInternal(),è·³è¿›å»å¯ä»¥çœ‹åˆ°æ‹¿åˆ°äº†jobStagingArea,åç»­æ‹¿åˆ°äº†jobId,æœ€åæ‹¼æˆäº†submitJobDirã€‚è¿™ä¸ªç›®å½•å°±æ˜¯ä¸Šé¢æåˆ°çš„job.splitå­˜æ”¾çš„ç›®å½•ã€‚æ‹¿åˆ°submitJobDirä»¥åï¼ŒMapReduceå¼€å§‹è°ƒç”¨this.writeSplits(job, submitJobDir)å¯¹æ–‡ä»¶è¿›è¡Œé€»è¾‘åˆ‡åˆ†ï¼Œå½¢æˆjob.splitæ–‡ä»¶(åç»­è¯¦ç»†è§£æé‡Œé¢çš„å†…éƒ¨è¯¦æƒ…)åç»­è·å–é…ç½®ä¿¡æ¯ã€‚å½¢æˆjob.xmlæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰äº†hadoopä¸­å„ç§å„æ ·çš„é…ç½®ä¿¡æ¯æœ€åå°†job.split,job.xml,å†™åˆ°å¯¹åº”çš„submitJobDirç›®å½•ä¸‹ã€‚ æ·±å…¥writeSplitsé€»è¾‘åœ¨this.writeSplites()æˆ‘ä»¬å¦‚ä½•è·³åˆ°å…·ä½“æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ctrl+å·¦é”®ç‚¹è¿›å–ä»¥åä¼šå‘ç°æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»InputFormatã€‚æ˜¯è¿™æ ·å¦‚æœä½ åœ¨åˆå§‹åŒ–jobæ˜¯æ²¡æœ‰æŒ‡å®šç”¨å“ªä¸ªinputFormat,é‚£ä¹ˆmapreduceæ¡†æ¶é»˜è®¤ä¼šä½¿ç”¨TextInputFormatä½¿ç”¨å¿«æ·é”®ctrl+shift+Tæœç´¢TextInputFormat,æˆ‘ä»¬ä¼šå‘ç°æ‰¾ä¸åˆ°getSplitsæ–¹æ³•ï¼Œè¿™æ˜¯å› ä¸ºæ–¹æ³•åœ¨çˆ¶ç±»é‡Œé¢ï¼Œè¿›å»çˆ¶ç±»FileInputFormatä¸­å°±å¯ä»¥æ‰¾åˆ°äº†ï¼Œåœ¨ç¬¬ä¸€è¡Œæ‰“æ–­ç‚¹è¿è¡Œå°±å¯ä»¥è·³è¿›å»äº†ã€‚InputFormatçš„ç±»ç»“æ„å›¾æ¥çœ‹çœ‹getSplitsæ–¹æ³•çš„å…·ä½“é€»è¾‘ï¼Œæˆ‘ç›´æ¥æŠŠæºç ç²˜è¿‡æ¥äº†,æˆ‘åœ¨å…³é”®çš„åœ°æ–¹åŠ äº†æ³¨é‡Š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162public List&lt;InputSplit&gt; getSplits(JobContext job) throws IOException &#123; StopWatch sw = (new StopWatch()).start(); // è°ƒèŠ‚åˆ‡ç‰‡å¤§å°çš„å‚æ•°1 long minSize = Math.max(this.getFormatMinSplitSize(), getMinSplitSize(job)); // è°ƒèŠ‚åˆ‡ç‰‡å¤§å°çš„å‚æ•°1 long maxSize = getMaxSplitSize(job); ArrayList splits = new ArrayList(); // æ‹¿åˆ°å¾…å¤„ç†çš„æ–‡ä»¶ List files = this.listStatus(job); Iterator i$ = files.iterator(); while(true) &#123; while(true) &#123; // å¾ªç¯å¤„ç†æ¯ä¸ªæ–‡ä»¶ while(i$.hasNext()) &#123; FileStatus file = (FileStatus)i$.next(); Path path = file.getPath(); long length = file.getLen(); if(length != 0L) &#123; BlockLocation[] blkLocations; if(file instanceof LocatedFileStatus) &#123; blkLocations = ((LocatedFileStatus)file).getBlockLocations(); &#125; else &#123; FileSystem blockSize = path.getFileSystem(job.getConfiguration()); blkLocations = blockSize.getFileBlockLocations(file, 0L, length); &#125; if(this.isSplitable(job, path)) &#123; long blockSize1 = file.getBlockSize(); // splitSizeæ˜¯ä¸€ä¸ªé‡è¦çš„å‚æ•°ï¼Œå®ƒæ ¹æ®minSizeå’ŒmaxSizeè®¡ç®—å‡ºåˆ‡ç‰‡çš„å¤§å°ï¼ˆç‚¹è¿›æŸ¥çœ‹è®¡ç®—æ–¹å¼ï¼‰ long splitSize = this.computeSplitSize(blockSize1, minSize, maxSize); long bytesRemaining; int blkIndex; // åˆ°åº•åˆ‡ä¸åˆ‡å°±çœ‹è¿™è¡Œä»£ç äº†ï¼Œè¿™è¾¹çš„è®¡ç®—æ–¹å¼æ˜¯åˆ¤æ–­å¦‚æœæ–‡ä»¶çš„å¤§å°æ¯”splitSizeå¤§çš„è¯å°±å¯¹æ–‡ä»¶è¿›è¡Œåˆ‡åˆ†ï¼Œå¦åˆ™å°±ä¸è¦åœ¨åˆ‡äº†ï¼Œå› ä¸ºå®ƒå·²ç»å¾ˆå°äº†ã€‚ for(bytesRemaining = length; (double)bytesRemaining / (double)splitSize &gt; 1.1D; bytesRemaining -= splitSize) &#123; blkIndex = this.getBlockIndex(blkLocations, length - bytesRemaining); splits.add(this.makeSplit(path, length - bytesRemaining, splitSize, blkLocations[blkIndex].getHosts(), blkLocations[blkIndex].getCachedHosts())); &#125; // å¦‚æœè¿™ä¸ªæ–‡ä»¶å·²ç»å¾ˆå°äº†ï¼Œå°±ä¸éœ€è¦åœ¨åˆ‡äº†ç›´æ¥æ”¾åˆ°splitsä¸­ã€‚ if(bytesRemaining != 0L) &#123; blkIndex = this.getBlockIndex(blkLocations, length - bytesRemaining); splits.add(this.makeSplit(path, length - bytesRemaining, bytesRemaining, blkLocations[blkIndex].getHosts(), blkLocations[blkIndex].getCachedHosts())); &#125; &#125; else &#123; splits.add(this.makeSplit(path, 0L, length, blkLocations[0].getHosts(), blkLocations[0].getCachedHosts())); &#125; &#125; else &#123; splits.add(this.makeSplit(path, 0L, length, new String[0])); &#125; &#125; job.getConfiguration().setLong(\"mapreduce.input.fileinputformat.numinputfiles\", (long)files.size()); sw.stop(); if(LOG.isDebugEnabled()) &#123; LOG.debug(\"Total # of splits generated by getSplits: \" + splits.size() + \", TimeTaken: \" + sw.now(TimeUnit.MILLISECONDS)); &#125; return splits; &#125; &#125;&#125; åˆ‡ç‰‡çš„è®¡ç®—æ–¹å¼é¦–å…ˆä¼šè®¡ç®—å‡ºminSizeï¼Œé»˜è®¤1long minSize = Math.max(this.getFormatMinSplitSize(), getMinSplitSize(job));1234567protected long getFormatMinSplitSize() &#123; return 1L;&#125;public static long getMinSplitSize(JobContext job) &#123; return job.getConfiguration().getLong(\"mapreduce.input.fileinputformat.split.minsize\", 1L);&#125;è®¡ç®—maxSizeï¼Œé»˜è®¤128Mlong maxSize = getMaxSplitSize(job);123public static long getMaxSplitSize(JobContext context) &#123; return context.getConfiguration().getLong(\"mapreduce.input.fileinputformat.split.maxsize\", 9223372036854775807L); &#125;æœ€åè®¡ç®—splitSizelong splitSize = this.computeSplitSize(blockSize1, minSize, maxSize);123 protected long computeSplitSize(long blockSize, long minSize, long maxSize) &#123; return Math.max(minSize, Math.min(maxSize, blockSize));&#125;åœ¨åˆ‡æ–‡ä»¶æ˜¯é‡‡ç”¨è¿™æ ·çš„åˆ¤æ–­æ–¹å¼(double)bytesRemaining / (double)splitSize &gt; 1.1Dåªè¦æ–‡ä»¶çš„å¤§å°/splitSize &gt; 1.1å€æ—¶å°±ä¼šå¯¹æ–‡ä»¶è¿›è¡Œåˆ‡åˆ† é—®é¢˜æ€»ç»“å½’ç»“ä¸€ç‚¹å°±æ˜¯mapreduceä¸»ç¨‹åºè¿è¡Œåï¼Œä¼šå°†æ¯ä¸ªæ–‡ä»¶è¿›è¡Œé€»è¾‘åˆ‡åˆ†ï¼Œè¿™é‡Œçš„é€»è¾‘åˆ‡åˆ†çš„æ„æ€å°±æ˜¯è¯´å¹¶éçœŸçš„å¯¹æ–‡ä»¶è¿›è¡Œåˆ‡åˆ†ï¼Œåªæ˜¯ç”Ÿæˆä¸€äº›æè¿°ä¿¡æ¯,å­˜åˆ°job.splitæ–‡ä»¶ä¸­ã€‚æœ‰å‡ ä¸ªåˆ‡ç‰‡å°±ä¼šç”Ÿæˆå‡ ä¸ªmaptaskã€‚maptaskæ•°é‡å’Œåˆ‡ç‰‡çš„æ•°é‡ä¸€ä¸€å¯¹åº”ï¼Œå› ä¸ºyarnRunnerä¼šæŠŠjob.splitå‘ç»™yarn,yarnæ”¶åˆ°è¿™ä¸ªæ–‡ä»¶ä»¥åä¼šè¯»å–é‡Œé¢çš„åˆ‡ç‰‡ä¿¡æ¯ï¼Œç„¶ååˆå§‹åŒ–maptaskã€‚æ–‡ä»¶åˆ‡åˆ†çš„æ–¹æ³•æ˜¯InputFormatç±»æä¾›çš„ï¼Œåœ¨getSplitsæ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°(double)bytesRemaining / (double)splitSize &gt; 1.1Dï¼Œåªè¦æ–‡ä»¶çš„å¤§å°/splitSize &gt; 1.1å€æ—¶å°±ä¼šå¯¹æ–‡ä»¶è¿›è¡Œåˆ‡åˆ†,splitSizeé»˜è®¤æ˜¯128Mã€‚é€šè¿‡æŸ¥çœ‹æºç æˆ‘ä»¬å¯ä»¥çŸ¥é“é€šè¿‡ä¸¤ä¸ªå‚æ•°mapreduce.input.fileinputformat.split.minsizeå’Œmapreduce.input.fileinputformat.split.maxsizeå°±å¯ä»¥è°ƒèŠ‚ã€‚äº†è§£äº†åˆ‡ç‰‡åï¼Œæˆ‘ä»¬åˆ°åº•åˆ‡å¤šå¤§ï¼Ÿæ˜¯æ¯”HDFS blockå¤§å¥½è¿˜æ˜¯æ¯”ä»–å°å¥½ï¼Ÿä¸ºä»€ä¹ˆè¦å¯¹æ–‡ä»¶è¿›è¡Œåˆ‡åˆ†ï¼Ÿè¦æ˜ç™½åˆ‡ç‰‡è§„åˆ’çš„å…¶ä¸­ä¸€ä¸ªé‡è¦çš„åŸå› å°±æ˜¯mapreduceæœŸæœ›ï¼Œåœ¨è¿è¡Œæ¯ä¸ªmaptaskæ—¶ï¼Œä»»åŠ¡æ‰€éœ€è¦çš„è¾“å…¥æ•°æ®æ°å¥½èƒ½åœ¨æœ¬åœ°ï¼Œè¿™æ ·å°±èƒ½ä¿è¯æ¯æ¬¡maptaskäºhdfsçš„æ•°æ®äº¤äº’æ—¶ï¼Œç›´æ¥å¯ä»¥ä»æœ¬åœ°æ‹¿åˆ°æ•°æ®ã€‚ç†æƒ³çŠ¶æ€ï¼ˆåˆ‡ç‰‡çš„å¤§å°=blocksize,å‡å°‘maptaskäºhdfsçš„è·¨ç½‘ç»œæ•°æ®ä¼ è¾“ï¼‰ã€‚æœ¬äººæ°´å¹³æœ‰é™ï¼Œä¸å½“ä¹‹å¤„å¸Œæœ›å„ä½é«˜æ‰‹æŒ‡æ­£ã€‚é‚®ç®±cnnqjban521@gmail.comã€‚","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"MapReduce","slug":"MapReduce","permalink":"yihao.ml/tags/MapReduce/"}]},{"title":"åˆè¯†MapReduce","slug":"2018-04-22-mapreduce-åˆè¯†mapreduce","date":"2018-04-22T00:00:00.000Z","updated":"2019-11-29T12:20:47.663Z","comments":true,"path":"2018/04/22/2018-04-22-mapreduce-åˆè¯†mapreduce/","link":"","permalink":"yihao.ml/2018/04/22/2018-04-22-mapreduce-åˆè¯†mapreduce/","excerpt":"","text":"maprediceå…¶å®å°±æ˜¯åˆ†è€Œæ²»ä¹‹çš„ä¸€ç§æ€æƒ³ï¼Œhadoopçš„mapreduceæ˜¯åº”å¯¹å¤§æ•°æ®äº§ç”Ÿçš„ä¸€ç§è®¡ç®—æ–¹å¼ã€‚åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼Œmaptaskå’Œreducetaskã€‚å¤šä¸ªmaptaskå¹¶å‘æ‰§è¡Œè¿ç®—è¾“å…¥æ•°æ®ï¼Œæ¯ä¸ªmaptaskå„å¸å…¶èŒï¼Œå„è‡ªä¸ºæ”¿ã€‚å¤šä¸ªreducetaskå¹¶å‘æ‰§è¡Œï¼Œä½†å®ƒä¾èµ–äºmaptaskï¼Œå®ƒè¾“å…¥å‚æ•°æ˜¯maptaskçš„è¾“å‡ºå‚æ•°ã€‚ mapreduceæ¡†æ¶ä¸­è§’è‰²æ ¸å¿ƒè§’è‰²æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«ä¸ºmaptask,reducetask,mrappmaster,ä»–ä»¬éƒ½æ˜¯åœ¨è¿›è¡Œè¿ç®—è¿‡ç¨‹ä¸­ç”Ÿæˆçš„è¿›ç¨‹ã€‚mrappmaster åè°ƒmaptaskå’Œreducetaskçš„å·¥ä½œmaptask å¯¹æ•°æ®è¿›è¡Œç¬¬ä¸€é˜¶æ®µè¿ç®—reducetask å¯¹maptaskè¾“å‡ºçš„æ•°æ®è¿›è¡Œç¬¬äºŒé˜¶æ®µè¿ç®— è¿è¡Œæµç¨‹å½“mapreduceä¸»ç¨‹åºå¯åŠ¨åä¼šç”ŸæˆyarnRunner Proxyä»£ç†æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„æ–‡ä»¶ã€ç›¸å…³blocksizeé…ç½®ï¼Œç”Ÿæˆåˆ‡ç‰‡ï¼Œå°è£…æˆjob.splitï¼Œé™¤æ­¤ä¹‹å¤–ç”Ÿæˆjob.xmlå‚æ•°ï¼Œwordcount.jarç­‰ä¿¡æ¯å°†ç”Ÿæˆçš„æ•°æ®ä¸€åŒå‘é€ç»™yarnyarnæ”¶åˆ°ä¿¡æ¯ä»¥åï¼Œä¼šåœ¨resourcemanagerç»´æŠ¤çš„é˜Ÿåˆ—ä¸­åˆå§‹åŒ–tasknamenodeå‘ç°é˜Ÿåˆ—ä¸­çš„taskï¼Œä¼šåœ¨è‡ªå·±å†…å­˜ä¸­ç”Ÿæˆmrappmasterè¿›ç¨‹ï¼Œmrappmasterçš„ä¸»è¦èŒè´£æ˜¯åè°ƒå¥½maptaskåŠreducetaskçš„è¿è¡Œã€‚mrappmasterä¼šæ ¹æ®job.splitæ–‡ä»¶ä¸­çš„åˆ‡ç‰‡ä¿¡æ¯å‘resourcemanagerç”³è¯·ç”ŸæˆæŒ‡å®šä¸ªæ•°çš„maptaskä»»åŠ¡ã€‚maptaskå¯åŠ¨ä»¥åä¼šè°ƒç”¨InputFormatç»„ä»¶ï¼Œæ ¹æ®åˆ‡ç‰‡çš„æè¿°ä¿¡æ¯ï¼Œåˆ°hdfsä¸Šä¸‹è½½å¯¹åº”blockå—ï¼Œå°†å—çš„æ•°æ®ä½œä¸ºæ•°æ®æºè¿›è¡Œmapè¿ç®—ã€‚å¾…maptaskç¨‹åºè¿è¡Œå®Œæˆä»¥åï¼Œmrappmasterè¿›ç¨‹å‘resourcemanagerç”³è¯·å¯åŠ¨reducetaskyarnæ”¶åˆ°ä¿¡æ¯ä»¥åï¼Œä¼šåœ¨resourcemanagerç»´æŠ¤çš„é˜Ÿåˆ—ä¸­åˆå§‹åŒ–tasknodemanagerå‘ç°é˜Ÿåˆ—ä¸­çš„taskï¼Œä¸ºreducetaskåˆ†é…cpuä»¥åŠå†…å­˜ï¼Œè¿è¡Œreducetaskã€‚reducetaskå¯¹maptaskç”Ÿæˆçš„æ•°æ®è¿›è¡Œæ±‡æ€»å¤„ç†ï¼Œå¹¶å°†ç»“æœä¸Šä¼ åˆ°hdfsç›®å½•ä¸­ã€‚è¦æ³¨æ„çš„æ˜¯ç”Ÿæˆmaptaskã€resourcetaskçš„èµ„æºåˆ†é…è¿™ä¸ªè¿‡ç¨‹éœ€è¦resourcemanagerç»Ÿä¸€ç®¡ç†.","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"MapReduce","slug":"MapReduce","permalink":"yihao.ml/tags/MapReduce/"}]},{"title":"æ‰‹å†™åŸºäºJavaåå°„çš„RPCæ¡†æ¶","slug":"2018-04-19-rpc-æ‰‹å†™åŸºäºJavaåå°„çš„RPCæ¡†æ¶","date":"2018-04-19T00:00:00.000Z","updated":"2019-11-29T12:20:47.661Z","comments":true,"path":"2018/04/19/2018-04-19-rpc-æ‰‹å†™åŸºäºJavaåå°„çš„RPCæ¡†æ¶/","link":"","permalink":"yihao.ml/2018/04/19/2018-04-19-rpc-æ‰‹å†™åŸºäºJavaåå°„çš„RPCæ¡†æ¶/","excerpt":"","text":"ç›®å½•è¯´æ˜é¡¹ç›®å·²ç»ä¼ è‡³githubä»“åº“ã€‚rpc-client : æ¡†æ¶ä¸­å®¢æˆ·ç«¯æ¡†æ¶æ ¸å¿ƒä»£ç rpc-server : æ¡†æ¶ä¸­æœåŠ¡ç«¯æ¡†æ¶æ ¸å¿ƒä»£ç rpc-common : æ¡†æ¶å·¥å…·rpc-registry : æ¡†æ¶ä¸­ä¸¤ä¸ªæ ¸å¿ƒä¸šåŠ¡ç±»åŠŸèƒ½æ³¨å†ŒæœåŠ¡ - ServiceDiscoveryå‘ç°æœåŠ¡ - ServiceRegistryrpc-sample-app : å®¢æˆ·ç«¯ç¨‹åº (è°ƒç”¨è¢«å‘å¸ƒçš„æœåŠ¡,æ‰§è¡Œå¯¹åº”ä¸šåŠ¡ä»£ç )rpc-sample-server : æœåŠ¡åŒºç¨‹åº (ç”¨æ¥å‘å¸ƒRPCæœåŠ¡) æ¡†æ¶ç»“æ„é¢„å¤‡çŸ¥è¯†æ¢³ç†ã€‚é‡‡ç”¨Javaè¯­è¨€ç¼–å†™ï¼Œéœ€è¦æŒæ¡çº¿ç¨‹ã€åŠ¨æ€ä»£ç†ã€åå°„ã€Nettyã€æ³¨è§£ã€Springç­‰çŸ¥è¯†ã€‚RPCè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œæ˜¯ä¸€ç§å¸¸è§çš„åº•å±‚é€šä¿¡æ¡†æ¶ï¼Œæœ‰æ•ˆçš„ç†è§£å®ƒå¯¹äºåç»­å­¦ä¹ å…¶ä»–å¼€æºæ¡†æ¶æœ‰å¾ˆå¤§å¸®åŠ©ã€‚ä¸‹é¢æ¢³ç†è®¾è®¡æ€è·¯ä¸å…·ä½“ä»£ç é€»è¾‘ã€‚è§æ•´ä½“æ¡†æ¶å›¾ï¼šæ³¨:å®çº¿ä»¥ä¸Šéƒ¨åˆ†æ˜¯ç”¨æˆ·éœ€è¦å®Œæˆçš„æ“ä½œï¼Œä¸€ä¸‹éƒ¨åˆ†åˆ™æ˜¯éœ€è¦å°è£…åæ‰“åŒ…æˆjaråŒ…ï¼Œä¾›ç”¨æˆ·å¯¼å…¥çš„æ¡†æ¶å†…éƒ¨æ ¸å¿ƒä»£ç ã€‚ ç”¨æˆ·éƒ¨åˆ†ç”¨æˆ·éƒ¨åˆ†ä¹Ÿåˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ç”¨æ¥å‘å¸ƒæƒ³è¦å‘å¸ƒçš„æœåŠ¡ï¼Œå®¢æˆ·ç«¯é€šè¿‡æœ¬æ¡†æ¶æ¥è°ƒç”¨è¢«å‘å¸ƒçš„æœåŠ¡ã€‚å‚è€ƒæ–°æµªçš„motanä»¥åŠé˜¿é‡Œçš„dubboï¼Œæƒ³è¦å¯åŠ¨RPCæ¡†æ¶ï¼Œé¦–å…ˆéœ€è¦åœ¨springçš„é…ç½®æ–‡ä»¶application.xmlä¸­é…ç½®æ¡†æ¶ç±»æ‰è¡Œï¼Œæˆ‘ä»¬è¿™è¾¹ä¹ŸåŒæ ·æ˜¯è¿™ä¸ªæ€è·¯ã€‚ 1.æœåŠ¡ç«¯æœåŠ¡ç«¯åªéœ€è¦å®Œæˆä»¥ä¸‹ä¸¤æ­¥æ“ä½œå°±å¯ä»¥å®Œæˆä¸šåŠ¡çš„å‘å¸ƒäº†ã€‚application.xmlé…ç½®æ¡†æ¶ServiceRegistryä»¥åŠRpcServeråœ¨æƒ³è¦å‘å¸ƒæˆæœåŠ¡çš„å…·ä½“å®ç°ä¸šåŠ¡ç±»ä¸Šæ·»åŠ @RpcService(interface.class)æ³¨:ä¸¤ä¸ªç±»çš„ç»†èŠ‚é—®é¢˜è§æ¡†æ¶æ ¸å¿ƒä»£ç ä¸šåŠ¡æ¢³ç†ã€‚ 2.å®¢æˆ·ç«¯å®¢æˆ·ç«¯åªéœ€è¦å®Œæˆä»¥ä¸‹ä¸¤æ­¥æ“ä½œå°±å¯ä»¥å®Œæˆè¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚application.xmlé…ç½®æ¡†æ¶ServiceDiscoveryä»¥åŠRpcProxyåœ¨è°ƒç”¨æ—¶ä½¿ç”¨@autowriedæ„é€ RpcProxyå¯¹è±¡ã€‚é€šè¿‡RpcProxyæ¥è·å–å…·ä½“è°ƒç”¨çš„ä¸šåŠ¡ç±»æ¥å£ä»£ç†å¯¹è±¡ï¼Œé€šè¿‡è¯¥å¯¹è±¡è°ƒç”¨å…·ä½“æ–¹æ³•å³å¯ã€‚æ³¨:ä¸¤ä¸ªç±»çš„ç»†èŠ‚é—®é¢˜è§æ¡†æ¶æ ¸å¿ƒä»£ç ä¸šåŠ¡æ¢³ç†ã€‚å¯¹äºRPCæ¡†æ¶çš„ä½¿ç”¨è€…æ¥è¯´,ä¸ç®¡æ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡ç«¯ï¼Œåº•å±‚ç»†èŠ‚éƒ½æ˜¯é€æ˜çš„ã€‚ æ¡†æ¶æ ¸å¿ƒä»£ç ä¸šåŠ¡æ¢³ç†æœåŠ¡ç«¯æ¡†æ¶çš„æ ¸å¿ƒä¸šåŠ¡åŒ…å«ä¸¤ä¸ªç±»ï¼ŒServiceRegistryå’ŒRpcServera. RpcServer.javaåœ¨Springå®¹å™¨å¯åŠ¨åä¼šæ„é€ RpcServerï¼Œæ‰«æ@RpcService(interface.class)æ³¨è§£,æ‹¿åˆ°å…·ä½“ä¸šåŠ¡ç±»çš„æ¥å£ä»¥åŠæ¥å£å®ç°ç±»ï¼Œå°†ä¿¡æ¯å·²k,vå½¢å¼å°è£…åˆ°æŒ‡å®šçš„HashMapä¸­ã€‚åœ¨æœåŠ¡ç«¯å¯åŠ¨ä¸€ä¸ªnettyä¸»ç¨‹åºï¼Œåœ¨nettyä¸­æŒ‡å®šå…·ä½“çš„Handlerä¸šåŠ¡çº¿å­—èŠ‚æµçš„ååºåˆ—åŒ–å¯¹è±¡çš„åºåˆ—åŒ–è°ƒç”¨ServiceRegistryçš„registry()b. ServiceRegistry.javaä¸ºRpcServeræä¾›registryæ–¹æ³•,å¯åŠ¨zookeeperä¸»ç¨‹åºï¼Œå°†å¯åŠ¨å¥½çš„nettyçš„ip:portå­˜åˆ°zookeeperèŠ‚ç‚¹ä¸­(åç»­å¯ä»¥æ‹“å±•zookeeperèŠ‚ç‚¹ï¼Œåº”å¯¹ä¸åŒçš„ä¸šåŠ¡åœºæ™¯)å®¢æˆ·ç«¯æ¡†æ¶çš„æ ¸å¿ƒä¸šåŠ¡åŒ…å«ä¸¤ä¸ªç±»ï¼ŒServiceDiscoveryå’ŒRpcProxya. RpcProxy.javaåœ¨Springå®¹å™¨å¯åŠ¨åä¼šæ„é€ RpcProxyç”¨æˆ·æ‹¿åˆ°è¯¥å¯¹è±¡è°ƒç”¨interfaceProxy = create(interface.class)å°±å¯ä»¥æ‹¿åˆ°å¯¹åº”çš„æ¥å£ä»£ç†å¯¹è±¡ç”¨æˆ·ä½¿ç”¨interfaceProxyè°ƒç”¨å…·ä½“ä¸šåŠ¡æ—¶ï¼Œä¼šè§¦å‘JDKåŠ¨æ€ä»£ç†ä¸­çš„invokeæ–¹æ³•,å°†æ–¹æ³•åŠæ–¹æ³•å‚æ•°è¿›è¡Œå°è£…è°ƒç”¨ServiceDiscoveryçš„discoveryy()å¯åŠ¨nettyå®¢æˆ·ç«¯ç¨‹åºï¼Œæ‰§è¡Œnettyä¸­æŒ‡å®šå…·ä½“çš„Handlerä¸šåŠ¡çº¿å¯¹è±¡çš„åºåˆ—åŒ– outputStreamå­—èŠ‚æµçš„ååºåˆ—åŒ– inputStreamè¿”å›æ•°æ®ç»“æœ inputStreamb. ServiceDiscovery.javaServiceDiscoveryä¼šä»å¯åŠ¨çš„zookeeperä¸­æ‰¾åˆ°æœåŠ¡å™¨çš„åœ°å€(netty server ip:port)è¿™è¾¹å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä½¿ç”¨çš„æ˜¯googleçš„protobufæ¡†æ¶,å®ƒæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥è·¨å¹³å°ã€‚æƒ³è¦æ·±å…¥è¿™è¾¹æœ‰é“¾æ¥:https://developers.google.com/protocol-buffers/æ¡†æ¶è¿˜æœ‰å¾ˆå¤šåœ°æ–¹å¯ä»¥ä¼˜åŒ–ï¼Œæ¯”å¦‚å¯ä»¥å¢åŠ zookeeperçš„å­˜æ”¾æ ¹èŠ‚ç‚¹ï¼Œæ¥è¿›è¡Œæ‹“å±•ä¸šåŠ¡ï¼Œé€‚åº”ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼›æ¯”å¦‚å®¢æˆ·ç«¯ä¸­nettyå¹¶æ²¡è¿›è¡Œå°è£…ï¼Œåº”è¯¥æ˜¯spring webå®¹å™¨å¯åŠ¨æ—¶è‡ªåŠ¨è£…è½½nettyå®¢æˆ·ç«¯ã€‚å†æœ‰è¿™ä¸ªæ¡†æ¶ä¸èƒ½æ»¡è¶³åŒä¸€æ¥å£å­˜åœ¨å¤šä¸ªå®ç°çš„caseï¼Œé‚£ä¹ˆæƒ³è¦æ»¡è¶³ï¼Œåªéœ€è¦ä¸º@RpcServeræ³¨è§£æ·»åŠ é¢å¤–å±æ€§å³å¯ã€‚","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"RPC","slug":"RPC","permalink":"yihao.ml/tags/RPC/"}]},{"title":"éƒ¨ç½²zookeeperé›†ç¾¤","slug":"2018-04-15-hadoop-zookeeperé›†ç¾¤æ­å»ºåŠå…¶ä½¿ç”¨","date":"2018-04-15T00:00:00.000Z","updated":"2019-11-29T12:20:47.661Z","comments":true,"path":"2018/04/15/2018-04-15-hadoop-zookeeperé›†ç¾¤æ­å»ºåŠå…¶ä½¿ç”¨/","link":"","permalink":"yihao.ml/2018/04/15/2018-04-15-hadoop-zookeeperé›†ç¾¤æ­å»ºåŠå…¶ä½¿ç”¨/","excerpt":"","text":"zookeeperæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼åè°ƒæœåŠ¡æ¡†æ¶ï¼Œæœ¬æ¬¡æ‰‹å†™RPCæ¡†æ¶éœ€è¦ä½¿ç”¨zookeeperåšä¸­é—´ä»¶ï¼Œè¿›è¡Œé€šä¿¡çš„ä¸šåŠ¡çš„åè°ƒã€‚ä¸‹é¢å¼€å§‹éƒ¨ç½²åˆ†å¸ƒå¼zookeeperã€‚è¿™è¾¹æˆ‘ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºï¼Œåœ¨è™šæ‹Ÿæœºä¸­éƒ¨ç½²å¤šå°zookeeperã€‚ 1.ä¸‹è½½æˆ‘ä»¬éœ€è¦åˆ°apacheå®˜ç½‘ä¸Šä¸‹è½½Zookeeper,å®˜ç½‘åœ°å€https://archive.apache.org/dist/zookeeper/,æˆ‘è¿™è¾¹æ˜¯ubuntuæ“ä½œç³»ç»Ÿ,ä¸‹è½½å°¾ç¼€æ˜¯tar.gz,å¦‚æœæ˜¯windowsä¸‹è½½zipï¼Œæˆ‘ä¸‹è½½çš„æ˜¯3.4.10ç‰ˆæœ¬ 2.å¯åŠ¨è™šæ‹Ÿæœºé›†ç¾¤æˆ‘åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…äº†cor1ã€cor2ã€cor3ã€cor4å››å°æœºå™¨ï¼Œç”¨çš„æ˜¯centOSæ“ä½œç³»ç»Ÿã€‚ å…³äºæ•°é‡é…ç½®çš„æ˜¯å¶æ•°å°é›†ç¾¤ï¼Œå…¶å®ä¸å¤ªå¥½ï¼Œæœ€å¥½é›†ç¾¤æ•°é‡æ˜¯åŸºæ•°ï¼Œè¿™æ˜¯å› ä¸ºzookeeperçš„è¿è¡Œæœºåˆ¶ï¼Œåªè¦æœ‰åŠæ•°çš„é›†ç¾¤æ•°å­˜æ´»çš„è¯ï¼Œzookeeperå°±èƒ½æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬åˆ†åˆ«å¯åŠ¨æ¯å°æœºå™¨ã€‚å°æŠ€å·§ï¼šSecureCRTé“¾æ¥é›†ç¾¤ä½¿ç”¨Send commands to all sessionså¯ä»¥ä¸€æ¬¡æ€§æ§åˆ¶å¤šå°æœºå™¨,æˆ‘ä»¬åªéœ€è¦æ‰“ä¸€æ¡å‘½ä»¤å°±å¯ä»¥äº†ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œå‡å¦‚é›†ç¾¤æ•°å¤ªå¤šä¸Šåƒå°ï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä¸€å°ä¸€å°å»é™ªï¼Œè¿™ä¸ªæ—¶å€™ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½å°±å¯ä»¥åŒæ—¶æ“ä½œäº†ã€‚ 3.zookeeperé…ç½®é…ç½®çš„è¯åˆ†ä¸¤æ­¥é…ç½®zoo.cfgé…ç½®é…å°æœºå™¨å¯¹åº”çš„myidé…ç½®zookeeper/conf/zoo.cfg:123456789101112131415161718192021222324252627282930313233# The number of milliseconds of each ticktickTime=2000# The number of ticks that the initial # synchronization phase can takeinitLimit=10# The number of ticks that can pass between # sending a request and getting an acknowledgementsyncLimit=5# the directory where the snapshot is stored.# do not use /tmp for storage, /tmp here is just # example sakes.dataDir=/root/zookeeper/datadataLogDir=/root/zookeeper/log# the port at which the clients will connectclientPort=2181# the maximum number of client connections.# increase this if you need to handle more clients#maxClientCnxns=60## Be sure to read the maintenance section of the # administrator guide before turning on autopurge.## http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance## The number of snapshots to retain in dataDir#autopurge.snapRetainCount=3# Purge task interval in hours# Set to \"0\" to disable auto purge feature#autopurge.purgeInterval=1server.1=cor1:2888:3888server.2=cor2:2888:3888server.3=cor3:2888:3888server.4=cor4:2888:3888é…ç½®é‡Œé¢å¤§éƒ¨åˆ†éƒ½ä¸éœ€è¦æˆ‘ä»¬åŠ¨ï¼Œæˆ‘ä»¬åªéœ€è¦é…å¥½æˆ‘ä»¬çš„é›†ç¾¤å°±å¯ä»¥äº†server.1=cor1:2888:3888server.2=cor2:2888:3888server.3=cor3:2888:3888server.4=cor4:2888:38882888æ˜¯å†…éƒ¨æ¯ä¸ªzookeeperçš„é€šä¿¡æ¥å£3888æ˜¯zookeeperçš„æŠ•ç¥¨é€‰ä¸¾leaderçš„æ¥å£åç»­æˆ‘ä»¬éœ€è¦åœ¨zookeeper/data/ç›®å½•ä¸‹åˆ›å»ºæ¯å°zookeeperçš„idåˆ›å»ºmyidæ–‡ä»¶ åœ¨é‡Œé¢å†™ä¸Šæ¯å°æœºå™¨å¯¹åº”çš„ç¼–å·,å¦‚æœæ˜¯cor1 å°±åœ¨myidæ–‡ä»¶ä¸­å†™ä¸Š1,cor2å°±å†™2 4.é…ç½®é›†ç¾¤æœåŠ¡å™¨åœ¨ä¸€å°æœºå™¨ä¸Šéƒ¨ç½²å¥½zookeeperåï¼Œæˆ‘ä»¬ä½¿ç”¨scpå‘½ä»¤å°†é…å¥½çš„zookeeperåˆ†å‘åˆ°å…¶ä»–æœºå™¨ä¸Šå°±å¯ä»¥äº†ã€‚ä½†æ˜¯è¿è¡Œzookeeperè¿˜éœ€è¦Javaç¯å¢ƒï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ‰‹åŠ¨ä¸ºæ¯å°ç”µè„‘ä¸€ä¸€åšé…ç½®ï¼Œè¿™è¾¹å°±ç”¨è„šæœ¬ã€‚å…¶ä¸­ç‰µæ‰¯ä¸¤ä¸ªè„šæœ¬auto_install_jdk.shå’Œinstall_jdk.shæ€è·¯ï¼šsshå…å¯†ç™»å½•--&gt;å‘é€jdkå®‰è£…åŒ…--&gt;å‘é€jdkå®‰è£…è„šæœ¬ï¼ˆè‡ªåŠ¨è§£å‹jdk,è‡ªåŠ¨é…ç½®ç¯å¢ƒå˜é‡,è‡ªåŠ¨è¿è¡Œzookeeperï¼‰--&gt;å‘é€å·²é…å¥½çš„zookeeperåŒ…--&gt;è¿è¡Œå·²å‘é€çš„jdkå®‰è£…è„šæœ¬auto_install_jdk.sh1234567891011121314151617181920212223242526272829303132#!/bin/bashSERVERS=\"192.168.0.102\"PASSWORD=\"1\"INDEX=1auto_ssh()&#123; expect -c \"set timeout -1; spawn ssh-copy-id root@$1; expect &#123; *(yes/no)* &#123;send -- yes\\r;exp_continue;&#125; *password:* &#123;send -- $2\\r;exp_continue;&#125; eof &#123;exit 0;&#125; &#125;\";&#125;each_server()&#123; for SERVER in $SERVERS do auto_ssh $SERVER $PASSWORD done&#125;each_server#å‘é€jdkå®‰è£…åŒ…scp $HOME/Documents/jdk-8u161-linux-x64.tar.gz root@$SERVER:/root#å‘é€jdkå®‰è£…å‘½ä»¤å¹¶è‡ªåŠ¨é…ç½®ç¯å¢ƒå˜é‡çš„è„šæœ¬1scp $HOME/workspace/shell/install_jdk.sh root@$SERVER:/root#å‘é€zookeeperåŒ…scp -r /home/zyh/zookeeper root@$SERVER:/root#è„šæœ¬1 $INDEX æŒ‡çš„å°±æ˜¯æ¯å°æœºå™¨å¯¹åº”çš„myidssh root@$SERVER /root/install_jdk.sh $INDEXinstall_jdk.sh1234567891011121314151617#/bin/bashtar -zxvf /root/jdk-8u161-linux-x64.tar.gz -C ./cat &gt;&gt; /etc/profile &lt;&lt; EOFexport JAVA_HOME=/root/jdk1.8.0_161export PATH=\\$PATH:\\$JAVA_HOME/binEOFsource /etc/profile#å…³é—­é˜²ç«å¢™service iptables stopchkconfig iptables offecho \"\" &gt; /root/zookeeper/data/myidecho $1 &gt; /root/zookeeper/data/myidcd /root/zookeeper/bin./zkServer.sh start 5.è¿è¡Œè„šæœ¬è¿™è¾¹æƒ³è¦è¿è¡Œä¿®æ”¹ä¸€ä¸‹ä¸‹é¢çš„å‚æ•°SERVERS=â€œ192.168.0.102â€PASSWORD=â€œ1â€INDEX=1æ‰§è¡Œ./auto_install_jdk.shï¼Œè„šæœ¬è¿˜æœ‰å¾ˆå¤šä¼˜åŒ–çš„åœ°æ–¹ï¼Œå¯ä»¥ç»“åˆè‡ªå·±çš„ä¸šåŠ¡åœºæ™¯é€‚å½“ä¿®æ”¹ã€‚","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Zookeeper","slug":"Zookeeper","permalink":"yihao.ml/tags/Zookeeper/"}]},{"title":"jvmè°ƒä¼˜","slug":"2018-04-15-jvm-jvmè°ƒä¼˜å®æˆ˜","date":"2018-04-15T00:00:00.000Z","updated":"2019-11-29T12:20:47.661Z","comments":true,"path":"2018/04/15/2018-04-15-jvm-jvmè°ƒä¼˜å®æˆ˜/","link":"","permalink":"yihao.ml/2018/04/15/2018-04-15-jvm-jvmè°ƒä¼˜å®æˆ˜/","excerpt":"","text":"JVMä¸­å¯åˆ†ä¸ºæ–¹æ³•åŒº(éå †)ã€å †ã€æ¡Ÿã€æœ¬åœ°æ¡Ÿã€ç¨‹åºè®¡æ•°å™¨ã€‚ä»Šå¤©ä¸»è¦è¯´å †ï¼Œæˆ‘ä»¬newçš„å¯¹è±¡ä¼šå­˜åœ¨è¯¥åŒºåŸŸå†…ï¼Œå…¶ä¸­å¯åˆ†ä¸ºYoung Generation(æ–°ç”Ÿä»£)ã€Old Generation(è€å¹´ä»£)å’ŒPermanent Generation(æ°¸ä¹…ä»£)ï¼Œå®ƒè¢«å¤šä¸ªçº¿ç¨‹æ‰€å…±äº«åŒæ—¶ä¹Ÿæ˜¯GCä¸»è¦è´Ÿè´£åƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸä¹‹ä¸€ã€‚ åƒåœ¾å›æ”¶æœºåˆ¶åˆšè¢«å®ä¾‹åŒ–çš„å¯¹è±¡ä¼šå­˜åœ¨äºEden Spaceä¸­ï¼Œå½“Eden Spaceç©ºé—´æ»¡äº†ä»¥å,GCä¼šè¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå°†ä¸éœ€è¦çš„å¯¹è±¡å›æ”¶æ‰ï¼Œå¹¸å­˜ä¸‹æ¥çš„å¯¹è±¡ä¼šè¢«åˆ†åˆ° Surivor RatioåŒºåŸŸä¸­ï¼Œæˆ‘ä»¬æ³¨æ„åˆ° Survivor Ratio åŒºåŸŸè¢«åˆ†ä¸ºä¸¤ä¸ªç©ºé—´ï¼Œé‚£ä¹ˆå®ƒä»¬æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿå…¶å®åˆ†ä¸ºä¸¤ä¸ªç©ºé—´çš„ä¸»è¦ç›®çš„æ˜¯é¿å…åœ¨åƒåœ¾å›æ”¶ä»¥åï¼Œäº§ç”Ÿå¤§é‡çš„ç¢ç‰‡ã€‚ç©ºé—´ç¢ç‰‡å¯¹Javaçš„æ€§èƒ½å½±å“æ˜¯å·¨å¤§çš„ï¼Œæ‰€ä»¥è¦æåŠ›é¿å…è¿™ç§æƒ…å†µã€‚å½“Eden Space ç¬¬ä¸€æ¬¡æ»¡äº†ä»¥åï¼Œç»å†è¿‡GCå›æ”¶åï¼Œå¹¸å­˜çš„å¯¹è±¡ä¼šè¢«æ”¾åœ¨S0åŒºåŸŸå†…ï¼Œå½“Eden Spaceå†æ¬¡æ»¡GCå¯¹å…¶è¿›è¡Œå†æ¬¡å›æ”¶ä»¥åï¼Œå¹¸å­˜çš„å¯¹è±¡ä¼šå’ŒS0å†…çš„å¯¹è±¡è¿›è¡Œåˆå¹¶ï¼Œç„¶åå¤åˆ¶åˆ°S1åŒºåŸŸå†…ï¼Œå½“ç¬¬ä¸‰æ¬¡å›æ”¶åå’ŒS1åˆå¹¶å¤åˆ¶åˆ°S0â€¦å¦‚æ­¤åå¤16æ¬¡ä»¥åã€‚æœ€ç»ˆå¹¸å­˜çš„å¯¹è±¡ä¼šè¢«é€åˆ°Old Generationã€‚è¿™å¤åˆ¶çš„åŠæ³•å…¶å®åªæ˜¯GCå›æ”¶ç®—æ³•ä¸­çš„ä¸€ç§ã€‚GC å›æ”¶ç­–ç•¥æ ‡è®°-æ¸…ç† ï¼ˆMark-Sweepï¼‰æ ‡è®°-åˆ é™¤ ï¼ˆMark-Compactï¼‰å¤åˆ¶ ï¼ˆCopyingï¼‰ jvmå‚æ•°åˆ—è¡¨java -Xmx3550m -Xms3550m -Xmn2g -Xss128k -XX:NewRatio=4 -XX:SurvivorRatio=4 -XX:MaxPermSize=16m-XX:MaxTenuringThreshold=0-Xmx3550mï¼šæœ€å¤§å †å†…å­˜ä¸º3550Mã€‚-Xms3550mï¼šåˆå§‹å †å†…å­˜ä¸º3550mã€‚æ­¤å€¼å¯ä»¥è®¾ç½®ä¸-Xmxç›¸åŒï¼Œä»¥é¿å…æ¯æ¬¡åƒåœ¾å›æ”¶å®ŒæˆåJVMé‡æ–°åˆ†é…å†…å­˜ã€‚-Xmn2gï¼šè®¾ç½®å¹´è½»ä»£å¤§å°ä¸º2Gã€‚æ•´ä¸ªå †å¤§å°=å¹´è½»ä»£å¤§å° + å¹´è€ä»£å¤§å° +æŒä¹…ä»£å¤§å°ã€‚æŒä¹…ä»£ä¸€èˆ¬å›ºå®šå¤§å°ä¸º64mï¼Œæ‰€ä»¥å¢å¤§å¹´è½»ä»£åï¼Œå°†ä¼šå‡å°å¹´è€ä»£å¤§å°ã€‚æ­¤å€¼å¯¹ç³»ç»Ÿæ€§èƒ½å½±å“è¾ƒå¤§ï¼ŒSunå®˜æ–¹æ¨èé…ç½®ä¸ºæ•´ä¸ªå †çš„3/8ã€‚-Xss128kï¼šè®¾ç½®æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°ã€‚JDK5.0ä»¥åæ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º1Mï¼Œåœ¨ç›¸åŒç‰©ç†å†…å­˜ä¸‹ï¼Œå‡å°è¿™ä¸ªå€¼èƒ½ç”Ÿæˆæ›´å¤šçš„çº¿ç¨‹ã€‚ä½†æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹æ•°è¿˜æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸èƒ½æ— é™ç”Ÿæˆï¼Œç»éªŒå€¼åœ¨ 3000~5000å·¦å³ã€‚-XX:NewRatio=4:è®¾ç½®å¹´è½»ä»£ï¼ˆåŒ…æ‹¬Edenå’Œä¸¤ä¸ªSurvivoråŒºï¼‰ä¸å¹´è€ä»£çš„æ¯”å€¼ï¼ˆé™¤å»æŒä¹…ä»£ï¼‰ã€‚è®¾ç½®ä¸º4ï¼Œåˆ™å¹´è½»ä»£ä¸å¹´è€ä»£æ‰€å æ¯”å€¼ä¸º1ï¼š4ï¼Œå¹´è½»ä»£å æ•´ä¸ªå †æ ˆçš„1/5-XX:SurvivorRatio=4ï¼šè®¾ç½®å¹´è½»ä»£ä¸­EdenåŒºä¸SurvivoråŒºçš„å¤§å°æ¯”å€¼ã€‚è®¾ç½®ä¸º4ï¼Œåˆ™ä¸¤ä¸ªSurvivoråŒºä¸ä¸€ä¸ªEdenåŒºçš„æ¯”å€¼ä¸º2:4ï¼Œä¸€ä¸ªSurvivoråŒºå æ•´ä¸ªå¹´è½»ä»£çš„1/6-XX:MaxPermSize=16m:è®¾ç½®æŒä¹…ä»£å¤§å°ä¸º16mã€‚-XX:MaxTenuringThreshold=15ï¼šè®¾ç½®åƒåœ¾æœ€å¤§å¹´é¾„ã€‚å¦‚æœè®¾ç½®ä¸º0çš„è¯ï¼Œåˆ™å¹´è½»ä»£å¯¹è±¡ä¸ç»è¿‡SurvivoråŒºï¼Œç›´æ¥è¿›å…¥å¹´è€ä»£ã€‚å¯¹äºå¹´è€ä»£æ¯”è¾ƒå¤šçš„åº”ç”¨ï¼Œå¯ä»¥æé«˜æ•ˆç‡ã€‚å¦‚æœå°†æ­¤å€¼è®¾ç½®ä¸ºä¸€ä¸ªè¾ƒå¤§å€¼ï¼Œåˆ™å¹´è½»ä»£å¯¹è±¡ä¼šåœ¨SurvivoråŒºè¿›è¡Œå¤šæ¬¡å¤åˆ¶ï¼Œè¿™æ ·å¯ä»¥å¢åŠ å¯¹è±¡ å†å¹´è½»ä»£çš„å­˜æ´»æ—¶é—´ï¼Œå¢åŠ åœ¨å¹´è½»ä»£å³è¢«å›æ”¶çš„æ¦‚è®ºã€‚ æ”¶é›†å™¨è®¾ç½®å¸¸ç”¨çš„GCåƒåœ¾æ”¶é›†å™¨æœ‰ä¸‹é¢ä¸‰ç§-XX:+UseSerialGC:è®¾ç½®ä¸²è¡Œæ”¶é›†å™¨-XX:+UseParallelGC:è®¾ç½®å¹¶è¡Œæ”¶é›†å™¨-XX:+UseParalledlOldGC:è®¾ç½®å¹¶è¡Œå¹´è€ä»£æ”¶é›†å™¨ JVMè°ƒä¼˜å®æˆ˜JDKä¸­è‡ªå¸¦äº†ä¸¤ä¸ªç›‘æ§å†…å­˜å †çš„å·¥å…·ï¼Œåˆ†åˆ«æ˜¯jconsoleå’Œjvisualvmï¼Œä»–ä»¬ä½äºjdkçš„binç›®å½•ä¸‹ã€‚å»ºè®®ç©å‰å‡ ä¸ªä¾‹å­ï¼Œåé¢çš„ä¾‹å­å¾ˆä¸å‹å¥½ï¼Œä¼šè®©ç”µè„‘å¡æ­»ã€‚æ‚²å‚¬çš„æˆ‘ç”µè„‘å¼ºè¡Œé‡å¯äº†å¥½å‡ æ¬¡ã€‚ã€‚ã€‚ 1.å†…å­˜æº¢å‡ºException in thread â€œmainâ€ java.lang.OutOfMemoryError: Java heap spaceå†…å­˜å †æº¢å‡º,ç¤ºä¾‹ä»£ç :12345678910111213141516171819202122232425package com.edu;import java.util.ArrayList;public class TestMemory &#123; static class OOMObject &#123; public byte[] placeholder = new byte[64 * 1024*40]; &#125; public static void fillHeap(int num) throws Exception &#123; ArrayList&lt;OOMObject&gt; list = new ArrayList&lt;OOMObject&gt;(); for (int i = 0; i &lt; num; i++) &#123; Thread.sleep(50); list.add(new OOMObject()); &#125; System.gc(); &#125; public static void main(String[] args) throws Exception &#123; Thread.sleep(10000); fillHeap(100); Thread.sleep(20000000); &#125;&#125;éœ€è¦ä¸ºè™šæ‹Ÿæœºè®¾ç½®å‚æ•°-Xms100m -Xmx100m -XX:+UseSerialGCåœ¨IDEAè®¾ç½®æ‰¾åˆ°run--&gt;Edit configurationsâ€¦è¿è¡Œä½¿ç”¨jconsoleæŸ¥çœ‹æ–°ç”Ÿä»£å †å†…å­˜çŠ¶å†µã€‚ 2.æ£€æµ‹æ­»é”å½“çº¿ç¨‹å‡ºç°æ­»é”æ—¶ï¼Œè¿›ç¨‹æ°¸è¿œä¸èƒ½å®Œæˆï¼Œå¹¶ä¸”é˜»ç¢ä½¿ç”¨ç³»ç»Ÿèµ„æºï¼Œé˜»æ­¢äº†å…¶ä»–ä½œä¸šå¼€å§‹æ‰§è¡Œï¼Œå¯¼è‡´ç³»ç»Ÿçš„èµ„æºåˆ©ç”¨ç‡æ€¥å‰§ä¸‹è½½ï¼Œé€ æˆå¾ˆä¸¥é‡çš„åæœã€‚ä¸‹é¢ä¾‹å­ä¸­ä¼šäº§ç”Ÿæ­»é”çº¿ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨jconsoleæ¥æ‰¾åˆ°å¯¹åº”æ­»é”çš„è¿›ç¨‹ã€‚123456789101112131415161718192021222324252627282930package com.edu;/** * æ£€æµ‹æ­»é” */public class TestDeadThread implements Runnable &#123; int a, b; public TestDeadThread(int a, int b) &#123; this.a = a; this.b = b; &#125; @Override public void run() &#123; synchronized (Integer.valueOf(a)) &#123; synchronized (Integer.valueOf(b)) &#123; System.out.println(a + b); &#125; &#125; &#125; public static void main(String[] args) &#123; for (int i = 0; i &lt; 100; i++) &#123; new Thread(new TestDeadThread(1, 2)).start(); new Thread(new TestDeadThread(2, 1)).start(); &#125; &#125;&#125;è¿è¡Œä»£ç å,æ‰“å¼€jconsole,åœ¨çº¿ç¨‹ä¸€æ ä¸­å¯ä»¥æ‰¾åˆ°æ£€æµ‹æ­»é”æŒ‰é’®ï¼Œé€šè¿‡å®ƒå°±å¯ä»¥æ‰¾åˆ°å¯¹åº”æ­»é”çš„è¿›ç¨‹ 3.æ£€æµ‹æ­»å¾ªç¯ã€é˜»å¡æŸäº›çº¿ç¨‹è¿›å…¥æ­»å¾ªç¯ï¼Œè¿˜æœ‰ä¸€äº›çº¿ç¨‹ä¼šé˜»å¡åœ¨æŸä¸ªä½ç½®ï¼Œä½†æ˜¯å®ƒä»¬å…¶å®å¹¶ä¸æ˜¯æ­»é”ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦å¦‚ä½•æ’æŸ¥ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡jvisualvmå·¥å…·æŸ¥çœ‹çº¿ç¨‹è¿è¡Œå›¾æ¥è¿›è¡Œæ’æŸ¥,ä¸‹é¢æ˜¯ç¤ºä¾‹ä»£ç :123456789101112131415161718192021222324252627282930313233343536373839404142434445package com.edu;import java.io.BufferedReader;import java.io.InputStreamReader;public class TestThread &#123; public static void createBusyThread() &#123; Thread thread = new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println(\"createBusyThread\"); while (true) ; &#125; &#125;, \"testBusyThread\"); thread.start(); &#125; public static void createLockThread(final Object lock) &#123; Thread thread = new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println(\"createLockThread\"); synchronized (lock) &#123; try &#123; lock.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;, \"testLockThread\"); thread.start(); &#125; public static void main(String[] args) throws Exception &#123; BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); br.readLine(); createBusyThread(); br.readLine(); Object object = new Object(); createLockThread(object); &#125;&#125;mainçº¿ç¨‹è¿½è¸ªåˆ°éœ€è¦é”®ç›˜å½•å…¥æ–¹ä¾¿æˆ‘ä»¬æ£€æµ‹testBusyThreadçº¿ç¨‹å°†åœ¨whileï¼ˆtrueï¼‰ä¸­ä¸€ç›´è¿è¡Œï¼Œç›´åˆ°çº¿ç¨‹åˆ‡æ¢ï¼Œå¾ˆè€—æ€§èƒ½testLockThreadçº¿ç¨‹ç”±äºè°ƒç”¨äº†watit(),å®ƒä¼šä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ï¼Œç­‰å¾…notify()è¢«å”¤é†’æˆ‘ä»¬è¿è¡Œç¨‹åºæ‰“å¼€jvisualvmå·¥å…· åœ¨ç»ˆç«¯è¾“å…¥åæŸ¥çœ‹testBusyThreadçŠ¶æ€ï¼Œä¹‹ååœ¨ç»ˆç«¯å†æ¬¡è¾“å…¥æŸ¥çœ‹testLockThreadçŠ¶æ€ï¼Œæˆ‘ä»¬çœ‹åˆ°testBusyThreadçº¿ç¨‹è¿è¡Œä¸€æ ä¸€ç›´æ˜¯100%,è€ŒtestLockThreadçº¿ç¨‹çš„ç­‰å¾…ä¸€æ ä¸€ç›´æ˜¯100% 4.ç›´æ¥å†…å­˜æº¢å‡ºæœ¬ä¾‹è‡ªå¾ˆå±é™©ï¼Œä¼šé€ æˆæœºå™¨å‡æ­»ï¼Œæ…è·‘â€¦VM Argsï¼š-Xmx20M -XX:MaxDirectMemorySize=10M123456789101112131415161718package com.outofmemory;import java.lang.reflect.Field;import sun.misc.Unsafe;public class DirectMemoryOOM &#123; private static final int _1MB = 1024 * 1024; public static void main(String[] args) throws Exception &#123; Field unsafeField = Unsafe.class.getDeclaredFields()[0]; unsafeField.setAccessible(true); Unsafe unsafe = (Unsafe) unsafeField.get(null); while (true) &#123; unsafe.allocateMemory(_1MB); &#125; &#125;&#125; 5.å †å†…å­˜æº¢å‡º-XXï¼š+HeapDumpOnOutOfMemoryErrorå¯ä»¥è®©è™šæ‹Ÿæœºåœ¨å‡ºç°å†…å­˜æº¢å‡ºå¼‚å¸¸æ—¶Dumpå‡ºå½“å‰çš„å†…å­˜å †è½¬å‚¨å¿«ç…§ä»¥ä¾¿äº‹åä½¿ç”¨MemoryAnalyzerå·¥å…·è¿›è¡Œåˆ†æ,å…³äºMemoryAnalyzerå¯ä»¥ç™¾åº¦å…¶ä½¿ç”¨æ–¹æ³•ã€‚VM Argsï¼š-Xms20m -Xmx20m -XX:+HeapDumpOnOutOfMemoryError12345678910111213141516package com.outofmemory;import java.util.ArrayList;import java.util.List;public class HeapOOM &#123; static class OOMObject &#123; &#125; public static void main(String[] args) &#123; List&lt;OOMObject&gt; list = new ArrayList&lt;OOMObject&gt;(); while (true) &#123; list.add(new OOMObject()); &#125; &#125;&#125; 6.æ¡Ÿå†…å­˜æº¢å‡ºæœ¬ä¾‹ç”¨äºä½“éªŒOutOfMemoryErrorå¼‚å¸¸ï¼Œå®¹æ˜“è®©ç”µè„‘å‡æ­»ï¼Œå‚æ•°å¯ä»¥è®¾ç½®å¤§ä¸€äº›VM Argsï¼š-Xss2M12345678910111213141516171819202122232425package com.outofmemory;public class JavaVMStackOOM &#123; private void dontStop() &#123; while (true) &#123; &#125; &#125; public void stackLeakByThread() &#123; while (true) &#123; Thread thread = new Thread(new Runnable() &#123; @Override public void run() &#123; dontStop(); &#125; &#125;); thread.start(); &#125; &#125; public static void main(String[] args) throws Throwable &#123; JavaVMStackOOM oom = new JavaVMStackOOM(); oom.stackLeakByThread(); &#125;&#125; 7.æ¡Ÿå†…å­˜æº¢å‡ºæœ¬ä¾‹ç”¨äºä½“éªŒStackOverFlowå¼‚å¸¸ï¼Œå®¹æ˜“è®©ç”µè„‘å‡æ­»VM Argsï¼š-Xss128k1234567891011121314151617181920package com.outofmemory;public class JavaVMStackSOF &#123; private int stackLength = 1; public void stackLeak() &#123; stackLength++; stackLeak(); &#125; public static void main(String[] args) throws Throwable &#123; JavaVMStackSOF oom = new JavaVMStackSOF(); try &#123; oom.stackLeak(); &#125; catch (Throwable e) &#123; System.out.println(\"stack lengthï¼š\" + oom.stackLength); throw e; &#125; &#125;&#125;","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"yihao.ml/tags/JVM/"}]},{"title":"mybatis likeç›¸å…³é—®é¢˜","slug":"2018-04-10-mybatis-mybatis likeç›¸å…³é—®é¢˜","date":"2018-04-10T00:00:00.000Z","updated":"2019-11-29T12:20:47.660Z","comments":true,"path":"2018/04/10/2018-04-10-mybatis-mybatis likeç›¸å…³é—®é¢˜/","link":"","permalink":"yihao.ml/2018/04/10/2018-04-10-mybatis-mybatis likeç›¸å…³é—®é¢˜/","excerpt":"","text":"Mybatis ä¸­å…³äºlikeçš„ä½¿ç”¨ä½¿ç”¨å­—ç¬¦ä¸²ä¼ å€¼æˆ‘ä»¬è¦ä½¿ç”¨#{0}#{1}#{2å»åŒ¹é…ä¼ å…¥çš„æ¯ä¸ªå‚æ•°},å› ä¸ºå¸¦like,æ‰€ä»¥åœ¨ä¼ å…¥å€¼çš„æ—¶å€™è¦åœ¨åå­—å·¦å³æ‹¼ä¸Š%å·ï¼Œåƒè¿™æ ·â€™%tom%â€™,è€Œä¸æ˜¯â€™tomâ€™ï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ä¸€å®šæ³¨æ„ä¼ å…¥çš„é¡ºåºMapper.java1public List&lt;BdipChatPoint&gt; selectListByPage(String modelUrl,String username);Mapper.xml12345&lt;select id=\"selectListByPage\" parameterType=\"java.lang.String\" resultMap=\"pointMap\"&gt; select * from bdip_chat_point where tree_id = #&#123;0&#125; and user_name like #&#123;1&#125;&lt;/select&gt;main.java12mapper.selectListByPage(\"1\",\"%tom%\");æœ‰çš„äººåœ¨Mapper.xmlå¯èƒ½ä¼šè¿™æ ·å†™,æ˜¯å–ä¸åˆ°å€¼çš„,ä¸‹é¢æ˜¯é”™è¯¯æ¼”ç¤º12345&lt;select id=\"selectListByPage\" parameterType=\"java.lang.String\" resultMap=\"pointMap\"&gt; select * from bdip_chat_point where tree_id = #&#123;modelUrl&#125; and user_name like #&#123;username&#125; &lt;/select&gt;å¦‚æœæˆ‘ä»¬å°±æƒ³ä½¿ç”¨è¿™ç§æ–¹æ³•æŸ¥,è¦æ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥ç”¨Mapå°è£…å‚æ•°ï¼Œçœ‹ä¸€ä¸‹ä½¿ç”¨Mapä¼ å€¼2.ä½¿ç”¨Mapä¼ å€¼Mapper.java1public List&lt;BdipChatPoint&gt; selectListByPage(Map map);Mapper.xml123456&lt;select id=\"selectListByPage\" parameterType=\"Map\" resultMap=\"pointMap\"&gt; select * from bdip_chat_point where tree_id = #&#123;modelUrl&#125; and user_name like #&#123;username&#125; &lt;/select&gt;è°ƒç”¨çš„æ—¶å€™åˆå§‹åŒ–mapå¯¹è±¡1234Map map = new HashMap();map.put(\"modelUrl\", \"624\");map.put(\"username\", \"%tom%\");éœ€è¦æ³¨æ„çš„æ˜¯like #{username}å’Œmap.put(&quot;username&quot;, &quot;%tom%&quot;);å¦‚æœä½ ä¸æƒ³å»æ‹¼%å·,æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å¯ä»¥è¿™æ ·å­å†™ã€‚Mapper.xml123456&lt;select id=\"selectListByPage\" parameterType=\"Map\" resultMap=\"pointMap\"&gt; select * from bdip_chat_point where tree_id = #&#123;modelUrl&#125; and user_name like '%$&#123;username&#125;%' &lt;/select&gt;1234Map map = new HashMap();map.put(\"modelUrl\", \"624\");map.put(\"username\", \"tom\");good luck!~","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Mybatis","slug":"Mybatis","permalink":"yihao.ml/tags/Mybatis/"}]},{"title":"å„ç§æ•°æ®åº“åˆ†é¡µ","slug":"2018-04-09-åˆ†é¡µ-pagingå„ç§åˆ†é¡µ","date":"2018-04-09T00:00:00.000Z","updated":"2019-11-29T12:20:47.660Z","comments":true,"path":"2018/04/09/2018-04-09-åˆ†é¡µ-pagingå„ç§åˆ†é¡µ/","link":"","permalink":"yihao.ml/2018/04/09/2018-04-09-åˆ†é¡µ-pagingå„ç§åˆ†é¡µ/","excerpt":"","text":"sqlserveråˆ†é¡µ è¾…åŠ©ç±»1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192package com.utils;import java.util.Collections;import java.util.List;/** * åˆ†é¡µè¾…åŠ©ç±» * @author ZhaoYihao * */public class Page &#123; /** * å½“å‰é¡µç  */ private int pageNum; /** * å¼€å§‹æ¡æ•° */ private int startNum; /** * ç»“æŸæ¡æ•° */ private int endNum; /** * æ¯é¡µæ¡æ•° */ private int recordPerPage = 10; /** * æ€»é¡µæ•° */ private int pageCount; /** * æŸ¥è¯¢æ•°æ®åˆ—è¡¨ */ private List records = Collections.emptyList(); public Page() &#123;&#125; public Page(int pageNum) &#123; init(pageNum); &#125; private void init(int pageNum2) &#123; this.startNum = ((pageNum2-1)*recordPerPage)+1; this.endNum = startNum + recordPerPage; &#125; public int getPageNum() &#123; return pageNum; &#125; public void setPageNum(int pageNum) &#123; this.pageNum = pageNum; &#125; public int getStartNum() &#123; return startNum; &#125; public void setStartNum(int startNum) &#123; this.startNum = startNum; &#125; public int getEndNum() &#123; return endNum; &#125; public void setEndNum(int endNum) &#123; this.endNum = endNum; &#125; public int getRecordPerPage() &#123; return recordPerPage; &#125; public void setRecordPerPage(int recordPerPage) &#123; this.recordPerPage = recordPerPage; &#125; public int getPageCount() &#123; return pageCount; &#125; public void setPageCount(int pageCount) &#123; this.pageCount = pageCount; &#125; public List getRecords() &#123; return records; &#125; public void setRecords(List records) &#123; this.records = records; &#125; &#125;éœ€è¦ä»å‰å°ä¼ è¿‡æ¥å½“å‰æ‰€åœ¨é¡µé¢ã€‚åå°åˆå§‹åŒ–Pageå¯¹è±¡,å°†å½“å‰é¡µé¢setè¿›å®ä½“ç±»,è‡ªåŠ¨åˆå§‹åŒ–å…¶ä»–ä¿¡æ¯ã€‚ sqlserver12345SELECT * FROM ( SELECT row_number() over(order by create_time) rownum,A.* FROM ( select * from bdip_chat_point where tree_id = '624' and user_name like '%æ¨%' )A)B where rownum between 1 AND 2; oracleæ–¹æ¡ˆä¸€:1234select u_name,u_salfrom (select users.*,rownum rn from users where rownum &lt;= end)where rn &gt; startæ–¹æ¡ˆäºŒ:1234select u_name,u_salfrom (select users.*,rownum rn from users)where rn between start and endæ–¹æ¡ˆä¸€æ•ˆç‡æ›´é«˜!!! mysqlä½¿ç”¨limit å®Œæˆåˆ†é¡µ","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"ActiveMQä½¿ç”¨","slug":"2018-04-08-activemq-ActiveMQä½¿ç”¨","date":"2018-04-08T00:00:00.000Z","updated":"2019-11-29T12:20:47.659Z","comments":true,"path":"2018/04/08/2018-04-08-activemq-ActiveMQä½¿ç”¨/","link":"","permalink":"yihao.ml/2018/04/08/2018-04-08-activemq-ActiveMQä½¿ç”¨/","excerpt":"","text":"ActiveMQ æ˜¯ä¸€ä¸ªapacheæä¾›çš„ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡,ä¸ºæˆ‘ä»¬åœ¨ç”Ÿäº§ä¸­æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„æœåŠ¡å™¨,æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨Java BloingQueue,ä½¿ç”¨è¿™ä¸ªæœåŠ¡å°±èƒ½å¾ˆå¥½çš„åº”å¯¹å„ç§ç”Ÿäº§åœºæ™¯ã€‚ ä¸‹è½½æˆ‘ä»¬éœ€è¦åˆ°apacheå®˜ç½‘ä¸Šä¸‹è½½ActiveMQ,å®˜ç½‘åœ°å€http://activemq.apache.org/activemq-5145-release.html,æˆ‘è¿™è¾¹æ˜¯ubuntuæ“ä½œç³»ç»Ÿ,ä¸‹è½½å°¾ç¼€æ˜¯tar.gz,å¦‚æœæ˜¯windowsä¸‹è½½zip é…ç½®activemq.xmlè§£å‹ä¸‹å¥½çš„è½¯ä»¶è¿›å…¥apache-activemq-5.14.5/confæ‰¾åˆ°activemq.xml,å°†å…¶ä¸­çš„0.0.0.0ä¿®æ”¹æˆ127.0.0.112345678 &lt;transportConnectors&gt; &lt;transportConnector name=\"openwire\" uri=\"tcp://localhost:61616\"/&gt; &lt;transportConnector name=\"ssl\" uri=\"ssl://localhost:61617\"/&gt; &lt;transportConnector name=\"stomp\" uri=\"stomp://localhost:61613\"/&gt; &lt;transportConnector uri=\"http://localhost:8081\"/&gt; &lt;transportConnector uri=\"udp://localhost:61618\"/&gt;&lt;/transportConnectors&gt; å¯åŠ¨è¿›å…¥åˆ°apache-activemq-5.14.5/bin ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤$ ./activemq startæ‰“å°ä¸‹åˆ—è¯­å¥å°±æ˜¯å¼€å¯æˆåŠŸäº†è®¿é—®localhost:8161/adminã€‚ ç®€å•çš„Demoæ—¢ç„¶é˜Ÿåˆ—è·‘èµ·æ¥äº†ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç®€å•çš„Javaç¨‹åºå¾€é˜Ÿåˆ—é‡Œé¢æ”¾å‡ ä¸ªä¸œè¥¿ï¼Œç©ç©â€¦å†™ä¸€ä¸ªç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å°ä¾‹å­.Sender.java1234567891011121314151617181920212223242526272829303132333435363738394041package com.bim.activemq;import org.apache.activemq.ActiveMQConnection;import org.apache.activemq.ActiveMQConnectionFactory;import javax.jms.*;public class Sender &#123; private static ConnectionFactory factory; private static Connection connection; private static Session session; private static Destination destination; private static MessageProducer producer; public static void main(String[] args) &#123; // 1.åˆ›å»ºå·¥å‚ factory = new ActiveMQConnectionFactory(ActiveMQConnection.DEFAULT_USER,ActiveMQConnection.DEFAULT_PASSWORD, \"tcp://localhost:61616\"); try &#123; // 2.è·å–Connection connection = factory.createConnection(); connection.start(); // 3.è·å–session session = connection.createSession(true,Session.AUTO_ACKNOWLEDGE); // 4.å‘æ¶ˆæ¯ 4.1æŒ‡å®šæ¶ˆæ¯çš„ç›®çš„åœ° destination 4.2 æŒ‡å®šæ¥å—äºº consumer destination = session.createQueue(\"foo\"); producer = session.createProducer(destination); for (int i = 0; i &lt; 5; i++) &#123; producer.send(destination,session.createTextMessage(\"æ–°æ¶ˆæ¯\" + i)); &#125; session.commit(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125;è¿™ä¸ªæ˜¯ç”Ÿäº§è€…,å¾€é˜Ÿåˆ—ä¸­å­˜å€¼,è¿™è¾¹æˆ‘ä»¬ä¸ºé˜Ÿåˆ—é‡Œé¢å­˜æ”¾äº†5æ¡æ¶ˆæ¯,åˆ†åˆ«å­˜äºfooèŠ‚ç‚¹ä¸‹.,æˆ‘ä»¬åœ¨è¿è¡Œå®ƒä¹‹å‰å…ˆæŸ¥çœ‹ä¸€ä¸‹é˜Ÿåˆ—çš„æ ·å­ã€‚Queuesä¸­æ˜¯ç©ºçš„ä»€ä¹ˆéƒ½æ²¡æœ‰,æˆ‘ä»¬è¿è¡Œä»£ç ,å¾€é˜Ÿåˆ—ä¸­å­˜å…¥å€¼æˆ‘ä»¬å¯ä»¥ç‚¹è¿›å»æŸ¥çœ‹è¯¦æƒ…Consumer.java12345678910111213141516171819202122232425262728293031323334package com.bim.activemq;import org.apache.activemq.ActiveMQConnection;import org.apache.activemq.ActiveMQConnectionFactory;import javax.jms.*;public class Consumer &#123; public static void main(String[] args) &#123; // 1.åˆ›å»ºå·¥å‚ ConnectionFactory factory = new ActiveMQConnectionFactory(ActiveMQConnection.DEFAULT_USER, ActiveMQConnection.DEFAULT_PASSWORD, \"tcp://127.0.0.1:61616\"); try &#123; // 2. åˆ›å»ºé“¾æ¥ Connection connection = factory.createConnection(); connection.start(); // 3.åˆ›å»ºsession å‚æ•°è¯¦è§£https://www.cnblogs.com/MIC2016/p/6086321.html Session session = connection.createSession(true,Session.AUTO_ACKNOWLEDGE); // 4.åˆ›å»ºproducerç”Ÿäº§è€…å‘æ¶ˆæ¯ Destination destination = session.createQueue(\"foo\"); MessageConsumer consumer = session.createConsumer(destination); while(true)&#123; TextMessage message = (TextMessage) consumer.receive(); System.out.println(message.getText()); &#125; &#125; catch (JMSException e) &#123; e.printStackTrace(); &#125; &#125;&#125;è¿™ä¸ªæ˜¯æ¶ˆè´¹ç¨‹åº,æ¯å½“é˜Ÿåˆ—é‡Œé¢å­˜æ”¾ä¸€æ¡æ¶ˆæ¯å,è¯¥ç¨‹åºå°±ä¼šå»é˜Ÿåˆ—ä¸­å–æ•°æ®äº†!!!","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"ActiveMQ","slug":"ActiveMQ","permalink":"yihao.ml/tags/ActiveMQ/"}]},{"title":"Javawebå®ç°äº‘ç«¯å›æ”¶ç«™åŠŸèƒ½","slug":"2018-04-02-Javawebäº‘ç«¯å›æ”¶ç«™åŠŸèƒ½æ€»ç»“","date":"2018-04-02T00:00:00.000Z","updated":"2019-11-29T12:20:47.659Z","comments":true,"path":"2018/04/02/2018-04-02-Javawebäº‘ç«¯å›æ”¶ç«™åŠŸèƒ½æ€»ç»“/","link":"","permalink":"yihao.ml/2018/04/02/2018-04-02-Javawebäº‘ç«¯å›æ”¶ç«™åŠŸèƒ½æ€»ç»“/","excerpt":"","text":"æœ€è¿‘æ¥æ‰‹JavaWebå›æ”¶ç«™åŠŸèƒ½,ä¸šåŠ¡åœºæ™¯ï¼šåœ¨äº‘ç«¯ä¸ºç”¨æˆ·åˆ é™¤æ¨¡å‹æ“ä½œæä¾›ä¸€ä¸ªå›æ”¶ç«™åŠŸèƒ½ï¼Œä¸»è¦ä¸šåŠ¡ã€‚æ¨¡å‹åˆ é™¤ã€æ¨¡å‹æ‰¾å›ã€‚ä¸‹é¢åªæ¢³ç†ä¸šåŠ¡é€»è¾‘ å…³ç³»è¡¨ä¸»è¦ä¸šåŠ¡ç‰µæ‰¯è¡¨æœ‰è¿™å‡ å¼ :bim_space_manager(ç”¨æˆ·ç©ºé—´)ã€bim_model_tree_trash(å›æ”¶ç«™)å’Œbim_model_tree(æ¨¡å‹)bim_space_manager å¯ä»¥ç†è§£ä¸ºç™¾åº¦ç½‘ç›˜çš„ç”¨æˆ·ç©ºé—´ã€‚bim_model_tree äº‘ç«¯å­˜æ”¾æ¨¡å‹çš„ä¸»è¦è¡¨bim_model_tree_trash åˆ é™¤è®°å½• å­—æ®µè¯¦è¿°è¡¨å­—æ®µè¯´æ˜:bim_model_tree_trashenable_:0 å›æ”¶ç«™è®°å½•å¼ƒç”¨(åŒæ—¶è¡¨ç¤ºæ¨¡å‹è®°å½•å¯ç”¨,å¾ˆç»•â€¦ä¸»è¦ä¸ºäº†å›æ”¶ç«™çš„æ‰¾å›é€»è¾‘) 1 å›æ”¶ç«™å¯ç”¨(åŒæ—¶è¡¨ç¤ºæ¨¡å‹è®°å½•è¢«é€»è¾‘åˆ é™¤) 2 å¯¹åº”æ¨¡å‹è®°å½•è¢«æ°¸ä¹…åˆ é™¤user_id:æ¨¡å‹æ‰€æœ‰è€…çš„idtree_id:è¢«åˆ é™¤çš„æ¨¡å‹id ä¸bim_model_tree ä¸­çš„id ä¸€å¯¹ä¸€å…³ç³»left_days:å›æ”¶ç«™ä¸­åˆå§‹ä¿ç•™7å¤©,åå°æ¯å¤©è‡ªåŠ¨æ£€æµ‹è¯¥å­—æ®µ,å¹¶æ›´æ–°ç”Ÿäºå¤©æ•°,å‡ºç°è´Ÿæ•°æ—¶,å³è¡¨ç¤ºè¯¥æ¨¡å‹å·²ç»è¢«ç‰©ç†åˆ é™¤,ä¸ä¼šå†æ˜¾ç¤ºåœ¨å›æ”¶ç«™ä¸­model_size:è¯¥èŠ‚ç‚¹æ–‡ä»¶çš„å¤§å° å•ä½KBè¡¨å­—æ®µè¯´æ˜:bim_space_managerenable_: åœ¨æ–°å»ºç”¨æˆ·ä¸ºå…¶åˆå§‹åŒ–é»˜è®¤ç©ºé—´,é»˜è®¤ä¸º1,ç”¨æˆ·æ³¨é”€æ—¶ä¸º0user_id:ç”¨æˆ·id,ä¸ç”¨æˆ·è¡¨ä¸­çš„ç”¨æˆ·ä¸€ä¸€å¯¹åº”space_total:ç”¨æˆ·åˆå§‹åŒ–å¯ç”¨ç©ºé—´å¤§å° 2048 å•ä½MB è®¡ç®—æ–¹å¼:space_size*1024space_used:å·²ç»ä½¿ç”¨çš„size å•ä½MBspace_size: ç”¨æˆ·ç©ºé—´ç­‰çº§,åˆå§‹åŒ–ä¸º2 (åœ¨user_space_size.propertiesæ–‡ä»¶ä¸­çš„space_size_toolé…ç½®)user_type: ç”¨æˆ·ç©ºé—´ä½¿ç”¨ç±»å‹ é»˜è®¤tool å·¥å…·çº§ ä¸»è¦ä¸šåŠ¡æ¢³ç†å›æ”¶ç«™è®°å½•ä¸æ¨¡å‹èŠ‚ç‚¹è®°å½•ä¸€ä¸€å¯¹åº”,é€šè¿‡tree_idå…³è” 1.åˆ é™¤æ–‡ä»¶ç”¨æˆ·åˆ é™¤æ–‡ä»¶æ—¶,å…ˆå°†bim_model_treeä¸­è®°å½•enableè®¾ä¸º0,å†åœ¨bim_model_tree_trashä¸­åˆ›å»ºè®°å½•,åˆ›å»ºä¹‹å‰ä¼šæŸ¥é‡æ˜¯å¦å·²ç»æœ‰è¯¥è®°å½•,æœ‰çš„è¯,å°†trashä¸­enableå˜ä¸º1,å¦åˆ™æ–°å»ºtrashè®°å½• 2.æ‰¾å›æ–‡ä»¶ï¼šç”¨æˆ·ä»å›æ”¶ç«™ä¸­æ‰¾å›èŠ‚ç‚¹ï¼Œå…ˆåˆ é™¤trashè¡¨ä¸­å¯¹åº”è®°å½•ï¼Œç„¶ååˆ¤æ–­è¯¥èŠ‚ç‚¹æ˜¯æ–‡ä»¶è¿˜æ˜¯æ–‡ä»¶å¤¹ã€‚å¦‚æœæ˜¯æ–‡ä»¶çš„è¯ï¼Œå…ˆæŸ¥è¯¢ç”¨æˆ·ç©ºé—´è¡¨çš„å‰©ä½™ç©ºé—´æ˜¯å¦å¤Ÿç”¨ï¼Œå¤Ÿç”¨çš„è¯ç›´æ¥é‡æ–°å¯ç”¨model_treeä¸­å¯¹åº”è®°å½•ï¼ŒåŒæ—¶å¯ç”¨è¯¥èŠ‚ç‚¹æ‰€æœ‰çš„çˆ¶ç¥–èŠ‚ç‚¹ï¼ŒåŒæ—¶æ›´æ–°ç”¨æˆ·ç©ºé—´è¡¨ã€‚å¦‚æœæ˜¯æ–‡ä»¶å¤¹çš„è¯ï¼Œå…ˆæŸ¥å‡ºå…¶ä¸‹æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œç„¶åæ’é™¤å…¶ä¸­æ‰€æœ‰ä¹‹å‰åˆ é™¤è¿‡æ‰€æœ‰èŠ‚ç‚¹ã€‚å…ˆå°†å…¶å…¨éƒ¨æ¢å¤ï¼Œç„¶åæŸ¥è¯¢ç”¨æˆ·ç©ºé—´æ˜¯å¦è¶…è¿‡é¢å®šå¤§å°ï¼Œè¶…å‡ºçš„è¯å›æ»šæ‰€æœ‰æ“ä½œï¼Œå¹¶æç¤ºå‰©ä½™ç©ºé—´ä¸è¶³ã€‚ 3.å½»åº•åˆ é™¤æ–‡ä»¶ï¼šå³åˆ é™¤trashä¸­çš„è®°å½•ï¼Œè¯´æ˜¯ç‰©ç†åˆ é™¤ä¹Ÿå¹¶éçœŸçš„ç‰©ç†åˆ é™¤ã€‚è€Œæ˜¯é€šè¿‡ä¿®æ”¹statuså­—æ®µä¸º2 è¿›è¡Œå½»åº•åˆ é™¤ã€‚æ–‡ä»¶è¿›å…¥å›æ”¶ç«™åï¼Œå®šæ—¶7å¤©ï¼ŒæœŸé—´ç”¨æˆ·å¯æ‰¾å›ï¼Œä¹Ÿå¯å½»åº•åˆ é™¤ã€‚è¶…æœŸåˆ™ä¸ä¼šå†æ˜¾ç¤ºtrashè®°å½•ã€‚åŒæ—¶åå°æœ‰å®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©æ‰«æä¸€æ¬¡trashè¡¨ï¼Œå®šæ—¶ä¿®æ”¹left_day ï¼Œå½“å‰©ä½™å¤©æ•°ä¸å¤§äº0æ—¶ï¼Œä¹Ÿä¸ä¼šå†æ˜¾ç¤ºtrashè®°å½•ï¼Œç®—æ˜¯å½»åº•åˆ é™¤æ–‡ä»¶","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"wangEditorç²˜è´´å›¾ç‰‡ä¸Šä¼ ","slug":"2018-03-27-wangEditor-wangEditorå›¾ç‰‡ç²˜è´´ä¸Šä¼ ","date":"2018-03-27T00:00:00.000Z","updated":"2019-11-29T12:20:47.657Z","comments":true,"path":"2018/03/27/2018-03-27-wangEditor-wangEditorå›¾ç‰‡ç²˜è´´ä¸Šä¼ /","link":"","permalink":"yihao.ml/2018/03/27/2018-03-27-wangEditor-wangEditorå›¾ç‰‡ç²˜è´´ä¸Šä¼ /","excerpt":"","text":"wangEditorç²˜è´´å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ æ€è·¯ä½¿ç”¨paste.jsè¾…åŠ©ä¸Šä¼ ,å¼€æºçš„githubåœ°å€ https://github.com/layerssss/paste.js/å¦‚æœéœ€è¦çš„è¯å¯ä»¥è¯•ç”¨æä¾›çš„å‹ç¼©å·¥å…·å¯¹base64è¿›è¡Œå‹ç¼©åä¸Šä¼ ,åœ¨è¿™è¾¹æ²¡å‹ç¼©çš„å›¾ç‰‡10M,å‹ç¼©å®Œ200KB,è¿˜æ˜¯æ¨èä¸€ç”¨ã€‚åˆå§‹åŒ–å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å®šä½ç¼–è¾‘å™¨çš„textarea divæ¡†,ä¸ºå…¶ç»‘å®špasteäº‹ä»¶è§£æç²˜è´´æ¿ä¸­çš„æ•°æ®,æ•°æ®æœ‰å¯èƒ½ä¸æ˜¯image,æ‰€ä»¥è¦åšåˆ¤æ–­è½¬æˆbase64ç¼–ç ï¼Œè·å–ä¸€ä¸ªå›¾å‹ç¼©å›¾ç‰‡ï¼Œå°è£…FormDataå¯¹è±¡ä½¿ç”¨ajaxæäº¤æ•°æ®åˆ°åå°å¤„ç†åå°è¿”å›ä¸Šä¼ åçš„å›¾ç‰‡è·¯å¾„ï¼Œè·¯å¾„å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„,ä½†å¿…é¡»æ˜¯åœ¨æµè§ˆå™¨çš„urlä¸­å¯ä»¥è®¿é—®çš„åœ¨ajax successå›è°ƒä¸­åŠ¨æ€ä¸ºç¼–è¾‘å™¨çš„textarea divæ¡†appendä¸€ä¸ªæ ‡ç­¾æ³¨æ„åˆå§‹åŒ–é‚£å—çš„ä»£ç ï¼Œæˆ‘è¿™é‡Œä¸šåŠ¡éœ€è¦åœ¨ä¸€ä¸ªé¡µé¢åˆå§‹åŒ–å¤šä¸ªEditor,æ‰€ä»¥æˆ‘å†™åœ¨å¾ªç¯é‡Œäº†,éœ€è¦æ ¹æ®ä»£ç ï¼Œç»“åˆè‡ªèº«ä¸šåŠ¡åšé€‚å½“ä¿®æ”¹ ä»£ç  workflow-collision.jsæˆ‘ä¸»è¦çš„ä¸šåŠ¡åœ¨è¿™ä¸ªjsé‡Œé¢123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160function initTextarea(nodes,createBy)&#123; var currentUserId = BimBdip.currentUserid; var divId = \"\"; var textId = \"\"; var E = window.wangEditor var menu1 = [ ]; if(gloubleVariable.status == '0' &amp;&amp; currentUserId == createBy || typeof(createBy) == 'undefined')&#123; menu1 = [ 'head', // æ ‡é¢˜ 'bold', // ç²—ä½“ 'italic', // æ–œä½“ 'underline', // ä¸‹åˆ’çº¿ 'strikeThrough', // åˆ é™¤çº¿ 'foreColor', // æ–‡å­—é¢œè‰² 'backColor', // èƒŒæ™¯é¢œè‰² 'list', // åˆ—è¡¨ 'justify', // å¯¹é½æ–¹å¼ 'emoticon', // è¡¨æƒ… 'image', // æ’å…¥å›¾ç‰‡ 'undo', // æ’¤é”€ ]; &#125; nodes.forEach((node,index)=&gt;&#123; divId = \"twoDimesional-div-\"+index; var editor = new E('#'+divId); textId = \"twoDimesional-text-\"+index; var $text = $('#' + textId); editor.customConfig.onchange = function (html) &#123; // ç›‘æ§å˜åŒ–ï¼ŒåŒæ­¥æ›´æ–°åˆ° textarea $text.val(html) &#125; editor.customConfig.uploadImgServer = publicJS.tomcat_url + '/workflow/uploadTwoDimesionalImgage.action'; editor.customConfig.uploadFileName = 'files'; editor.customConfig.menus = menu1; editor.create(); $text.val(editor.txt.html()); if(gloubleVariable.status == '0' &amp;&amp; workflowCollision.currentListName != 'handle' &amp;&amp; workflowCollision.currentListName != 'cc')&#123; editor.$textElem.attr('contenteditable', true); &#125;else&#123; editor.$textElem.attr('contenteditable', false); &#125; var selector = '.w-e-text:eq('+index+')'; var a = $(selector); // ä¸ºæ¯ä¸ªèŠ‚ç‚¹æ¡†æ·»åŠ ç²˜è´´äº‹ä»¶,ä¾èµ–paste.js copyBindEvent(a[0]); &#125;)&#125;/** * ç»‘å®šç²˜è´´äº‹ä»¶ * @param _targetéœ€è¦ç»‘å®šç²˜è´´äº‹ä»¶çš„jså¯¹è±¡ * @returns */function copyBindEvent(_target)&#123; _target.addEventListener('paste', function (event) &#123; workflowCollision.operateEditorTarget = _target; // è·å–æµè§ˆå™¨ç±»å‹ var broswerType = GetBrowserType(); if (broswerType == \"Chrome\") &#123; var clipboard = event.clipboardData; var blob = null; for (var i = 0; i &lt; event.clipboardData.items.length; i++) &#123; if (clipboard.items[i].type.indexOf(\"image\") != -1) &#123; blob = clipboard.items[i].getAsFile(); //è½¬æˆbase64ç¼–ç ï¼Œè·å–ä¸€ä¸ªå›¾ç‰‡ var reader = new window.FileReader(); reader.readAsDataURL(blob); reader.onloadend = function () &#123; // å‹ç¼©å›¾ç‰‡ discussCompress(reader.result); &#125; &#125; else if (clipboard.items[i].type.indexOf(\"html\") != -1) &#123; var html = $(event.clipboardData.getData(\"text/html\")); html.find(\"img\").each(function () &#123; var canvas = document.createElement(\"canvas\"); var context = canvas.getContext(\"2d\"); var img = document.createElement(\"img\"); var src = $(this).attr(\"src\"); var _this = this; img.src = src; var imageS = new Image(); context.drawImage(img, 0, 0, img.width, img.height); imageS.src = canvas.toDataURL(\"image/png\"); // å‹ç¼©å›¾ç‰‡ discussCompress(imageS.src); &#125;); &#125; &#125; &#125; //é˜»æ­¢é»˜è®¤ç²˜è´´äº‹ä»¶// event.originalEvent.preventDefault(); &#125;);&#125;// å›¾ç‰‡å‹ç¼©function discussCompress(base64code)&#123; var fd = new FormData(); //å‹ç¼©å›¾ç‰‡ compressImg(base64code,450,250,function(base64code)&#123; var blob = dataURLToBlob(base64code); if (blob !== null || blob !== undefined || blob !== '') &#123; fd.append(\"files\",blob); // ä¸Šä¼ æœåŠ¡å™¨ copyDoAjax(fd); &#125;else&#123; Dialog.alert(\"ä¸Šä¼ å›¾ç‰‡å¤±è´¥,è¯·é‡è¯•!\"); &#125; &#125;);&#125;/** * ä¸Šä¼ æœåŠ¡å™¨ * @param fd * @returns */function copyDoAjax(fd) &#123; var url = publicJS.tomcat_url + '/workflow/uploadTwoDimesionalImgage.action'; $.ajax(&#123; url:url, type:'POST', data:fd, processData:false, contentType:false, dataType : \"json\", //jsonp: \"jsonpCallBack\", success: function (data, status) &#123;//æ“ä½œæˆåŠŸåçš„æ“ä½œï¼dataæ˜¯åå°ä¼ è¿‡æ¥çš„å€¼ //console.log(\"ä¸Šä¼ å›¾ç‰‡æˆåŠŸ\"); //å¾€å¯Œæ–‡æœ¬æ¡†æ·»åŠ å›¾ç‰‡ &lt;img src=\"http://test-file.bimbdip.com/discuss/1522142071651.tmp\" style=\"max-width:100%;\"&gt; var html = `&lt;img src=\"$&#123;data.data&#125;\" style=\"max-width:100%;\"&gt;`; $(workflowCollision.operateEditorTarget).append(html); &#125;, error: function (xhr, textStatus, errorThrown) &#123; alert(\"ä¸Šä¼ å›¾ç‰‡å¤±è´¥\"); &#125; &#125;);&#125;// è·å–æµè§ˆå™¨ç±»å‹function GetBrowserType() &#123; var userAgent = navigator.userAgent; var isOpera = userAgent.indexOf(\"Opera\") &gt; -1; if (isOpera) &#123; return \"Opera\" &#125; ; //åˆ¤æ–­æ˜¯å¦Operaæµè§ˆå™¨ if (userAgent.indexOf(\"Firefox\") &gt; -1) &#123; return \"FF\"; &#125; //åˆ¤æ–­æ˜¯å¦Firefoxæµè§ˆå™¨ if (userAgent.indexOf(\"Chrome\") &gt; -1) &#123; return \"Chrome\"; &#125; if (userAgent.indexOf(\"Safari\") &gt; -1) &#123; return \"Safari\"; &#125; //åˆ¤æ–­æ˜¯å¦Safariæµè§ˆå™¨ return \"IE\";//å…¶ä»–çš„å°±å½“IEå§&#125; å‹ç¼©çš„ç›¸å…³åº“megapix-image.js å¼€æºåº“123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263/** * Mega pixel image rendering library for iOS6 Safari * * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel), * which causes unexpected subsampling when drawing it in canvas. * By using this library, you can safely render the image with proper stretching. * * Copyright (c) 2012 Shinichi Tomita &lt;shinichi.tomita@gmail.com&gt; * Released under the MIT license */(function() &#123; /** * Detect subsampling in loaded image. * In iOS, larger images than 2M pixels may be subsampled in rendering. */ function detectSubsampling(img) &#123; var iw = img.naturalWidth, ih = img.naturalHeight; if (iw * ih &gt; 1024 * 1024) &#123; // subsampling may happen over megapixel image var canvas = document.createElement('canvas'); canvas.width = canvas.height = 1; var ctx = canvas.getContext('2d'); ctx.drawImage(img, -iw + 1, 0); // subsampled image becomes half smaller in rendering size. // check alpha channel value to confirm image is covering edge pixel or not. // if alpha value is 0 image is not covering, hence subsampled. return ctx.getImageData(0, 0, 1, 1).data[3] === 0; &#125; else &#123; return false; &#125; &#125; /** * Detecting vertical squash in loaded image. * Fixes a bug which squash image vertically while drawing into canvas for some images. */ function detectVerticalSquash(img, iw, ih) &#123; var canvas = document.createElement('canvas'); canvas.width = 1; canvas.height = ih; var ctx = canvas.getContext('2d'); ctx.drawImage(img, 0, 0); var data = ctx.getImageData(0, 0, 1, ih).data; // search image edge pixel position in case it is squashed vertically. var sy = 0; var ey = ih; var py = ih; while (py &gt; sy) &#123; var alpha = data[(py - 1) * 4 + 3]; if (alpha === 0) &#123; ey = py; &#125; else &#123; sy = py; &#125; py = (ey + sy) &gt;&gt; 1; &#125; var ratio = (py / ih); return (ratio===0)?1:ratio; &#125; /** * Rendering image element (with resizing) and get its data URL */ function renderImageToDataURL(img, options, doSquash) &#123; var canvas = document.createElement('canvas'); renderImageToCanvas(img, canvas, options, doSquash); return canvas.toDataURL(\"image/jpeg\", options.quality || 0.8); &#125; /** * Rendering image element (with resizing) into the canvas element */ function renderImageToCanvas(img, canvas, options, doSquash) &#123; var iw = img.naturalWidth, ih = img.naturalHeight; if (!(iw+ih)) return; var width = options.width, height = options.height; var ctx = canvas.getContext('2d'); ctx.save(); transformCoordinate(canvas, ctx, width, height, options.orientation); var subsampled = detectSubsampling(img); if (subsampled) &#123; iw /= 2; ih /= 2; &#125; var d = 1024; // size of tiling canvas var tmpCanvas = document.createElement('canvas'); tmpCanvas.width = tmpCanvas.height = d; var tmpCtx = tmpCanvas.getContext('2d'); var vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1; var dw = Math.ceil(d * width / iw); var dh = Math.ceil(d * height / ih / vertSquashRatio); var sy = 0; var dy = 0; while (sy &lt; ih) &#123; var sx = 0; var dx = 0; while (sx &lt; iw) &#123; tmpCtx.clearRect(0, 0, d, d); tmpCtx.drawImage(img, -sx, -sy); ctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh); sx += d; dx += dw; &#125; sy += d; dy += dh; &#125; ctx.restore(); tmpCanvas = tmpCtx = null; &#125; /** * Transform canvas coordination according to specified frame size and orientation * Orientation value is from EXIF tag */ function transformCoordinate(canvas, ctx, width, height, orientation) &#123; switch (orientation) &#123; case 5: case 6: case 7: case 8: canvas.width = height; canvas.height = width; break; default: canvas.width = width; canvas.height = height; &#125; switch (orientation) &#123; case 2: // horizontal flip ctx.translate(width, 0); ctx.scale(-1, 1); break; case 3: // 180 rotate left ctx.translate(width, height); ctx.rotate(Math.PI); break; case 4: // vertical flip ctx.translate(0, height); ctx.scale(1, -1); break; case 5: // vertical flip + 90 rotate right ctx.rotate(0.5 * Math.PI); ctx.scale(1, -1); break; case 6: // 90 rotate right ctx.rotate(0.5 * Math.PI); ctx.translate(0, -height); break; case 7: // horizontal flip + 90 rotate right ctx.rotate(0.5 * Math.PI); ctx.translate(width, -height); ctx.scale(-1, 1); break; case 8: // 90 rotate left ctx.rotate(-0.5 * Math.PI); ctx.translate(-width, 0); break; default: break; &#125; &#125; var URL = window.URL &amp;&amp; window.URL.createObjectURL ? window.URL : window.webkitURL &amp;&amp; window.webkitURL.createObjectURL ? window.webkitURL : null; /** * MegaPixImage class */ function MegaPixImage(srcImage) &#123; if (window.Blob &amp;&amp; srcImage instanceof Blob) &#123; if (!URL) &#123; throw Error(\"No createObjectURL function found to create blob url\"); &#125; var img = new Image(); img.src = URL.createObjectURL(srcImage); this.blob = srcImage; srcImage = img; &#125; if (!srcImage.naturalWidth &amp;&amp; !srcImage.naturalHeight) &#123; var _this = this; srcImage.onload = srcImage.onerror = function() &#123; var listeners = _this.imageLoadListeners; if (listeners) &#123; _this.imageLoadListeners = null; for (var i=0, len=listeners.length; i&lt;len; i++) &#123; listeners[i](); &#125; &#125; &#125;; this.imageLoadListeners = []; &#125; this.srcImage = srcImage; &#125; /** * Rendering megapix image into specified target element */ MegaPixImage.prototype.render = function(target, options, callback) &#123; if (this.imageLoadListeners) &#123; var _this = this; this.imageLoadListeners.push(function() &#123; _this.render(target, options, callback); &#125;); return; &#125; options = options || &#123;&#125;; var imgWidth = this.srcImage.naturalWidth, imgHeight = this.srcImage.naturalHeight, width = options.width, height = options.height, maxWidth = options.maxWidth, maxHeight = options.maxHeight, doSquash = !this.blob || this.blob.type === 'image/jpeg'; if (width &amp;&amp; !height) &#123; height = (imgHeight * width / imgWidth) &lt;&lt; 0; &#125; else if (height &amp;&amp; !width) &#123; width = (imgWidth * height / imgHeight) &lt;&lt; 0; &#125; else &#123; width = imgWidth; height = imgHeight; &#125; if (maxWidth &amp;&amp; width &gt; maxWidth) &#123; width = maxWidth; height = (imgHeight * width / imgWidth) &lt;&lt; 0; &#125; if (maxHeight &amp;&amp; height &gt; maxHeight) &#123; height = maxHeight; width = (imgWidth * height / imgHeight) &lt;&lt; 0; &#125; var opt = &#123; width : width, height : height &#125;; for (var k in options) opt[k] = options[k]; var tagName = target.tagName.toLowerCase(); if (tagName === 'img') &#123; target.src = renderImageToDataURL(this.srcImage, opt, doSquash); &#125; else if (tagName === 'canvas') &#123; renderImageToCanvas(this.srcImage, target, opt, doSquash); &#125; if (typeof this.onrender === 'function') &#123; this.onrender(target); &#125; if (callback) &#123; callback(); &#125; if (this.blob) &#123; this.blob = null; URL.revokeObjectURL(this.srcImage.src); &#125; &#125;; /** * Export class to global */ if (typeof define === 'function' &amp;&amp; define.amd) &#123; define([], function() &#123; return MegaPixImage; &#125;); // for AMD loader &#125; else if (typeof exports === 'object') &#123; module.exports = MegaPixImage; // for CommonJS &#125; else &#123; this.MegaPixImage = MegaPixImage; &#125;&#125;)();compress-image.js å¯¹å¼€æºåº“åšäº†ç®€å•å°è£…12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576//************å‹ç¼©å›¾ç‰‡************************************************************/** * å‹ç¼©å›¾ç‰‡ * @param base64code //è¢«å‹ç¼©å›¾ç‰‡çš„base64ç¼–ç  * @param maxWidth //å‹ç¼©åå›¾ç‰‡æœ€å¤§å®½åº¦ * @param maxHeight //å‹ç¼©åå›¾ç‰‡çš„æœ€å¤§é«˜åº¦ * @param callback(dataUrl) å‹ç¼©å›è°ƒæ–¹æ³•,å‚æ•°ä¸ºå‹ç¼©åçš„urlï¼Œè‹¥å‹ç¼©å¤±è´¥ï¼Œåˆ™è¿”å›\"\"; * @returns */function compressImg(base64code,maxWidth,maxHeight,callback) &#123; //var base64code = \"\"; var image = new Image(); image.src = base64code; var dataURL = \"\"; imgLoad(image, function() &#123; //è§£å†³canvasæ— æ³•è¯»å–ç”»å¸ƒé—®é¢˜ image.setAttribute('crossOrigin', 'anonymous'); var mpImg = new MegaPixImage(image); //console.log('åŠ è½½å®Œæ¯•') var resCanvas2 =document.createElement(\"canvas\"); if(isIOS())&#123; mpImg.render(resCanvas2, &#123;maxWidth: maxWidth, maxHeight: maxHeight, orientation: 4&#125;); &#125;else&#123; mpImg.render(resCanvas2, &#123;maxWidth: maxWidth, maxHeight: maxHeight, orientation: 0&#125;); &#125; dataURL = resCanvas2.toDataURL(\"image/jpeg\"); callback(dataURL); &#125;); // return dataURL;&#125;function imgLoad(img, callback) &#123; var timer = setInterval(function() &#123; if (img.complete) &#123; callback(img) clearInterval(timer) &#125; &#125;, 50)&#125;//********************************************************************************************function isIOS()&#123; var userAgentInfo = navigator.userAgent; var Agents = new Array(\"iPhone\",\"iPad\", \"iPod\"); /*\"Android\", */ var flag = false; var v=0 for ( v = 0; v &lt; Agents.length; v++)&#123; if (userAgentInfo.indexOf(Agents[v]) &gt; 0) &#123; flag = true; break; &#125; &#125; return flag;&#125;//********************************************************************************************function dataURLToBlob(dataURL) &#123; var BASE64_MARKER = ';base64,'; var parts, contentType, raw; if (dataURL.indexOf(BASE64_MARKER) == -1) &#123; parts = dataURL.split(','); contentType = parts[0].split(':')[1]; raw = decodeURIComponent(parts[1]); return new Blob([raw], &#123;type: contentType&#125;); &#125; parts = dataURL.split(BASE64_MARKER); contentType = parts[0].split(':')[1]; raw = window.atob(parts[1]); var rawLength = raw.length; var uInt8Array = new Uint8Array(rawLength); for (var i = 0; i &lt; rawLength; ++i) &#123; uInt8Array[i] = raw.charCodeAt(i); &#125; return new Blob([uInt8Array], &#123;type: contentType&#125;);&#125; ç²˜è´´åº“paste.js å¼€æºé¡¹ç›®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390// æºåœ°å€ https://github.com/layerssss/paste.js/(function() &#123; var $, Paste, createHiddenEditable, dataURLtoBlob, isFocusable; $ = window.jQuery; $.paste = function(pasteContainer) &#123; var pm; if (typeof console !== \"undefined\" &amp;&amp; console !== null) &#123; console.log(\"DEPRECATED: This method is deprecated. Please use $.fn.pastableNonInputable() instead.\"); &#125; pm = Paste.mountNonInputable(pasteContainer); return pm._container; &#125;; $.fn.pastableNonInputable = function() &#123; var el, j, len, ref; ref = this; for (j = 0, len = ref.length; j &lt; len; j++) &#123; el = ref[j]; if (el._pastable || $(el).is('textarea, input:text, [contenteditable]')) &#123; continue; &#125; Paste.mountNonInputable(el); el._pastable = true; &#125; return this; &#125;; $.fn.pastableTextarea = function() &#123; var el, j, len, ref; ref = this; for (j = 0, len = ref.length; j &lt; len; j++) &#123; el = ref[j]; if (el._pastable || $(el).is(':not(textarea, input:text)')) &#123; continue; &#125; Paste.mountTextarea(el); el._pastable = true; &#125; return this; &#125;; $.fn.pastableContenteditable = function() &#123; var el, j, len, ref; ref = this; for (j = 0, len = ref.length; j &lt; len; j++) &#123; el = ref[j]; if (el._pastable || $(el).is(':not([contenteditable])')) &#123; continue; &#125; Paste.mountContenteditable(el); el._pastable = true; &#125; return this; &#125;; dataURLtoBlob = function(dataURL, sliceSize) &#123; var b64Data, byteArray, byteArrays, byteCharacters, byteNumbers, contentType, i, m, offset, ref, slice; if (sliceSize == null) &#123; sliceSize = 512; &#125; if (!(m = dataURL.match(/^data\\:([^\\;]+)\\;base64\\,(.+)$/))) &#123; return null; &#125; ref = m, m = ref[0], contentType = ref[1], b64Data = ref[2]; byteCharacters = atob(b64Data); byteArrays = []; offset = 0; while (offset &lt; byteCharacters.length) &#123; slice = byteCharacters.slice(offset, offset + sliceSize); byteNumbers = new Array(slice.length); i = 0; while (i &lt; slice.length) &#123; byteNumbers[i] = slice.charCodeAt(i); i++; &#125; byteArray = new Uint8Array(byteNumbers); byteArrays.push(byteArray); offset += sliceSize; &#125; return new Blob(byteArrays, &#123; type: contentType &#125;); &#125;; createHiddenEditable = function() &#123; return $(document.createElement('div')).attr('contenteditable', true).attr('aria-hidden', true).attr('tabindex', -1).css(&#123; width: 1, height: 1, position: 'fixed', left: -100, overflow: 'hidden' &#125;); &#125;; isFocusable = function(element, hasTabindex) &#123; var fieldset, focusableIfVisible, img, map, mapName, nodeName; map = void 0; mapName = void 0; img = void 0; focusableIfVisible = void 0; fieldset = void 0; nodeName = element.nodeName.toLowerCase(); if ('area' === nodeName) &#123; map = element.parentNode; mapName = map.name; if (!element.href || !mapName || map.nodeName.toLowerCase() !== 'map') &#123; return false; &#125; img = $('img[usemap=\\'#' + mapName + '\\']'); return img.length &gt; 0 &amp;&amp; img.is(':visible'); &#125; if (/^(input|select|textarea|button|object)$/.test(nodeName)) &#123; focusableIfVisible = !element.disabled; if (focusableIfVisible) &#123; fieldset = $(element).closest('fieldset')[0]; if (fieldset) &#123; focusableIfVisible = !fieldset.disabled; &#125; &#125; &#125; else if ('a' === nodeName) &#123; focusableIfVisible = element.href || hasTabindex; &#125; else &#123; focusableIfVisible = hasTabindex; &#125; focusableIfVisible = focusableIfVisible || $(element).is('[contenteditable]'); return focusableIfVisible &amp;&amp; $(element).is(':visible'); &#125;; Paste = (function() &#123; Paste.prototype._target = null; Paste.prototype._container = null; Paste.mountNonInputable = function(nonInputable) &#123; var paste; paste = new Paste(createHiddenEditable().appendTo(nonInputable), nonInputable); $(nonInputable).on('click', (function(_this) &#123; return function(ev) &#123; if (!isFocusable(ev.target, false)) &#123; return paste._container.focus(); &#125; &#125;; &#125;)(this)); paste._container.on('focus', (function(_this) &#123; return function() &#123; return $(nonInputable).addClass('pastable-focus'); &#125;; &#125;)(this)); return paste._container.on('blur', (function(_this) &#123; return function() &#123; return $(nonInputable).removeClass('pastable-focus'); &#125;; &#125;)(this)); &#125;; Paste.mountTextarea = function(textarea) &#123; var ctlDown, paste, ref, ref1; if ((typeof DataTransfer !== \"undefined\" &amp;&amp; DataTransfer !== null ? DataTransfer.prototype : void 0) &amp;&amp; ((ref = Object.getOwnPropertyDescriptor) != null ? (ref1 = ref.call(Object, DataTransfer.prototype, 'items')) != null ? ref1.get : void 0 : void 0)) &#123; return this.mountContenteditable(textarea); &#125; paste = new Paste(createHiddenEditable().insertBefore(textarea), textarea); ctlDown = false; $(textarea).on('keyup', function(ev) &#123; var ref2; if ((ref2 = ev.keyCode) === 17 || ref2 === 224) &#123; ctlDown = false; &#125; return null; &#125;); $(textarea).on('keydown', function(ev) &#123; var ref2; if ((ref2 = ev.keyCode) === 17 || ref2 === 224) &#123; ctlDown = true; &#125; if ((ev.ctrlKey != null) &amp;&amp; (ev.metaKey != null)) &#123; ctlDown = ev.ctrlKey || ev.metaKey; &#125; if (ctlDown &amp;&amp; ev.keyCode === 86) &#123; paste._textarea_focus_stolen = true; paste._container.focus(); paste._paste_event_fired = false; setTimeout((function(_this) &#123; return function() &#123; if (!paste._paste_event_fired) &#123; $(textarea).focus(); return paste._textarea_focus_stolen = false; &#125; &#125;; &#125;)(this), 1); &#125; return null; &#125;); $(textarea).on('paste', (function(_this) &#123; return function() &#123;&#125;; &#125;)(this)); $(textarea).on('focus', (function(_this) &#123; return function() &#123; if (!paste._textarea_focus_stolen) &#123; return $(textarea).addClass('pastable-focus'); &#125; &#125;; &#125;)(this)); $(textarea).on('blur', (function(_this) &#123; return function() &#123; if (!paste._textarea_focus_stolen) &#123; return $(textarea).removeClass('pastable-focus'); &#125; &#125;; &#125;)(this)); $(paste._target).on('_pasteCheckContainerDone', (function(_this) &#123; return function() &#123; $(textarea).focus(); return paste._textarea_focus_stolen = false; &#125;; &#125;)(this)); return $(paste._target).on('pasteText', (function(_this) &#123; return function(ev, data) &#123; var content, curEnd, curStart; curStart = $(textarea).prop('selectionStart'); curEnd = $(textarea).prop('selectionEnd'); content = $(textarea).val(); $(textarea).val(\"\" + content.slice(0, curStart) + data.text + content.slice(curEnd)); $(textarea)[0].setSelectionRange(curStart + data.text.length, curStart + data.text.length); return $(textarea).trigger('change'); &#125;; &#125;)(this)); &#125;; Paste.mountContenteditable = function(contenteditable) &#123; var paste; paste = new Paste(contenteditable, contenteditable); $(contenteditable).on('focus', (function(_this) &#123; return function() &#123; return $(contenteditable).addClass('pastable-focus'); &#125;; &#125;)(this)); return $(contenteditable).on('blur', (function(_this) &#123; return function() &#123; return $(contenteditable).removeClass('pastable-focus'); &#125;; &#125;)(this)); &#125;; function Paste(_container, _target) &#123; this._container = _container; this._target = _target; this._container = $(this._container); this._target = $(this._target).addClass('pastable'); this._container.on('paste', (function(_this) &#123; return function(ev) &#123; var clipboardData, file, item, j, k, len, len1, reader, ref, ref1, ref2, ref3, text; if (ev.currentTarget !== ev.target) &#123; return ev.preventDefault(); &#125; _this._paste_event_fired = true; if (((ref = ev.originalEvent) != null ? ref.clipboardData : void 0) != null) &#123; clipboardData = ev.originalEvent.clipboardData; if (clipboardData.items) &#123; ref1 = clipboardData.items; for (j = 0, len = ref1.length; j &lt; len; j++) &#123; item = ref1[j]; if (item.type.match(/^image\\//)) &#123; reader = new FileReader(); reader.onload = function(event) &#123; return _this._handleImage(event.target.result); &#125;; try &#123; reader.readAsDataURL(item.getAsFile()); &#125; catch (error) &#123;&#125; ev.preventDefault(); break; &#125; if (item.type === 'text/plain') &#123; item.getAsString(function(string) &#123; return _this._target.trigger('pasteText', &#123; text: string &#125;); &#125;); &#125; &#125; &#125; else &#123; if (-1 !== Array.prototype.indexOf.call(clipboardData.types, 'text/plain')) &#123; text = clipboardData.getData('Text'); setTimeout(function() &#123; return _this._target.trigger('pasteText', &#123; text: text &#125;); &#125;, 1); &#125; _this._checkImagesInContainer(function(src) &#123; return _this._handleImage(src); &#125;); &#125; &#125; if (clipboardData = window.clipboardData) &#123; if ((ref2 = (text = clipboardData.getData('Text'))) != null ? ref2.length : void 0) &#123; setTimeout(function() &#123; _this._target.trigger('pasteText', &#123; text: text &#125;); return _this._target.trigger('_pasteCheckContainerDone'); &#125;, 1); &#125; else &#123; ref3 = clipboardData.files; for (k = 0, len1 = ref3.length; k &lt; len1; k++) &#123; file = ref3[k]; _this._handleImage(URL.createObjectURL(file)); &#125; _this._checkImagesInContainer(function(src) &#123;&#125;); &#125; &#125; return null; &#125;; &#125;)(this)); &#125; Paste.prototype._handleImage = function(src) &#123; var loader; if (src.match(/^webkit\\-fake\\-url\\:\\/\\//)) &#123; return this._target.trigger('pasteImageError', &#123; message: \"You are trying to paste an image in Safari, however we are unable to retieve its data.\" &#125;); &#125; loader = new Image(); loader.crossOrigin = \"anonymous\"; loader.onload = (function(_this) &#123; return function() &#123; var blob, canvas, ctx, dataURL; canvas = document.createElement('canvas'); canvas.width = loader.width; canvas.height = loader.height; ctx = canvas.getContext('2d'); ctx.drawImage(loader, 0, 0, canvas.width, canvas.height); dataURL = null; try &#123; dataURL = canvas.toDataURL('image/png'); blob = dataURLtoBlob(dataURL); &#125; catch (error) &#123;&#125; if (dataURL) &#123; return _this._target.trigger('pasteImage', &#123; blob: blob, dataURL: dataURL, width: loader.width, height: loader.height &#125;); &#125; &#125;; &#125;)(this); loader.onerror = (function(_this) &#123; return function() &#123; return _this._target.trigger('pasteImageError', &#123; message: \"Failed to get image from: \" + src, url: src &#125;); &#125;; &#125;)(this); return loader.src = src; &#125;; Paste.prototype._checkImagesInContainer = function(cb) &#123; var img, j, len, ref, timespan; timespan = Math.floor(1000 * Math.random()); ref = this._container.find('img'); for (j = 0, len = ref.length; j &lt; len; j++) &#123; img = ref[j]; img[\"_paste_marked_\" + timespan] = true; &#125; return setTimeout((function(_this) &#123; return function() &#123; var k, len1, ref1; ref1 = _this._container.find('img'); for (k = 0, len1 = ref1.length; k &lt; len1; k++) &#123; img = ref1[k]; if (!img[\"_paste_marked_\" + timespan]) &#123; cb(img.src); $(img).remove(); &#125; &#125; return _this._target.trigger('_pasteCheckContainerDone'); &#125;; &#125;)(this), 1); &#125;; return Paste; &#125;)();&#125;).call(this);","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"yihao.ml/categories/å‰ç«¯/"}],"tags":[{"name":"Editor","slug":"Editor","permalink":"yihao.ml/tags/Editor/"}]},{"title":"Java workflow","slug":"2018-03-22-workflow-Java  workflow","date":"2018-03-22T00:00:00.000Z","updated":"2019-11-29T12:20:47.657Z","comments":true,"path":"2018/03/22/2018-03-22-workflow-Java  workflow/","link":"","permalink":"yihao.ml/2018/03/22/2018-03-22-workflow-Java  workflow/","excerpt":"","text":"æœ€è¿‘ä¸€ç›´è¢«å·¥ä½œæµçº ç¼ è¿™ï¼Œæµªè´¹äº†å¾ˆå¤šæ—¶é—´ã€‚å¯¹äºä¸€ä¸ªæµç¨‹çš„å¼€å‘ï¼Œå®Œå…¨å¯ä»¥æ‰‹åŠ¨å†™ä¸€ä¸ªï¼Œä½•å¿…è¦ä½¿ç”¨æ¡†æ¶æ¥å®Œæˆè¿™ä»¶äº‹æƒ…å‘¢ï¼Ÿå¼€å§‹æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œä½†æ˜¯è‡ªæ‰“æˆ‘å°è¯•äº†ä¹‹åæ‰å‘ç°ï¼Œè¿™å…¶å®å¹¶ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ã€‚ä¸‹é¢æ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°äº†å„ç§å„æ ·çš„å›°éš¾ï¼Œåšä¸€ä¸ªæ€»ç»“ 1.æµç¨‹ä¸šåŠ¡æè¿°A --&gt; å‘èµ·ç¢°æ’æŠ¥å‘ŠæŠ¥è¡¨ -&gt; B --&gt; å¯¹æŠ¥è¡¨è¿›è¡Œå®¡æ‰¹ --&gt; A --&gt; ç¡®è®¤å½’æ¡£ 2.ç”Ÿäº§æ¯ä¸ªæ´»åŠ¨ç‚¹éƒ½éœ€è¦å¼€å‘äº¤äº’ç•Œé¢ã€å¤„ç†ç›¸å…³ä¸šåŠ¡é€»è¾‘åœ¨å½“å‰æ´»åŠ¨ç‚¹ç¡¬æ€§åˆ¤æ–­ä¸‹ä¸€æ´»åŠ¨ç‚¹å’Œç›¸åº”çš„æ“ä½œäººæ¯æ¬¡æ“ä½œéƒ½è¦ç»´æŠ¤ä¸šåŠ¡ã€æµç¨‹ã€æµè½¬çš„æ•°æ® 3.ç»“æœæ¢³ç†åå°å„ç§ä¸šåŠ¡é€»è¾‘ã€ç»´æŠ¤æ•°æ®æ›´æ–°ä»¥åŠç¼–å†™å„ä¸ªäº¤äº’ç•Œé¢ï¼Œä½¿æµç¨‹çš„å¼€å‘éš¾åº¦æå‡äº†ä¸å°‘ã€‚å¯¼è‡´å¼€å‘å‘¨æœŸé•¿ï¼Œæ— æ³•æ»¡è¶³é¢„æœŸç›®æ ‡ã€‚ 4.å¼€æºæ¡†æ¶é’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼Œå¸‚é¢ä¸Šäº†è§£æœ‰å…­æ¬¾Java Workflow å·¥ä½œæµæ¡†æ¶OBEã€Sharkã€OSWorkflowã€JBPMã€YAWLã€Bossaã€‚ ä½¿ç”¨æ¡†æ¶çš„å¥½å¤„ç»´æŠ¤æµç¨‹ã€æµè½¬ç­‰æ•°æ®å˜å¾—å¾ˆå®¹æ˜“æ¡†æ¶æä¾›äº†æµç¨‹æµè½¬æ¨¡å‹è®¾è®¡å·¥å…·é¿å…å®šæ­»æµç¨‹äº§ç”Ÿçš„ç¡¬ç¼–ç é™ä½å¼€å‘é£é™©ï¼Œæé«˜å¼€å‘é€Ÿåº¦æé«˜è¿­ä»£å¼€å‘çš„æ”¯æŒæä¾›åå°APIï¼Œæ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œåº”å¯¹å„ç§éœ€æ±‚å˜æ›´æ·±å…¥äº†è§£å„ç§å¼€æºæ¡†æ¶ http://blog.csdn.net/SAM_XIE_52/article/details/79362080","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"ubuntu16.04TLS tarç³»ç»Ÿæ•´æœºå¤‡ä»½åŠæ¢å¤","slug":"2018-03-20-ubuntu-ubuntu16.04TLS tarç³»ç»Ÿå¤‡ä»½æ¢å¤","date":"2018-03-20T00:00:00.000Z","updated":"2019-11-29T12:20:47.656Z","comments":true,"path":"2018/03/20/2018-03-20-ubuntu-ubuntu16.04TLS tarç³»ç»Ÿå¤‡ä»½æ¢å¤/","link":"","permalink":"yihao.ml/2018/03/20/2018-03-20-ubuntu-ubuntu16.04TLS tarç³»ç»Ÿå¤‡ä»½æ¢å¤/","excerpt":"","text":"è€å®è¯´ï¼Œå¤‡ä»½æ˜¯ç³»ç»ŸæŸæ¯æ—¶çš„æ•‘æ˜Ÿã€‚äº‹å®ä¸Šï¼Œæ²¡æœ‰äººå¸Œæœ›è‡ªå·±çš„ç³»ç»ŸæŸåï¼Œå¾€å¾€ç”±äºä¸é¢„æœŸçš„ä¼¤å®³å¯¼è‡´ç³»ç»Ÿå‘ç”Ÿé”™è¯¯ï¼Œæ¯”å¦‚ä¹‹å‰æˆ‘æƒ³åœ¨ç”µè„‘ä¸Šå¸è½½ä¸€ä¸ªä¾èµ–åŒ…ï¼Œç»“æœå¸è½½ä»¥åï¼Œç³»ç»Ÿå¯¼è‡´ä¸èƒ½æ­£å¸¸å¯åŠ¨ã€‚ä¸ç”¨æ…Œï¼Œæ’ä¸Šç¡¬ç›˜ï¼Œæ‰§è¡Œä¸€æ¡å‘½ä»¤ç”µè„‘å°±æ¢å¤æ­£å¸¸äº†ï¼æ­£æ˜¯å› ä¸ºè®¡ç®—æœºæ˜¯ä¸ªç›¸å½“ä¸å¯é çš„æœºå™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ—¶å¸¸å¯¹å®ƒè¿›è¡Œå¤‡ä»½ï¼Œè¿›è€Œæ¥é¢„é˜²ä¸æµ‹ã€‚ é¢„è¨€linuxæ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨taræ¥å¤‡ä»½ã€‚å¤‡ä»½ä¹‹å‰é¦–å…ˆè¦äº†è§£å“ªäº›æ˜¯æˆ‘ä»¬éœ€è¦å¤‡ä»½çš„æ•°æ®ï¼Œå“ªäº›æ˜¯æˆ‘ä»¬ä¸éœ€è¦å¤‡ä»½çš„æ•°æ®ã€‚ æ’é™¤çš„æ–‡ä»¶ä¸‹é¢è¿™äº›æ–‡ä»¶æ˜¯æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘å¤‡ä»½çš„æ–‡ä»¶12345678910111213/proc/tmp/mnt/dev/sys/run /media /var/log #æ—¥å¿—æ–‡ä»¶/var/cache/apt/archives #aptä¸‹è½½çš„ä»»ä½•.debæ–‡ä»¶/usr/src/linux-headers*/home/*/.gvfs/home/*/.cache/home/*/.local/share/Trash éœ€è¦å¤‡ä»½çš„æ–‡ä»¶ä¸‹é¢è¿™äº›æ–‡ä»¶æ˜¯æˆ‘ä»¬éœ€è¦è€ƒè™‘å¤‡ä»½çš„æ–‡ä»¶12345678/etc/home/var/spool/mail/boot//root#è‡ªå·±å®‰è£…è¿‡çš„å¥—ä»¶ä¼šå­˜æ”¾åœ¨/user/localå’Œ/optæ‰€ä»¥ä»–ä¿©ä¹Ÿå¤‡ä»½/user/local/opt å®Œæ•´å¤‡ä»½ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½ï¼Œè¿›å…¥åˆ°æ ¹ç›®å½•ä¸‹è¿è¡Œtarå‘½ä»¤è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬ä¸‰æ¡å‘½ä»¤ä¸æ˜¯æ­»çš„ï¼Œä½ è¦çµå»ä¿®æ”¹ï¼Œå‡å¦‚ä½ æŠŠå¤‡ä»½çš„æ–‡ä»¶æ”¾åœ¨äº†æ ¹ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨tarçš„å‘½ä»¤é‡Œé¢è¦å†åŠ ä¸Šä¸€å¥ --exclude=/å¤‡ä»½çš„æ–‡ä»¶åä¸Šé¢è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬å¤‡ä»½è¿‡çš„æ–‡ä»¶ä¹Ÿæ˜¯è¦æ’é™¤çš„ã€‚å¦‚æœå¿˜äº†è¿™ä¸€ç‚¹å¯èƒ½ä¼šå¤‡ä»½å¤±è´¥ï¼Œæˆ‘ä¸ºä»€ä¹ˆæ²¡æœ‰åŠ ï¼Œæ˜¯å› ä¸ºæŠŠå¤‡ä»½æ–‡ä»¶æ”¾åœ¨/mediaç›®å½•ä¸‹äº†.å¯èƒ½æ˜¯å› ä¸ºç•Œé¢æ ·å¼é—®é¢˜ -- æœ‰ç‚¹åƒ - Orz$ sudo su$ cd /1tar --exclude=/home/zyh/Pictures/* --exclude=/proc --exclude=/tmp --exclude=/mnt --exclude=/dev --exclude=/sys --exclude=/run --exclude=/media --exclude=/var/log --exclude=/var/cache/apt/archives --exclude=/usr/src/linux-headers* --exclude=/home/*/.gvfs --exclude=/home/*/.cache --exclude=/home/*/.local/share/Trash -jcvp -f /media/zyh/software/ubuntubackup/system.tar.bz2 /â€“exclude å°†ä¼šæ’é™¤æ‰æˆ‘ä»¬ä¸å¸Œæœ›å¤‡ä»½çš„å†…å®¹-j å‹ç¼©ä¸ºbz2 èƒ½æœ‰ä¸€ä¸ªæ›´å¥½çš„å‹ç¼©æ¯”æœ€å-f /media/zyh/software/ubuntubackup/system.tar.bz2 æ˜¯æˆ‘ä»¬è¦å¤‡ä»½åˆ°å“ªä¸ªç›®å½•ä»¥åŠæ–‡ä»¶åå­—ï¼Œåé¢çš„/è¡¨ç¤ºå‹ç¼©ç›®å½•ä»æ ¹ç›®å½•å¼€å§‹ æ¢å¤æ³¨æ„ï¼šæ¢å¤æ“ä½œå¾ˆå±é™©ï¼Œå¦‚æœä½ ä¸çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆï¼Œå°†å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿæ•°æ®ä¸¢å¤±ï¼æˆ‘ä»¬å°†å¤‡ä»½å¥½çš„system.tar.bz2æ–‡ä»¶è§£å‹åˆ°æ ¹ç›®å½•$ cd /media/zyh/software/ubuntubackup/$ tar -jxvf system.tar.bz2 -C /-j ç±»å‹ä¸ºbz2-x è§£å‹-v æ˜¾ç¤ºè§£å‹è¿‡ç¨‹-f ä½¿ç”¨æ¡£åï¼Œè¯·ç•™æ„ï¼Œåœ¨ f ä¹‹åè¦ç«‹å³æ¥æ¡£åé€šå¸¸æˆ‘ä»¬æŠŠfæ”¾åœ¨æœ€åå‚è€ƒblog:https://help.ubuntu.com/community/BackupYourSystem/TAR#Alternate_backupå‚è€ƒblog:http://linux.vbird.org/linux_basic/0580backup.php","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"yihao.ml/tags/Ubuntu/"}]},{"title":"Ubuntu 16.04TLS å®‰è£…æœ€æ–°ç‰ˆVMware14.1.1","slug":"2018-03-18-ubuntu-å®‰è£…è™šæ‹ŸæœºVMware","date":"2018-03-18T00:00:00.000Z","updated":"2019-11-29T12:20:47.656Z","comments":true,"path":"2018/03/18/2018-03-18-ubuntu-å®‰è£…è™šæ‹ŸæœºVMware/","link":"","permalink":"yihao.ml/2018/03/18/2018-03-18-ubuntu-å®‰è£…è™šæ‹ŸæœºVMware/","excerpt":"","text":"ç”±äºæœ€è¿‘æ­å»ºé›†ç¾¤éœ€è¦è™šæ‹Ÿæœº,æ¥å®‰è£…VMwareæ•ˆæœå›¾: æœ¬æœºç¯å¢ƒæœ¬æœºä½¿ç”¨çš„æ˜¯ubuntu16.04 TLS 64ç‰ˆ,åœ¨æœ¬æœºä¸Šå®‰è£…è¿‡ç¨‹æ— ä»»ä½•é—®é¢˜(ä»…é™æœ¬æœº) 1.ä¸‹è½½æ³¨å†Œè¿‡å¸å·ä»¥åè¿›å…¥è¿™ä¸ªé“¾æ¥https://my.vmware.com/cn/group/vmware/details?downloadGroup=WKST-1411-LX&amp;productId=686&amp;download=true&amp;fileId=cd30e7c2359a3dc1a5e1b1d1b17727b9&amp;secureParam=d7a9ad9d3128741ea1642469b8d12b95&amp;uuId=1c8d56a7-02ad-4d06-9964-a4ab7419388c&amp;downloadType=ä¸‹è½½çš„ç‰ˆæœ¬VMware-Workstation-Full-14.1.1-7528167.x86_64.bundle 2.ç ´è§£ç ç‰ˆæœ¬VMware-Workstation-Full-14.1.1-7528167.x86_64.bundleçš„ç ´è§£ç ï¼šVF19H-8YY5L-48DQY-JEWNG-YPKF6è·å¾—ç ´è§£ç çš„åœ°å€ï¼šhttp://beikeit.com/post-513.html 3.å®‰è£…*.bundle æ–‡ä»¶æ¯”è¾ƒç‰¹æ®Šï¼Œåªæœ‰åœ¨ç»™å®ƒäº†æ‰§è¡Œæƒé™åæ‰èƒ½æ‰§è¡Œå®‰è£…æ“ä½œã€‚æ‰€ä»¥å®‰è£…çš„ç¬¬ä¸€æ­¥å°±æ˜¯ç»™ *.bundle æ–‡ä»¶æ·»åŠ æ‰§è¡Œæƒé™ã€‚ä»‹ç»ä¸¤ç§æ–¹æ³•ï¼š1.åœ¨ *.bundle æ–‡ä»¶ä¸Šå³å‡»é¼ æ ‡ï¼Œé€‰æ‹©æœ€åä¸€é¡¹â€œå±æ€§â€ é€‰é¡¹ï¼Œåœ¨å¼¹å‡ºçš„â€œå±æ€§â€çª—å£ä¸­é€‰æ‹©â€œæƒé™â€é€‰é¡¹å¡ï¼Œåœ¨è¯¥é€‰é¡¹å¡ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æœ‰â€œå…è®¸ä»¥ç¨‹åºæ‰§è¡Œæ–‡ä»¶â€çš„é€‰é¡¹ï¼ŒæŠŠå®ƒé€‰ä¸Šï¼Œå¦‚å›¾ï¼š2.å¦ä¸€ç§æ–¹æ³•å°±æ˜¯åœ¨ç»ˆç«¯ç”¨å‘½ä»¤ç»™ bundle æ–‡ä»¶æ·»åŠ æ‰§è¡Œæƒé™ã€‚æ‰“å¼€ç»ˆç«¯(å¿«æ·é”®ä¸º Ctrl+Alt+T )ï¼Œæ‰“å¼€ç»ˆç«¯åï¼Œè¿›å…¥ bundle æ–‡ä»¶æ‰€åœ¨ç›®å½•(ä¾¿äºæ“ä½œ)ï¼Œç„¶åç”¨ä»¥ä¸‹å‘½ä»¤ç»™ bundle æ–‡ä»¶æ·»åŠ æ‰§è¡Œæƒé™ï¼š$ sudo chmod +x *.bundleå›è½¦ï¼Œè¾“å…¥ç”¨æˆ·å¯†ç ï¼Œè¿™æ ·å°±ç»™ bundle æ–‡ä»¶æ·»åŠ äº†æ‰§è¡Œæƒé™äº†ã€‚åœ¨å‘½ä»¤è¡Œè¿è¡Œ*.bundleè¿›è¡Œå®‰è£…$ sudo ./*.bundle 4.é…ç½®VMware vmnet0ã€vmnet1å’Œvmnet8å¼€å§‹å› ä¸ºæ²¡æœ‰é…ç½®è¿™ä¸ª,å¯¼è‡´ipä¸èƒ½åˆ†é…,ä¸»æœºä¸èƒ½pingé€šè™šæ‹Ÿæœºä¸­çš„èŠ‚ç‚¹ã€‚ï¼ˆæ³¨æ„ï¼šå‡å¦‚ä½ åœ¨å®‰è£…CenOSæ—¶é€‰ç”¨çš„æ˜¯æ¡¥æ¥è€ŒéNATç±»å‹ï¼Œå¯ä»¥å¿½ç•¥,ä½ å¯ä»¥ç›´æ¥è·³è½¬åˆ°ç¬¬6ç›´æ¥é…ç½®æ–‡ä»¶åé‡å¯ç½‘å¡,çœ‹çœ‹èƒ½å¦æˆåŠŸã€‚ï¼‰ä¸‰è€…çš„åŒºåˆ«å‚è€ƒåšæ–‡:http://blog.csdn.net/guizaijianchic/article/details/72190394è¿›å…¥ç¼–è¾‘-&gt;è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ é…ç½®VMware vmnet0ã€vmnet1å’Œvmnet8ä¸‹å›¾æ˜¯ä¸»æœºé…ç½®ï¼Œæ³¨æ„æˆ‘ä¸»æœºçš„ipæ˜¯192.168.100.110$ ifconfig1.vmnet0ä½¿ç”¨æ¡¥æ¥é“¾æ¥æ–¹å¼,åŸºæœ¬ä¸Šä¸ç”¨åŠ¨,ä¸‹å›¾æ˜¯æˆ‘æœ¬æœºçš„é…ç½®:2.vmnet1ä½¿ç”¨å®¿ä¸»é“¾æ¥æ–¹å¼,éœ€è¦ä¿®æ”¹çš„æ˜¯å­ç½‘å’Œå­ç½‘æ©ç ï¼Œå¹¶ä½¿ç”¨DHCPåˆ†é…æ¨¡å¼,ä¸‹å›¾æ˜¯æˆ‘æœ¬æœºçš„é…ç½®:3.vmnet8ä½¿ç”¨NATé“¾æ¥æ–¹å¼,éœ€è¦ä¿®æ”¹çš„æ˜¯å­ç½‘å’Œå­ç½‘æ©ç ,å¹¶ä½¿ç”¨DHCPåˆ†é…æ¨¡å¼ï¼Œä¸‹å›¾æ˜¯æˆ‘æœ¬æœºçš„é…ç½®:æ‰“å¼€ç½‘ç»œè®¾ç½®.å¯ä»¥æŸ¥çœ‹é‡Œé¢çš„ç½‘å…³å‚è€ƒblog:http://blog.csdn.net/w20228396/article/details/77507908å’Œhttp://blog.csdn.net/didi8206050/article/details/51872682 5.å®‰è£…CentOS minimalé•œåƒè‡ªå·±å»ç½‘ä¸Šä¸‹è½½å¥½äº†å®‰è£…è¿‡ç¨‹é™¤äº†åœ¨é€‰æ‹©ç½‘ç»œé‚£é‡Œé€‰æ‹©æ¡¥æ¥ç±»å‹ä»¥å¤–å…¶ä»–å…¨éƒ¨å¯ä»¥é»˜è®¤ã€‚å‚è€ƒblog:http://blog.csdn.net/capricorn90/article/details/52476228 6.é…ç½®ç½‘ç»œ(æ‰‹åŠ¨)å¦‚æœå®‰è£…è¿‡åå‘ç°ä¸èƒ½ä¸Šç½‘ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦æ‰‹åŠ¨é…ç½®ç½‘ç»œäº†ï¼Œåœ¨è¿™é‡Œæˆ‘ç¢°åˆ°çš„æ˜¯è™šæ‹Ÿç½‘å¡æ²¡æœ‰è®¾ç½®ip,è§£å†³åŠæ³•ï¼šè¡¥å……ï¼šå¦‚æœä½ å‘ç°ä½ è¿çš„ifconfigéƒ½ä¸èƒ½ç”¨,å¯ä»¥ä½¿ç”¨ip addræŸ¥çœ‹ç›¸åº”ä¿¡æ¯:æ‰“å¼€/etc/systemconfig/network-scripts/ifcfg-eth0ï¼Œç„¶ååœ¨é‡Œé¢åŠ ä¸Šå¦‚ä¸‹çš„å†…å®¹ï¼šæ³¨æ„æ‰“å¼€çš„æ˜¯ifcfg-eth0 ä½ æ‰“å¼€ä»€ä¹ˆè¦æ ¹æ®ä½ è‡ªå·±çš„ç½‘å¡åç§°/$ /etc/systemconfig/network-scripts/ifcfg-eth0DEVICE=ens33#è®¾å¤‡åç§°ï¼Œå¯æ ¹æ®ifcofnigå‘½ä»¤æŸ¥çœ‹åˆ°ã€‚BOOTPROTO=dhcp #è¿æ¥æ–¹å¼ï¼Œdhcpä¼šè‡ªåŠ¨åˆ†é…åœ°å€ï¼Œæ­¤æ—¶ä¸éœ€è¦åœ¨ä¸‹é¢è®¾ç½®ipå’Œç½‘å…³HWADDR=00:0C:29:AD:66:9F #ç¡¬ä»¶åœ°å€ï¼Œå¯æ ¹æ®ifcofnigå‘½ä»¤æŸ¥çœ‹åˆ°ã€‚ONBOOT=yes #yesè¡¨ç¤ºå¯åŠ¨å°±æ‰§è¡Œè¯¥é…ç½®ï¼Œéœ€è¦æ”¹ä¸ºyes æˆ‘æœ¬åœ°å¼€å§‹æ˜¯no,æ‰€ä»¥åœ¨å¼€æœºåæ²¡æœ‰ç»™æˆ‘è‡ªåŠ¨åˆ†é…ip,å°†å®ƒæ”¹ä¸ºyes,åœ¨ç»ˆç«¯é‡å¯ç½‘å¡ä¸¤ä¸ªå‘½ä»¤é€‰ä¸€ä¸ª:$ service network restart$ /etc/init.d/network restartå‚è€ƒblog:http://blog.csdn.net/w20228396/article/details/77507908å’Œhttp://blog.csdn.net/didi8206050/article/details/51872682 7.å…‹éš†å…‹éš†å’Œå¿«ç…§çš„åŒºåˆ«:http://blog.csdn.net/whatday/article/details/52538031å³é”®å·²å®‰è£…çš„centos ç®¡ç†-&gt;å…‹éš†ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥,ç”±äºç£ç›˜ç©ºé—´æ¯”è¾ƒå……è¶³æ‰€ä»¥ç›´æ¥é€‰æ‹©å…¨å…‹éš†mini3æ˜¯æˆ‘åˆšä»mini1å…‹éš†çš„ä¸€ä¸ªæ–°ç‰ˆæœ¬,å¯åŠ¨ä»¥åå‘ç°æ— æ³•æ­£å¸¸åˆ†é…ipå› ä¸ºmini1çš„ç½‘å¡åç§°å«eth0,è€Œå…‹éš†çš„å«eth1æˆ‘ä»¬åˆ°**/etc/systemconfig/network-scripts/**å‘ç°æ ¹æœ¬æ²¡æœ‰ifcfg-eth1æ–‡ä»¶,å› ä¸ºæˆ‘ä»¬æ˜¯å…‹éš†çš„â€¦æ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬å§ifcfg-eth0æ”¹æˆifcfg-eth1$ cd /etc/systemconfig/network-scripts/$ mv ifcfg-eth0 ifcfg-eth1$ vim ifcfg-eth1é‡æ–°ä¿®æ”¹é‡Œé¢çš„ç‰©ç†åœ°å€å’Œç½‘å¡åç§°,å…¶ä»–å¯ä»¥ä¸ç”¨åŠ¨,ç„¶åé‡å¯ç½‘å¡/etc/init.d/network restarté‡æ–°æŸ¥çœ‹ä¸€ä¸‹ 8.pingä¸»æœºåè®¿é—®ä¸€ç›´è€ä½¿ç”¨ssh root@192.168.0.128,ssh root@192.168.0.130è®¿é—®å¥½éº»çƒ¦,è€Œä¸”åœ¨ä»¥åç¼–å†™è„šæœ¬æ—¶å®¹æ˜“å¼„é”™å“ªä¸ªipå¯¹åº”æ˜¯å“ªä¸€å°,æˆ‘ä»¬å¸Œæœ›é€šè¿‡è¿™æ ·ssh root@mini1,ssh root@mini2å°±å¯ä»¥è®¿é—®åˆ°æ¯å°æœºå™¨$ vim /etc/hostsåƒä¸Šå›¾ä¸€æ ·è®¾ç½®å°±å¯ä»¥äº†","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"yihao.ml/tags/Ubuntu/"}]},{"title":"Ubuntu 16.04TLS å®‰è£…SecureCRTç ´è§£ç‰ˆ","slug":"2018-03-18-ubuntu-Ubuntu 16.04TLS å®‰è£…SecureCRTç ´è§£ç‰ˆ","date":"2018-03-18T00:00:00.000Z","updated":"2019-11-29T12:20:47.655Z","comments":true,"path":"2018/03/18/2018-03-18-ubuntu-Ubuntu 16.04TLS å®‰è£…SecureCRTç ´è§£ç‰ˆ/","link":"","permalink":"yihao.ml/2018/03/18/2018-03-18-ubuntu-Ubuntu 16.04TLS å®‰è£…SecureCRTç ´è§£ç‰ˆ/","excerpt":"","text":"ç”±äºæœ€è¿‘ä½¿ç”¨vmæ­å»ºé›†ç¾¤ä½¿ç”¨ubuntuçš„ç»ˆç«¯è¿æ¥èŠ‚ç‚¹å¤ªç¹ç,æ¥å®‰è£…SecureCRT æœ¬æœºç¯å¢ƒæœ¬æœºä½¿ç”¨çš„æ˜¯ubuntu16.04 TLS 64ç‰ˆ,åœ¨æœ¬æœºä¸Šå®‰è£…è¿‡ç¨‹æ— ä»»ä½•é—®é¢˜(ä»…é™æœ¬æœº) 1.ä¸‹è½½securecrt_linux_crack.pl ç ´è§£ç¨‹åºscrt-8.3.1-1537.ubuntu16-64.x86_64.deb ç¨‹åºåŒ…ç™¾åº¦ç½‘ç›˜ å¯†ç : 7j9k 2.å®‰è£…å®‰è£…secureCRTsudo dpkg -i scrt-8.3.1-1537.ubuntu16-64.x86_64.deb 3.ç ´è§£è¿è¡Œç ´è§£è„šæœ¬ç¨‹åºsudo perl securecrt_linux_crack.pl /usr/bin/SecureCRTè®¤è¯ä¿¡æ¯:åˆ°dashä¸­æœç´¢securecrtå¯åŠ¨,securecrtä¼šæç¤ºä½ äº§å“æ²¡æœ‰licenseï¼Œéœ€è¦è´­ä¹°ä¸ç„¶åªèƒ½ä½¿ç”¨30å¤©,æˆ‘ä»¬è¾“å…¥ä¸Šå›¾ä¸­çš„è®¤è¯ä¿¡æ¯å°±å¯ä»¥å®Œæˆæ³¨å†Œã€‚ 4.è§£å†³è¯»å–ä¸²å£è®¾å¤‡çš„æƒé™é—®é¢˜å½“åœ¨å¯åŠ¨å™¨ä¸­å¯åŠ¨SecureCRT æ—¶ï¼Œæˆ‘ä»¬æ˜¯ä»¥å½“å‰ç”¨æˆ·çš„æƒé™å¯åŠ¨çš„è½¯ä»¶ï¼Œå› æ­¤æ²¡æœ‰æ“ä½œä¸²å£çš„æƒé™ã€‚ä½¿ç”¨å‘½ä»¤ï¼š$ls -l /dev/ttyS0æŸ¥çœ‹å½“å‰ä¸²å£ä¿¡æ¯ï¼Œä¼šæ˜¾ç¤ºå¦‚ä¸‹ä¿¡æ¯$ ls -l /dev/ttyS0å¯ä»¥çœ‹åˆ°ï¼Œä¸²å£è®¾å¤‡æ–‡ä»¶æ˜¯ dialoutè¿™ä¸ªç»„çš„ï¼Œæˆ‘ä»¬æˆ‘ä»¬åªè¦å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªç»„å°±è¡Œäº†ã€‚åŠ å…¥å½“å‰ç™»å½•çš„ç”¨æˆ·åä¸ºï¼šfoxï¼Œåˆ™æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤$sudo usermod -a -G dialout zyhé‡å¯ç³»ç»Ÿï¼Œä¹‹åå°±å¯ä»¥ç›´æ¥æ‰“å¼€SecureCRTæ¥æ“ä½œä¸²å£äº†è½¬è‡ª:http://blog.csdn.net/a499957739/article/details/79582999å‚è€ƒ1:http://www.cnblogs.com/wangkongming/p/3533240.htmlå‚è€ƒ2:http://www.vandyke.com/products/securecrt/","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"yihao.ml/tags/Ubuntu/"}]},{"title":"åŒåŸŸåä¸åŒç«¯å£ä¸‹iframeè·¨åŸŸé—®é¢˜å¤„ç†","slug":"2018-03-15-è·¨åŸŸ-åŒåŸŸåä¸åŒç«¯å£ä¸‹è·¨åŸŸé—®é¢˜å¤„ç†","date":"2018-03-15T00:00:00.000Z","updated":"2019-11-29T12:20:47.655Z","comments":true,"path":"2018/03/15/2018-03-15-è·¨åŸŸ-åŒåŸŸåä¸åŒç«¯å£ä¸‹è·¨åŸŸé—®é¢˜å¤„ç†/","link":"","permalink":"yihao.ml/2018/03/15/2018-03-15-è·¨åŸŸ-åŒåŸŸåä¸åŒç«¯å£ä¸‹è·¨åŸŸé—®é¢˜å¤„ç†/","excerpt":"","text":"åœºæ™¯æè¿°,ç°æœ‰ä¸¤ä¸ªç•Œé¢Aå’ŒB,ä»–ä»¬çš„IPå’Œç«¯å£æƒ…å†µå¦‚ä¸‹ï¼šA : 192.168.1.2:8081B : 192.168.1.2:8082Aç•Œé¢ä¸­ä½¿ç”¨æ ‡ç­¾å¼•å…¥Bç•Œé¢ã€‚æˆ‘ä»¬æƒ³åœ¨Aç•Œé¢æ¥è·å–Bç•Œé¢ä¸­çš„å…ƒç´ æ—¶ï¼Œåœ¨æµè§ˆå™¨çš„consoleä¸­å°±ä¼šæç¤ºcrossâ€¦ç­‰å­—æ ·çš„é”™è¯¯ã€‚ è§£å†³è·¨åŸŸé—®é¢˜ 1. ä½¿ç”¨è®¾ç½®è¯·æ±‚å¤´response.setHeader();response.setHeader(); 2. ä½¿ç”¨domain 3. ä½¿ç”¨ngnixå·¦è¯·æ±‚è½¬å‘æˆ‘ä½¿ç”¨äº†ç¬¬ä¸‰ç§æ–¹å¼æ¥è§£å†³é—®é¢˜ï¼Œè®©ngnixç›‘å¬8083ç«¯å£ï¼Œåˆ†åˆ«å°†è¯·æ±‚è½¬å‘åˆ°Aå’ŒBã€‚è¿™æ ·å°±å¯ä»¥åšåˆ°åœ¨è®¿é—®Aå’ŒBç•Œé¢çš„æ—¶å€™ï¼Œä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªåŸŸå+ç«¯å£ã€‚192.168.1.2ï¼š8083","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"mybatisæ•°æ®åº“å­—æ®µå’Œå®ä½“ç±»å­—æ®µä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆ","slug":"2018-03-15-mybatis-æ•°æ®åº“å­—æ®µå’Œå®ä½“ç±»å­—æ®µä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆ","date":"2018-03-15T00:00:00.000Z","updated":"2019-11-29T12:20:47.655Z","comments":true,"path":"2018/03/15/2018-03-15-mybatis-æ•°æ®åº“å­—æ®µå’Œå®ä½“ç±»å­—æ®µä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆ/","link":"","permalink":"yihao.ml/2018/03/15/2018-03-15-mybatis-æ•°æ®åº“å­—æ®µå’Œå®ä½“ç±»å­—æ®µä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆ/","excerpt":"","text":"æ•°æ®åº“å­—æ®µä¸å®ä½“ç±»å­—æ®µä¸ä¸€è‡´ï¼Œå¯¼è‡´åŠŸèƒ½æ­£å¸¸ï¼Œä½†æ˜¯å°±æ˜¯æŸ¥ä¸å‡ºæ•°æ® 1.ä½¿ç”¨resultMapåœ¨xmlä¸­å®šä¹‰resultMapæ ‡ç­¾12345678910111213141516171819&lt;resultMap type=\"com.entity.BdipChatPoint\" id=\"pointMap\"&gt; &lt;id column=\"id_\" property=\"id\"/&gt; &lt;result column=\"json\" property=\"json\"/&gt; &lt;result column=\"picture\" property=\"picture\"/&gt; &lt;result column=\"model_url\" property=\"modelUrl\"/&gt; &lt;result column=\"db_id\" property=\"dbId\"/&gt; &lt;result column=\"frag_id\" property=\"fragId\"/&gt; &lt;result column=\"view_point_num\" property=\"viewPointNum\"/&gt; &lt;result column=\"user_name\" property=\"userName\"/&gt; &lt;result column=\"head_image\" property=\"headImage\"/&gt; &lt;result column=\"tree_id\" property=\"treeId\"/&gt; &lt;result column=\"enable_\" property=\"enable\"/&gt; &lt;result column=\"remark_\" property=\"remark\"/&gt; &lt;result column=\"create_by\" property=\"createBy\"/&gt; &lt;result column=\"create_time\" property=\"createTime\"/&gt; &lt;result column=\"update_time\" property=\"updateTime\"/&gt; &lt;result column=\"update_by\" property=\"updateBy\"/&gt;&lt;/resultMap&gt;columnå¡«å†™æ•°æ®åº“å­—æ®µ propertyå¡«å†™å®ä½“ç±»å­—æ®µåœ¨ä½¿ç”¨æ ‡ç­¾çš„æ—¶å€™ç”¨resultMap=&quot;pointMap&quot;æ›¿æ¢resultType=â€œcom.entity.BdipChatPointâ€ 2.åœ¨å†™sqlæ˜¯ä½¿ç”¨as1234&lt;select id=\"selectBimChatPoint\" parameterType=\"com.entity.BdipChatPoint\" resultType=\"com.entity.BdipChatPoint\"&gt; select id_ as id,json,picture,model_url as modelUrl from bdip_chat_point where db_id = #&#123;dbId&#125; and model_url = #&#123;modelUrl&#125; and create_by = #&#123;createBy&#125;&lt;/select&gt;æ³¨æ„id_ as idå’Œmodel_url as modelUrlä¾æ—§ä½¿ç”¨resultTypeæ¥æ¥æ”¶","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"ubuntuä¸­æ²¡å•¥ç”¨çš„å‘½ä»¤","slug":"2018-03-13-æ— èŠ-ubuntuæ²¡å•¥ç”¨çš„å‘½ä»¤","date":"2018-03-13T00:00:00.000Z","updated":"2019-11-29T12:20:47.654Z","comments":true,"path":"2018/03/13/2018-03-13-æ— èŠ-ubuntuæ²¡å•¥ç”¨çš„å‘½ä»¤/","link":"","permalink":"yihao.ml/2018/03/13/2018-03-13-æ— èŠ-ubuntuæ²¡å•¥ç”¨çš„å‘½ä»¤/","excerpt":"","text":"$ echo â€œå¤§å®¶å¥½!!â€ | pv -qL 5$ xeyes$ oneko$ cowsay â€œMmmmmmmmmmOOOOOOâ€¦â€$ cmatrix","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"yihao.ml/tags/Ubuntu/"}]},{"title":"åˆ©ç”¨wineå®‰è£…è¿…é›·å’ŒQQ","slug":"2018-03-13-ubuntu-åˆ©ç”¨wineå®‰è£…è¿…é›·å’ŒQQ","date":"2018-03-13T00:00:00.000Z","updated":"2019-11-29T12:20:47.654Z","comments":true,"path":"2018/03/13/2018-03-13-ubuntu-åˆ©ç”¨wineå®‰è£…è¿…é›·å’ŒQQ/","link":"","permalink":"yihao.ml/2018/03/13/2018-03-13-ubuntu-åˆ©ç”¨wineå®‰è£…è¿…é›·å’ŒQQ/","excerpt":"","text":"æœ¬æœºç¯å¢ƒ:è¿™ä¸ªæ–¹æ³•åœ¨æœ¬æœºè¯•äº†ã€‚ä¸è¡Œã€‚å°ä¼™ä¼´ä»¬è¿˜æ˜¯æ•£äº†å§ï¼ï¼å‰ä¸€ç¯‡å®‰è£…QQ2012å›½é™…ç‰ˆç”±äºç‰ˆæœ¬å¤ªè€ï¼Œéƒ¨åˆ†åŠŸèƒ½ä¸èƒ½ä½¿ç”¨ï¼Œä¸‹é¢æˆ‘ä»¬å®‰è£…æ–°ç‰ˆQQã€‚æœ¬æœºç¯å¢ƒ$ cat /proc/versionLinux version 4.10.0-28-generic (buildd@lgw01-12) (gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.4) ) #32~16.04.2-Ubuntu SMP Thu Jul 20 10:19:48 UTC 2017 æ ¸å¿ƒå†…å®¹1.è¿…é›·è¿è¡Œå‡ ä¹å®Œç¾ï¼Œèƒ½å¤Ÿç”¨æ‰‹æœºå·ç™»å½•ï¼Œèƒ½å¤Ÿæ­£å¸¸ä¸‹è½½å’ŒåŠ é€Ÿã€‚å·²çŸ¥éƒ¨åˆ†å›¾ç‰‡æ— æ³•æ­£å¸¸æ˜¾ç¤ºï¼Œæ— ä¼¤å¤§é›…ã€‚2.QQè¿è¡Œæ•ˆç‡æ¯”èµ·å…¶ä»–ç‰ˆæœ¬çš„wineqqæ¥è¯´è¦é«˜ï¼Œèƒ½å¤Ÿè®°ä½å¯†ç å’Œè‡ªåŠ¨ç™»å½•ï¼Œæ— æ³•è§†é¢‘é€šè¯ã€è¿œç¨‹æ¼”ç¤ºã€‚ æ‰€éœ€æ–‡ä»¶ä¸€è§ˆ123456789101112131415161718192021222324+-- deepin.com.qq.im_8.9.19983deepin16_i386.deb+-- deepin.com.thunderspeed_7.10.35.366deepin15_i386.deb+-- deepin-wine-d| +-- deepin-fonts-wine_1.9-26_all.deb| +-- deepin-libwine_1.9-26_i386.deb| +-- deepin-wine32_1.9-26_i386.deb| +-- udis86_1.72-2_i386.deb+-- deepin-wine-helper-d| +-- libgif4_4.1.6-11_i386.deb| +-- libgnutls26_2.12.23-18_i386.deb| +-- libgnutls-deb0-28_3.3.20-1_i386.deb| +-- libgstreamer0.10-0_0.10.36-1.5_i386.deb| +-- libgstreamer-plugins-base0.10-0_0.10.36-2_i386.deb| +-- libpng16-16_1.6.26-1_i386.deb| +-- libreadline7_7.0-1_i386.deb+-- dependences+-- install.sh+-- qq-d| +-- deepin-wine_1.9-26_all.deb| +-- deepin-wine32-preloader_1.9-26_i386.deb| +-- deepin-wine-helper_1.0deepin17_i386.deb| +-- deepin-wine-uninstaller_0.1deepin2_i386.deb+-- README+-- remove.shqq-dæ–‡ä»¶å¤¹ä¸­ä¸ºæ­å»ºdeepin-wineç¯å¢ƒæ‰€éœ€çš„ç¬¬ä¸€çº§ä¾èµ–è½¯ä»¶ï¼ŒåŒ…æ‹¬deepin-wineï¼Œdeepin-wine-helperç­‰ã€‚deepin-wine-dä¸­ä¸ºè½¯ä»¶åŒ…deepin-wineæ‰€éœ€çš„ä¾èµ–è½¯ä»¶ï¼ŒåŒ…æ‹¬deepin-libwineç­‰ã€‚deepin-wine-helper-dä¸­ä¸ºè½¯ä»¶åŒ…deepin-wine-helperæ‰€éœ€çš„éƒ¨åˆ†ä¾èµ–è½¯ä»¶ï¼ŒåŒ…æ‹¬32ä½çš„libreadline7ç­‰ã€‚ç½‘ç›˜é“¾æ¥ï¼ˆé“¾æ¥: https://pan.baidu.com/s/1S69P6tK9St6ZDGBX2E1f2w å¯†ç : 06i9ï¼‰ å®‰è£…æ–¹æ³•64ä½æ“ä½œç³»ç»Ÿå®‰è£…å‰éœ€æ£€æŸ¥dpkgæ˜¯å¦åŒ…å«äº†i386æ¶æ„çš„è½¯ä»¶åŒ…ã€‚ç»ˆç«¯è¾“å…¥$ dpkg --print-foreign-architectureså¦‚æœè¾“å‡ºi386åˆ™ç»§ç»­ä¸‹é¢æ­¥éª¤ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œéœ€è¦å…ˆæ‰§è¡Œï¼š$ sudo dpkg --add-architecture i386$ sudo apt-get updateæ¥ä¸‹æ¥å®‰è£…deepin-qqå’Œdeepin-thunderï¼Œæ–¹æ³•ä¸ºæ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œ:$ sudo bash install.shå¦‚æœæ˜¯ 32ä½æ“ä½œç³»ç»Ÿè¯·æŸ¥çœ‹åŸåšå®¢ https://www.ubuntukylin.com/ukylin/forum.php?mod=viewthread&amp;tid=30614è½¬è‡ªhttps://www.ubuntukylin.com/ukylin/forum.php?mod=viewthread&amp;tid=30614","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"yihao.ml/tags/Ubuntu/"}]},{"title":"shiroå­¦ä¹ ","slug":"2018-03-13-shiro-shiroå­¦ä¹ ","date":"2018-03-13T00:00:00.000Z","updated":"2019-11-29T12:20:47.653Z","comments":true,"path":"2018/03/13/2018-03-13-shiro-shiroå­¦ä¹ /","link":"","permalink":"yihao.ml/2018/03/13/2018-03-13-shiro-shiroå­¦ä¹ /","excerpt":"","text":"æ°¸ä¸æ­¢æ­¥!æ„Ÿè°¢å¼€è€å¸ˆçš„åˆ†äº«!http://jinnianshilongnian.iteye.com/blog/2018398https://github.com/zhangkaitao/shiro-example","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Shiro","slug":"Shiro","permalink":"yihao.ml/tags/Shiro/"}]},{"title":"SpringMVCæ¥æ”¶å¤æ‚é›†åˆå‚æ•°","slug":"2018-03-12-springmvc-SpringMVCæ¥æ”¶å¤æ‚é›†åˆå‚æ•°","date":"2018-03-12T00:00:00.000Z","updated":"2019-11-29T12:20:47.653Z","comments":true,"path":"2018/03/12/2018-03-12-springmvc-SpringMVCæ¥æ”¶å¤æ‚é›†åˆå‚æ•°/","link":"","permalink":"yihao.ml/2018/03/12/2018-03-12-springmvc-SpringMVCæ¥æ”¶å¤æ‚é›†åˆå‚æ•°/","excerpt":"","text":"è®°ä¸¤ä¸ªæ–¹å¼ 1.ä½¿ç”¨formçš„ajaxæ–¹å¼æäº¤ åå°ä»£ç åå°ä½¿ç”¨çš„æ˜¯springmvcæ¡†æ¶å®ä½“ç±»ï¼š123456789101112131415public class BimWorkflowDetailBase &#123; @TableField(\"model_id\") private String modelId; @TableField(\"cc_name\") private String ccName; @TableField(\"cc_names\") private String ccNames; @TableField(\"status_\") private String status; ....&#125;å®ä½“ç±»åŒ…è£…èµ·æ¥123456789101112public class WorkFlowCollisionWrapper &#123; private List&lt;BimWorkflowCollision&gt; collisions; public List&lt;BimWorkflowCollision&gt; getCollisions() &#123; return collisions; &#125; public void setCollisions(List&lt;BimWorkflowCollision&gt; collisions) &#123; this.collisions = collisions; &#125;&#125;åœ¨æ§åˆ¶å™¨çš„å‚æ•°ä¸­ç›´æ¥å†™ä¸ŠåŒ…è£…ç±»12345@RequestMapping(value=\"/check\",method=RequestMethod.POST,produces=\"application/json\")public @ResponseBody String check(WorkFlowCollisionWrapper collisions) &#123; System.out.println(collisions.getCollisions().size()); return null;&#125; å‰å°ä»£ç è¿™é‡Œæˆ‘ä½¿ç”¨äº†ES6åŠ¨æ€ç”Ÿæˆhtml é‡Œé¢çš„${index} æ˜¯ES6çš„å†™æ³•,æˆ‘ä»¬åœ¨è¿™è¾¹çš„å†™æ³•æ˜¯name=&quot;collisions[0].id&quot; name=&quot;collisions[1].idä»¥æ­¤ç±»æ¨å°±å¯ä»¥æ­£å¸¸ä¼ å…¥åˆ°åå°1234567891011121314151617&lt;table class=\"m-initating-table hei30\" name=\"initating-table-$&#123;index&#125;\"&gt; &lt;tr&gt; &lt;td class=\"center\"&gt;ä¸“ä¸šç¼–å·&lt;/td&gt; &lt;td&gt; &lt;input readonly=\"readonly\" name=\"collisions[$&#123;index&#125;].zybh\" value=\"$&#123;typeof(node.zybh)=='undefined'?'':node.zybh&#125;\" class=\"tableinput first firstStageInput fourthStageInput\" type=\"text\" maxlength=\"20\"&gt; &lt;/td&gt; &lt;td class=\"center\"&gt;ç±»åˆ«ç¼–å·&lt;/td&gt; &lt;td&gt; &lt;select disabled=\"disabled\" name=\"collisions[$&#123;index&#125;].lbbh\" class=\"tableSelect first firstStageSelect fourthStageSelect\" style=\"width: 80%;margin: 0 auto;display: block;\"&gt; &lt;option value=\"A\" $&#123;typeof(node.lbbh)=='undefined' || node.lbbh == 'A'?'selected':''&#125;&gt;A&lt;/option&gt; &lt;option value=\"B\" $&#123;node.lbbh == 'B'?'selected':''&#125;&gt;B&lt;/option&gt; &lt;option value=\"C\" $&#123;node.lbbh == 'C'?'selected':''&#125;&gt;C&lt;/option&gt; &lt;option value=\"D\" $&#123;node.lbbh == 'D'?'selected':''&#125;&gt;D&lt;/option&gt; &lt;/select&gt; &lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;è¿™é‡Œä½¿ç”¨formè¡¨å•åºåˆ—åŒ–æ‰€æœ‰çš„å€¼,å‘é€ajaxè¯·æ±‚åå°1234567891011121314var url = publicJS.tomcat_url + '/workflow/check';var data = $('#collisionForm').serialize();$.ajax(&#123; url : url, type : 'POST', data : data, dataType : 'json', success : function(data)&#123; &#125;, error : function(error)&#123; &#125;&#125;) 2.ä½¿ç”¨çº¯ajaxæ–¹å¼æäº¤ åå°å®ä½“ç±»12345public class User &#123; private String name; private String pwd; //çœç•¥getter/setter &#125;æ§åˆ¶å™¨12345678910@Controller @RequestMapping(\"/catalog.do\") public class CatalogController &#123; @RequestMapping(params = \"fn=saveUsers\") @ResponseBody public AjaxJson saveUsers(@RequestBody List&lt;User&gt; userList) &#123; â€¦ &#125; &#125; å‰å°12345678910111213141516var userList = new Array(); userList.push(&#123;name: \"æå››\",pwd: \"123\"&#125;); userList.push(&#123;name: \"å¼ ä¸‰\",pwd: \"332\"&#125;); $.ajax(&#123; type: \"POST\", url: \"&lt;%=path%&gt;/catalog.do?fn=saveUsers\", data: JSON.stringify(userList),//å°†å¯¹è±¡åºåˆ—åŒ–æˆJSONå­—ç¬¦ä¸² dataType:\"json\", contentType : 'application/json;charset=utf-8', //è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯ success: function(data)&#123; â€¦ &#125;, error: function(res)&#123; â€¦ &#125; &#125;);","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"content-dispositionä½¿ç”¨","slug":"2018-03-12-java-content-disposition","date":"2018-03-12T00:00:00.000Z","updated":"2019-11-29T12:20:47.653Z","comments":true,"path":"2018/03/12/2018-03-12-java-content-disposition/","link":"","permalink":"yihao.ml/2018/03/12/2018-03-12-java-content-disposition/","excerpt":"","text":"content-disposition æ˜¯RFCä¸­å®šä¹‰çš„æ–‡ä»¶ä¸‹è½½æ ‡è¯†å­—æ®µ,è¯¦æƒ…æŸ¥çœ‹rfc2616ç« èŠ‚19.5 Additional Features,å…¶ä¸­æœ‰ä¸¤ç§å½¢å¼ä¾›ç»™æˆ‘ä»¬é€‰æ‹©ï¼Œä¸€ä¸ªæ˜¯inlineï¼Œä¸€ä¸ªæ˜¯attachment åœ¨é¡µé¢å†…æ‰“å¼€ä»£ç ï¼š12345File file = new File(\"rfc1806.txt\"); String filename = file.getName(); response.setHeader(\"Content-Type\",\"text/plain\"); response.addHeader(\"Content-Disposition\",\"inline;filename=\" + new String(filename.getBytes(),\"utf-8\")); response.addHeader(\"Content-Length\",\"\" + file.length()); å¼¹å‡ºä¿å­˜æ¡†ä»£ç ï¼š12345File file = new File(\"rfc1806.txt\"); String filename = file.getName(); response.setHeader(\"Content-Type\",\"text/plain\"); response.addHeader(\"Content-Disposition\",\"attachment;filename=\" + new String(filename.getBytes(),\"utf-8\")); response.addHeader(\"Content-Length\",\"\" + file.length()); åœºæ™¯åº”ç”¨ï¼Œå¯¼å‡ºwordæ–‡æ¡£ï¼šæ§åˆ¶å±‚ä½¿ç”¨çš„springmvc1234567891011121314151617181920212223242526272829303132333435363738/** * å¯¼å‡ºwordåŠŸèƒ½ * @param workflowId æµç¨‹çš„id * @throws IOException */@ApiOperation(value=\"å¯¼å‡ºwordåŠŸèƒ½\",notes=\"å¯¼å‡ºwordåŠŸèƒ½\")@ApiResponses(value= &#123;@ApiResponse(code=200,message=\"å¯¼å‡ºæˆåŠŸ\",response=BimWorkflowDetailController.class)&#125;)@RequestMapping(value=\"/exportCollision\")public String exportCollision(String workflowId,HttpServletResponse response) throws IOException &#123; //response.setContentType(\"application/octet-stream; charset=UTF-8\"); response.setHeader(\"content-disposition\", \"attachment;filename=\" + new SimpleDateFormat(\"yyyyMMddHH:mm:ss\").format(new Date(System.currentTimeMillis())) + \".doc\"); // operaå’Œfirefoxå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œè€Œieä¸èƒ½æ­£å¸¸ä½¿ç”¨ æ·»åŠ ä¸‹åˆ—å¤´ response.setHeader(\"Pragma\",\"No-cache\"); response.setHeader(\"Cache-Control\",\"No-cache\"); response.setDateHeader(\"Expires\",0); ApiResultEntity apiResultEntity = new ApiResultEntity(); apiResultEntity.setDataEncode(true); // 1.æ ¹æ®workflowidä»æ•°æ®åº“æŸ¥è¯¢ç›¸å…³ä¿¡æ¯ Parameter parameter = new Parameter(BizServiceDefine.bimWorkflowDetailService, \"getBimWorkflowInfoById\").setId(NumberUtil.tryParseLong(workflowId)); parameter = bizProvider.execute(parameter); apiResultEntity = (ApiResultEntity) parameter.getResult(); Map&lt;String,Object&gt; param = (Map&lt;String,Object&gt;) apiResultEntity.getData(); BimWorkflowDetail workflowBase = (BimWorkflowDetail) param.get(\"bimWorkflowDetail\"); List&lt;BimWorkflowCollision&gt; collisionLists = (List&lt;BimWorkflowCollision&gt;) param.get(\"collisionLists\"); OutputStream out = null; try &#123; out = response.getOutputStream(); // å­˜word saveDoc(workflowBase, collisionLists, out); &#125; catch (Exception e) &#123; logger.error(\"å¯¼å‡ºwordå¼‚å¸¸!!!!\"); e.printStackTrace(); &#125; out.flush(); out.close(); return null; &#125;","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"An invalid character [32] was present in the Cookie value","slug":"2018-03-12-java-An invalid character [32] was present in the Cookie value","date":"2018-03-12T00:00:00.000Z","updated":"2019-11-29T12:20:47.651Z","comments":true,"path":"2018/03/12/2018-03-12-java-An invalid character [32] was present in the Cookie value/","link":"","permalink":"yihao.ml/2018/03/12/2018-03-12-java-An invalid character [32] was present in the Cookie value/","excerpt":"","text":"è¿™æ˜¯å› ä¸ºCookiesä¸­å­˜å‚¨ç‰¹æ®Šå­—ç¬¦ä¸²å¼•èµ·çš„ï¼Œå½“æˆ‘ä»¬åœ¨é‡Œé¢å­˜å‚¨åˆ†å·ç©ºæ ¼ç­‰ä¸€äº›ç‰¹æ®Šç¬¦å·æ—¶ï¼Œå°±ä¼šæŠ›å¼‚å¸¸ã€‚è§£å†³åŠæ³•æˆ‘ä»¬åªéœ€è¦å­˜å…¥å’Œå–å‡ºçš„æ—¶å€™ç”¨URLEncoder.encode(xxxï¼Œ&quot;UTF-8&quot;)å’ŒURLDcoder.decoder(xxx,&quot;UTF-8&quot;)å°±å¯ä»¥å¾—åˆ°è§£å†³ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[{"name":"é—®é¢˜æ€»ç»“","slug":"é—®é¢˜æ€»ç»“","permalink":"yihao.ml/tags/é—®é¢˜æ€»ç»“/"}]},{"title":"IntelliJ IDEAå®‰è£…pythonæ’ä»¶åˆ†äº«","slug":"2018-03-3-idea-ideaå®‰è£…pythonæ’ä»¶","date":"2018-03-03T00:00:00.000Z","updated":"2019-11-29T12:20:47.658Z","comments":true,"path":"2018/03/03/2018-03-3-idea-ideaå®‰è£…pythonæ’ä»¶/","link":"","permalink":"yihao.ml/2018/03/03/2018-03-3-idea-ideaå®‰è£…pythonæ’ä»¶/","excerpt":"","text":"å¼€å§‹åœ¨File-&gt;Settings-&gt;Plugins-&gt;ä¸­å°è¯•é›†æˆpython,ä¸‹è½½äº†åŠå¤©æç¤ºäº†ä¸ªé”™è¯¯æ¡†,ç„¶ååªå¥½é€šè¿‡æ‰‹åŠ¨æ–¹å¼å®‰è£…äº† æœ¬æœºç¯å¢ƒ:æœ¬æœºæ˜¯åœ¨ubuntu16ä¸Šä½¿ç”¨çš„æ˜¯2016.3.7ç‰ˆæœ¬çš„IntelliJ IDEA å¼€å§‹å®‰è£…é¦–å…ˆæˆ‘ä»¬åˆ°å®˜ç½‘æ’ä»¶ä¸­å¿ƒhttp://plugins.jetbrains.com/plugin/631-pythonä¸‹è½½æˆ‘ä»¬è¦çš„æ’ä»¶,åœ¨ä¸‹è½½çš„æ—¶å€™å°½é‡é€‰æ‹©ç‰ˆæœ¬æ¯”è¾ƒæ¥è¿‘çš„,è¿™æ ·ä¸å®¹æ˜“æœ‰å†²çªæˆ‘ä¸‹è½½çš„æ˜¯163.12024â€”163.*ä¸‹è½½å¥½ä»¥ååœ¨Intellij IDEA Fileâ€”â€”&gt;Settingsâ€”â€”&gt;IDE setttingsâ€”â€”&gt;Pluginsâ€”â€”&gt;Install plugin from diskâ€¦â€”â€”&gt;é€‰æ‹©æ’ä»¶æ‰€åœ¨è·¯å¾„å³å¯ã€‚","categories":[{"name":"ç¼–ç¨‹è¯­è¨€","slug":"ç¼–ç¨‹è¯­è¨€","permalink":"yihao.ml/categories/ç¼–ç¨‹è¯­è¨€/"}],"tags":[{"name":"Python3","slug":"Python3","permalink":"yihao.ml/tags/Python3/"}]},{"title":"ubuntu16.04å®‰è£…QQå›½é™…ç‰ˆ","slug":"2018-03-3-ubuntu-ubuntu16.04å®‰è£…qq","date":"2018-03-03T00:00:00.000Z","updated":"2019-11-29T12:20:47.658Z","comments":true,"path":"2018/03/03/2018-03-3-ubuntu-ubuntu16.04å®‰è£…qq/","link":"","permalink":"yihao.ml/2018/03/03/2018-03-3-ubuntu-ubuntu16.04å®‰è£…qq/","excerpt":"","text":"ç»è¿‡ä¸æ–­æŠ˜è…¾,ç»ˆäºæ‰¾åˆ°äº†ä¸€ä¸ªå¯å®‰è£…çš„QQ,ä¸‹é¢çš„æ–¹æ³•ä¸å‡ºæ„å¤–åº”è¯¥æ˜¯é€‚ç”¨ä¸æ‰€æœ‰çš„ubuntu16ç‰ˆæœ¬,æœ¬äººå·²ç»ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ­£å¸¸å®‰è£…äº†QQ2012å›½é™…ç‰ˆ,å¦‚å›¾:QQ2012å›½é™…ç‰ˆ:æ”¯æŒå¯†ç é”®ç›˜è¾“å…¥å¹¶è®°ä½å¯†ç ã€‚å¯ä»¥å‘é€QQè¡¨æƒ…æ— é—®é¢˜ã€‚ä¼ é€æ–‡ä»¶æ— é—®é¢˜ã€‚IBusè¾“å…¥æ³•æ­£å¸¸ã€‚QQè®¾ç½®å¸¸ç”¨åŠŸèƒ½ï¼Œæ¯”è¾ƒç²¾ç®€ï¼Œä¸”å ç”¨CPUå°‘ã€‚ æœ¬æœºç¯å¢ƒ:æœ¬æœºä½¿ç”¨çš„æ˜¯ubuntu16.04 TLS 64ç‰ˆ,å†…æ ¸ç‰ˆæœ¬ä¸º4.10.0-28-generic,qqåœ¨æœ¬æœºä¸Šå®‰è£…è¿‡ç¨‹æ— ä»»ä½•é—®é¢˜(ä»…é™æœ¬æœº)$ cat /proc/versionLinux version 4.10.0-28-generic (buildd@lgw01-12) (gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.4) ) #32~16.04.2-Ubuntu SMP Thu Jul 20 10:19:48 UTC 2017 å¼€å§‹å®‰è£…é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…ä¾èµ–åº“ libgtk2.0-0:i386 å› ä¸ºæˆ‘ä»¬æ˜¯64ä½ç³»ç»Ÿ,æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å®‰è£… ia32-libs , ä½†æ˜¯ubuntu16.04ä¸­è¯¥è½¯ä»¶åŒ…å·²ç»è¢«å…¶ä»–ç‰ˆæœ¬ä»£æ›¿äº†,æ‰€ä»¥æˆ‘ä»¬é€‰æ‹©å®‰è£…lib32ncurses5 1. å®‰è£…libgtk2.0-0:i386åœ¨ç»ˆç«¯è¾“å…¥sudo apt-get install libgtk2.0-0:i386$ sudo apt-get install libgtk2.0-0:i386 2. å®‰è£… lib32ncurses5åœ¨ç»ˆç«¯è¾“å…¥sudo apt-get install lib32ncurses5$ sudo apt-get install lib32ncurses5 3. ä¸‹è½½QQ2012å›½é™…ç‰ˆä¸‹è½½é“¾æ¥https://pan.baidu.com/s/1bpF3p7L,æˆ‘ä»¬åªéœ€è¦ä¸‹è½½wine-qqintl-www.linuxidc.com.tar.xzåˆ°æœ¬åœ°,éšåæˆ‘ä»¬è§£å‹å‡ºé‡Œé¢çš„ä¸‰ä¸ªdebæ–‡ä»¶:æˆ‘ä»¬ä½¿ç”¨dpkgåˆ†åˆ«å®‰è£…ä¸‰ä¸ªdebæ–‡ä»¶ 4. å®‰è£… wine-qqintl_0.1.3-2_i386.deb$ sudo dpkg -i wine-qqintl_0.1.3-2_i386.debåˆæ¬¡å®‰è£…è¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™,å¦‚æœæœ‰éƒ¨åˆ†libæ²¡æœ‰é…ç½®,å°±ä¼šå®‰è£…å¤±è´¥.æˆ‘ä»¬çš„è§£å†³åŠæ³• æ‰§è¡Œä¸€ésudo apt-get install -f,è¿™ä¸ªå‘½ä»¤çš„æ„æ€æ˜¯å‡å¦‚ç”¨æˆ·çš„ç³»ç»Ÿä¸Šæœ‰æŸä¸ªpackageä¸æ»¡è¶³ä¾èµ–æ¡ä»¶ï¼Œè¿™ä¸ªå‘½ä»¤å°±ä¼šè‡ªåŠ¨ä¿®å¤,å®‰è£…ç¨‹åºåŒ…æ‰€ä¾èµ–çš„åŒ….å®Œæˆä»¥åæˆ‘ä»¬å†è¿è¡Œä¸€ésudo dpkg -i wine-qqintl_0.1.3-2_i386.debå°±ä¼šå‘ç°æˆåŠŸå®‰è£…äº† 5. å®‰è£…ttf-wqy-microhei_0.2.0-beta-2_all.debå’Œfonts-wqy-microhei_0.2.0-beta-2_all.debå®‰è£…å®Œåé¢ä¸¤ä¸ªdebæ–‡ä»¶$ sudo dpkg -i ttf-wqy-microhei_0.2.0-beta-2_all.deb$ sudo dpkg -i fonts-wqy-microhei_0.2.0-beta-2_all.deb è¿è¡ŒQQ2012å›½é™…ç‰ˆåœ¨å¼€å§‹èœå•ä¸­æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°QQ2012å›½é™…ç‰ˆæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ä½¿ç”¨å‘½ä»¤sudo dpkg -l|grep qq å’Œ sudo find / -name qq* æŸ¥çœ‹QQçš„å®‰è£…æƒ…å†µå¦‚æœåœ¨ç™»å½•æ—¶æç¤ºç‰ˆæœ¬è¿‡ä½,æˆ‘ä»¬åªéœ€è¦å°† æ‰‹æœºQQâ€“&gt;è®¾ç½®â€“&gt;å¸å·ã€è®¾å¤‡å®‰å…¨â€“&gt;è®¾å¤‡é” è®¾ç½®ä¸ºæœªå¯ç”¨çŠ¶æ€å³å¯ å¸è½½QQ2012å›½é™…ç‰ˆ 1.æŸ¥çœ‹æœ‰å…³qqçš„è¯¦æƒ…ä¿¡æ¯$ sudo dpkg -l | grep qqæˆ‘ä»¬å¯ä»¥å‘ç°å­˜åœ¨ä¸¤ä¸ªpackage,ä½¿ç”¨dpkg -På‘½ä»¤åˆ†åˆ«å¸è½½ä¸¤ä¸ªpackage 2.å¸è½½ wine-qqintl:i386$ sudo dpkg -P wine-qqintl:i386 3.å¸è½½ libqqwing2v5:amd64$ sudo dpkg -P libqqwing2v5:amd64åœ¨å¸è½½çš„æ—¶å€™æç¤ºå­˜åœ¨ä¾èµ–,æ‰€ä»¥å¸è½½å¤±è´¥äº†,æˆ‘ä»¬ä½¿ç”¨-læŸ¥çœ‹gnome-sudokuè¯¦æƒ…,å¹¶å°†å…¶å¸è½½åä¸€åˆ‡å°±æ­£å¸¸äº†$ sudo dpkg -l | grep gnome-sudoku$ sudo dpkg -P gnome-sudoku","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"yihao.ml/tags/Ubuntu/"}]},{"title":"Firefoxä¸‹åˆ©ç”¨å¾®åšå›¾åºŠä¼˜åŒ–markdownç²˜è´´å›¾ç‰‡é“¾æ¥ä½“éªŒåˆ†äº«","slug":"2018-02-26-markdown-åˆ©ç”¨å¾®åšå›¾åºŠä¼˜åŒ–markdownç²˜è´´å›¾ç‰‡é“¾æ¥ä½“éªŒ","date":"2018-02-26T00:00:00.000Z","updated":"2019-11-29T12:20:47.651Z","comments":true,"path":"2018/02/26/2018-02-26-markdown-åˆ©ç”¨å¾®åšå›¾åºŠä¼˜åŒ–markdownç²˜è´´å›¾ç‰‡é“¾æ¥ä½“éªŒ/","link":"","permalink":"yihao.ml/2018/02/26/2018-02-26-markdown-åˆ©ç”¨å¾®åšå›¾åºŠä¼˜åŒ–markdownç²˜è´´å›¾ç‰‡é“¾æ¥ä½“éªŒ/","excerpt":"","text":"ç½‘ä¸Šæœ‰å¾ˆå¤šåˆ©ç”¨å›¾åºŠä¼˜åŒ–markdownç²˜è´´å›¾ç‰‡é“¾æ¥çš„ä¼˜åŒ–æ–¹å¼,æˆ‘çš„è¿™ç§å¹¶ä¸æ˜¯æœ€å¥½çš„,ä¹Ÿä¸æ˜¯æœ€ç®€ä¾¿çš„.ä½†æ˜¯è¿™ä¸ªæ–¹æ³•å¾ˆå®¹æ˜“é…ç½®,é€‚åˆä¸æ‡‚ä»£ç çš„æ–°æ‰‹,å…·ä½“é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼šåœ¨ubuntuä¸­é…ç½®è‡ªå®šä¹‰å¿«æ·é”®,æ‰§è¡Œxxx.shè„šæœ¬å‘½ä»¤,è¯¥è„šæœ¬å‘½ä»¤ç”±æˆ‘ä»¬è‡ªå·±ç¼–å†™,å…¶ä¸­ä¼šè°ƒç”¨gnome-screenshotè¿›è¡Œæˆªå›¾(å¦‚æœä¸æƒ³ä½¿ç”¨gnome-screenshotæˆªå›¾å·¥å…·,å¯ä»¥è‡ªè¡Œå¯»æ‰¾å…¶ä»–æˆªå›¾æ–¹å¼ä»£æ›¿).è°ƒç”¨xclipå°†å‰ªåˆ‡æ¿ä¸­çš„æˆªå›¾ä¿å­˜åˆ°æŸç£ç›˜ä¸‹ä¸‹è½½firefoxå›¾åºŠæ‹“å±•å›´è„–å°±æ˜¯å¥½å›¾åºŠæ‰‹åŠ¨å°†ç£ç›˜ä¸­çš„å›¾ç‰‡æ‰˜åˆ°firefoxå›¾åºŠæ‹“å±•ä¸­ä¸Šä¼ ã€‚(å¦‚æœæœ‰èƒ½åŠ›è‡ªå·±å¯ä»¥ç ”ç©¶ä¸€ä¸‹å¦‚ä½•è‡ªåŠ¨ä¸Šä¼ ) æœ¬æœºç¯å¢ƒ:æœ¬æœºä½¿ç”¨çš„æ˜¯ubuntu16.04 TLS 64ç‰ˆ,å†…æ ¸ç‰ˆæœ¬ä¸º4.10.0-28-generic,qqåœ¨æœ¬æœºä¸Šå®‰è£…è¿‡ç¨‹æ— ä»»ä½•é—®é¢˜(ä»…é™æœ¬æœº)$ cat /proc/versionLinux version 4.10.0-28-generic (buildd@lgw01-12) (gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.4) ) #32~16.04.2-Ubuntu SMP Thu Jul 20 10:19:48 UTC 2017 å¼€å§‹å®‰è£…é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…xclipå·¥å…·,è¿™ä¸ªå‘½ä»¤å…¶å®æ˜¯å‘½ä»¤å»ºç«‹äº†ç»ˆç«¯å’Œå‰ªåˆ‡æ¿ä¹‹é—´é€šé“ï¼Œå¯ä»¥ç”¨å‘½ä»¤çš„æ–¹å¼å°†ç»ˆç«¯è¾“å‡ºæˆ–æ–‡ä»¶çš„å†…å®¹ä¿å­˜åˆ°å‰ªåˆ‡æ¿ä¸­ï¼Œä¹Ÿå¯ä»¥å°†å‰ªåˆ‡æ¿çš„å†…å®¹è¾“å‡ºåˆ°ç»ˆç«¯æˆ–æ–‡ä»¶ä¸­,å…·ä½“å‘½ä»¤çš„ç»†èŠ‚æœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å»ç ”ç©¶ä¸€ä¸‹ã€‚å…¶æ¬¡æˆ‘ä»¬éœ€è¦ç”¨åˆ°ubuntuè‡ªå¸¦çš„gnome-screenshotæˆªå›¾å·¥å…·,æˆ‘ä»¬å¯ä»¥æ‰“å¼€ç»ˆç«¯ è¾“å…¥gnome-screenshot -a -c 1. å®‰è£…xclip$ sudo apt-get install xclip 2. ç¼–å†™snapshot.shæ‰“å¼€/home/zyh/Documents/screenshot/snapshot.sh,å…·ä½“å†…å®¹å¦‚ä¸‹1234#!/bin/bashgnome-screenshot -a -cxclip -selection clipboard -t image/png -o &gt; $HOME/Desktop/snapshot.pngç¬¬äºŒè¡Œçš„æ„æ€æ˜¯å°†å‰ªåˆ‡æ¿ä¸­çš„å›¾ç‰‡ä»¥snapshot.pngä¸ºåä¿å­˜åˆ°æ¡Œé¢ä¸Šç¼–å†™å®Œsnapshot.sh,åœ¨ç»ˆç«¯è¾“å…¥chmod +x snapshot.sh,ä¿®æ”¹snapshot.shä¸ºå¯æ‰§è¡ŒçŠ¶æ€ 3. è‡ªå®šä¹‰æˆªå›¾å¿«æ·é”®è¿è¡Œsnapshot.shæˆ‘ä»¬å¯ä»¥åœ¨ç³»ç»Ÿè®¾ç½®çš„é”®ç›˜é€‰é¡¹ä¸­è‡ªå®šä¹‰å¿«æ·é”®æ¥è¿è¡Œæˆ‘ä»¬æƒ³è¦è¿è¡Œçš„è„šæœ¬æ–‡ä»¶ç‚¹å‡»+å·æ·»åŠ è‡ªå®šä¹‰å¿«æ·é”®,åç§°éšæ„å¡«å†™å³å¯,å‘½ä»¤å¡«å†™æˆ‘ä»¬åˆšåˆšç¼–å†™çš„snapshot.sh,è®°å¾—è¦å†™å…¨è·¯å¾„,æœ¬æœºå¡«å†™çš„æ˜¯/home/zyh/Documents/screenshot/snapshot.shæˆ‘è¿™é‡Œè®¾ç½®çš„å¿«æ·é”®æ˜¯Ctrl+Alt+W,è‡ªå·±æ ¹æ®å–œå¥½è°ƒæ•´å³å¯ã€‚ æµ‹è¯•æˆ‘ä»¬ä½¿ç”¨Ctrl+Alt+Wæˆªå›¾,ç„¶åä¼šå‘ç°æ¡Œé¢ä¸Šå¤šå‡ºä¸€ä¸ªsnapshot.pngçš„æ–‡ä»¶,éšåæˆ‘ä»¬æ‰“å¼€firefoxå°†æ–‡ä»¶æ‰˜åˆ°æ‹“å±•ä¸­ä¸Šä¼ å°±å¯ä»¥æ‹¿åˆ°æƒ³è¦çš„é“¾æ¥äº†ï¼ å…¶ä»–å¦‚æœä½ å–œæ¬¢chromeæµè§ˆå™¨,ä½ å¯ä»¥åœ¨chromeä¸‹è½½æ–°æµªå›¾åºŠæ‹“å±•ç¨‹åº,å› ä¸ºæœ€è¿‘GWFå¾ˆä¸¥,æœ¬äººæƒ¨é€ å°æ€,æ— æ³•ç§‘å­¦ä¸Šç½‘,chromeæ‹“å±•ä¸å¤ªå¥½ä¸‹è½½,æ‰€ä»¥é€‰æ‹©äº†firefox ğŸ˜¦","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[]},{"title":"å‰ç«¯ä¸€äº›çŸ¥è¯†æ±‡æ€»åˆ†äº«","slug":"2018-02-24-ç»éªŒåˆ†äº«-æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹","date":"2018-02-24T00:00:00.000Z","updated":"2019-11-29T12:20:47.651Z","comments":true,"path":"2018/02/24/2018-02-24-ç»éªŒåˆ†äº«-æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹/","link":"","permalink":"yihao.ml/2018/02/24/2018-02-24-ç»éªŒåˆ†äº«-æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹/","excerpt":"","text":"åœ¨segmentfault.comçœ‹åˆ°ä¸€ç¯‡å¥½çš„æ–‡ç« é¢è¯•çš„ä¿¡å¿ƒæ¥æºäºè¿‡ç¡¬çš„åŸºç¡€ï¼Œæ¥åˆ†äº«ä¸€ä¸‹ã€‚1.viewport2.è·¨åŸŸçš„å‡ ç§æ–¹å¼3.æ¸²æŸ“ä¼˜åŒ–4.äº‹ä»¶çš„å„ä¸ªé˜¶æ®µ5.let var const6.ç®­å¤´å‡½æ•°7.å¿«é€Ÿçš„è®©ä¸€ä¸ªæ•°ç»„ä¹±åº8.å­—ä½“font-family9.å¯èƒ½ç”¨åˆ°çš„metaæ ‡ç­¾10.æ¶ˆé™¤transitioné—ªå±11.android 4.x bug12.JS åˆ¤æ–­è®¾å¤‡æ¥æº13.audioå…ƒç´ å’Œvideoå…ƒç´ åœ¨ioså’Œandriodä¸­æ— æ³•è‡ªåŠ¨æ’­æ”¾14.csså®ç°å•è¡Œæ–‡æœ¬æº¢å‡ºæ˜¾ç¤º â€¦15.å®ç°å¤šè¡Œæ–‡æœ¬æº¢å‡ºæ˜¾ç¤ºâ€¦16.è®©å›¾æ–‡ä¸å¯å¤åˆ¶17.ç›’å­å‚ç›´æ°´å¹³å±…ä¸­18.æ”¹å˜placeholderçš„å­—ä½“é¢œè‰²å¤§å°19.æœ€å¿«æ·çš„æ•°ç»„æ±‚æœ€å¤§å€¼20.æ›´çŸ­çš„æ•°ç»„å»é‡å†™æ³•21.vue çˆ¶å­ç»„ä»¶åµŒå¥—æ—¶ï¼Œç»„ä»¶å†…éƒ¨çš„å„ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­è§¦å‘å…ˆåé¡ºåº 1.viewport12345678&lt;meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no\" /&gt;// width è®¾ç½®viewportå®½åº¦ï¼Œä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæˆ–å­—ç¬¦ä¸²â€˜device-widthâ€™// device-width è®¾å¤‡å®½åº¦// height è®¾ç½®viewporté«˜åº¦ï¼Œä¸€èˆ¬è®¾ç½®äº†å®½åº¦ï¼Œä¼šè‡ªåŠ¨è§£æå‡ºé«˜åº¦ï¼Œå¯ä»¥ä¸ç”¨è®¾ç½®// initial-scale é»˜è®¤ç¼©æ”¾æ¯”ä¾‹ï¼ˆåˆå§‹ç¼©æ”¾æ¯”ä¾‹ï¼‰ï¼Œä¸ºä¸€ä¸ªæ•°å­—ï¼Œå¯ä»¥å¸¦å°æ•°// minimum-scale å…è®¸ç”¨æˆ·æœ€å°ç¼©æ”¾æ¯”ä¾‹ï¼Œä¸ºä¸€ä¸ªæ•°å­—ï¼Œå¯ä»¥å¸¦å°æ•°// maximum-scale å…è®¸ç”¨æˆ·æœ€å¤§ç¼©æ”¾æ¯”ä¾‹ï¼Œä¸ºä¸€ä¸ªæ•°å­—ï¼Œå¯ä»¥å¸¦å°æ•°// user-scalable æ˜¯å¦å…è®¸æ‰‹åŠ¨ç¼©æ”¾å»¶ä¼¸ æé—®:æ€æ ·å¤„ç† ç§»åŠ¨ç«¯ 1px è¢« æ¸²æŸ“æˆ 2px é—®é¢˜?å±€éƒ¨å¤„ç†mataæ ‡ç­¾ä¸­çš„ viewportå±æ€§ ï¼Œinitial-scale è®¾ç½®ä¸º 1rem æŒ‰ç…§è®¾è®¡ç¨¿æ ‡å‡†èµ°ï¼Œå¤–åŠ åˆ©ç”¨transfrome çš„scale(0.5) ç¼©å°ä¸€å€å³å¯ï¼›å…¨å±€å¤„ç†mataæ ‡ç­¾ä¸­çš„ viewportå±æ€§ ï¼Œinitial-scale è®¾ç½®ä¸º 0.5rem æŒ‰ç…§è®¾è®¡ç¨¿æ ‡å‡†èµ°å³å¯ 2.è·¨åŸŸçš„å‡ ç§æ–¹å¼é¦–å…ˆäº†è§£ä¸‹æµè§ˆå™¨çš„åŒæºç­–ç•¥åŒæºç­–ç•¥/SOPï¼ˆSame origin policyï¼‰æ˜¯ä¸€ç§çº¦å®šï¼Œç”±Netscapeå…¬å¸1995å¹´å¼•å…¥æµè§ˆå™¨ï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚æœç¼ºå°‘äº†åŒæºç­–ç•¥ï¼Œæµè§ˆå™¨å¾ˆå®¹æ˜“å—åˆ°XSSã€CSRFç­‰æ”»å‡»ã€‚æ‰€è°“åŒæºæ˜¯æŒ‡&quot;åè®®+åŸŸå+ç«¯å£&quot;ä¸‰è€…ç›¸åŒï¼Œå³ä¾¿ä¸¤ä¸ªä¸åŒçš„åŸŸåæŒ‡å‘åŒä¸€ä¸ªipåœ°å€ï¼Œä¹ŸéåŒæºã€‚é‚£ä¹ˆæ€æ ·è§£å†³è·¨åŸŸé—®é¢˜çš„å‘¢ï¼Ÿé€šè¿‡jsonpè·¨åŸŸ12345678910111213&lt;script&gt; var script = document.createElement('script'); script.type = 'text/javascript'; // ä¼ å‚å¹¶æŒ‡å®šå›è°ƒæ‰§è¡Œå‡½æ•°ä¸ºonBack script.src = 'http://www.....:8080/login?user=admin&amp;callback=onBack'; document.head.appendChild(script); // å›è°ƒæ‰§è¡Œå‡½æ•° function onBack(res) &#123; alert(JSON.stringify(res)); &#125; &lt;/script&gt;document.domain + iframeè·¨åŸŸ(æ­¤æ–¹æ¡ˆä»…é™ä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒçš„è·¨åŸŸåº”ç”¨åœºæ™¯)123456789101112131415&lt;!--çˆ¶çª—å£ï¼š(http://www.domain.com/a.html)--&gt;&lt;iframe id=\"iframe\" src=\"http://child.domain.com/b.html\"&gt;&lt;/iframe&gt;&lt;script&gt; document.domain = 'domain.com'; var user = 'admin';&lt;/script&gt;&lt;!--å­çª—å£ï¼š(http://child.domain.com/b.html)--&gt;&lt;script&gt; document.domain = 'domain.com'; // è·å–çˆ¶çª—å£ä¸­å˜é‡ alert('get js data from parent ---&gt; ' + window.parent.user);&lt;/script&gt;&lt;!--å¼Šç«¯ï¼šè¯·çœ‹ä¸‹é¢æ¸²æŸ“åŠ è½½ä¼˜åŒ–--&gt;nginxä»£ç†è·¨åŸŸnodejsä¸­é—´ä»¶ä»£ç†è·¨åŸŸåç«¯åœ¨å¤´éƒ¨ä¿¡æ¯é‡Œé¢è®¾ç½®å®‰å…¨åŸŸåæ›´å¤šè·¨åŸŸçš„å…·ä½“å†…å®¹è¯·çœ‹ https://segmentfault.com/a/1190000011145364 3.æ¸²æŸ“ä¼˜åŒ–ç¦æ­¢ä½¿ç”¨iframeï¼ˆé˜»å¡çˆ¶æ–‡æ¡£onloadäº‹ä»¶ï¼‰ï¼›iframeä¼šé˜»å¡ä¸»é¡µé¢çš„Onloadäº‹ä»¶ï¼›æœç´¢å¼•æ“çš„æ£€ç´¢ç¨‹åºæ— æ³•è§£è¯»è¿™ç§é¡µé¢ï¼Œä¸åˆ©äºSEO;iframeå’Œä¸»é¡µé¢å…±äº«è¿æ¥æ± ï¼Œè€Œæµè§ˆå™¨å¯¹ç›¸åŒåŸŸçš„è¿æ¥æœ‰é™åˆ¶ï¼Œæ‰€ä»¥ä¼šå½±å“é¡µé¢çš„å¹¶è¡ŒåŠ è½½ã€‚ä½¿ç”¨iframeä¹‹å‰éœ€è¦è€ƒè™‘è¿™ä¸¤ä¸ªç¼ºç‚¹ã€‚å¦‚æœéœ€è¦ä½¿ç”¨iframeï¼Œæœ€å¥½æ˜¯é€šè¿‡javascriptåŠ¨æ€ç»™iframeæ·»åŠ srcå±æ€§å€¼ï¼Œè¿™æ ·å¯ä»¥ç»•å¼€ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ã€‚ç¦æ­¢ä½¿ç”¨gifå›¾ç‰‡å®ç°loadingæ•ˆæœï¼ˆé™ä½CPUæ¶ˆè€—ï¼Œæå‡æ¸²æŸ“æ€§èƒ½ï¼‰ï¼›ä½¿ç”¨CSS3ä»£ç ä»£æ›¿JSåŠ¨ç”»ï¼ˆå°½å¯èƒ½é¿å…é‡ç»˜é‡æ’ä»¥åŠå›æµï¼‰ï¼›å¯¹äºä¸€äº›å°å›¾æ ‡ï¼Œå¯ä»¥ä½¿ç”¨base64ä½ç¼–ç ï¼Œä»¥å‡å°‘ç½‘ç»œè¯·æ±‚ã€‚ä½†ä¸å»ºè®®å¤§å›¾ä½¿ç”¨ï¼Œæ¯”è¾ƒè€—è´¹CPUï¼›å°å›¾æ ‡ä¼˜åŠ¿åœ¨äºï¼šå‡å°‘HTTPè¯·æ±‚ï¼›é¿å…æ–‡ä»¶è·¨åŸŸï¼›ä¿®æ”¹åŠæ—¶ç”Ÿæ•ˆï¼›é¡µé¢å¤´éƒ¨çš„ä¼šé˜»å¡é¡µé¢ï¼›ï¼ˆå› ä¸º Rendererè¿›ç¨‹ä¸­ JSçº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼‰ï¼›é¡µé¢å¤´éƒ¨&lt;scriptä¼šé˜»å¡é¡µé¢ï¼›ï¼ˆå› ä¸º Rendererè¿›ç¨‹ä¸­ JSçº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼‰ï¼›é¡µé¢ä¸­ç©ºçš„ href å’Œ src ä¼šé˜»å¡é¡µé¢å…¶ä»–èµ„æºçš„åŠ è½½ (é˜»å¡ä¸‹è½½è¿›ç¨‹)ï¼›ç½‘é¡µGzipï¼ŒCDNæ‰˜ç®¡ï¼Œdataç¼“å­˜ ï¼Œå›¾ç‰‡æœåŠ¡å™¨ï¼›å‰ç«¯æ¨¡æ¿ JS+æ•°æ®ï¼Œå‡å°‘ç”±äºHTMLæ ‡ç­¾å¯¼è‡´çš„å¸¦å®½æµªè´¹ï¼Œå‰ç«¯ç”¨å˜é‡ä¿å­˜AJAXè¯·æ±‚ç»“æœï¼Œæ¯æ¬¡æ“ä½œæœ¬åœ°å˜é‡ï¼Œä¸ç”¨è¯·æ±‚ï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•°ç”¨innerHTMLä»£æ›¿DOMæ“ä½œï¼Œå‡å°‘DOMæ“ä½œæ¬¡æ•°ï¼Œä¼˜åŒ–javascriptæ€§èƒ½ã€‚å½“éœ€è¦è®¾ç½®çš„æ ·å¼å¾ˆå¤šæ—¶è®¾ç½®classNameè€Œä¸æ˜¯ç›´æ¥æ“ä½œstyleã€‚å°‘ç”¨å…¨å±€å˜é‡ã€ç¼“å­˜DOMèŠ‚ç‚¹æŸ¥æ‰¾çš„ç»“æœã€‚å‡å°‘IOè¯»å–æ“ä½œã€‚é¿å…ä½¿ç”¨CSS Expressionï¼ˆcssè¡¨è¾¾å¼)åˆç§°Dynamic properties(åŠ¨æ€å±æ€§)ã€‚å›¾ç‰‡é¢„åŠ è½½ï¼Œå°†æ ·å¼è¡¨æ”¾åœ¨é¡¶éƒ¨ï¼Œå°†è„šæœ¬æ”¾åœ¨åº•éƒ¨ åŠ ä¸Šæ—¶é—´æˆ³ã€‚é¿å…åœ¨é¡µé¢çš„ä¸»ä½“å¸ƒå±€ä¸­ä½¿ç”¨tableï¼Œtableè¦ç­‰å…¶ä¸­çš„å†…å®¹å®Œå…¨ä¸‹è½½ä¹‹åæ‰ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œæ˜¾ç¤ºæ¯”div+csså¸ƒå±€æ…¢ã€‚å¯¹æ™®é€šçš„ç½‘ç«™æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ€è·¯ï¼Œå°±æ˜¯å°½é‡å‘å‰ç«¯ä¼˜åŒ–ã€å‡å°‘æ•°æ®åº“æ“ä½œã€å‡å°‘ç£ç›˜IOã€‚å‘å‰ç«¯ä¼˜åŒ–æŒ‡çš„æ˜¯ï¼Œåœ¨ä¸å½±å“åŠŸèƒ½å’Œä½“éªŒçš„æƒ…å†µä¸‹ï¼Œèƒ½åœ¨æµè§ˆå™¨æ‰§è¡Œçš„ä¸è¦åœ¨æœåŠ¡ç«¯æ‰§è¡Œï¼Œèƒ½åœ¨ç¼“å­˜æœåŠ¡å™¨ä¸Šç›´æ¥è¿”å›çš„ä¸è¦åˆ°åº”ç”¨æœåŠ¡å™¨ï¼Œç¨‹åºèƒ½ç›´æ¥å–å¾—çš„ç»“æœä¸è¦åˆ°å¤–éƒ¨å–å¾—ï¼Œæœ¬æœºå†…èƒ½å–å¾—çš„æ•°æ®ä¸è¦åˆ°è¿œç¨‹å–ï¼Œå†…å­˜èƒ½å–åˆ°çš„ä¸è¦åˆ°ç£ç›˜å–ï¼Œç¼“å­˜ä¸­æœ‰çš„ä¸è¦å»æ•°æ®åº“æŸ¥è¯¢ã€‚å‡å°‘æ•°æ®åº“æ“ä½œæŒ‡å‡å°‘æ›´æ–°æ¬¡æ•°ã€ç¼“å­˜ç»“æœå‡å°‘æŸ¥è¯¢æ¬¡æ•°ã€å°†æ•°æ®åº“æ‰§è¡Œçš„æ“ä½œå°½å¯èƒ½çš„è®©ä½ çš„ç¨‹åºå®Œæˆï¼ˆä¾‹å¦‚joinæŸ¥è¯¢ï¼‰ï¼Œå‡å°‘ç£ç›˜IOæŒ‡å°½é‡ä¸ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿä½œä¸ºç¼“å­˜ã€å‡å°‘è¯»å†™æ–‡ä»¶æ¬¡æ•°ç­‰ã€‚ç¨‹åºä¼˜åŒ–æ°¸è¿œè¦ä¼˜åŒ–æ…¢çš„éƒ¨åˆ†ï¼Œæ¢è¯­è¨€æ˜¯æ— æ³•â€œä¼˜åŒ–â€çš„ã€‚ 4.äº‹ä»¶çš„å„ä¸ªé˜¶æ®µ1ï¼šæ•è·é˜¶æ®µ â€”&gt; 2ï¼šç›®æ ‡é˜¶æ®µ â€”&gt; 3ï¼šå†’æ³¡é˜¶æ®µdocument â€”&gt; targetç›®æ ‡ ----&gt; documentç”±æ­¤ï¼ŒaddEventListenerçš„ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸ºtrueå’Œfalseçš„åŒºåˆ«å·²ç»éå¸¸æ¸…æ™°äº†ï¼štrueè¡¨ç¤ºè¯¥å…ƒç´ åœ¨äº‹ä»¶çš„â€œæ•è·é˜¶æ®µâ€ï¼ˆç”±å¤–å¾€å†…ä¼ é€’æ—¶ï¼‰å“åº”äº‹ä»¶ï¼›falseè¡¨ç¤ºè¯¥å…ƒç´ åœ¨äº‹ä»¶çš„â€œå†’æ³¡é˜¶æ®µâ€ï¼ˆç”±å†…å‘å¤–ä¼ é€’æ—¶ï¼‰å“åº”äº‹ä»¶ã€‚ 5.let var constlet å…è®¸ä½ å£°æ˜ä¸€ä¸ªä½œç”¨åŸŸè¢«é™åˆ¶åœ¨å—çº§ä¸­çš„å˜é‡ã€è¯­å¥æˆ–è€…è¡¨è¾¾å¼letç»‘å®šä¸å—å˜é‡æå‡çš„çº¦æŸï¼Œè¿™æ„å‘³ç€letå£°æ˜ä¸ä¼šè¢«æå‡åˆ°å½“å‰è¯¥å˜é‡å¤„äºä»å—å¼€å§‹åˆ°åˆå§‹åŒ–å¤„ç†çš„â€œæš‚å­˜æ­»åŒºâ€ã€‚var å£°æ˜å˜é‡çš„ä½œç”¨åŸŸé™åˆ¶åœ¨å…¶å£°æ˜ä½ç½®çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè€Œéå£°æ˜å˜é‡æ€»æ˜¯å…¨å±€çš„ç”±äºå˜é‡å£°æ˜ï¼ˆä»¥åŠå…¶ä»–å£°æ˜ï¼‰æ€»æ˜¯åœ¨ä»»æ„ä»£ç æ‰§è¡Œä¹‹å‰å¤„ç†çš„ï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­çš„ä»»æ„ä½ç½®å£°æ˜å˜é‡æ€»æ˜¯ç­‰æ•ˆäºåœ¨ä»£ç å¼€å¤´å£°æ˜const å£°æ˜åˆ›å»ºä¸€ä¸ªå€¼çš„åªè¯»å¼•ç”¨ (å³æŒ‡é’ˆ)è¿™é‡Œå°±è¦ä»‹ç»ä¸‹ JS å¸¸ç”¨ç±»å‹Stringã€Numberã€Booleanã€Arrayã€Objectã€Nullã€UndefinedåŸºæœ¬ç±»å‹ æœ‰ Undefinedã€Nullã€Booleanã€Numberã€Stringï¼Œä¿å­˜åœ¨æ ˆä¸­ï¼›å¤åˆç±»å‹ æœ‰ Arrayã€Object ï¼Œä¿å­˜åœ¨å †ä¸­ï¼›åŸºæœ¬æ•°æ®å½“å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé‚£ä¹ˆå…¶å¯¹åº”çš„æŒ‡é’ˆä¹Ÿå°†å‘ç”Ÿæ”¹å˜ï¼Œæ•…é€ æˆ constç”³æ˜åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œå†å°†å…¶å€¼æ”¹å˜æ—¶ï¼Œå°†ä¼šé€ æˆæŠ¥é”™ï¼Œ ä¾‹å¦‚ const a = 3 ; a = 5 æ—¶ å°†ä¼šæŠ¥é”™ï¼›ä½†æ˜¯å¦‚æœæ˜¯å¤åˆç±»å‹æ—¶ï¼Œå¦‚æœåªæ”¹å˜å¤åˆç±»å‹çš„å…¶ä¸­æŸä¸ªValueé¡¹æ—¶ï¼Œ å°†è¿˜æ˜¯æ­£å¸¸ä½¿ç”¨ï¼› 6.ç®­å¤´å‡½æ•°è¯­æ³•æ¯”å‡½æ•°è¡¨è¾¾å¼æ›´çŸ­ï¼Œå¹¶ä¸”ä¸ç»‘å®šè‡ªå·±çš„thisï¼Œargumentsï¼Œsuperæˆ– new.targetã€‚è¿™äº›å‡½æ•°è¡¨è¾¾å¼æœ€é€‚åˆç”¨äºéæ–¹æ³•å‡½æ•°ï¼Œå¹¶ä¸”å®ƒä»¬ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚è¿™ä¸ªæ˜¯æˆ‘æœ¬åœ°çš„profileä½œå‚è€ƒ 7.å¿«é€Ÿçš„è®©ä¸€ä¸ªæ•°ç»„ä¹±åº12345var arr = [1,2,3,4,5,6,7,8,9,10];arr.sort(function()&#123; return Math.random() - 0.5;&#125;)console.log(arr);æ­¤å¤„è§£é‡Šï¼šï¼ˆè¯­è¨€ç»„ç»‡èƒ½åŠ›ä¸è¶³ï¼Œè¯·å‹¿åæ§½ï¼‰é¦–å…ˆï¼š å½“return çš„å€¼å°äº 0 ï¼Œé‚£ä¹ˆ a ä¼šè¢«æ’åˆ—åˆ° b ä¹‹å‰ï¼› ç­‰äº 0 ï¼Œ a å’Œ b çš„ç›¸å¯¹ä½ç½®ä¸å˜ï¼› å¤§äº 0 ï¼Œ b ä¼šè¢«æ’åˆ—åˆ° a ä¹‹å‰ï¼› è¿™é‡Œä½ ä¼š å‘ç°èµ·å§‹ çš„æ—¶å€™æ•°ç»„æ˜¯æ­£åºæ’åˆ—ï¼Œæ¯å½“è¿›è¡Œä¸€æ¬¡æ’åˆ—çš„æ—¶å€™ï¼Œ éƒ½ä¼šå…ˆéšæœºä¸€ä¸ªéšæœºæ•°ï¼ˆæ³¨æ„è¿™é‡Œçš„æ¯ä¸€æ¬¡æ’åˆ— æŒ‡ æ¯ä¸€ä¸ªçº¢æ¡†æŒ‡ä¸€æ¬¡æ’åˆ—ï¼Œ å…±9æ¬¡æ’åˆ— ï¼Œ ä¸€æ¬¡æ’åˆ—ä¸­å¯èƒ½å­˜åœ¨å¤šæ¬¡æ¯”è¾ƒï¼‰ï¼›å½“ä¸€æ¬¡æ’åˆ—çš„ éšæœºæ•°å¤§äº0.5 æ—¶ å°†ä¼šè¿›è¡Œç¬¬äºŒæ¬¡æ¯”è¾ƒï¼Œ å½“ç¬¬äºŒæ¬¡éšæœºæ•° ä»ç„¶å¤§äº0.5 æ—¶ ï¼Œå°†ä¼šå† è¿›è¡Œä¸€æ¬¡æ¯”è¾ƒï¼Œ ç›´åˆ° éšæœºæ•°å¤§äº0.5 æˆ–è€…æ’åˆ—åˆ°ç¬¬ä¸€ä½ï¼›å½“ä¸€æ¬¡æ’åˆ—çš„ éšæœºæ•° å°äº0.5æ—¶ å½“å‰æ¯”è¾ƒçš„ä¸¤é¡¹ ç´¢å¼•å°†ä¸ä¼šæ”¹å˜ ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡ çš„æ’åˆ—ï¼› 8.å­—ä½“font-family@ å®‹ä½“ SimSun@ é»‘ä½“ SimHei@ å¾®ä¿¡é›…é»‘ Microsoft Yahei@ å¾®è½¯æ­£é»‘ä½“ Microsoft JhengHei@ æ–°å®‹ä½“ NSimSun@ æ–°ç»†æ˜ä½“ MingLiU@ ç»†æ˜ä½“ MingLiU@ æ ‡æ¥·ä½“ DFKai-SB@ ä»¿å®‹ FangSong@ æ¥·ä½“ KaiTi@ ä»¿å®‹_GB2312 FangSong_GB2312@ æ¥·ä½“_GB2312 KaiTi_GB2312@@ è¯´æ˜ï¼šä¸­æ–‡å­—ä½“å¤šæ•°ä½¿ç”¨å®‹ä½“ã€é›…é»‘ï¼Œè‹±æ–‡ç”¨Helveticabody { font-family: Microsoft Yahei,SimSun,Helvetica; } 9.å¯èƒ½ç”¨åˆ°çš„metaæ ‡ç­¾123456789101112131415161718192021222324252627&lt;!-- ä»…é’ˆå¯¹IOSçš„Safarié¡¶ç«¯çŠ¶æ€æ¡çš„æ ·å¼ï¼ˆå¯é€‰default/black/black-translucent ï¼‰ --&gt;&lt;meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" /&gt;&lt;!-- IOSä¸­ç¦ç”¨å°†æ•°å­—è¯†åˆ«ä¸ºç”µè¯å·ç /å¿½ç•¥Androidå¹³å°ä¸­å¯¹é‚®ç®±åœ°å€çš„è¯†åˆ« --&gt;&lt;meta name=\"format-detection\"content=\"telephone=no, email=no\" /&gt;&lt;!--å…¶ä»–metaæ ‡ç­¾--&gt;&lt;!-- å¯ç”¨360æµè§ˆå™¨çš„æé€Ÿæ¨¡å¼(webkit) --&gt;&lt;meta name=\"renderer\" content=\"webkit\"&gt;&lt;!-- é¿å…IEä½¿ç”¨å…¼å®¹æ¨¡å¼ --&gt;&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;&lt;!-- é’ˆå¯¹æ‰‹æŒè®¾å¤‡ä¼˜åŒ–ï¼Œä¸»è¦æ˜¯é’ˆå¯¹ä¸€äº›è€çš„ä¸è¯†åˆ«viewportçš„æµè§ˆå™¨ï¼Œæ¯”å¦‚é»‘è“ --&gt;&lt;meta name=\"HandheldFriendly\" content=\"true\"&gt;&lt;!-- å¾®è½¯çš„è€å¼æµè§ˆå™¨ --&gt;&lt;meta name=\"MobileOptimized\" content=\"320\"&gt;&lt;!-- ucå¼ºåˆ¶ç«–å± --&gt;&lt;meta name=\"screen-orientation\" content=\"portrait\"&gt;&lt;!-- QQå¼ºåˆ¶ç«–å± --&gt;&lt;meta name=\"x5-orientation\" content=\"portrait\"&gt;&lt;!-- UCå¼ºåˆ¶å…¨å± --&gt;&lt;meta name=\"full-screen\" content=\"yes\"&gt;&lt;!-- QQå¼ºåˆ¶å…¨å± --&gt;&lt;meta name=\"x5-fullscreen\" content=\"true\"&gt;&lt;!-- UCåº”ç”¨æ¨¡å¼ --&gt;&lt;meta name=\"browsermode\" content=\"application\"&gt;&lt;!-- QQåº”ç”¨æ¨¡å¼ --&gt;&lt;meta name=\"x5-page-mode\" content=\"app\"&gt;&lt;!-- windows phone ç‚¹å‡»æ— é«˜å…‰ --&gt;&lt;meta name=\"msapplication-tap-highlight\" content=\"no\"&gt; 10.æ¶ˆé™¤transitioné—ªå±12345.css &#123;-webkit-transform-style: preserve-3d;-webkit-backface-visibility: hidden;-webkit-perspective: 1000;&#125;è¿‡æ¸¡åŠ¨ç”»ï¼ˆåœ¨æ²¡æœ‰å¯åŠ¨ç¡¬ä»¶åŠ é€Ÿçš„æƒ…å†µä¸‹ï¼‰ä¼šå‡ºç°æŠ–åŠ¨çš„ç°è±¡ï¼Œ ä»¥ä¸Šçš„ è§£å†³æ–¹æ¡ˆåªæ˜¯æ”¹å˜ è§†è§’ æ¥å¯åŠ¨ç¡¬ä»¶åŠ é€Ÿçš„ä¸€ç§æ–¹å¼ï¼›å¯åŠ¨ç¡¬ä»¶åŠ é€Ÿçš„ å¦å¤–ä¸€ç§æ–¹å¼ï¼š123456.css &#123;-webkit-transform: translate3d(0,0,0);-moz-transform: translate3d(0,0,0);-ms-transform: translate3d(0,0,0);transform: translate3d(0,0,0);&#125;å¯åŠ¨ç¡¬ä»¶åŠ é€Ÿ:æœ€å¸¸ç”¨çš„æ–¹å¼ï¼štranslate3dã€translateZã€transformopacityå±æ€§/è¿‡æ¸¡åŠ¨ç”»ï¼ˆéœ€è¦åŠ¨ç”»æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æ‰ä¼šåˆ›å»ºåˆæˆå±‚ï¼ŒåŠ¨ç”»æ²¡æœ‰å¼€å§‹æˆ–ç»“æŸåå…ƒç´ è¿˜ä¼šå›åˆ°ä¹‹å‰çš„çŠ¶æ€ï¼‰will-changå±æ€§ï¼ˆè¿™ä¸ªæ¯”è¾ƒååƒ»ï¼‰ï¼Œä¸€èˆ¬é…åˆopacityä¸translateä½¿ç”¨ï¼ˆè€Œä¸”ç»æµ‹è¯•ï¼Œé™¤äº†ä¸Šè¿°å¯ä»¥å¼•å‘ç¡¬ä»¶åŠ é€Ÿçš„å±æ€§å¤–ï¼Œå…¶å®ƒå±æ€§å¹¶ä¸ä¼šå˜æˆå¤åˆå±‚ï¼‰ï¼Œå¼Šç«¯ï¼š ç¡¬ä»¶åŠ é€Ÿä¼šå¯¼è‡´ CPUæ€§èƒ½å ç”¨é‡è¿‡å¤§ï¼Œç”µæ± ç”µé‡æ¶ˆè€—åŠ å¤§ ï¼›å› æ­¤ å°½é‡é¿å…æ³›æ»¥ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿã€‚ 11.android 4.x bug1.ä¸‰æ˜Ÿ Galaxy S4ä¸­è‡ªå¸¦æµè§ˆå™¨ä¸æ”¯æŒborder-radiusç¼©å†™2.åŒæ—¶è®¾ç½®border-radiuså’ŒèƒŒæ™¯è‰²çš„æ—¶å€™ï¼ŒèƒŒæ™¯è‰²ä¼šæº¢å‡ºåˆ°åœ†è§’ä»¥å¤–éƒ¨åˆ†3.éƒ¨åˆ†æ‰‹æœº(å¦‚ä¸‰æ˜Ÿ)ï¼Œaé“¾æ¥æ”¯æŒé¼ æ ‡:visitedäº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´é“¾æ¥è®¿é—®åæ–‡å­—å˜ä¸ºç´«è‰²4.androidæ— æ³•åŒæ—¶æ’­æ”¾å¤šéŸ³é¢‘audio5.oppo çš„border-radius ä¼šå¤±æ•ˆ 12.JS åˆ¤æ–­è®¾å¤‡æ¥æº12345678910111213141516171819202122function deviceType()&#123; var ua = navigator.userAgent; var agent = [\"Android\", \"iPhone\", \"SymbianOS\", \"Windows Phone\", \"iPad\", \"iPod\"]; for(var i=0; i&lt;len,len = agent.length; i++)&#123; if(ua.indexOf(agent[i])&gt;0)&#123; break; &#125; &#125;&#125;deviceType();window.addEventListener('resize', function()&#123; deviceType();&#125;)//å¾®ä¿¡çš„ æœ‰äº›ä¸å¤ªä¸€æ ·function isWeixin()&#123; var ua = navigator.userAgent.toLowerCase(); if(ua.match(/MicroMessenger/i)=='micromessenger')&#123; return true; &#125;else&#123; return false; &#125;&#125; 13.audioå…ƒç´ å’Œvideoå…ƒç´ åœ¨ioså’Œandriodä¸­æ— æ³•è‡ªåŠ¨æ’­æ”¾åŸå› ï¼š å› ä¸ºå„å¤§æµè§ˆå™¨éƒ½ä¸ºäº†èŠ‚çœæµé‡ï¼Œåšå‡ºäº†ä¼˜åŒ–ï¼Œåœ¨ç”¨æˆ·æ²¡æœ‰è¡Œä¸ºåŠ¨ä½œæ—¶ï¼ˆäº¤äº’ï¼‰ä¸äºˆè®¸è‡ªåŠ¨æ’­æ”¾ï¼›1234567891011121314151617181920//éŸ³é¢‘ï¼Œå†™æ³•ä¸€&lt;audio src=\"music/bg.mp3\" autoplay loop controls&gt;ä½ çš„æµè§ˆå™¨è¿˜ä¸æ”¯æŒå“¦&lt;/audio&gt;//éŸ³é¢‘ï¼Œå†™æ³•äºŒ&lt;audio controls=\"controls\"&gt; &lt;source src=\"music/bg.ogg\" type=\"audio/ogg\"&gt;&lt;/source&gt; &lt;source src=\"music/bg.mp3\" type=\"audio/mpeg\"&gt;&lt;/source&gt; ä¼˜å…ˆæ’­æ”¾éŸ³ä¹bg.oggï¼Œä¸æ”¯æŒåœ¨æ’­æ”¾bg.mp3&lt;/audio&gt;//JSç»‘å®šè‡ªåŠ¨æ’­æ”¾ï¼ˆæ“ä½œwindowæ—¶ï¼Œæ’­æ”¾éŸ³ä¹ï¼‰$(window).one('touchstart', function()&#123; music.play();&#125;)//å¾®ä¿¡ä¸‹å…¼å®¹å¤„ç†document.addEventListener(\"WeixinJSBridgeReady\", function () &#123; music.play();&#125;, false);//å°ç»“//1.audioå…ƒç´ çš„autoplayå±æ€§åœ¨IOSåŠAndroidä¸Šæ— æ³•ä½¿ç”¨ï¼Œåœ¨PCç«¯æ­£å¸¸ï¼›//2.audioå…ƒç´ æ²¡æœ‰è®¾ç½®controlsæ—¶ï¼Œåœ¨IOSåŠAndroidä¼šå æ®ç©ºé—´å¤§å°ï¼Œè€Œåœ¨PCç«¯Chromeæ˜¯ä¸ä¼šå æ®ä»»ä½•ç©ºé—´ï¼›//3.æ³¨æ„ä¸è¦é—æ¼å¾®ä¿¡çš„å…¼å®¹å¤„ç†éœ€è¦å¼•ç”¨å¾®ä¿¡JSï¼› 14.csså®ç°å•è¡Œæ–‡æœ¬æº¢å‡ºæ˜¾ç¤º â€¦ç›´æ¥ä¸Šæ•ˆæœï¼šç›¸å¯¹äºå¤šè¡Œæ–‡æœ¬æº¢å‡ºåšå¤„ç†ï¼Œ å•è¡Œè¦ç®€å•å¤šï¼Œä¸”æ›´å®¹æ˜“ç†è§£ã€‚å®ç°æ–¹æ³•1234overflow: hidden;text-overflow:ellipsis;white-space: nowrap;//å½“ç„¶è¿˜éœ€è¦åŠ å®½åº¦widthå±æ¥å…¼å®¹éƒ¨åˆ†æµè§ˆã€‚ 15.å®ç°å¤šè¡Œæ–‡æœ¬æº¢å‡ºæ˜¾ç¤ºâ€¦æ•ˆæœï¼šå®ç°æ–¹æ³•ï¼š1234display: -webkit-box;-webkit-box-orient: vertical;-webkit-line-clamp: 3;overflow: hidden;é€‚ç”¨èŒƒå›´ï¼šå› ä½¿ç”¨äº†WebKitçš„CSSæ‰©å±•å±æ€§ï¼Œè¯¥æ–¹æ³•é€‚ç”¨äºWebKitæµè§ˆå™¨åŠç§»åŠ¨ç«¯ï¼›æ³¨ï¼š-webkit-line-clampç”¨æ¥é™åˆ¶åœ¨ä¸€ä¸ªå—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•°ã€‚ ä¸ºäº†å®ç°è¯¥æ•ˆæœï¼Œå®ƒéœ€è¦ç»„åˆå…¶ä»–çš„WebKitå±æ€§ã€‚å¸¸è§ç»“åˆå±æ€§ï¼šdisplay: -webkit-box; å¿…é¡»ç»“åˆçš„å±æ€§ ï¼Œå°†å¯¹è±¡ä½œä¸ºå¼¹æ€§ä¼¸ç¼©ç›’å­æ¨¡å‹æ˜¾ç¤º ã€‚-webkit-box-orient å¿…é¡»ç»“åˆçš„å±æ€§ ï¼Œè®¾ç½®æˆ–æ£€ç´¢ä¼¸ç¼©ç›’å¯¹è±¡çš„å­å…ƒç´ çš„æ’åˆ—æ–¹å¼ ã€‚å¦‚æœä½ è§‰ç€è¿™æ ·è¿˜ä¸å¤Ÿç¾è§‚ï¼Œ é‚£ä¹ˆå°±æ¥ç€å¾€ä¸‹çœ‹ï¼šæ•ˆæœï¼šè¿™æ · æ˜¯ä¸æ˜¯ä½ æƒ³è¦çš„å‘¢ï¼Ÿå®ç°æ–¹æ³•ï¼š12345678910111213div &#123; position: relative; line-height: 20px; max-height: 40px; overflow: hidden;&#125;div:after &#123; content: \"...\"; position: absolute; bottom: 0; right: 0; padding-left: 40px; background: -webkit-linear-gradient(left, transparent, #fff 55%); background: -o-linear-gradient(right, transparent, #fff 55%); background: -moz-linear-gradient(right, transparent, #fff 55%); background: linear-gradient(to right, transparent, #fff 55%);&#125;ä¸è¦åªé¡¾ç€åƒï¼Œè¦æ³¨æ„èƒƒå£ï¼Œæ­¤æ–¹æ³•æœ‰ä¸ªå¼Šç«¯ é‚£å°±æ˜¯ ã€æœªè¶…å‡ºè¡Œçš„æƒ…å†µä¸‹ä¹Ÿä¼šå‡ºç°çœç•¥å·ã€‘ ï¼Œè¿™æ ·ä¼šä¸ä¼šå¾ˆæŒ«ï¼ï¼ï¼ æ²¡åŠæ³•ï¼Œåªèƒ½ç»“åˆJS è¿›è¡Œä¼˜åŒ–è¯¥æ–¹æ³•äº†ã€‚æ³¨ï¼šå°†heightè®¾ç½®ä¸ºline-heightçš„æ•´æ•°å€ï¼Œé˜²æ­¢è¶…å‡ºçš„æ–‡å­—éœ²å‡ºã€‚ç»™p::afteræ·»åŠ æ¸å˜èƒŒæ™¯å¯é¿å…æ–‡å­—åªæ˜¾ç¤ºä¸€åŠã€‚ç”±äºie6-7ä¸æ˜¾ç¤ºcontentå†…å®¹ï¼Œæ‰€ä»¥è¦æ·»åŠ æ ‡ç­¾å…¼å®¹ie6-7ï¼ˆå¦‚ï¼šâ€¦ï¼‰ï¼›å…¼å®¹ie8éœ€è¦å°†::afteræ›¿æ¢æˆ:afterã€‚ 16.è®©å›¾æ–‡ä¸å¯å¤åˆ¶è¿™ç‚¹åº”è¯¥å¤§å®¶ éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œ æŸäº›æ—¶å€™ã€ä½ æ‡‚çš„ã€‘ä¸ºäº†å¿«æ·æœç´¢ç­”æ¡ˆï¼Œå¯æ˜¯æ‰“æ­»ä¹Ÿä¸è®©ä½ å¤åˆ¶12345-webkit-user-select: none; -ms-user-select: none;-moz-user-select: none;-khtml-user-select: none;user-select: none;é‚£æœ‰äº›ç½‘é¡µä¸ºäº†å°Šé‡åŸåˆ›ï¼Œå¤åˆ¶çš„æ–‡æœ¬ éƒ½ä¼šè¢«åŠ ä¸Šä¸€æ®µæ¥æºè¯´æ˜ï¼Œæ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿé—®çš„å¥½ï¼ ç­‰çš„å°±æ˜¯ä½ è¿™ä¸ªé—®é¢˜ -_- ã€‚å¤§è‡´æ€è·¯ï¼šç­”æ¡ˆåŒºåŸŸç›‘å¬copyäº‹ä»¶ï¼Œå¹¶é˜»æ­¢è¿™ä¸ªäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚è·å–é€‰ä¸­çš„å†…å®¹ï¼ˆwindow.getSelection()ï¼‰åŠ ä¸Šç‰ˆæƒä¿¡æ¯ï¼Œç„¶åè®¾ç½®åˆ°å‰ªåˆ‡æ¿ï¼ˆclipboarddata.setData()ï¼‰ã€‚ 17.ç›’å­å‚ç›´æ°´å¹³å±…ä¸­è¿™ä¸ªé—®é¢˜å¥½åƒé¢è¯•å¿…é—®çš„å”ï¼åæ­£æˆ‘æ˜¯å¿…é—®çš„ï¼Œå“ˆå“ˆï¼ï¼ï¼ å…¶å®æ— å…³å¤šå°‘ç§å®ç°æ€è·¯ï¼Œåªè¦ä½ èƒ½å®ç°å°±å¯ä»¥ï¼æä¾›4ç§æ–¹æ³•å®šä½ ç›’å­å®½é«˜å·²çŸ¥ï¼Œ position: absolute; left: 50%; top: 50%; margin-left:-è‡ªèº«ä¸€åŠå®½åº¦; margin-top: -è‡ªèº«ä¸€åŠé«˜åº¦;table-cellå¸ƒå±€ çˆ¶çº§ display: table-cell; vertical-align: middle; å­çº§ margin: 0 auto;å®šä½ + transform ; é€‚ç”¨äº å­ç›’å­ å®½é«˜ä¸å®šæ—¶ï¼› ï¼ˆè¿™é‡Œæ˜¯æœ¬äººå¸¸ç”¨æ–¹æ³•ï¼‰1234567position: relative / absolute;/*topå’Œleftåç§»å„ä¸º50%*/top: 50%;left: 50%;/*translate(-50%,-50%) åç§»è‡ªèº«çš„å®½å’Œé«˜çš„-50%*/transform: translate(-50%, -50%);/*æ³¨æ„è¿™é‡Œå¯åŠ¨äº†3Dç¡¬ä»¶åŠ é€Ÿå“¦ ä¼šå¢åŠ è€—ç”µé‡çš„ ï¼ˆè‡³äºä½•æ˜¯3DåŠ é€Ÿ è¯·çœ‹æµè§ˆå™¨è¿›ç¨‹ä¸çº¿ç¨‹ç¯‡ï¼‰*/flex å¸ƒå±€çˆ¶çº§ï¼š123456/*flex å¸ƒå±€*/display: flex;/*å®ç°å‚ç›´å±…ä¸­*/align-items: center;/*å®ç°æ°´å¹³å±…ä¸­*/justify-content: center;å†åŠ ä¸€ç§æ°´å¹³æ–¹å‘ä¸Šå±…ä¸­ ï¼šmargin-left : 50% ; transform: translateX(-50%); 18.æ”¹å˜placeholderçš„å­—ä½“é¢œè‰²å¤§å°å…¶å®è¿™ä¸ªæ–¹æ³•ä¹Ÿå°±åœ¨PCç«¯å¯ä»¥ï¼ŒçœŸæœºä¸Šå±ç”¨éƒ½æ²¡æœ‰ï¼Œå½“æ—¶æˆ‘å°±å“­äº†ã€‚ ä½† è¿˜æ˜¯è´´å‡ºæ¥å§123456789101112131415input::-webkit-input-placeholder &#123; /* WebKit browsers */ font-size:14px; color: #333;&#125; input::-moz-placeholder &#123; /* Mozilla Firefox 19+ */ font-size:14px; color: #333;&#125; input:-ms-input-placeholder &#123; /* Internet Explorer 10+ */ font-size:14px; color: #333;&#125; 19.æœ€å¿«æ·çš„æ•°ç»„æ±‚æœ€å¤§å€¼12var arr = [ 1,5,1,7,5,9];Math.max(...arr) // 9 20.æ›´çŸ­çš„æ•°ç»„å»é‡å†™æ³•12[...new Set([2,\"12\",2,12,1,2,1,6,12,13,6])]// [2, \"12\", 12, 1, 6, 13] 21.vue çˆ¶å­ç»„ä»¶åµŒå¥—æ—¶ï¼Œç»„ä»¶å†…éƒ¨çš„å„ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­è§¦å‘å…ˆåé¡ºåºé¦–å…ˆ æˆ‘ä»¬å¯ä»¥æŠŠ å­ç»„ä»¶å½“åšfunctionå‡½æ•°æ¥çœ‹å¾…ï¼Œå½“çˆ¶ç»„ä»¶ import å­ç»„ä»¶çš„æ—¶å€™ï¼Œ å°±å½“æ˜¯å£°æ˜äº† å¹¶åŠ è½½äº†è¿™ä¸ªå‡½æ•°ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™æ‰ä¼šå»æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼ˆå­ç»„ä»¶ï¼‰ã€‚é‚£ä¹ˆçˆ¶å­ç»„ä»¶ä¸­çš„å„ä¸ªå£°æ˜å‘¨æœŸé’©å­è§¦å‘çš„å…ˆåé¡ºåºæ˜¯æ€æ ·çš„å‘¢ï¼Ÿå¦‚ä¸‹å›¾ï¼šä¸‹å›¾å¸¦222 çš„ æ˜¯ä¸ºå­ç»„ä»¶ï¼Œæ‰€ä»¥ä¸€æ¬¡é¡ºåºæ˜¯ä¸º å…ˆåˆ›å»ºçˆ¶ç»„ä»¶ï¼Œç„¶åæ‰ç©¿ä»¶å­ç»„ä»¶ï¼Œå½“å­ç»„ä»¶åˆ›å»ºå®Œæˆå¹¶ä¸”å®ä½“domæŒ‚è½½å®Œæˆåçˆ¶ç»„ä»¶æ‰æŒ‚è½½å®Œæˆæ³¨ï¼šèµ„æºæ¥æºäºhttps://segmentfault.com/a/1190000013331105?utm_source=index-hottest#articleHeader15","categories":[{"name":"è½¬è½½","slug":"è½¬è½½","permalink":"yihao.ml/categories/è½¬è½½/"}],"tags":[]},{"title":"Pythonäº”å¤§æ ‡å‡†æ•°æ®ç±»å‹","slug":"2018-02-23-python-æ ‡å‡†æ•°æ®ç±»å‹","date":"2018-02-23T00:00:00.000Z","updated":"2019-11-29T12:20:47.650Z","comments":true,"path":"2018/02/23/2018-02-23-python-æ ‡å‡†æ•°æ®ç±»å‹/","link":"","permalink":"yihao.ml/2018/02/23/2018-02-23-python-æ ‡å‡†æ•°æ®ç±»å‹/","excerpt":"","text":"12345678910111213141516171819a,b,c,d = 1,2.0,3.00,\"HHHH\";print(a);print(b); print(c);print(d);lists = ['1','2','3'];print(lists);tuples = ('1','2','3');print(tuples);dictionary = &#123;1:'a',2:'b',3:'c'&#125;;print(dictionary);``` ```python# 99ä¹˜æ³•è¡¨for i in range(1,10): for j in range(i,10): print(i,\"*\",j,\"=\",i*j,end='\\t'); print(\"\\n\");","categories":[{"name":"ç¼–ç¨‹è¯­è¨€","slug":"ç¼–ç¨‹è¯­è¨€","permalink":"yihao.ml/categories/ç¼–ç¨‹è¯­è¨€/"}],"tags":[{"name":"Python3","slug":"Python3","permalink":"yihao.ml/tags/Python3/"}]},{"title":"seleniumèµ„æ–™é¦†åº“","slug":"2018-02-12-js-seleniumèµ„æ–™åº“","date":"2018-02-12T00:00:00.000Z","updated":"2019-11-29T12:20:47.649Z","comments":true,"path":"2018/02/12/2018-02-12-js-seleniumèµ„æ–™åº“/","link":"","permalink":"yihao.ml/2018/02/12/2018-02-12-js-seleniumèµ„æ–™åº“/","excerpt":"","text":"ä»Šå¤©æŠŠæ‰‹å¤´æœ‰çš„ä¸€äº›å…³äºseleniumæµ‹è¯•çš„èµ„æºæ•´ç†äº†ä¸€ä¸‹ï¼Œåˆ†äº«å‡ºæ¥ã€‚ 1.æ‰€æœ‰ç‰ˆæœ¬chromeä¸‹è½½æ˜¯ä¸æ˜¯å¾ˆéš¾æ‰¾åˆ°è€ç‰ˆæœ¬çš„chromeï¼Ÿåšä¸»æ”¶é›†äº†å‡ ä¸ªä¸‹è½½chromeè€ç‰ˆæœ¬çš„ç½‘ç«™ï¼Œå…¶ä¸­å“ªä¸ªä¸‹è½½çš„æ˜¯åŸç‰ˆçš„å°±ä¸å¾—è€ŒçŸ¥äº†ã€‚http://www.slimjet.com/chrome/google-chrome-old-version.phphttp://google_chrome.en.downloadastro.com/old_versions/http://filehippo.com/zh/download_google_chrome/http://www.chromedownloads.net/ä¸‹é¢è¿™ä¸ªç½‘å€å¤§å¤šæ˜¯Macçš„å¤šäº›ï¼ŒWindowsä¸‹çš„å¾ˆç¼ºï¼Œä½†æ˜¯æœ‰å¥½å¤šå…¶ä»–çš„è½¯ä»¶ä¸‹è½½ï¼Œå¯ä»¥å»çœ‹çœ‹ï¼šuptodown 2. æ‰€æœ‰ç‰ˆæœ¬firefoxä¸‹è½½ç«ç‹ç›¸å¯¹æ¯”è¾ƒå®¹æ˜“æ‰¾ï¼Œè¿™é‡Œä¹Ÿè´´å‡ºæ¥å…¶ftpé“¾æ¥ï¼šhttp://ftp.mozilla.org/pub/firefox/releases/è‡³äºç«ç‹çš„ç‰ˆæœ¬ä¸seleniumçš„å¯¹åº”å…³ç³»ï¼Œç¡®å®æ²¡æœ‰è¿™æ–¹é¢åˆé€‚çš„èµ„æ–™ï¼Œä¸è¿‡å»ºè®®selenium 2.53ä»¥åŠä»¥ä¸‹çš„æœ‹å‹ï¼Œç”¨47ä»¥ä¸‹çš„ç«ç‹ã€‚ 3. æ‰€æœ‰ç‰ˆæœ¬chromedriverä¸‹è½½chromedriverçš„ç‰ˆæœ¬ä¹Ÿä¸å®¹æ˜“æ‰¾ï¼šhttp://chromedriver.storage.googleapis.com/index.htmlå…¶ä¸­å„ç‰ˆæœ¬ä¸‹çš„notes.txtä¸­è¯´æ˜äº†è¯¥ç‰ˆæœ¬ä»¥åŠä»¥å‰ä¸€äº›ç‰ˆæœ¬æ”¯æŒçš„chromeæµè§ˆå™¨ç‰ˆæœ¬ï¼Œä¸è¿‡ï¼Œè€å¸æœºæ—©å°±ç»™ä½ æ•´ç†äº†ä¸€ä»½ä¸€ç›®äº†ç„¶çš„è¡¨æ ¼ï¼šseleniumä¹‹ chromedriverä¸chromeç‰ˆæœ¬æ˜ å°„è¡¨è¿™æ ·ï¼Œè¯¥ä¸‹è½½å“ªä¸ªç‰ˆæœ¬çš„chromeä¸chromedriveræ˜¯ä¸æ˜¯å°±å¾ˆæ¸…æ¥šäº†ã€‚ 4. æ‰€æœ‰ç‰ˆæœ¬seleniumä»¥åŠIEDriverServerä¸‹è½½æœ€åï¼Œå½“ç„¶è¿˜æœ‰seleniumå’ŒIEDriverServerï¼ŒPythonç‰ˆçš„seleniumç›´æ¥pipå°±å¯ä»¥äº†ï¼Œä¸‹é¢çš„é“¾æ¥é‡Œä¸»è¦æ˜¯Javaç‰ˆçš„å’Œ.NETç‰ˆçš„ï¼šhttp://selenium-release.storage.googleapis.com/index.htmlå¥½å§ï¼Œæš‚æ—¶å°±è¿™äº›å§ã€‚å¦‚æœä½ æœ‰æ›´å¥½åœ°èµ„æºç«™ï¼Œä¹Ÿè¯·å‘ŠçŸ¥ä¸‹åšä¸»ï¼Œèµ„æºå…±äº«ï¼Œå…±åŒè¿›æ­¥ã€‚åšæ–‡è½¬è‡ªï¼šhuilan_same","categories":[{"name":"è‡ªåŠ¨åŒ–æµ‹è¯•","slug":"è‡ªåŠ¨åŒ–æµ‹è¯•","permalink":"yihao.ml/categories/è‡ªåŠ¨åŒ–æµ‹è¯•/"}],"tags":[{"name":"Selenium","slug":"Selenium","permalink":"yihao.ml/tags/Selenium/"}]},{"title":"DataTablesä¸requireJså†²çªçš„è§£å†³","slug":"2018-01-29-js-datatables","date":"2018-01-29T00:00:00.000Z","updated":"2019-11-29T12:20:47.649Z","comments":true,"path":"2018/01/29/2018-01-29-js-datatables/","link":"","permalink":"yihao.ml/2018/01/29/2018-01-29-js-datatables/","excerpt":"","text":"DataTablesä¸requireJså†²çªçš„è§£å†³å½“æˆ‘åœ¨é¡¹ç›®ä¸­åŒæ—¶ä½¿ç”¨requireJså’ŒDataTablesJsçš„æ—¶å€™ï¼Œæç¤ºäº†ä¸€ä¸ªé”™è¯¯**$(â€¦).DataTable is not a function**ï¼Œæˆ‘é€šè¿‡å°è¯•ä¿®æ”¹æºç å¹¶è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹:å…ˆçœ‹datatables.jsæºç æ€»ä½“çš„ä¸€ä¸ªç»“æ„:123456(function( factory ) &#123;//......&#125;(function() &#123; \"use strict\"; //....... return $.fn.dataTable;&#125;));ä¿®æ”¹ä¸ºä»¥ä¸‹ä¸¤ç§ä»»æ„ä¸€ç§å½¢å¼éƒ½å¯ä»¥ï¼ˆä¸€æœ¬æœºæµ‹è¯•ä¸ºå‡†ï¼‰:123456(function( factory ) &#123;//......&#125;(function( $ ) &#123; \"use strict\"; //....... return $.fn.dataTable;&#125;($));123456(function( factory ) &#123;//......&#125;(function( ) &#123; \"use strict\"; //....... return $.fn.dataTable;&#125;());","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"yihao.ml/categories/å‰ç«¯/"}],"tags":[{"name":"DataTable","slug":"DataTable","permalink":"yihao.ml/tags/DataTable/"}]},{"title":"Ubuntu sublimeä¸èƒ½è¾“å…¥ä¸­æ–‡","slug":"2017-9-19-ubuntu-sublime","date":"2017-09-19T00:00:00.000Z","updated":"2019-11-29T12:20:47.649Z","comments":true,"path":"2017/09/19/2017-9-19-ubuntu-sublime/","link":"","permalink":"yihao.ml/2017/09/19/2017-9-19-ubuntu-sublime/","excerpt":"","text":"ubuntu 16.0.4ä½¿ç”¨sublimeä¸èƒ½è¾“å…¥ä¸­æ–‡ è§£å†³ä»githubä¸Šä¸‹è½½ä¸‹é¢è¿™ä¸ªç©æ„1$ git clone https://github.com/lyfeyaj/sublime-text-imfix.gitè¿›å…¥ç›®å½•1$ cd sublime-text-imfix/åƒè¿™æ ·æŠŠæ–‡ä»¶æ‹·åˆ°å¯¹åº”ç›®å½•ä¸‹12$ sudo cp ./lib/libsublime-imfix.so /opt/sublime_text/$ sudo cp ./src/subl /usr/bin/ç¼–å†™ä¸€ä¸ªshè„šæœ¬å¯åŠ¨sublime1$ vim sublime12#!/bin/bashLD_PRELOAD=/opt/sublime_text/libsublime-imfix.so subl","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"yihao.ml/tags/Ubuntu/"}]},{"title":"Struts2å’ŒSpringé›†æˆåå…³äºstruts.xmlä¸­çš„classå¦‚ä½•å†™çš„é—®é¢˜","slug":"2017-8-22-Struts2-Springé›†æˆåå…³äºstruts.xmlä¸­çš„classå¦‚ä½•å†™çš„é—®é¢˜","date":"2017-08-22T00:00:00.000Z","updated":"2019-11-29T12:20:47.648Z","comments":true,"path":"2017/08/22/2017-8-22-Struts2-Springé›†æˆåå…³äºstruts.xmlä¸­çš„classå¦‚ä½•å†™çš„é—®é¢˜/","link":"","permalink":"yihao.ml/2017/08/22/2017-8-22-Struts2-Springé›†æˆåå…³äºstruts.xmlä¸­çš„classå¦‚ä½•å†™çš„é—®é¢˜/","excerpt":"","text":"Sturtsæ•´åˆSpringåï¼Œæƒ³è®©Springç®¡ç†Strutsçš„Actionï¼Œåœ¨struts.xmlä¸­é…ç½®Actionçš„classå±æ€§æ—¶ä½¿ç”¨beançš„idæ¥æŒ‡å®šActionçš„ç±»è·¯å¾„ é…ç½®åœ¨applicationContext.xmlä¸­æ³¨å†ŒTeamAction,idæˆ‘ä»¬å†™æˆTeamActionåœ¨è¿™é‡Œå†™æˆå¤§å†™çš„ â€˜Tâ€™1234 &lt;bean id=\"TeamAction\" class=\"com.Action.TeamAction\"&gt; &lt;property name=\"tm\" ref=\"TeamMapper\"&gt;&lt;/property&gt; &lt;property name=\"bts\" ref=\"BDIPUtils\"&gt;&lt;/property&gt;&lt;/bean&gt;åœ¨struts.xmlä¸­é…ç½®,é…ç½®çš„æ—¶å€™classå†™TeamActionå³å¯ä»springå®¹å™¨ä¸­è·å–TeamActionå¯¹è±¡123&lt;action name=\"TeamInfo\" class=\"TeamAction\"&gt; ...&lt;/action&gt; é”™è¯¯ç”±äºActionæ ¹æ®class=&quot;TeamAction&quot;å»springå®¹å™¨ä¸­å¯»æ‰¾å¯¹åº”çš„beanè¿™ä¸€ç‰¹æ€§æ˜¯ç”±struts2-spring-plugin-2.3.1.2.jaræä¾›çš„,æ²¡æœ‰å¼•å…¥å®ƒå°±ä¼šæŠ¥è¿™æ ·çš„é”™è¯¯ï¼1234567891011121314151617181920212223242526272829303132333435Unable to load configuration. - action - file:/E:/apache-tomcat-7.0.81/webapps/4DAnalog/WEB-INF/classes/struts.xml:6:46 at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:428) at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69) at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51) at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:279) at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:260) at org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:105) at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4950) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5652) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1009) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:985) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1296) at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:2038) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) at java.util.concurrent.FutureTask.run(FutureTask.java:166) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722)Caused by: Unable to load configuration. - action - file:/E:/apache-tomcat-7.0.81/webapps/4DAnalog/WEB-INF/classes/struts.xml:6:46 at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:69) at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:371) at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:415) ... 19 moreCaused by: Action class [TeamAction] not found - action - file:/E:/apache-tomcat-7.0.81/webapps/4DAnalog/WEB-INF/classes/struts.xml:6:46 at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:420) at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurationProvider.java:365) at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:479) at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:275) at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:111) at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:204) at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66) ... 21 more","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Struts2","slug":"Struts2","permalink":"yihao.ml/tags/Struts2/"}]},{"title":"SpringMVCä¹±ç ","slug":"2017-8-22-SpringMVCä¹±ç ","date":"2017-08-22T00:00:00.000Z","updated":"2019-11-29T12:20:47.647Z","comments":true,"path":"2017/08/22/2017-8-22-SpringMVCä¹±ç /","link":"","permalink":"yihao.ml/2017/08/22/2017-8-22-SpringMVCä¹±ç /","excerpt":"","text":"è§£å†³SpringMvcçš„POSTå’ŒGETä¹±ç é—®é¢˜ POSTä¹±ç åœ¨web.xmlé…ç½®SpringMVCæä¾›çš„Filterå°±å¯ä»¥è§£å†³POSTä¹±ç äº†123456789101112131415161718&lt;filter&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;async-supported&gt;true&lt;/async-supported&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;forceEncoding&lt;/param-name&gt; &lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt; GETä¹±ç Filteråªé’ˆå¯¹POSTè¯·æ±‚çš„ï¼Œtomacatå¯¹GETå’ŒPOSTè¯·æ±‚å¤„ç†æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œè¦å¤„ç†é’ˆå¯¹GETè¯·æ±‚çš„ç¼–ç é—®é¢˜ï¼Œåˆ™éœ€è¦æ”¹tomcatçš„server.xmlé…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š12&lt;Connector connectionTimeout=\"20000\" port=\"8080\" protocol=\"HTTP/1.1\" redirectPort=\"8443\"/&gt;æ³¨æ„:å¦‚æœä½ ç”¨çš„æ˜¯MyEclipse,åˆ°tomcatçš„æ ¹ç›®å½•ä¸‹ä¿®æ”¹server.xml,è¿è¡Œå³å¯ç”Ÿæ•ˆ,å¦‚æœä½ æ˜¯eclipseéœ€è¦åœ¨eclipseä¸­ä¿®æ”¹server.xmlæ‰èƒ½ç”Ÿæ•ˆ","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"yihao.ml/tags/Spring/"}]},{"title":"HDFS and YARN","slug":"2017-8-21-hadoop-HDFSå’ŒYARN","date":"2017-08-21T00:00:00.000Z","updated":"2019-11-29T12:20:47.647Z","comments":true,"path":"2017/08/21/2017-8-21-hadoop-HDFSå’ŒYARN/","link":"","permalink":"yihao.ml/2017/08/21/2017-8-21-hadoop-HDFSå’ŒYARN/","excerpt":"","text":"æœ¬æ–‡ä¸»è¦è¯´æ˜HDFSå’ŒMapReduceä¸¤é—¨æŠ€æœ¯çš„å…¥é—¨ä½¿ç”¨.å› ä¸ºMapReduceå¤ªé•¿,åé¢å°±ç®€ç§°MR,æˆ‘ä»¬åˆ°å®˜ç½‘ä¸‹è½½hadoop-2.4.1.tar.gz,å¹¶è§£å‹,è¿›å…¥åˆ°hadoop-2.4.1/etc/hadoop,åˆ†åˆ«é…ç½®ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶hadoop-env.shcore-site.xmlhdfs-site.xmlmapred-site.xml.template(é‡å‘½åä¸ºmapred-site.xml)yarn-site.xml é…ç½® hadoop-env.shéœ€è¦åˆ°hadoop-env.shä¸­é…ç½®Javaç¯å¢ƒ,å€¼å¾—æ³¨æ„çš„æ˜¯åœ¨hadoop-env.shæ–‡ä»¶ä¸­ä½¿ç”¨çš„å˜é‡åä¸ä¼šç”Ÿæ•ˆ,æˆ‘ä»¬åœ¨è¿™é‡Œå†™æ­»å®ƒ,æŸ¥è¯¢Javaå­˜æ”¾è·¯å¾„ehco $JAVA_HOME é…ç½® core-site.xmlfs.defaultFS: æŒ‡å®šHADOOPæ‰€ä½¿ç”¨çš„æ–‡ä»¶ç³»ç»Ÿè®¿é—®çš„URIhadoop.tmp.dir: æŒ‡å®šhadoopè¿è¡Œæ—¶äº§ç”Ÿæ–‡ä»¶çš„å­˜å‚¨ç›®å½•12345678910&lt;configuration&gt; &lt;property&gt; &lt;name&gt;fs.defaultFS&lt;/name&gt; &lt;value&gt;hdfs://zyh:9000/&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &lt;value&gt;/media/zyh/software/hadoop-2.4.1/data/&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt;è¿™é‡Œhdfs://zyh:9000/ä¸­çš„zyhç›¸å½“äºlocalhost,å› ä¸ºæˆ‘åœ¨/etc/hostsæ–‡ä»¶ä¸­ä¿®æ”¹äº† é…ç½® hdfs-site.xmldfs.replication: æŒ‡å®šHDFSåˆ‡å—(blk)çš„å‰¯æœ¬æ•°é‡123456&lt;configuration&gt; &lt;property&gt; &lt;name&gt;dfs.replication&lt;/name&gt; &lt;value&gt;1&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; é…ç½® mapred-site.xmlmapreduce.framework.name:æŒ‡å®šMRçš„è¿è¡Œçš„èµ„æºç”±yarnåˆ†é…123456&lt;configuration&gt; &lt;property&gt; &lt;name&gt;mapreduce.framework.name&lt;/name&gt; &lt;value&gt;yarn&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; é…ç½® yarn-site.xmlyarn.resourcemanager.hostname: æŒ‡å®šYARNçš„ResourceManagerçš„åœ°å€,å…¶å®å°±æ˜¯æˆ‘æœ¬æœºzyh(127.0.0.1)yarn.nodemanager.aux-services: reducerè·å–æ•°æ®çš„æ–¹å¼12345678910&lt;configuration&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt; &lt;value&gt;zyh&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; å°†hadoopæ·»åŠ åˆ°ç¯å¢ƒå˜é‡12345$ vim /etc/proflie$ export JAVA_HOME=/usr/java/jdk1.6.0_45$ export HADOOP_HOME=/media/zyh/software/software for linux/hadoop-2.4.1$ export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin$ source /etc/profileè¿™ä¸ªæ˜¯æˆ‘æœ¬åœ°çš„profileä½œå‚è€ƒ åˆå§‹åŒ–namenodeï¼ˆåˆå«æ ¼å¼åŒ–namenodeï¼‰$ hdfs namenode -format (hadoop namenode -format)å¼¹å‡ºä¸€å¤§ç‰‡log,è‹±è¯­å¾ˆniceå¯ä»¥ç¨å¾®çœ‹çœ‹,ä¸å¥½çš„å¯ä»¥é”®å…¥å‘½ä»¤echo $?æ¥æ ¡éªŒä¸Šä¸€ä¸ªæ“ä½œæ˜¯å¦æ­£ç¡®,å¦‚æœæ˜¯0å°±æ˜¯æ­£ç¡®çš„ å¯åŠ¨hadoopå¦‚æœä½ æ ¼å¼åŒ–namenodeå·²æˆåŠŸ,å°±å¯ä»¥è¿è¡Œhadoopäº†ï¼åœ¨hadoop-2.4.1/sbinç›®å½•ä¸‹é¢,hadoopä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šå‘½ä»¤start-all.sh : å¯åŠ¨dfså’Œyarnstart-dfs.sh : å¯åŠ¨dfsstart-yarn.sh : å¯åŠ¨yarnä½œä¸ºå…¥é—¨çš„æ–°æ‰‹,æˆ‘ä»¬å½“ç„¶æ˜¯ä¸€æ­¥ä¸€æ­¥å¯åŠ¨,å…ˆå¯åŠ¨HDFS,å†å¯åŠ¨YARN.å¹¶è§‚å¯Ÿå¯åŠ¨åçš„è¿è¡ŒçŠ¶æ€ å¯åŠ¨HDFS$ sbin/start-dfs.shå¯åŠ¨æŠ¥é”™,å¦‚æœè¯´æœ¬åœ°sshæ‹’ç»è®¿é—®,é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å®‰è£…openssh-server,å¦‚æœæ²¡æœ‰æŠ¥é”™è¯·æ— è§†ï¼å®‰è£…åå†æ¬¡é”®å…¥å‘½ä»¤.HDFSä¼šæç¤ºä¼šè®©æˆ‘ä»¬è¾“å…¥å¾ˆå¤šæ¬¡å¯†ç å¹¶ç¡®è®¤,å› ä¸ºéƒ¨ç½²çš„æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ,å°½ç®¡æˆ‘ä»¬åªä½¿ç”¨äº†ä¸€å°ç”µè„‘,ä½†æ˜¯HDSFä¸çŸ¥é“,ä»–ä¼šä½¿ç”¨SSHå»è®¿é—®æˆ‘ä»¬è¿œç¨‹çš„æœåŠ¡å™¨(æœ¬ä¾‹ä¸­è¿œç¨‹æœåŠ¡å™¨å°±æ˜¯æœ¬æœºå•¦ï¼)ä¹‹åå®ƒä¼šå¯åŠ¨ä¸€ç³»åˆ—è¿›ç¨‹,è¿™äº›è¿›ç¨‹åˆ†åˆ«æ˜¯:NameNodeDataNodeSecondaryNameNode å¯åŠ¨YARN$ sbin/start-yarn.shyarnä¹Ÿæ˜¯ä¸€æ ·çš„ä¸€è·¯yeså¹¶è¾“å…¥å¯†ç å³å¯,yarnä¼šå…ˆåå¼€å¯ä¸¤ä¸ªè¿›ç¨‹,ä»–ä»¬åˆ†åˆ«æ˜¯ResourceManagerNodeManager æŸ¥çœ‹å¯åŠ¨è¿›ç¨‹çš„çŠ¶æ€$ jps ä½¿ç”¨HDFSæ‰“å¼€ç½‘å€http://zyh:50070 ï¼ˆHDFSç®¡ç†ç•Œé¢ï¼‰,åœ¨è¯¥ç•Œé¢æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹HDFSçš„è¿è¡ŒçŠ¶æ€ä¿¡æ¯,åœ¨Browse the file systemä¸€æ ä¸­å¯ä»¥æŸ¥çœ‹HDFSç›®å½•ç»“æ„å› ä¸ºæˆ‘ä»¬ä»€ä¹ˆéƒ½æ²¡æœ‰åš,æ‰€ä»¥åœ¨Browse Directoryä¸‹é¢ä»€ä¹ˆéƒ½æ²¡æœ‰,HDFSçš„ç›®å½•ç»“æ„å’Œlinuxçš„ç›®å½•ç»“æ„å·®ä¸å¤š,éƒ½æ˜¯ä»¥/ä¸ºæ ¹ç›®å½•.ç¼–å†™test.txtå¹¶ä¸Šä¼ åˆ°HDFSä¸­(è¢«ä¸Šä¼ çš„æ–‡ä»¶ä¼šè¢«åˆ†ä¸ºè‹¥å¹²ä¸ªåˆ‡å—ï¼Œåˆ†åˆ«æ”¾äºä¸åŒçš„datanodeä¸­)é”®å…¥å‘½ä»¤,å°†test.txtä¸Šä¼ åˆ°hdfsä¸Š$ hadoop fs -put test.txt hdfs://zyh:9000/å†æ¬¡æ‰“å¼€http://zyh:50070,æŸ¥çœ‹HDFSå°±ä¼šå‘ç°å¤šå‡ºäº†ä¸€ä¸ªtest.txtæ–‡ä»¶ ä½¿ç”¨MRåˆ°hadoop-2.4.1/share/hadoop/mapreduceç›®å½•ä¸‹å¯ä»¥æ‰¾åˆ°hadoop-mapreduce-examples-2.4.1.jar,è¿™ä¸ªjaræ˜¯Hadoopä¸ºæˆ‘ä»¬ç¼–å†™çš„mapreduceå°ä¾‹å­,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥åšä¸€äº›æµ‹è¯•æˆ‘ä»¬ä½¿ç”¨MRåšä¸€äº›å°æµ‹è¯•ï¼æ‰“å°piçš„å€¼åˆ°hadoop-mapreduce-examples-2.4.1.jaræ ¹ç›®å½•pi : æ–¹æ³•å5 : å‚æ•°1100 : å‚æ•°2$ hadoop jar hadoop-mapreduce-examples-2.4.1.jar pi 5 100ç»Ÿè®¡æˆ‘ä»¬ä¹‹å‰test.txtä¸­å­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°$ cat test.txtè¿™ä¸€æ¬¡æˆ‘ä»¬åœ¨HDFSæ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºä¸€äº›ç›®å½•,å°†test.txtä¸Šä¼ åˆ°æŒ‡å®šç›®å½•ä¸­å»åˆ›å»º/wordcount/inputç”¨æ¥æ”¾è¢«ç»Ÿè®¡çš„æ–‡ä»¶,å€¼å¾—æ³¨æ„çš„æ˜¯æˆ‘ä»¬å¿…é¡»å…ˆåˆ›å»º/wordcount,æ‰èƒ½å†åˆ›å»º/input$ hadoop fs -mkdir /wordcount$ hadoop fs -mkdir /wordcount/inputåŒç†åˆ›å»ºåˆ›å»º/wordcount/outputç”¨æ¥æ”¾è¢«ç»Ÿè®¡åçš„è¾“å‡ºæ–‡ä»¶$ hadoop fs -mkdir /wordcount$ hadoop fs -mkdir /wordcount/outå°†test.txtæ–‡ä»¶ä¸Šä¼ åˆ°HDFSæ–‡ä»¶ç³»ç»Ÿä¸­çš„inputç›®å½•$ hadoop fs -put text.txt /wordcount/inputä½¿ç”¨å‘½ä»¤å¯¹test.txtè¿›è¡Œç»Ÿè®¡,wordcount:æŒ‡å®šæœ¬æ¬¡è¿è¡Œçš„æ˜¯ç»Ÿè®¡æ–¹æ³•,/wordcount/input:æŒ‡å®šè¢«ç»Ÿè®¡çš„æ–‡ä»¶,/wordcount/out: æŒ‡å®šç»Ÿè®¡åçš„è¾“å‡ºç›®å½•wordcount : æ–¹æ³•å/wordcount/input : å‚æ•°1/wordcount/out : å‚æ•°2$ hadoop jar hadoop-mapreduce-examples-2.4.1.jar wordcount /wordcount/input /wordcount/outåˆ°/wordcount/outæŸ¥çœ‹MRåˆ†æç»“æœ,å¹¶ä½¿ç”¨å‘½ä»¤ä¸‹è½½æ–‡ä»¶$ hadoop fs -ls /wordcount/out/$ hadoop fs -get /wordcount/out part-r-00000æŸ¥çœ‹MRåˆ†æç»“æœ","categories":[{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"yihao.ml/categories/å¤§æ•°æ®/"}],"tags":[{"name":"Hadoop","slug":"Hadoop","permalink":"yihao.ml/tags/Hadoop/"}]},{"title":"Mavenéª¨æ¶æ— æ³•ç”Ÿæˆåœ¨IDEAä¸­","slug":"2017-8-20-mavenéª¨æ¶æ— æ³•ç”Ÿæˆ","date":"2017-08-15T00:00:00.000Z","updated":"2019-11-29T12:20:47.647Z","comments":true,"path":"2017/08/15/2017-8-20-mavenéª¨æ¶æ— æ³•ç”Ÿæˆ/","link":"","permalink":"yihao.ml/2017/08/15/2017-8-20-mavenéª¨æ¶æ— æ³•ç”Ÿæˆ/","excerpt":"","text":"åœ¨IDEAä¸­mavenéª¨æ¶ç”Ÿæˆé€Ÿåº¦ç¼“æ…¢ï¼Œåªè§è¿›åº¦æ¡åœ¨ç–¯ç‹‚è¿åŠ¨å°±ä¸è§å¯¼å…¥æˆåŠŸ,æ˜¯ä¸æ˜¯æœ‰ç‚¹å´©æºƒï¼Ÿè§£å†³åŠæ³•:æ‰¾åˆ° file -&gt; other settings -&gt; Default settings â€¦ -&gt; maven -&gt; runner,åœ¨VM Optionsä¸­æ·»åŠ -DarchetypeCatalog=internal","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[]},{"title":"JQueryå¼¹å‡ºæ¡†å°Demo","slug":"2017-8-15-JQueryå¼¹å‡ºæ¡†","date":"2017-08-15T00:00:00.000Z","updated":"2019-11-29T12:20:47.646Z","comments":true,"path":"2017/08/15/2017-8-15-JQueryå¼¹å‡ºæ¡†/","link":"","permalink":"yihao.ml/2017/08/15/2017-8-15-JQueryå¼¹å‡ºæ¡†/","excerpt":"","text":"ç¼–å†™css123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156&lt;style type=\"text/css\"&gt; .gray&#123; width:100%; height:100%; background:rgba(0,0,0,0.3); position:absolute; top:0px; left:0; display:none; z-index:99; &#125; .popup&#123; width:532px; height:auto; background-color:#fff; position:absolute; z-index:100; border:1px solid #ebeaea; left:400px; top:96px; display:none; &#125; .popup .top_nav&#123; width:532px; height:46px; background-image: url(images/popup_top_bj.jpg); border-bottom:1px solid #ebeaea; position:relative; cursor:move; &#125; .popup .top_nav i&#123; width:35px; height:35px; background: #ccc; position:absolute; top:6px; left:8px; display:block; &#125; .popup .top_nav span&#123; font:18px/18px 'microsoft yahei'; color:#707070; display:block; position:absolute; top:13px; left:50px; &#125; .popup .top_nav a.guanbi &#123; background:url(images/popup_guanbi.png) repeat 0px 0px; width:35px; height: 35px; display: block; position:absolute; top:8px; right:10px; cursor:pointer; &#125; .popup .top_nav a.guanbi span &#123; display: none;&#125; .popup .top_nav a.guanbi:hover&#123; background: url(images/popup_guanbi.png) repeat 0px -35px; &#125; .popup .min&#123;height:auto;padding: 20px;&#125; .box_mid&#123; width: 100%; height: 50px; margin-top: 20px; border-bottom: 1px solid silver; &#125; .checkbox &#123; position: relative; display: inline-block; &#125; .checkbox input &#123; position: absolute; left: 0; top: 0; width: 100%; height: 100%; z-index: 5; opacity: 0; cursor: pointer; &#125; input[type=\"checkbox\"], input[type=\"radio\"] &#123; box-sizing: border-box; padding: 0; &#125; .checkbox label &#123; &#125; .checkbox label &#123; width: 55px; height: 25px; background: #ccc; position: relative; display: inline-block; border-radius: 46px; -webkit-transition: 0.4s; transition: 0.4s; &#125; .checkbox label:after &#123; content: ''; position: absolute; width: 25px; height: 25px; border-radius: 100%; left: 0; top: 0px; z-index: 2; background: #fff; box-shadow: 0 0 5px rgba(0, 0, 0, 0.2); -webkit-transition: 0.4s; transition: 0.4s; &#125; .checkbox input:checked + label &#123; background: #4BD865; &#125; .checkbox input:checked + label:after &#123; left: 30px; &#125; .box_mid span&#123; position: relative; top: -10px; color: #888; left: 20px; &#125; .qr_code&#123; width: 100%; height:200px; &#125; .qr_code .left_box&#123; width: 50%; height:100%; /*background: blue;*/ float: left; &#125; .left_box&#123; justify-content: center; /*å­å…ƒç´ æ°´å¹³å±…ä¸­*/ align-items: center; /*å­å…ƒç´ å‚ç›´å±…ä¸­*/ display: -webkit-flex; &#125; .right_box&#123; width: 50%; height: 100%; /*background: red;*/ float: right; &#125; .right_box img&#123; width: 160px; height: 160px; margin-top: 30px; margin-left: 40px; &#125; .box_mids&#123; margin-top: 0px; border:0px; height: 100%; &#125; .foot p&#123; &#125;&lt;/style&gt; ç¼–å†™body123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;body&gt; &lt;input type=\"button\" value=\"ç‚¹å‡»\" onclick=\"jQuery.tanchuk();\" /&gt; &lt;div id=\"qrcodeGray\" class=\"gray\"&gt;&lt;/div&gt; &lt;div class=\"popup\" id=\"popup\"&gt; &lt;div class=\"top_nav\" id='top_nav'&gt; &lt;div align=\"center\"&gt; &lt;i&gt;&lt;/i&gt; &lt;span&gt;è§†ç‚¹å…±äº«&lt;/span&gt; &lt;a class=\"guanbi\"&gt;&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"min\"&gt; &lt;div style=\"width:100%;height:400px;\"&gt; &lt;!-- æ‰“å¼€å…±äº«é“¾æ¥ --&gt; &lt;div class=\"box_mid\"&gt; &lt;div class=\"checkbox\"&gt; &lt;input type=\"checkbox\"/&gt; &lt;label&gt;&lt;/label&gt; &lt;/div&gt; &lt;span&gt;æ‰“å¼€å…±äº«é“¾æ¥&lt;/span&gt; &lt;/div&gt; &lt;!-- äºŒç»´ç  --&gt; &lt;div class=\"qr_code\"&gt; &lt;div class=\"left_box\"&gt; &lt;div&gt; &lt;p&gt;å°†æ­¤é¡¹ç›®ç”¨ä»¥ä¸‹é“¾æ¥ä¸ä»–äººå…±äº«&lt;/p&gt; &lt;p&gt; &lt;input type=\"text\" value=\"\"/&gt; &lt;input type=\"button\" value=\"å¤åˆ¶\" /&gt; &lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"right_box\"&gt; &lt;img src=\"jiam.png\" alt=\"\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"foot\"&gt; &lt;div&gt;&lt;p&gt;éšç§è®¾ç½®&lt;/p&gt;&lt;/div&gt; &lt;!-- æ‰“å¼€å…±äº«é“¾æ¥ --&gt; &lt;div class=\"box_mid box_mids\"&gt; &lt;div class=\"checkbox\"&gt; &lt;input type=\"checkbox\"/&gt; &lt;label&gt;&lt;/label&gt; &lt;/div&gt; &lt;span&gt;éœ€è¦å¯†ç æ‰èƒ½è®¿é—®æ­¤å…¬å…±é“¾æ¥&lt;/span&gt; &lt;/div&gt; &lt;div&gt; &lt;p&gt; &lt;input type=\"text\" value=\"\"/&gt; &lt;input type=\"button\" value=\"è®¾ç½®å¯†ç \" /&gt; &lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/body&gt; JQuery1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;script type=\"text/javascript\"&gt; //çª—å£æ•ˆæœ //ç‚¹å‡»æŒ‰é’®æ˜¾ç¤º jQuery.tanchuk= function()&#123; $(\"#qrcodeGray\").show(); $(\"#popup\").show();//æŸ¥æ‰¾IDä¸ºpopupçš„DIV show()æ˜¾ç¤º#qrcodeGray tc_center(); &#125;; //ç‚¹å‡»å…³é—­æŒ‰é’® $(\"a.guanbi\").click(function()&#123; $(\"#qrcodeGray\").hide(); $(\"#popup\").hide();//æŸ¥æ‰¾IDä¸ºpopupçš„DIV hide()éšè— &#125;) //çª—å£æ°´å¹³å±…ä¸­ $(window).resize(function()&#123; tc_center(); &#125;); function tc_center()&#123; var _top=($(window).height()-$(\".popup\").height())/2; var _left=($(window).width()-$(\".popup\").width())/2; $(\".popup\").css(&#123;top:_top,left:_left&#125;); &#125; &lt;/script&gt;&lt;script type=\"text/javascript\"&gt; $(document).ready(function()&#123; $(\".top_nav\").mousedown(function(e)&#123; //é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶ $(this).css(\"cursor\",\"move\");//æ”¹å˜é¼ æ ‡æŒ‡é’ˆçš„å½¢çŠ¶ é¼ æ ‡ç§»åŠ¨ var offset = $(this).offset();//DIVåœ¨é¡µé¢çš„ä½ç½® offset() æ–¹æ³•è¿”å›æˆ–è®¾ç½®åŒ¹é…å…ƒç´ ç›¸å¯¹äºæ–‡æ¡£çš„åç§»ï¼ˆä½ç½®ï¼‰ var x = e.pageX - offset.left;//è·å¾—é¼ æ ‡æŒ‡é’ˆç¦»DIVå…ƒç´ å·¦è¾¹ç•Œçš„è·ç¦» pageX() å±æ€§æ˜¯é¼ æ ‡æŒ‡é’ˆçš„ä½ç½®ï¼Œç›¸å¯¹äºæ–‡æ¡£çš„å·¦è¾¹ç¼˜ã€‚ var y = e.pageY - offset.top;//è·å¾—é¼ æ ‡æŒ‡é’ˆç¦»DIVå…ƒç´ ä¸Šè¾¹ç•Œçš„è·ç¦» pageY() å±æ€§æ˜¯é¼ æ ‡æŒ‡é’ˆçš„ä½ç½®ï¼Œç›¸å¯¹äºæ–‡æ¡£çš„ä¸Šè¾¹ç¼˜ã€‚ $(document).bind(\"mousemove\",function(ev)&#123; //ç»‘å®šé¼ æ ‡çš„ç§»åŠ¨äº‹ä»¶ï¼Œå› ä¸ºå…‰æ ‡åœ¨DIVå…ƒç´ å¤–é¢ä¹Ÿè¦æœ‰æ•ˆæœï¼Œæ‰€ä»¥è¦ç”¨doucmentçš„äº‹ä»¶ï¼Œè€Œä¸ç”¨DIVå…ƒç´ çš„äº‹ä»¶ //bind() æ–¹æ³•ä¸ºè¢«é€‰å…ƒç´ æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¹¶è§„å®šäº‹ä»¶å‘ç”Ÿæ—¶è¿è¡Œçš„å‡½æ•° $(\".popup\").stop();//åŠ ä¸Šè¿™ä¸ªä¹‹å var _x = ev.pageX - x;//è·å¾—Xè½´æ–¹å‘ç§»åŠ¨çš„å€¼ var _y = ev.pageY - y;//è·å¾—Yè½´æ–¹å‘ç§»åŠ¨çš„å€¼ $(\".popup\").animate(&#123;left:_x+\"px\",top:_y+\"px\"&#125;,10); &#125;); &#125;); $(document).mouseup(function() &#123; //mouseup é¼ æ ‡æ¾å¼€æ—¶ $(\".popup\").css(\"cursor\",\"default\"); // default é»˜è®¤å…‰æ ‡ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªç®­å¤´ï¼‰ $(this).unbind(\"mousemove\"); // unbind() æ–¹æ³•ç§»é™¤è¢«é€‰å…ƒç´ çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚mousemoveè§¦å‘ &#125;); &#125;);&lt;/script&gt; æœ€ç»ˆæ ·å¼å±•ç¤º","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"yihao.ml/categories/å‰ç«¯/"}],"tags":[]},{"title":"Hibernate one to many å’Œmany to one æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ","slug":"2017-8-13-hibernateä¸€å’Œå¤š","date":"2017-08-13T00:00:00.000Z","updated":"2019-11-29T12:20:47.646Z","comments":true,"path":"2017/08/13/2017-8-13-hibernateä¸€å’Œå¤š/","link":"","permalink":"yihao.ml/2017/08/13/2017-8-13-hibernateä¸€å’Œå¤š/","excerpt":"","text":"å®¤å‹é—®äº†æˆ‘ä¸ªå¥‡æ€ªçš„é—®é¢˜é—®ï¼šæˆ‘ä»¬åœ¨é…Hibernateçš„æ—¶å€™æœ‰ä¹Ÿæœ‰,ä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤ä¸ªï¼Ÿé—®ï¼šæˆ‘çš„æ„æ€one to many è¦æ˜¯åè¿‡æ¥ä¸å°±æ˜¯many to oneäº†å—ï¼Ÿé—®ï¼šæˆ‘è¦æ˜¯æŠŠç›¸å…³çš„é…ç½® è°ƒæ¢ä¸€ä¸‹ï¼Œé‚£ä¹ˆone to manyå’Œmany to oneä¸å°±æ˜¯å¯ä»¥äº’æ¢äº†å—ï¼Ÿä»å­—é¢æ„æ€ä¸Šçœ‹ï¼Œone to many æ˜¯ä¸€å¯¹å¤š,many to oneæ˜¯å¤šå¯¹ä¸€ã€‚å¾ˆæ˜æ˜¾å°±æ˜¯åŒºåˆ«ï¼ˆè¯´å®è¯ï¼Œé—®è¿™æ ·çš„é—®é¢˜ï¼Œä¸€å¼€å§‹æˆ‘ä¹Ÿæœ‰ç‚¹è¯§å¼‚ï¼Œåæ¥æƒ³äº†æƒ³è¿˜æ˜¯ä¸å¯¹åŠ²ï¼‰ã€‚ä»å®é™…å¼€å‘è§’åº¦æ¥è¯´ï¼Œä¸€å¯¹å¤šåè¿‡æ¥å°±æ˜¯å¤šå¯¹ä¸€ã€‚æˆ‘ä»¬ä»¥å­¦ç”Ÿå’Œç­çº§ä¸ºä¾‹ã€‚å­¦ç”Ÿå¯¹ç­çº§æ˜¯many to oneï¼Œç­çº§å¯¹å­¦ç”Ÿå°±æ˜¯one to manyã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œåˆ°åº•æˆ‘ä»¬é…ç½®ç­çº§æ–¹çš„one to manyï¼Ÿè¿˜æ˜¯é…ç½®å­¦ç”Ÿæ–¹çš„many to oneå‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜å°±è¦çœ‹å®é™…å¼€å‘éœ€æ±‚äº†ã€‚åœ¨è¿™ä¸ªéœ€æ±‚ä¸­ï¼Œä»ç»éªŒä¸Šå¯ä»¥æƒ³è±¡ï¼Œæˆ‘ä»¬æŸ¥çœ‹ç­çº§çš„æ—¶å€™ï¼Œå¹¶ä¸ä¸€å®šè¦çœ‹åˆ°æ¯ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ã€‚å› ä¸ºå­¦ç”Ÿå¾ˆå¤šã€‚ä½†æˆ‘ä»¬æŸ¥çœ‹å­¦ç”Ÿçš„æ—¶å€™ï¼Œå¯èƒ½æƒ³çœ‹ç­çº§çš„ä¿¡æ¯ï¼Œå› ä¸ºä¸€ä¸ªå­¦ç”Ÿå¯¹åº”ä¸€ä¸ªç­çº§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å½“ç„¶æ˜¯é…ç½®å­¦ç”Ÿæ–¹çš„many to oneï¼Œç„¶ååšçº§è”æ“ä½œã€‚ä»¥ä¾¿å–å‡ºå­¦ç”Ÿæ—¶å–å‡ºå¯¹åº”ç­çº§ã€‚è€Œäº‹å®ä¸Šï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œmany to oneæ¯”one to manyçš„åº”ç”¨ä¹Ÿæ›´ä¸ºé˜²èŒƒï¼Œè¿™ä¸»è¦æ˜¯åŸºäºä¸€ä¸ªæ•ˆç‡è€ƒè™‘","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Hibernate","slug":"Hibernate","permalink":"yihao.ml/tags/Hibernate/"}]},{"title":"NodeJSå­¦ä¹ ","slug":"2017-8-10-nodejs","date":"2017-08-10T00:00:00.000Z","updated":"2019-11-29T12:20:47.645Z","comments":true,"path":"2017/08/10/2017-8-10-nodejs/","link":"","permalink":"yihao.ml/2017/08/10/2017-8-10-nodejs/","excerpt":"","text":"å®‰è£…å®‰è£…Nodejsï¼Œä¸ç”¨è¯´ä»–æ˜¯æ ¸å¿ƒåŒ… $ sudo apt install nodejs-legacy $ node -v å®‰è£…npm,npmæ˜¯ä»€ä¹ˆä¸œä¸œï¼Ÿnpmå…¶å®æ˜¯Node.jsçš„åŒ…ç®¡ç†å·¥å…·(package manager).ä¸ºå•¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨Node.jsä¸Šå¼€å‘æ—¶ï¼Œä¼šç”¨åˆ°å¾ˆå¤šåˆ«äººå†™çš„JavaScriptä»£ç ã€‚å¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨åˆ«äººå†™çš„æŸä¸ªåŒ…ï¼Œæ¯æ¬¡éƒ½æ ¹æ®åç§°æœç´¢ä¸€ä¸‹å®˜æ–¹ç½‘ç«™ï¼Œä¸‹è½½ä»£ç ï¼Œè§£å‹ï¼Œå†ä½¿ç”¨ï¼Œéå¸¸ç¹çã€‚äºæ˜¯ä¸€ä¸ªé›†ä¸­ç®¡ç†çš„å·¥å…·åº”è¿è€Œç”Ÿï¼šå¤§å®¶éƒ½æŠŠè‡ªå·±å¼€å‘çš„æ¨¡å—æ‰“åŒ…åæ”¾åˆ°npmå®˜ç½‘ä¸Šï¼Œå¦‚æœè¦ä½¿ç”¨ï¼Œç›´æ¥é€šè¿‡npmå®‰è£…å°±å¯ä»¥ç›´æ¥ç”¨ï¼Œä¸ç”¨ç®¡ä»£ç å­˜åœ¨å“ªï¼Œåº”è¯¥ä»å“ªä¸‹è½½ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨æ¨¡å—Aï¼Œè€Œæ¨¡å—Aåˆä¾èµ–äºæ¨¡å—Bï¼Œæ¨¡å—Båˆä¾èµ–äºæ¨¡å—Xå’Œæ¨¡å—Yï¼Œnpmå¯ä»¥æ ¹æ®ä¾èµ–å…³ç³»ï¼ŒæŠŠæ‰€æœ‰ä¾èµ–çš„åŒ…éƒ½ä¸‹è½½ä¸‹æ¥å¹¶ç®¡ç†èµ·æ¥ã€‚å¦åˆ™ï¼Œé æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨ç®¡ç†ï¼Œè‚¯å®šæ—¢éº»çƒ¦åˆå®¹æ˜“å‡ºé”™ã€‚ $ sudo apt install npm $ npm -v å…¥é—¨Demoè¿›å…¥ä¸€ä¸ªç›®å½•æ–°å»ºä¸€ä¸ªhello.jsæ–‡ä»¶,use strictæŒ‡çš„æ˜¯ä»¥ä¸¥æ ¼æ¨¡å¼è¿è¡ŒJavaScriptä»£ç ï¼Œé¿å…å„ç§æ½œåœ¨é™·é˜±. 'use strict' console.log(\"hello nodejs!!\"); åœ¨å‘½ä»¤è¡Œä¸‹è¾“å…¥node hello.js,å°±å¯ä»¥çœ‹åˆ°å“¦å•Šæ‰“å°å‡ºæ¥çš„ä¿¡æ¯äº†! $ node hello.js å¦‚æœä¸å–œæ¬¢åœ¨æ–‡ä»¶ä¸­ä½¿ç”¨use strict,æˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨! $ node --use_strict hello.js æ­å»ºNodeå¼€å‘ç¯å¢ƒå¦‚æœåªæ˜¯ç”¨vim,EditPlus,sublimeç­‰ä¸€äº›ç¼–è¾‘è½¯ä»¶å†™æ•ˆç‡å¤ªä½,Javaä¸€èˆ¬ä½¿ç”¨Eclipse,Intellij idea,C#ä½¿ç”¨çš„é›†æˆå¼€å‘å·¥å…·isual Studio,Nodeå¼€å‘å·¥å…·å“ªå®¶å¼ºï¼Ÿè€ƒå¯ŸNode.jsçš„é›†æˆå¼€å‘ç¯å¢ƒï¼Œé‡ç‚¹æ”¾åœ¨å¯åŠ¨é€Ÿåº¦å¿«ï¼Œæ‰§è¡Œç®€å•ï¼Œè°ƒè¯•æ–¹ä¾¿è¿™ä¸‰ç‚¹ä¸Šã€‚å½“ç„¶ï¼Œå…è´¹ä½¿ç”¨æ˜¯ä¸€ä¸ªåŠ åˆ†é¡¹ã€‚ç»¼åˆè€ƒå¯Ÿåï¼Œæˆ‘ä»¬éš†é‡å‘å¤§å®¶æ¨èNode.jsé›†æˆå¼€å‘ç¯å¢ƒï¼š Visual Studio CodeVisual Studio Codeç”±å¾®è½¯å‡ºå“ï¼Œä½†å®ƒä¸æ˜¯é‚£ä¸ªå¤§å—å¤´çš„Visual Studioï¼Œå®ƒæ˜¯ä¸€ä¸ªç²¾ç®€ç‰ˆçš„è¿·ä½ Visual Studioï¼Œå¹¶ä¸”ï¼ŒVisual Studio Codeå¯ä»¥è·¨ï¼å¹³ï¼å°ï¼Windowsã€Macå’ŒLinuxé€šç”¨ã€‚ å®‰è£…å¯ä»¥ä»Visual Studio Codeçš„å®˜æ–¹ç½‘ç«™ä¸‹è½½å¹¶å®‰è£…æœ€æ–°çš„1.4ç‰ˆæœ¬ã€‚ç½‘é€Ÿæ…¢çš„ç«¥é‹è¯·ç§»æ­¥å›½å†…é•œåƒã€‚windowså®‰è£…è¿‡ç¨‹ä¸­ï¼Œè¯·åŠ¡å¿…é’©ä¸Šä»¥ä¸‹é€‰é¡¹ï¼š[x] å°†â€œé€šè¿‡Codeæ‰“å¼€â€æ“ä½œæ·»åŠ åˆ°Windowsèµ„æºç®¡ç†å™¨ç›®å½•ä¸Šä¸‹æ–‡èœå•è¿™å°†å¤§å¤§æå‡å°†æ¥çš„æ“ä½œå¿«æ·åº¦ã€‚Macåœ¨Macç³»ç»Ÿä¸Šï¼ŒFinderé€‰ä¸­ä¸€ä¸ªç›®å½•ï¼Œå³é”®èœå•å¹¶æ²¡æœ‰â€œé€šè¿‡Codeæ‰“å¼€â€è¿™ä¸ªæ“ä½œã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡Automatorè‡ªå·±æ·»åŠ è¿™ä¸ªæ“ä½œã€‚å…ˆè¿è¡ŒAutomatorï¼Œé€‰æ‹©â€œæœåŠ¡â€ï¼šç„¶åï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š1.åœ¨å³ä¾§é¢æ¿é€‰æ‹©â€œæœåŠ¡â€æ”¶åˆ°é€‰å®šçš„â€œæ–‡ä»¶å¤¹â€ï¼Œä½äºâ€œFinder.appâ€œï¼Œè¯¥é€‰é¡¹æ˜¯ä¸ºäº†ä»Finderä¸­æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼›2.åœ¨å·¦ä¾§é¢æ¿é€‰æ‹©â€å®ç”¨å·¥å…·â€œï¼Œç„¶åæ‰¾åˆ°â€è¿è¡ŒShellè„šæœ¬â€œï¼ŒæŠŠå®ƒæ‹½åˆ°å³ä¾§é¢æ¿é‡Œï¼›3.åœ¨å³ä¾§â€è¿è¡ŒShellè„šæœ¬â€œçš„é¢æ¿é‡Œï¼Œé€‰æ‹©Shellâ€/bin/bashâ€œï¼Œä¼ é€’è¾“å…¥â€œä½œä¸ºè‡ªå˜é‡â€ï¼Œç„¶åä¿®æ”¹Shellè„šæœ¬å¦‚ä¸‹ï¼š for f in \"$@\" do open -a \"Visual Studio Code\" \"$f\" done ä¿å­˜ä¸ºâ€œOpen With VSCodeâ€åï¼Œæ‰“å¼€Finderï¼Œé€‰ä¸­ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç‚¹å‡»å³é”®ï¼Œâ€œæœåŠ¡â€ï¼Œå°±å¯ä»¥çœ‹åˆ°â€œOpen With VSCodeâ€èœå•ï¼šlinuxå¯ä»¥è‡ªè¡Œåˆ°å®˜ç½‘æ‰¾åˆ°tar.gzå®‰è£…åŒ…ä¸‹è½½è§£å‹å³å¯ä½¿ç”¨ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™æ¡å‘½ä»¤,åé¢çš„ç½‘å€æ˜¯æˆ‘ä»å®˜ç½‘ä¸Šcopyä¸‹æ¥çš„ $ wget https://vscode.cdn.azure.cn/stable/cb82febafda0c8c199b9201ad274e25d9a76874e/code-stable-code_1.14.2-1500506907_amd64.tar.gz è§£å‹åŒå‡»/media/zyh/software/software for linux/VSCode-linux-x64/codeæ–‡ä»¶å³å¯æ‰“å¼€åº”ç”¨ä½¿ç”¨ è¿è¡Œå’Œè°ƒè¯•åœ¨VS Codeä¸­ï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿åœ°è¿è¡ŒJavaScriptæ–‡ä»¶ã€‚VS Codeä»¥æ–‡ä»¶å¤¹ä½œä¸ºå·¥ç¨‹ç›®å½•ï¼ˆWorkspace Dirï¼‰ï¼Œæ‰€æœ‰çš„JavaScriptæ–‡ä»¶éƒ½å­˜æ”¾åœ¨è¯¥ç›®å½•ä¸‹ã€‚æ­¤å¤–ï¼ŒVS Codeåœ¨å·¥ç¨‹ç›®å½•ä¸‹è¿˜éœ€è¦ä¸€ä¸ª.vscodeçš„é…ç½®ç›®å½•ï¼Œé‡Œé¢å­˜æ”¾é‡ŒVS Codeéœ€è¦çš„é…ç½®æ–‡ä»¶ã€‚å‡è®¾æˆ‘ä»¬åœ¨C:\\Work\\ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªhelloç›®å½•ä½œä¸ºå·¥ç¨‹ç›®å½•ï¼Œå¹¶ç¼–å†™äº†ä¸€ä¸ªhello.jsæ–‡ä»¶ï¼Œåˆ™è¯¥å·¥ç¨‹ç›®å½•çš„ç»“æ„å¦‚ä¸‹ï¼š1234567hello/ &lt;-- workspace dir|+- hello.js &lt;-- JavaScript file|+- .vscode/ &lt;-- VS Code config | +- launch.json &lt;-- VS Code config file for JavaScriptå¯ä»¥ç”¨VS Codeå¿«é€Ÿåˆ›å»ºlaunch.jsonï¼Œç„¶åä¿®æ”¹å¦‚ä¸‹ï¼š { \"version\": \"0.2.0\", \"configurations\": [ { \"name\": \"Run hello.js\", \"type\": \"node\", \"request\": \"launch\", \"program\": \"${workspaceRoot}/hello.js\", \"stopOnEntry\": false, \"args\": [], \"cwd\": \"${workspaceRoot}\", \"preLaunchTask\": null, \"runtimeExecutable\": null, \"runtimeArgs\": [ \"--nolazy\" ], \"env\": { \"NODE_ENV\": \"development\" }, \"externalConsole\": false, \"sourceMaps\": false, \"outDir\": null } ] } æœ‰äº†é…ç½®æ–‡ä»¶ï¼Œå³å¯ä½¿ç”¨VS Codeè°ƒè¯•JavaScriptã€‚è§†é¢‘æ¼”ç¤ºï¼šæ¨èé“¾æ¥https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"yihao.ml/categories/å‰ç«¯/"}],"tags":[{"name":"NodeJS","slug":"NodeJS","permalink":"yihao.ml/tags/NodeJS/"}]},{"title":"markdownä½¿ç”¨","slug":"2017-8-10-markdown","date":"2017-08-10T00:00:00.000Z","updated":"2019-11-29T12:20:47.645Z","comments":true,"path":"2017/08/10/2017-8-10-markdown/","link":"","permalink":"yihao.ml/2017/08/10/2017-8-10-markdown/","excerpt":"","text":"ä¼ é€é—¨https://www.zybuluo.com/AntLog/note/63228#2-æ¬¡å¸¸ç”¨æ ‡è®°https://www.zybuluo.com/mdeditor","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[]},{"title":"liquid","slug":"2017-8-10-jekyll-liquid","date":"2017-08-10T00:00:00.000Z","updated":"2019-11-29T12:20:47.644Z","comments":true,"path":"2017/08/10/2017-8-10-jekyll-liquid/","link":"","permalink":"yihao.ml/2017/08/10/2017-8-10-jekyll-liquid/","excerpt":"","text":"ä¼ é€é—¨https://alfred-sun.github.io/blog/2015/01/10/jekyll-liquid-syntax-documentation/","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"yihao.ml/categories/å‰ç«¯/"}],"tags":[{"name":"Jekyll","slug":"Jekyll","permalink":"yihao.ml/tags/Jekyll/"}]},{"title":"FFmpegä¸‹çš„å½•å±å½•éŸ³","slug":"2017-8-5-ffmpeg-å½•å±å½•éŸ³","date":"2017-08-05T00:00:00.000Z","updated":"2019-11-29T12:20:47.648Z","comments":true,"path":"2017/08/05/2017-8-5-ffmpeg-å½•å±å½•éŸ³/","link":"","permalink":"yihao.ml/2017/08/05/2017-8-5-ffmpeg-å½•å±å½•éŸ³/","excerpt":"","text":"å‰é¢æˆ‘ä»¬å®‰è£…äº†FFmpeg,FFmpegè¿˜æä¾›äº†å½•å±+å½•éŸ³çš„åŠŸèƒ½ï¼Œå¯ä»¥æ–¹ä¾¿å½•åˆ¶ç›´æ’­è§†é¢‘,æ•™å­¦è§†é¢‘ç­‰ç­‰.æˆ‘ä»¬ä½¿ç”¨alsaå½•éŸ³åŠŸèƒ½ï¼Œalsa driveré©±åŠ¨è¢«å†…åµŒå¿—linuxå†…æ ¸ä¸­, åŸºæœ¬ä¸Šåªè¦ä¸æ˜¯å†…æ ¸æœ¬ç‰ˆå¤ªè€ï¼Œæ˜¯ä¸éœ€è¦å†è¿›è¡Œå®‰è£…çš„.å¦‚æœå°ä¼™ä¼´ä»¬å‘ç°æœºå™¨ä¸Šä¸èƒ½ä½¿ç”¨alsa,å¯ä»¥å»å®‰è£…ä¸€ä¸‹alsaçš„ä¸‰ä¸ªåº“alsa-driver,alsa-lib,alsa-utilsåˆ°FFmpegå®˜ç½‘æŸ¥çœ‹ç›¸åº”èµ„æ–™FFmpegåœ¨linuxä¸­å½•éŸ³å½•å±å‘ç°äº†ä¸‰æ¡æŒ‡ä»¤$ ffmpeg -video_size 1024x768 -framerate 25 -f x11grab -i :0.0+100,200 output.mp4$ ffmpeg -video_size 1024x768 -framerate 25 -f x11grab -i :0.0+100,200 -f alsa -ac 2 -i hw:0 output.mkv$ ffmpeg -video_size 1024x768 -framerate 25 -f x11grab -i :0.0+100,200 -f pulse -ac 2 -i default output.mkv å‚æ•°è¯¦è§£-video_size å½•åˆ¶è§†é¢‘çš„åˆ†è¾¨ç‡$ echo $(xdpyinfo|grep â€˜dimensions:â€™ | awk â€˜{print $2}â€™)-f device æŒ‡å®šè®¾å¤‡,è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨x11grabè®¾å¤‡å»å½•å±ï¼Œä½¿ç”¨alsaè®¾å¤‡å»å½•éŸ³,è¯·åœ¨ä½¿ç”¨å‰ç¡®ä¿è¯¥è®¾å¤‡è¢«å®‰è£…,å¹¶ä¸”ç¡®ä¿åœ¨FFmpegç¼–è¯‘æ—¶å·²ç»æ·»åŠ åˆ°FFmpegçš„devicesåˆ—è¡¨ä¸­$ ffmpeg -devices-i :0.0+100,200 ä»å·¦ä¸Šè§’å¼€å§‹ï¼Œå‘xè½´åç§»100,yè½´åç§»200,æˆ‘ä»¬å¯ä»¥ä¸ç”¨åç§»-ac è®¾ç½®éŸ³é¢‘é€šé“æ•°-i hw:1 æŒ‡å®šéŸ³é¢‘è®¾å¤‡åœ¨linuxä¸­ä½¿ç”¨alsamixerå¯ä»¥æ‰“å¼€alsaæ§åˆ¶é¢æ¿$ alsamixeræŒ‰F6é€‰æ‹©å£°å¡ï¼Œæ³¨æ„å‰é¢çš„æ ‡å·æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©,æˆ‘çš„éŸ³é¢‘è®¾å¤‡æ˜¯1å·,ä¸hw:åé¢çš„1ç›¸å¯¹åº”åˆ°ä¸‹é¢çš„ç•Œé¢å,æŒ‰F4è·³è½¬åˆ°æ•è·éŸ³é¢‘ç•Œé¢åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥è°ƒæ•´å½•éŸ³æ—¶éŸ³é‡çš„å¤§å°,å·¦å³åˆ‡æ¢è‡³capture,ä¸Šä¸‹è°ƒæ•´éŸ³é‡ FFmpegå½•å±å½•éŸ³x11grabå½•å±$ ffmpeg -video_size 1920x1080 -framerate 25 -f x11grab -i :0.0+0,0 ~/output.mp4alsaå½•éŸ³$ ffmpeg -f alsa -ac 2 -i hw:1 ~/out.wavå½•å±+å½•éŸ³$ ffmpeg -video_size 1920x1080 -framerate 25 -f x11grab -i :0.0+0,0 -f alsa -ac 2 -i hw:1 out.mp4 å½•å±æ¼”ç¤º","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[{"name":"FFmpeg","slug":"FFmpeg","permalink":"yihao.ml/tags/FFmpeg/"}]},{"title":"highlightç½‘é¡µä»£ç é«˜äº®æ˜¾ç¤º","slug":"2017-8-5-highlight","date":"2017-08-05T00:00:00.000Z","updated":"2019-11-29T12:20:47.648Z","comments":true,"path":"2017/08/05/2017-8-5-highlight/","link":"","permalink":"yihao.ml/2017/08/05/2017-8-5-highlight/","excerpt":"","text":"ä½¿ç”¨å¼•å…¥highlight.min.jså’Œmonokai_sublime.min.cssï¼Œä½¿ç”¨initHighlightingOnLoad()åˆå§‹åŒ–.123&lt;link href=&quot;http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;script src=&quot;http://cdn.bootcss.com/highlight.js/8.0/highlight.min.js&quot;&gt;&lt;/script&gt;&lt;script &gt;hljs.initHighlightingOnLoad();&lt;/script&gt;ä½¿ç”¨&lt;pre&gt;å’Œ&lt;code class=&quot;html&quot;&gt; æŒ‡å®šæ–‡æœ¬çš„å†…å®¹ä¿¡æ¯ä¾‹å¦‚&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;code.....&lt;/code&gt;&lt;/pre&gt; å±•ç¤ºjsä»£ç : var arr = new Array(); var input_element = document.getElementById(\"input\"); alert(input_element.value); javaä»£ç : class Demo{ public static void main(String[] args){ Systemm.out.println(\"java\"); } } Cä»£ç : int main(){ printf(\"c\"); return 1; } linux $ echo $(xdpyinfo|grep 'dimensions:' | awk '{print $2}') å®˜ç½‘ https://highlightjs.org/download/","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"yihao.ml/categories/å‰ç«¯/"}],"tags":[{"name":"Jekyll","slug":"Jekyll","permalink":"yihao.ml/tags/Jekyll/"}]},{"title":"redisçš„ä½¿ç”¨æ€»ç»“","slug":"2017-7-31-redis","date":"2017-07-31T00:00:00.000Z","updated":"2019-11-29T12:20:47.644Z","comments":true,"path":"2017/07/31/2017-7-31-redis/","link":"","permalink":"yihao.ml/2017/07/31/2017-7-31-redis/","excerpt":"","text":"redisæ˜¯ä¸€ä¸ªå¼€æºçš„æ•°æ®å­˜å‚¨ç³»ç»Ÿï¼Œä¸memcachedä¸€æ ·å†…éƒ¨éƒ½æ˜¯ä½¿ç”¨å†…å­˜æ¥å­˜å‚¨æ•°æ®ï¼Œä½†ä¸ä¹‹ä¸åŒçš„æ˜¯redisä¼šå°†æ•°æ®å®šæœŸå†™å…¥ç£ç›˜ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚rediså†…éƒ¨å¯ä»¥å­˜æ”¾å­—ç¬¦ä¸²ã€é“¾è¡¨ã€æ•£åˆ—è¡¨ã€é›†åˆã€‚å®ƒæ”¯æŒä¸»ä»åŒæ­¥ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸»æœåŠ¡å™¨å°†æ•°æ®åŒæ­¥åˆ°ä»»æ„æ•°é‡çš„å…¶ä»–æœåŠ¡å™¨ä¸Šã€‚å½“å†…å­˜æ»¡äº†çš„æ—¶å€™ï¼Œå®ƒä¼šé‡‡ç”¨LURç®—æ³•æ¥ç½®æ¢å‡ºé•¿ä¹…æœªè¢«ä½¿ç”¨çš„æ•°æ®ï¼Œä»¥æ­¤æ¥ç¡®ä¿æ•°æ®åº“ä¸­ä¸€ç›´å­˜æ”¾çš„æ˜¯æœ€æœ‰ç”¨çš„æ•°æ®ã€‚ ä½¿ç”¨ä¸‹è½½3.2.100-version-msiå®‰è£…åŒ…(windows)https://github.com/MicrosoftArchive/redis/tagså®‰è£…redis,ä¸€è·¯nexté»˜è®¤ç«¯å£6379é“¾æ¥redis,å…ˆè¿›å…¥å®‰è£…ç›®å½•,æ‰¾åˆ°redis-cli.exeredis-cli.exe -h 127.0.0.1 -p 6379å­˜å…¥æ•°æ®setex mykey 60 â€œredisâ€å–æ•°æ®get mykeyJava ç¼–ç¨‹éœ€è¦ä¸¤ä¸ªjar Jedis.jarå’Œcommons-pool.jar;(tip:å¯ä»¥åˆ°maven repository ä¸­æœç´¢ç›¸å…³jar,ç‚¹å¼€ç‰ˆæœ¬åä¸‹é¢æœ‰Compile Dependenciesä¸€æ å¯ä»¥çœ‹åˆ°ä¾èµ–å…¶ä»–çš„jaråŒ…)ä½¿ç”¨Jedisé“¾æ¥redis Jedis jedis = new Jedis(\"127.0.0.1\",\"6379\"); // jedis.auth(\"admin\"); jedis.set(\"myKey\", \"testStr\"); jedis.setex... jedis.get...","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"yihao.ml/categories/åç«¯/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"yihao.ml/tags/Redis/"}]},{"title":"zTreeçš„ä½¿ç”¨æ€»ç»“","slug":"2017-7-26-zTree","date":"2017-07-26T00:00:00.000Z","updated":"2019-11-29T12:20:47.643Z","comments":true,"path":"2017/07/26/2017-7-26-zTree/","link":"","permalink":"yihao.ml/2017/07/26/2017-7-26-zTree/","excerpt":"","text":"zTreeæ˜¯å¼€æºçš„ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒæ˜¯ä¸€æ¬¾JQueryå®ç°çš„å¤šåŠŸèƒ½â€œæ ‘å‹â€åˆ—è¡¨æ’ä»¶ã€‚ ä½¿ç”¨éœ€è¦å¼•å…¥ä¸‹é¢çš„åº“123&lt;link rel=&quot;stylesheet&quot; href=&quot;zTreeStyle/zTreeStyle.css&quot; type=&quot;text/css&quot;&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.4.2.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;jquery.ztree.core-3.x.js&quot;&gt;&lt;/script&gt;ç¼–å†™ä¸€ä¸ªdiv&lt;div&gt;&lt;ul id=&quot;treeDemo&quot; class=&quot;ztree&quot;&gt;&lt;/ul&gt;&lt;/div&gt;ç¼–å†™js var zTree ; var setting = { callback: { onCheck: zTreeOnCheck, onClick: zTreeOnClick }, check:{ enable : true } }; $.ajax({ url:\"/hrm/GetJson\", type:\"get\", data:{}, dataType:\"jsonp\", jsonp:\"callBackJsonp\", success : success, error : function(a,b,c){ alert(\"error\"+c); } }); function success(nodes){ zTree = $.fn.zTree.init($(\"#treeDemo\"), setting, nodes); } function zTreeOnCheck(event,treeNode,treeId){ alert(\"checked\"); } function zTreeOnClick(event,treeNode,treeId){ alert(\"Clicked\"); } function getTree(){ return zTree; } /* // nodesæ ·å¼ var nodes = [ {id:1, pId:0, name: \"çˆ¶èŠ‚ç‚¹1\"}, {id:11, pId:1, name: \"å­èŠ‚ç‚¹1\"}, {id:12, pId:1, name: \"å­èŠ‚ç‚¹2\"} ]; */ å…³äºåå°æ•°æ®ç”±äºè·¨åŸŸè¯·æ±‚ï¼Œæ‰€ä»¥ç”¨äº†jsonpï¼Œå¦‚æœä¸è·¨åŸŸå¯ä»¥å»æ‰ï¼Œåå°ä½¿ç”¨JSONObjectå’ŒJSONArrayæ‹¼çš„JSONä¸²è¿”å›åˆ°ç•Œé¢å¹¶ä¸èƒ½è¢«zTreeè§£æ(è‡ªå·±å½“æ—¶åšçš„æ—¶å€™æ˜¯è¿™æ ·çš„)ï¼Œç”¨listæ‹¼ä¸ºnodes,å†ä½¿ç”¨out.println(nodes); arrayList.put(\"{id:12, pId:1, name: \"å­èŠ‚ç‚¹2\"}\"); é—®é¢˜åœ¨çˆ¶çª—ä½“ä¸Šå¦‚ä½•è§¦å‘å­çª—ä½“çš„zTreeçš„onCheckæ–¹æ³•åœ¨çˆ¶çª—ä½“ä½¿ç”¨jsè·å–å­çª—ä½“å¯¹è±¡ï¼Œparent.$(&quot;#iframeID&quot;).get(0).contentWindow; get(0)å°†Jqueryå¯¹è±¡è½¬æ¢ä¸ºæ™®é€šçš„jså¯¹è±¡!!!åœ¨å­çª—ä½“å®šä¹‰ä¸€ä¸ªè·å–zTreeçš„æ–¹æ³•getTree()ï¼Œè·å–åˆ°å­çª—ä½“è°ƒç”¨getTree()æ–¹æ³•æ‹¿åˆ°å¯¹è±¡ï¼Œä¹‹åç›¸å¹²å•¥å°±å¯ä»¥å¹²äº†ã€‚è·å–é€‰ä¸­çš„èŠ‚ç‚¹æ˜¯getChangeCheckedNodes()æˆ‘æ€ä¹ˆçŸ¥é“zTreeæœ‰getChangeCheckedNodesæ•™ç»™ä½ ä¸€ä¸ªåŠæ³•ï¼Œè·å–zTreeå¯¹è±¡ï¼Œç”¨console.log(zTree)ã€‚åœ¨æ§åˆ¶å°å°±å¯ä»¥çœ‹åˆ°zTreeæœ‰ä»€ä¹ˆæ–¹æ³•äº†ï¼","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"yihao.ml/categories/å‰ç«¯/"}],"tags":[{"name":"zTree","slug":"zTree","permalink":"yihao.ml/tags/zTree/"}]},{"title":"åœ¨ubuntu1.6.04å®‰è£…ffmpeg","slug":"2017-7-23-åœ¨ubuntu1.6.04å®‰è£…ffmpeg","date":"2017-07-23T00:00:00.000Z","updated":"2019-11-29T12:20:47.642Z","comments":true,"path":"2017/07/23/2017-7-23-åœ¨ubuntu1.6.04å®‰è£…ffmpeg/","link":"","permalink":"yihao.ml/2017/07/23/2017-7-23-åœ¨ubuntu1.6.04å®‰è£…ffmpeg/","excerpt":"","text":"FFmpegçš„åç§°æ¥è‡ªMPEGè§†é¢‘ç¼–ç æ ‡å‡†ï¼Œå‰é¢çš„â€œFFâ€ä»£è¡¨â€œFast Forwardâ€ï¼ŒFFmpegæ˜¯ä¸€å¥—å¯ä»¥ç”¨æ¥è®°å½•ã€è½¬æ¢æ•°å­—éŸ³é¢‘ã€è§†é¢‘ï¼Œå¹¶èƒ½å°†å…¶è½¬åŒ–ä¸ºæµçš„å¼€æºè®¡ç®—æœºç¨‹åºã€‚å¯ä»¥è½»æ˜“åœ°å®ç°å¤šç§è§†é¢‘æ ¼å¼ä¹‹é—´çš„ç›¸äº’è½¬æ¢ã€‚FFmpegçš„ç”¨æˆ·æœ‰Googleï¼ŒFacebookï¼ŒYoutubeï¼Œä¼˜é…·ï¼Œçˆ±å¥‡è‰ºï¼ŒåœŸè±†ç­‰ã€‚ç»„æˆlibavformatï¼šç”¨äºå„ç§éŸ³è§†é¢‘å°è£…æ ¼å¼çš„ç”Ÿæˆå’Œè§£æï¼ŒåŒ…æ‹¬è·å–è§£ç æ‰€éœ€ä¿¡æ¯ä»¥ç”Ÿæˆè§£ç ä¸Šä¸‹æ–‡ç»“æ„å’Œè¯»å–éŸ³è§†é¢‘å¸§ç­‰åŠŸèƒ½ï¼ŒåŒ…å«demuxerså’Œmuxeråº“ï¼›libavcodecï¼šç”¨äºå„ç§ç±»å‹å£°éŸ³/å›¾åƒç¼–è§£ç ï¼›libavutilï¼šåŒ…å«ä¸€äº›å…¬å…±çš„å·¥å…·å‡½æ•°ï¼›libswscaleï¼šç”¨äºè§†é¢‘åœºæ™¯æ¯”ä¾‹ç¼©æ”¾ã€è‰²å½©æ˜ å°„è½¬æ¢ï¼›libpostprocï¼šç”¨äºåæœŸæ•ˆæœå¤„ç†ï¼›ffmpegï¼šæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥å¯¹è§†é¢‘æ–‡ä»¶è½¬æ¢æ ¼å¼ï¼Œä¹Ÿæ”¯æŒå¯¹ç”µè§†å¡å®æ—¶ç¼–ç ï¼›ffseverï¼šæ˜¯ä¸€ä¸ªHTTPå¤šåª’ä½“å®æ—¶å¹¿æ’­æµæœåŠ¡å™¨ï¼Œæ”¯æŒæ—¶å…‰å¹³ç§»ï¼›ffplayï¼šæ˜¯ä¸€ä¸ªç®€å•çš„æ’­æ”¾å™¨ï¼Œä½¿ç”¨ffmpeg åº“è§£æå’Œè§£ç ï¼Œé€šè¿‡SDLæ˜¾ç¤ºï¼›éœ€è¦å‡†å¤‡çš„ä¸œè¥¿ffmpeg-2.4.1.tar.bz2 ä¸‹è½½åœ°å€https://www.ffmpeg.org/releases/ä¸‹è½½ffmpegæ‰€éœ€è¦çš„æ‰€æœ‰ä¾èµ–åº“æ–‡ä»¶libx264ã€libfaacã€libmp3lameã€libtheoraã€libvorbisã€libxvidã€libxextã€libxfixes å®‰è£…libx264å› ä¸ºlibx264ä¾èµ–yasm,æ‰€ä»¥æˆ‘ä»¬å…ˆå®‰è£…yasmsudo apt-get install yasmä½¿ç”¨aptitudeå®‰è£…libx264sudo aptitude install libx264-devæœ‰çš„åŒå­¦æ²¡æœ‰aptitude,ä¸‹è½½ä¸€ä¸ªå°±è¡Œäº†sudo apt-get install aptitudetar.gzå®‰è£…åŒ…å®‰è£…libx264ï¼Œæˆ‘ä»¬éœ€è¦å»ä¸‹è½½last_x264.tar.bz2tar -zxvf last_x264.tar.bz2è¿›å…¥ç›®å½•è¿›è¡Œç¼–è¯‘å¹¶å®‰è£…./configure --enable-shared --enable-picmakemake install å®‰è£…ffmpegæˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥å®‰è£…ffmpegçš„ä¾èµ–ï¼Œè¯·ç¡®ä¿æ¯ä¸ªä¾èµ–éƒ½å®‰è£…æˆåŠŸï¼(å¯ä»¥ä½¿ç”¨echo $?æ¥åˆ¤æ–­æ˜¯å¦æˆåŠŸ)libfaacsudo aptitude install libfaac-devlibmp3lame-devsudo aptitude install libmp3lame-devlibtheora-devsudo aptitude install libtheora-devlibvorbis-devsudo aptitude install libvorbis-devlibxvidcore-devsudo aptitude install libxvidcore-devlibxext-devsudo aptitude install libxext-devlibxfixes-devsudo aptitude install libxfixes-devlibasound2-dev (lzåç»­æƒ³ä½¿ç”¨alsaå½•éŸ³,é‡åˆ°äº†éº»çƒ¦FFMPEG: Unknown input format:â€˜alsaâ€™,ç‚¹å‡»å¯ä»¥è·³è½¬åˆ°lzå‚è€ƒçš„è§£å†³åŠæ³•)sudo apt-get install libasound2-devå®‰è£…ffmpegtar -xjvf ffmpeg-2.4.1.tar.bz2cd ffmpeg-2.4.1ç¼–è¯‘å¹¶å®‰è£…,â€“prefixæŒ‡å®šå®‰è£…åçš„ç›®å½•(æ–¹ä¾¿å¸è½½),åé¢æˆ‘æ·»åŠ ä¸Šäº†alsaçš„æ”¯æŒ**â€“enable-indev=alsa,â€“enable-outdev=alsa**$ ./configure --prefix=/usr/local/ffmpeg --enable-gpl --enable-version3 --enable-nonfree --enable-postproc --enable-pthreads --enable-libfaac --enable-libmp3lame --enable-libtheora --enable-libx264 --enable-libxvid --enable-x11grab --enable-libvorbis --enable-indev=alsa --enable-outdev=alsa$ sudo make$ sudo make installå‡å¦‚æˆ‘ä»¬ä¸æ·»åŠ alsaæ”¯æŒ,åç»­æˆ‘ä»¬å¯èƒ½æ— æ³•æ­£å¸¸å½•éŸ³,å½•å±è¿˜æ˜¯å¯ä»¥çš„.ä½¿ç”¨ffmpeg -deviceså¯ä»¥æŸ¥çœ‹ffmpegæ”¯æŒçš„è®¾å¤‡ é…ç½®ffmpegç¯å¢ƒå˜é‡è¿™é‡Œæœ‰å¾ˆå¤šé…ç½®ç¯å¢ƒå˜é‡çš„æ–¹æ³•ï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ–¹å¼é…ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§æˆ‘çš„é…sudo vim /etc/profileåœ¨æ–‡ä»¶é‡Œé¢æ·»åŠ ä¸€è¡Œä»£ç export FFMPEG_HOME=/usr/local/ffmpegexport PATH=PATH:PATH:PATH:FFMPEG_HOME/binä¿å­˜é€€å‡ºvimä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆsource /etc/profileæŸ¥çœ‹ç¯å¢ƒå˜é‡æ˜¯å¦å¯è¡Œecho $PATHæŸ¥çœ‹ffmpegæ˜¯å¦å¯è¡Œffmpeg -versionè½¬æ¢å‘½ä»¤ï¼šffmpeg -i â€œ20090401010.mp4â€ -y -ab 32 -ar 22050 -qscale 10 -s 640*480 -r 15 /opt/a.flv-iæ˜¯è¦è½¬æ¢æ–‡ä»¶å-yæ˜¯è¦†ç›–è¾“å‡ºæ–‡ä»¶-abæ˜¯éŸ³é¢‘æ•°æ®æµï¼Œå¤§å®¶åœ¨ç™¾åº¦å¬æ­Œçš„æ—¶å€™åº”è¯¥éƒ½å¯ä»¥çœ‹åˆ° 128 64-aræ˜¯å£°éŸ³çš„é¢‘ç‡ 22050 åŸºæœ¬éƒ½æ˜¯è¿™ä¸ªã€‚-qscaleæ˜¯è§†é¢‘è¾“å‡ºè´¨é‡ï¼Œåè¾¹çš„å€¼è¶Šå°è´¨é‡è¶Šé«˜ï¼Œä½†æ˜¯è¾“å‡ºæ–‡ä»¶å°±è¶Šâ€œè‚¥â€-sæ˜¯è¾“å‡ºæ–‡ä»¶çš„å°ºå¯¸å¤§å°ï¼-rå¸§ç‡æ˜¯è§†é¢‘æ–‡ä»¶ä¸­æ¯ä¸€ç§’çš„å¸§æ•°ï¼Œè‚‰çœ¼æƒ³çœ‹åˆ°è¿ç»­ç§»åŠ¨å›¾åƒè‡³å°‘éœ€è¦15å¸§ã€‚-bç ç‡(æ¯”ç‰¹ç‡):æ˜¯ä¸€ä¸ªç¡®å®šæ•´ä½“è§†é¢‘/éŸ³é¢‘è´¨é‡çš„å‚æ•°ï¼Œç§’ä¸ºå•ä½å¤„ç†çš„å­—èŠ‚æ•°ï¼Œç ç‡å’Œè§†é¢‘è´¨é‡æˆæ­£æ¯”ï¼Œåœ¨è§†é¢‘æ–‡ä»¶ä¸­ä¸­æ¯”ç‰¹ç‡ç”¨bpsæ¥è¡¨è¾¾ã€‚èµ„æ–™FFmpegå®˜ç½‘ï¼š http://www.ffmpeg.orgFFmpeg doc : http://www.ffmpeg.org/documentation.htmlFFmpeg wiki : https://trac.ffmpeg.org/wikiFFmpegåŸºç¡€: http://wenku.baidu.com/view/296eefcaf90f76c661371af1.htmlFFmpegåŸºæœ¬ç”¨æ³• : http://blog.csdn.net/doublefi123/article/details/24325159FFmpegå‚æ•°è¯¦è§£ : http://www.cuplayer.com/player/PlayerCode/FFmpeg/2014/0706/1399.html","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[{"name":"FFmpeg","slug":"FFmpeg","permalink":"yihao.ml/tags/FFmpeg/"}]},{"title":"æ­å»ºftpæœåŠ¡å™¨","slug":"2017-7-23-æ­å»ºftpæœåŠ¡å™¨","date":"2017-07-23T00:00:00.000Z","updated":"2019-11-29T12:20:47.643Z","comments":true,"path":"2017/07/23/2017-7-23-æ­å»ºftpæœåŠ¡å™¨/","link":"","permalink":"yihao.ml/2017/07/23/2017-7-23-æ­å»ºftpæœåŠ¡å™¨/","excerpt":"","text":"æƒ³è¦åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¹‹é—´ä¼ é€æ•°æ®æ˜¯ä¸æ˜¯å¾ˆå¤´ç–¼ï¼Œlzæ“ä½œç³»ç»Ÿæ˜¯ubuntu 1.6.04ï¼Œå®¤å‹çš„æ“ä½œç³»ç»Ÿæ˜¯windowï¼Œæƒ³ç»™æˆ‘ä¼ ä¸ªæ–‡ä»¶å›°éš¾é‡é‡ï¼Œè€Œä¸”æ…¢æ»¡çš„è¦æ­»å“Ÿã€‚ftpåªè¦åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å°±å¯ä»¥ç”¨å‘¢ï¼Œè€Œä¸”ä¼ è¾“é€Ÿåº¦é‚£ä¸ªå—–å—–çš„ï¼Œæ¥æå§ï¼ å®‰è£…vsftpdæœåŠ¡å®‰è£…ä¹‹å‰å…ˆçœ‹çœ‹è‡ªå·±æœ‰æ²¡æœ‰å®‰è£…è¿‡ç±»ä¼¼çš„è½¯ä»¶å‘¢which is vsftpdä½¿ç”¨ubuntuçš„apt-getå®‰è£…vsftpdsudo apt-get install vsftpd é…ç½®vvsftpd.confä¸€è·¯å®‰è£…ä¸‹å»,æˆåŠŸä¹‹åå»é…ç½®ä¸€ä¸‹ftpçš„é…ç½®æ–‡ä»¶!sudo vim /etc/vsftpd.confçœ‹çœ‹æˆ‘çš„vsftpd.confå§ï¼123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168 # Example config file /etc/vsftpd.conf # # The default compiled in settings are fairly paranoid. This sample file # loosens things up a bit, to make the ftp daemon more usable. # Please see vsftpd.conf.5 for all compiled in defaults. # # READ THIS: This example file is NOT an exhaustive list of vsftpd options. # Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd&apos;s # capabilities. # # # Run standalone? vsftpd can run either from an inetd or as a standalone # daemon started from an initscript. listen=NO # # This directive enables listening on IPv6 sockets. By default, listening # on the IPv6 &quot;any&quot; address (::) will accept connections from both IPv6 # and IPv4 clients. It is not necessary to listen on *both* IPv4 and IPv6 # sockets. If you want that (perhaps because you want to listen on specific # addresses) then you must run two copies of vsftpd with two configuration # files. listen_ipv6=YES # # Allow anonymous FTP? (Disabled by default). anonymous_enable=YES # # Uncomment this to allow local users to log in. local_enable=YES # # Uncomment this to enable any form of FTP write command. write_enable=YES # # Default umask for local users is 077. You may wish to change this to 022, # if your users expect that (022 is used by most other ftpd&apos;s) #local_umask=022 # # Uncomment this to allow the anonymous FTP user to upload files. This only # has an effect if the above global write enable is activated. Also, you will # obviously need to create a directory writable by the FTP user. anon_upload_enable=YES # # Uncomment this if you want the anonymous FTP user to be able to create # new directories. anon_mkdir_write_enable=YES # # Activate directory messages - messages given to remote users when they # go into a certain directory. dirmessage_enable=YES # # If enabled, vsftpd will display directory listings with the time # in your local time zone. The default is to display GMT. The # times returned by the MDTM FTP command are also affected by this # option. use_localtime=YES # # Activate logging of uploads/downloads. xferlog_enable=YES # # Make sure PORT transfer connections originate from port 20 (ftp-data). connect_from_port_20=YES # # If you want, you can arrange for uploaded anonymous files to be owned by # a different user. Note! Using &quot;root&quot; for uploaded files is not # recommended! #chown_uploads=YES #chown_username=whoever # # You may override where the log file goes if you like. The default is shown # below. #xferlog_file=/var/log/vsftpd.log # # If you want, you can have your log file in standard ftpd xferlog format. # Note that the default log file location is /var/log/xferlog in this case. #xferlog_std_format=YES # # You may change the default value for timing out an idle session. #idle_session_timeout=600 # # You may change the default value for timing out a data connection. #data_connection_timeout=120 # # It is recommended that you define on your system a unique user which the # ftp server can use as a totally isolated and unprivileged user. #nopriv_user=ftpsecure # # Enable this and the server will recognise asynchronous ABOR requests. Not # recommended for security (the code is non-trivial). Not enabling it, # however, may confuse older FTP clients. #async_abor_enable=YES # # By default the server will pretend to allow ASCII mode but in fact ignore # the request. Turn on the below options to have the server actually do ASCII # mangling on files when in ASCII mode. # Beware that on some FTP servers, ASCII support allows a denial of service # attack (DoS) via the command &quot;SIZE /big/file&quot; in ASCII mode. vsftpd # predicted this attack and has always been safe, reporting the size of the # raw file. # ASCII mangling is a horrible feature of the protocol. #ascii_upload_enable=YES #ascii_download_enable=YES # # You may fully customise the login banner string: #ftpd_banner=Welcome to blah FTP service. # # You may specify a file of disallowed anonymous e-mail addresses. Apparently # useful for combatting certain DoS attacks. #deny_email_enable=YES # (default follows) #banned_email_file=/etc/vsftpd.banned_emails # # You may restrict local users to their home directories. See the FAQ for # the possible risks in this before using chroot_local_user or # chroot_list_enable below. #chroot_local_user=YES # # You may specify an explicit list of local users to chroot() to their home # directory. If chroot_local_user is YES, then this list becomes a list of # users to NOT chroot(). # (Warning! chroot&apos;ing can be very dangerous. If using chroot, make sure that # the user does not have write access to the top level directory within the # chroot) #chroot_local_user=YES #chroot_list_enable=YES # (default follows) #chroot_list_file=/etc/vsftpd.chroot_list # # You may activate the &quot;-R&quot; option to the builtin ls. This is disabled by # default to avoid remote users being able to cause excessive I/O on large # sites. However, some broken FTP clients such as &quot;ncftp&quot; and &quot;mirror&quot; assume # the presence of the &quot;-R&quot; option, so there is a strong case for enabling it. #ls_recurse_enable=YES # # Customization # # Some of vsftpd&apos;s settings don&apos;t fit the filesystem layout by # default. # # This option should be the name of a directory which is empty. Also, the # directory should not be writable by the ftp user. This directory is used # as a secure chroot() jail at times vsftpd does not require filesystem # access. secure_chroot_dir=/var/run/vsftpd/empty # # This string is the name of the PAM service vsftpd will use. pam_service_name=vsftpd # # This option specifies the location of the RSA certificate to use for SSL # encrypted connections. rsa_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem rsa_private_key_file=/etc/ssl/private/ssl-cert-snakeoil.key ssl_enable=NO # # Uncomment this to indicate that vsftpd use a utf8 filesystem. #utf8_filesystem=YES ``` * æ‰å¿ƒäº†è€é“ï¼çœ‹çœ‹è‹±è¯­æœ‰å¤šé‡è¦ï¼Œå…¶å®éœ€è¦æ”¹åŠ¨çš„åœ°æ–¹æœ‰5ä¸ª ``` anonymous_enable=YES #è®¾ç½®åŒ¿åå¯ç™»å½• local_enable=YES #æœ¬åœ°ç”¨æˆ·å…è®¸ç™»å½• write_enable=YES #ç”¨æˆ·æ˜¯å¦æœ‰å†™çš„æƒé™ anon_upload_enable=YES #å…è®¸åŒ¿åç”¨æˆ·ä¸Šä¼  anon_mkdir_write_enable=YES #å…è®¸åŒ¿åç”¨æˆ·åˆ›å»ºç›®å½•æ–‡ä»¶é‡å¯æœåŠ¡sudo service vsftpd restart æŒ‡å®šä¸Šä¼ å’Œä¸‹è½½ç›®å½•å…¶å®ç°åœ¨å·²ç»å¯ä»¥è®¿é—®äº†ï¼Œlzçš„ipæ˜¯192.168.1.19ï¼Œæ‰“å¼€æµè§ˆå™¨è¾“å…¥ftp://192.168.1.19ï¼Œæˆ‘ä»¬è®¿é—®åå‘ç°æ˜¯ç©ºã€‚åŸå› æ˜¯åŒ¿åè®¿é—®é»˜è®¤ä¼šè®¿é—®/srv/ftp,æˆ‘ä»¬ç£ç›˜ä¸Šæœ¬èº«å°±æ²¡åŠ¨è¥¿å‘¢ï¼æˆ‘ä»¬éœ€è¦ä¸Šä¼ å’Œä¸‹è½½åŠŸèƒ½ï¼Œåœ¨/srv/ftp/ åˆ›å»ºäº†ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œupdateå’Œdownloadã€‚æŠŠuploadçš„æƒé™è®¾ç½®ä¸ºå¯è¯»å¯å†™ï¼ŒæŠŠdownloadæƒé™è®¾ç½®ä¸ºå¯è¯»ä¸å¯å†™ã€‚ä¸Šä¼ çš„æ–‡ä»¶å¤¹ï¼Œå…¶ä»–äººå¯ä»¥ä¸Šä¼ åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä½†æ˜¯ä¸èƒ½æœ‰åˆ é™¤æƒé™ï¼Œè¯•æƒ³å¦‚æœæœ‰åŒ¿åç™»å½•è¿›æ¥çš„ç»™ä½ åˆ é™¤æ‰äº†åˆ«äººå¥½å¿ƒç»™ä½ åˆ†äº«çš„æ–‡ä»¶è¿˜è¡Œå—ï¼Ÿä¸‹è½½çš„æ–‡ä»¶å¤¹ï¼Œå…¶ä»–äººåªèƒ½è¯»å–è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä¹Ÿå°±æ˜¯ä½ è¦åˆ†äº«ç»™å…¶ä»–äººçš„æ–‡ä»¶å¯ä»¥æ”¾åˆ°è¿™é‡Œé¢ã€‚sudo mkdir /srv/ftp/uploadsudo mkdir /srv/ftp/downloadsudo chmod -R 777 /srv/ftp/updatesudo chmod -R 755 /srv/ftp/downloadç°åœ¨ä¸‹é¢çš„äº‹æƒ…å°±å¯ä»¥å®ç°äº†ï¼šå®¤å‹æœ‰ä¸€ä¸ªéå¸¸å¥½çœ‹çš„ç”µå½±ï¼Œå‘ç½‘ç›˜åˆå¤ªæ…¢ï¼Œæ€ä¹ˆåŠï¼Ÿä½ å°±æŠŠä½ çš„FTPåœ°å€æ‰”ç»™ä»–è®©ä»–ä¸Šä¼ åˆ°ftp://&lt;ä½ çš„IPåœ°å€&gt;/upload æ–‡ä»¶å¤¹ä¸‹å§ã€‚ä½ å‰ªè¾‘äº†ä¸€ä¸ªå¾ˆä¸é”™çš„è§†é¢‘çŸ­ç‰‡ï¼Œæƒ³åˆ†äº«ç»™å­¦æ ¡é‡Œçš„å°ä¼™ä¼´ï¼Œä½ å°±å¯ä»¥æŠŠå®ƒæ‰”åˆ°ä½ çš„FTPæœåŠ¡å™¨ /srv/ftp/download ç›®å½•ä¸‹ï¼Œç„¶åå¯¹å°ä¼™ä¼´ä»¬è¯´ï¼Œæˆ‘çš„è§†é¢‘å·²ç»å…±äº«äº†ï¼Œä½ ä»¬åˆ° ftp://&lt;ä½ çš„IPåœ°å€&gt;/download é‡Œé¢å»ä¸‹è½½å§ã€‚æ©ï¼Œåªè¦ä½ é…ç½®å¥½äº†FTPï¼Œå°±èƒ½äº«å—FTPå±€åŸŸç½‘é«˜é€Ÿä¼ è¾“ï¼Œåˆ†åˆ†é’Ÿæå®š~~!","categories":[{"name":"Linux","slug":"Linux","permalink":"yihao.ml/categories/Linux/"}],"tags":[]},{"title":"github-jekyllæ­å»ºä¸ªäººåšå®¢ç½‘ç«™","slug":"2017-7-20-github-jekyll-ubuntu-é˜¿é‡Œäº‘","date":"2017-07-20T00:00:00.000Z","updated":"2019-11-29T12:20:47.641Z","comments":true,"path":"2017/07/20/2017-7-20-github-jekyll-ubuntu-é˜¿é‡Œäº‘/","link":"","permalink":"yihao.ml/2017/07/20/2017-7-20-github-jekyll-ubuntu-é˜¿é‡Œäº‘/","excerpt":"","text":"ä½¿ç”¨githubå’Œjekyllæ­å»ºçš„åšå®¢,è¿è¡Œç¯å¢ƒæ˜¯ubuntu 1.6.04ä½¿ç”¨çš„åŸŸåæ˜¯é˜¿é‡Œäº‘,å¬è¯´.tkçš„ä¹Ÿä¸é”™ï¼Œä½†æ˜¯æˆ‘æ³¨å†Œçš„åŸŸååœ¨.tkå¾ˆè´µæ¨è: github Pageså’ŒJekyllå…¥é—¨,Gitæ•™ç¨‹ é™„å½•jekyllrubyå®‰è£…rubyGemså®‰è£…jekyllå®‰è£…åˆ›å»ºå¹¶å‘å¸ƒåšå®¢æ— æ ·å¼çš„åšå®¢æœ‰æ ·å¼çš„åšå®¢æ³¨å†ŒåŸŸå jekyllJekyllæ˜¯ä¸€ä¸ªç®€å•çš„åšå®¢å½¢æ€çš„é™æ€ç«™ç‚¹ç”Ÿäº§æœºå™¨ã€‚å®ƒæœ‰ä¸€ä¸ªæ¨¡ç‰ˆç›®å½•ï¼Œå…¶ä¸­åŒ…å«åŸå§‹æ–‡æœ¬æ ¼å¼çš„æ–‡æ¡£ï¼Œé€šè¿‡ Markdown ï¼ˆæˆ–è€… Textileï¼‰ ä»¥åŠ Liquid è½¬åŒ–æˆä¸€ä¸ªå®Œæ•´çš„å¯å‘å¸ƒçš„é™æ€ç½‘ç«™ï¼Œä½ å¯ä»¥å‘å¸ƒåœ¨ä»»ä½•ä½ å–œçˆ±çš„æœåŠ¡å™¨ä¸Šã€‚Jekyll ä¹Ÿå¯ä»¥è¿è¡Œåœ¨ GitHub Page ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥ä½¿ç”¨ GitHub çš„æœåŠ¡æ¥æ­å»ºä½ çš„é¡¹ç›®é¡µé¢ã€åšå®¢æˆ–è€…ç½‘ç«™ï¼Œè€Œä¸”æ˜¯å®Œå…¨å…è´¹çš„ã€‚å®‰è£…jekyllä¹‹å‰å‘¢ï¼Œéœ€è¦å‡†å¤‡ä¸‹é¢ä¸‰æ ·ä¸œè¥¿ã€‚RubyRubyGemsUbuntu 1.6.04 rubyå®‰è£…å…·ä½“æ€ä¹ˆå¯ä»¥åˆ°Rubyå®˜ç½‘ä¸‹è½½tar.gzå®‰è£…åŒ…å®‰è£…ï¼Œè¿™é‡Œåªæä¾›æ€è·¯ï¼Œä¸è¦ç›´æ¥ç²˜è´´ä¸‹é¢ä»£ç ï¼Œæˆ‘ä»¬æ˜¯æœ‰æ™ºæ…§çš„ç¨‹åºå‘˜ã€‚ï¼ˆæ³¨æ„æœ‰æ—¶å€™make install æŠ¥é”™çš„è¯ï¼Œå¯èƒ½æ˜¯æƒé™é—®é¢˜ï¼Œæˆ‘å°±ç¢°åˆ°å’¯ï¼Œåªè¦åœ¨ä»£ç å‰é¢åŠ ä¸Šsudo å°±è¡Œäº†ï¼‰123456789$ wget https://cache.ruby-lang.org/pub/ruby/2.4/ruby-2.4.1.tar.gz$ tar -zxvf ruby-2.4.1.tar.gz$ cd ruby-2.4.1/$ ./configure$ make$ make install$ make clean$ sudo make distclean$ ruby -v rubyGemså®‰è£…å…·ä½“æ€ä¹ˆå¯ä»¥åˆ°RubyGemså®˜ç½‘,å’ŒRubyå®‰è£…æ˜¯ä¸€æ ·çš„ï¼Œä¸åšè¯¦ç»†è¯´æ˜12345678$ wget https://rubygems.org/rubygems/rubygems-2.6.12.tgz$ tar -zxvf rubygems-2.6.12.tgz$ cd rubygems-2.6.12$ ./configure$ make$ make install$ make clean$ sudo make distclean jekyllå®‰è£…jekyllå®˜ç½‘,jekyllçš„docä¸€æ ä¸­ä¹Ÿæä¾›äº†å®‰è£…çš„å‚è€ƒ1$ sudo gem install jekyllå¯èƒ½ä¼šå‡ºç°ä¸€äº›é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºå°‘å®‰è£…äº†ä¸€äº›æ’ä»¶ï¼Œè¿™é‡Œæˆ‘ä¹Ÿå¡äº†å¾ˆä¹…ï¼Œæœç´¢äº†å¾ˆå¤šèµ„æ–™ï¼Œè¯•äº†å¾ˆå¤šæ¬¡1234ERROR: Loading command: update (LoadError)cannot load such file -- zlibERROR: While executing gem ... (NoMethodError)undefined method `invoke_with_build_args&apos; for nil:NilClassè§£å†³åŠæ³•ï¼Œå¦‚æœæˆ‘çš„æ–¹æ³•ä¸è¡Œï¼Œè¿™ä¸ªå°±è¦æ‘†è„±googleäº†,è¿™é‡Œé¢$?æ˜¯ä¸Šä¸€ä¸ªæ‰§è¡Œå‘½ä»¤çš„æ‰§è¡Œç»“æœï¼Œå¦‚æœè¿”å›0å°±ä»£è¡¨æ²¡é—®é¢˜123456789101112131415161718$ sudo apt-get update$ sudo apt-get install git-core curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties$ sudo apt-get install libgdbm-dev libncurses5-dev automake libtool bison libffi-dev$ sudo apt-get install zlib1g-dev$ cd ruby-2.4.1/ext/zlib/$ ruby extconf.rb $ make$ echo $?$ cd /usr/ruby-2.4.1/$ ./configure$ echo $?$ make$ echo $?$ make install$ sudo make install$ echo $?$ make clean$ make distclean åˆ›å»ºå¹¶å‘å¸ƒåšå®¢ æ— æ ·å¼çš„åšå®¢åˆ›å»ºä¸€ä¸ªæ— æ ·å¼çš„åšå®¢123456$ jekyll new blog$ cd blog$ git init $ git add .$ git commit -m &quot;fist jekyll program&quot;$ git statuså°†åšå®¢å…³è”åˆ°githubè¿œç¨‹ä»“åº“ç™»å½•githubé€‰æ‹©New repositoryå¡«å†™Repository nameä¸ºusername.github.io ï¼ˆæ³¨æ„è¿™é‡Œçš„æ ¼å¼ï¼Œè¿™é‡Œçš„usernameå°±æ˜¯github.com/usernameä¸­çš„usernameï¼‰Create repositoryåˆ›å»ºç©ä¹‹åä¼šç»™ä½ ä¸€ä¸ªhttpsçš„é“¾æ¥ï¼Œæ¯”å¦‚æˆ‘çš„usernameæ˜¯Demo233ï¼Œç»™æˆ‘çš„é“¾æ¥å°±æ˜¯https://github.com/Demo233/Demo233.github.io.gitå°†æ— æ ·å¼çš„blogé¡¹ç›®è¿œç¨‹æ¨é€åˆ°githubä»“åº“ä¸­,è¿™é‡Œä»¥æˆ‘çš„ä¸ºä¾‹ï¼Œæˆ‘çš„usernameä¸ºDemo233,æ³¨æ„ä¿®æ”¹æˆè‡ªå·±çš„123$ cd blog/$ git remote add origin https://github.com/Demo233/Demo233.github.io.git$ git push origin masteré…ç½®github pages,å¹¶è¿è¡Œè¿›å…¥åˆ°github.com/Demo233/Demo233.github.ioé¡¹ç›®ä¸­ï¼Œåœ¨Settingsé€‰é¡¹å¡ä¸­æ‰¾åˆ°GitHub Pagesé¢æ¿ï¼Œåœ¨Sourceä¸­é€‰æ‹©master branchï¼Œå¹¶saveé€šè¿‡demo233.github.ioå°±å¯ä»¥æˆåŠŸè®¿é—®æˆ‘ä»¬çš„ç•Œé¢äº†ï¼ æœ‰æ ·å¼çš„åšå®¢æœ¬æ¬¡lzç”¨åˆ°çš„æ ·å¼æ˜¯hydeï¼Œä»¥è¿™ä¸ªä¸ºä¾‹å­è¿›è¡Œæ¨é€éƒ¨ç½²ã€‚åœ¨githubä¸Šç½‘æœ‰å­¦å¤šjekyllçš„æ ·å¼ï¼Œä½ ä¹Ÿå¯ä»¥ä¸‹è½½å¹¶éƒ¨ç½²,æ ·å¼é“¾æ¥12$ git clone https://github.com/poole/hyde.git$ cd hyde/æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€äº›ä¸œè¥¿ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼Œä¹‹å‰lzåŒæ ·å¡åœ¨è¿™é‡ŒåŠå¤©ï¼Œç½‘ä¸Šæœç´¢äº†åŠå¤©èµ„æ–™æ‰è§£å†³ã€‚ä¿®æ”¹_config.ymlæ–‡ä»¶ä¸­çš„relative_permalinks: false,å¦‚æœä¸æ”¹ï¼Œä¼šæŠ¥XXXè¿‡æœŸçš„é”™è¯¯ï¼Œè®°ä¸å¾—äº†åˆ é™¤CNAMEä¸­çš„å†…å®¹ï¼Œå¦‚æœä¸æ”¹ä¼šæç¤ºåŸŸåå·²ç»å­˜åœ¨ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯åˆ«äººçš„é¡¹ç›®ï¼Œäººå®¶å·²ç»åœ¨githubä¸Šæ³¨å†Œäº†ï¼Œåé¢ä¼šä»‹ç»æ€ä¹ˆé…ç½®è‡ªå·±çš„åŸŸå123456$ rm -rm .git/ # åˆ é™¤åŸæœ¬çš„.git æ–‡ä»¶ä½¿ç”¨è‡ªå·±çš„.git$ git init$ git add .$ git commit -m &quot;beautiful jekyll theme&quot;$ git remote add https://github.com/Demo233/Demo233.github.io.git # è®°å¾—é€€å›å†å²ç‰ˆæœ¬ä¹‹åå†è¿›è¡Œè¿™é‡Œçš„æ“ä½œä¸ç„¶ä¼šæŠ¥é”™çš„$ git push origin masteråé¢çš„å’Œæ— æ ·å¼åšå®¢å‘å¸ƒæ˜¯ä¸€æ ·çš„ï¼Œåªè¦æ³¨æ„ä¿®æ”¹_config.ymlæ–‡ä»¶ï¼Œå…¶ä»–åº”è¯¥æ²¡ä»€ä¹ˆå¤§ç¢äº†ã€‚Tip : é¡¹ç›®é‡Œé¢å·²ç»æœ‰ä¸€ä¸ª.gitignoreæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥å¿½ç•¥ä¸Šä¼ å†…å®¹ æ³¨å†ŒåŸŸåç™»å½•é˜¿é‡Œäº‘æ³¨å†Œä¸€ä¸ªå¸å·ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„åŸŸåå¹¶è´­ä¹°å³å¯ã€‚æˆ‘ä»¬ä¹°å¥½åŸŸåä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥å»ç»‘å®šgithub pagesäº†ã€‚lzçš„åŸŸåæ˜¯zonegood.comï¼Œåœ¨CNAMEä¸­å†™å…¥zonegood.comå¹¶ä¿å­˜12$ cd hyde/$ vim ./CNAMEæ¨é€æ›´æ”¹ä¿¡æ¯ï¼Œæ›´æ–°é¡¹ç›®123$ git add .$ git commit -m &quot;modify CNAME file ,add zonegood.com&quot;$ git push origin masterç™»å½•é˜¿é‡Œäº‘åŸŸåæ§åˆ¶å°åœ¨äº‘è§£æDNSé€‰é¡¹å¡ä¸­æ‰¾åˆ°è‡ªå·±è´­ä¹°çš„åŸŸåé€‰é¡¹ï¼Œå¹¶ç‚¹å‡»â€œè§£æâ€åœ¨â€œè§£æè®¾ç½®â€ä¸€æ ä¸­é€‰æ‹©â€œæ·»åŠ è§£æâ€ï¼Œè®°å½•ç±»å‹å¡«å†™ä¸ºCNAMEï¼Œä¸»æœºè®°å½•å¡«å†™wwwï¼Œè®°å½•å€¼åœ¨è¿™é‡Œä»¥æˆ‘çš„ä¸ºä¾‹å¡«å†™demo233.github.ioä¹‹åä¿å­˜ã€‚æ¨èä¸€ç‰‡åšæ–‡è§£æåŸŸåçš„æ—¶å€™ä¸åŒçš„é¡¹ç›®ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼Ÿä¸»æœºè®°å½•ã€è®°å½•ç±»å‹ã€çº¿è·¯ç±»å‹ã€è®°å½•å€¼ã€MXä¼˜å…ˆçº§ã€TTLæ¨è : http://jmcglone.com/guides/github-pages/","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"yihao.ml/categories/å…¶ä»–/"}],"tags":[]}]}