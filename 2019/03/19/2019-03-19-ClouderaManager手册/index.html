














<!doctype html>
<html lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
  <meta name="renderer" content="webkit">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" , user-scalable="no"">
  <title>ClouderaManager操作指南YIHAO'S BLOG</title>
  <link rel="shortcut icon" href>
  
    
    
      <link rel="stylesheet" href="/css/bootstrap.min.css">
    
      <link rel="stylesheet" href="/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="/css/atom-one-dark.css">
    
      <link rel="stylesheet" href="/css/jquery.fancybox.css">
    
      <link rel="stylesheet" href="/css/nprogress.min.css">
    
      <link rel="stylesheet" href="/css/valine.css">
    
      <link rel="stylesheet" href="/css/life.css">
    
  

  

  <!-- jQuery first, then Tether, then Bootstrap JS. -->
  
  
  
    <script src="/js/jquery-2.2.4.min.js"></script>
  
    <script src="https://cdn1.lncld.net/static/js/3.1.0/av-min.js"></script>
  
    <script src="/js/jquery.pjax.js"></script>
  
    <script src="/js/nprogress.min.js"></script>
  
    <script src="/js/tether.min.js"></script>
  
    <script src="/js/bootstrap.min.js"></script>
  
    <script src="/js/highlight.min.js"></script>
  
    <script src="/js/highlightjs-line-numbers.min.js"></script>
  
    <script src="/js/jquery.fancybox.js"></script>
  
    <script src="/js/jquery.qrcode.min.js"></script>
  
    <script src="/js/Valine.min.js"></script>
  
  
</head>
<body>
<script>AV.init({appId:'',appKey:''});</script>
<script type="text/javascript">
      var config = {
            ClasS: 'Counter',
            el:'.views',
            elP: '.views-post'
      }
</script>
<div class="container">
    <div class="row blog-box-shadow">
        <!--博客主栏开始-->
        <div class="col-xl-9 col-lg-12 blog-main" id="pjax-box">
            <header class="blog-header">
                <a href="yihao.ml" class="blog-header-mobile-title">YIHAO'S BLOG</a>
                <a href="javascript:;" class="blog-header-navbar-btn"><i class="fa fa-bars"></i></a>
                <nav class="blog-header-navbar blog-header-fixed">
                    <ul class="blog-navbar-links">
                        
                          <li class="blog-nav-item"><a href="/" class="transition">首页</a></li>
                        
                          <li class="blog-nav-item"><a href="/about/" class="transition">关于</a></li>
                        
                          <li class="blog-nav-item"><a href="/links/" class="transition">链接</a></li>
                        
                        <div class="blog-navbar-right">
                            <form action>
                                <div class="input-group">
                                    <input type="text" class="blog-header-search" placeholder="search...">
                                    <buttn type="submit" class="blog-header-search-btn"><i class="fa fa-search"></i></buttn>
                                </div>
                            </form>
                        </div>
                    </ul>
                </nav>
            </header>
                
<header class="blog-post-page-title">
    <h4>ClouderaManager操作指南</h4>
    <time datetime="2019-03-19T13:58:42.000Z"><i class="fa fa-clock-o"></i>2019-03-19</time>
    
    
    
    
	
        <span><i class="fa fa-folder-o"></i>
    		
    	       <a href="/categories/大数据/" rel="categories" data-toggle="tooltip" data-placement="top" title="Linux">大数据</a>
    		
        </span>
	
    
</header>
<div class="blog-main-post blog-post-page-box">
    <article class="blog-post-block blog-post-page-content">
        <section>
            
                <p>作者 ： 张帅</p>
<h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1 前言"></a>1 前言</h2><p>构建企业级别的大数据平台不是一件简单的事情，要从多个方面进行考虑，如硬件环境、软件环境。Hadoop生态圈的产品众多，部署、安装、运维、监控等工作异常琐碎，尤其当某个组件出现问题，由于机器的数量、组件的分布情况，往往会使得运维人员无从下手。</p>
<p>目前市面上Hadoop的发型版本主要有三种：</p>
<pre><code>1. Apache Hadoop
2. CDH(Cloudera Distribution Hadoop)
3. HDP(Hortonworks Data Platform)</code></pre><p>首先，Apache Hadoop是最正统的发行版本，版本更新快，新特性增加的多，但相对而言Bug较多，组件之间的兼容性也较差。</p>
<p>其次，CDH版本会将Hadoop的各个组件进行打包，形成一个发布版本，针对该版本下的各个组件进行一系列测试，补丁修复，优化策略等，保证了CDH大版本下各个Hadoop组件之间的良好协作性。大部分公司均使用该系列。</p>
<p>最后，HDP版本是Hortonworks公司针对Hadoop的发行版本，暂时没有过多的了解。</p>
<hr>
<p>CDH的公司Cloudera推出了Cloudera Manager用于CDH版本集群的管理。Cloudera Manager是一款管理CDH集群的端到端的应用产品，可以通过管理界面可视化的对集群中的一系列组件进行统一的管理：部署、安装、配置、监控等。</p>
<p>简单来说，Cloudera Manager有四大功能：</p>
<pre><code>1. 管理：对集群进行管理，如添加、删除节点等操作。
2. 监控：监控集群的健康情况，对设置的各种指标和系统运行情况进行全面监控。
3. 诊断：对集群出现的问题进行诊断，对出现的问题给出建议解决方案。
4. 集成：对hadoop的多组件进行整合。</code></pre><p>Cloudera Manager的核心是Cloudera Manager Server，简称CMS。CMS提供了管理端Web界面，统一针对其他节点进行控制，如图所示</p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182jpew5tj30jc0fuq3r.jpg" alt></p>
<p><strong>组件介绍</strong></p>
<pre><code>1. Agent，Agent安装在集群中的各个节点上，用于启动、结束进程，安装、配置组件，监控节点等
2. Management Service，由一系列的角色构成，角色有监控、预警、报告等
3. Database，存储了配置和监控信息
4. Cloudera Repository，Cloudera Manager用于分发的软件仓库</code></pre><h2 id="2-前置准备工作"><a href="#2-前置准备工作" class="headerlink" title="2 前置准备工作"></a>2 前置准备工作</h2><p><strong>操作系统尽量和要使用Cloudera Manager版本匹配，可以参考官方给出的Cloudera Manager与操作系统的兼容性参照表。</strong></p>
<p><a href="http://archive.cloudera.com/cm5" target="_blank" rel="noopener">Cloudera Manager官方下载</a></p>
<p><a href="http://archive.cloudera.com/cdh5/cdh/5/" target="_blank" rel="noopener">Cloudera CDH 各个组件官方下载</a></p>
<p><a href="https://www.cloudera.com/documentation/enterprise/release-notes/topics/rn_consolidated_pcm.html#cm_cdh_compatibility" target="_blank" rel="noopener">CDH Requirements for Cloudera Manager</a></p>
<h3 id="2-1-关于RAID-0的说明"><a href="#2-1-关于RAID-0的说明" class="headerlink" title="2.1 关于RAID 0的说明"></a>2.1 关于RAID 0的说明</h3><p>尽管建议采用RAID(Redundant Array of Independent Disk,即磁盘阵列)作为NameNode的存储器以保护元数据，但是若将RAID作为datanode的存储设备则不会给HDFS带来益处。HDFS所提供的节点间数据复制技术已可满足数据备份需求，无需使用RAID的冗余机制。</p>
<p>此外，尽管RAID条带化技术(RAID 0)被广泛用户提升性能，但是其速度仍然比用在HDFS里的JBOD(Just a Bunch Of Disks)配置慢。JBOD在所有磁盘之间循环调度HDFS块。RAID 0的读写操作受限于磁盘阵列中最慢盘片的速度，而JBOD的磁盘操作均独立，因而平均读写速度高于最慢盘片的读写速度。需要强调的是，各个磁盘的性能在实际使用中总存在相当大的差异，即使对于相同型号的磁盘。针对某一雅虎集群的评测报告<a href="http://markmail.org/message/xmzc45zi25htr7ry" target="_blank" rel="noopener">点我</a>表明，在一个测试(Gridmix)中，JBOD比RAID 0 快10%；在另一测试(HDFS写吞吐量)中，JBOD比RAID 0 快30%。</p>
<p>最后，若JBOD配置的某一磁盘出现故障，HDFS可以忽略该磁盘，继续工作。而RAID的某一盘片故障会导致整个磁盘阵列不可用，进而使相应节点失效。</p>
<p><a href="https://zh.hortonworks.com/blog/why-not-raid-0-its-about-time-and-snowflakes/" target="_blank" rel="noopener">https://zh.hortonworks.com/blog/why-not-raid-0-its-about-time-and-snowflakes/</a></p>
<p><em>备注：我们实际生成环境使用的是RAID5，12块4T硬盘，可用空间为40T。虽然有可能因为RAID卡的损坏导致节点故障，但是RAID卡极大程度的提高了IO性能，并且在逻辑上将12块硬盘映射为了一块大磁盘。单块磁盘故障不会影响到节点的状态。</em></p>
<h3 id="2-2-IP地址"><a href="#2-2-IP地址" class="headerlink" title="2.2 IP地址"></a>2.2 IP地址</h3><p>尽可能的将集群部署在同一网段中，避免夸路由进行数据交互。</p>
<h3 id="2-3-主机名及映射"><a href="#2-3-主机名及映射" class="headerlink" title="2.3 主机名及映射"></a>2.3 主机名及映射</h3><p>主机名映射为全限定名称和短名称的形式，例如：<br>​<br>​    192.168.15.193 datacenter01.aisino.com datacenter01</p>
<h3 id="2-4-启动级别"><a href="#2-4-启动级别" class="headerlink" title="2.4 启动级别"></a>2.4 启动级别</h3><p>启动级别尽可能设置为3，避免其他图形界面消耗机器资源。</p>
<h3 id="2-5-防火墙和selinux"><a href="#2-5-防火墙和selinux" class="headerlink" title="2.5 防火墙和selinux"></a>2.5 防火墙和selinux</h3><p>关闭防火墙的原因是一些动态任务（YARN、Spark Executor）在运行时动态分配端口号，如果开启防火墙的话会导致任务无法连接，导致任务执行失败。</p>
<p>selinux记得要关闭。</p>
<h3 id="2-6-配置系统文件打开数量以及用户最大进程数量"><a href="#2-6-配置系统文件打开数量以及用户最大进程数量" class="headerlink" title="2.6 配置系统文件打开数量以及用户最大进程数量"></a>2.6 配置系统文件打开数量以及用户最大进程数量</h3><pre><code>vi /etc/security/limits.conf
* soft nofile 65536
* hard nofile 65536
* soft nproc 16384
* hard nproc 16384</code></pre><p><em>注意，星号表示所有用户</em></p>
<h3 id="2-7-配置NTP服务"><a href="#2-7-配置NTP服务" class="headerlink" title="2.7 配置NTP服务"></a>2.7 配置NTP服务</h3><p>Cloudera Manager要求各个节点都启动NTP服务，保证集群内各节点之间的时间同步，由于是分布式架构，节点与节点之间时刻保持通信，如果节点之间时间差别过大，会导致通信故障，从而节点造成宕机。</p>
<h3 id="2-8-配置SSH"><a href="#2-8-配置SSH" class="headerlink" title="2.8 配置SSH"></a>2.8 配置SSH</h3><p>所有节点都需要配置SSH免密登录（包括自己）。</p>
<h2 id="3-安装Cloudera-Manager"><a href="#3-安装Cloudera-Manager" class="headerlink" title="3 安装Cloudera Manager"></a>3 安装Cloudera Manager</h2><p><strong>本次安装环境为CDH-5.7.0版本</strong></p>
<h3 id="3-1-下载安装包"><a href="#3-1-下载安装包" class="headerlink" title="3.1 下载安装包"></a>3.1 下载安装包</h3><pre><code>1. 下载Cloudera Manager安装包
http://archive.cloudera.com/cm5/cm/5/cloudera-manager-centos7-cm5.7.0_x86_64.tar.gz

2. 下载Parcel离线包
http://archive.cloudera.com/cdh5/parcels/5.7.0/CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel
http://archive.cloudera.com/cdh5/parcels/5.7.0/CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel.sha1
http://archive.cloudera.com/cdh5/parcels/5.7.0/manifest.json</code></pre><h3 id="3-2-安装yum依赖"><a href="#3-2-安装yum依赖" class="headerlink" title="3.2 安装yum依赖"></a>3.2 安装yum依赖</h3><pre><code>yum install -y chkconfig python bind-utils psmisc libxslt zlib sqlite
yum install -y cyrus-sasl-plain cyrus-sasl-gssapi fuse portmap fuse-libs
yum install -y redhat-lsb bind-utils libxslt
yum install -y protobuf snappy</code></pre><h3 id="3-3-安装MySQL数据库"><a href="#3-3-安装MySQL数据库" class="headerlink" title="3.3 安装MySQL数据库"></a>3.3 安装MySQL数据库</h3><p>Cloudera Manager需要将配置信息以及监控信息存储至数据库中，这里采用MySQL数据。</p>
<h3 id="3-4-MySQL驱动包路径"><a href="#3-4-MySQL驱动包路径" class="headerlink" title="3.4 MySQL驱动包路径"></a>3.4 MySQL驱动包路径</h3><p>必须将MySQL驱动包复制至/usr/share/java目录下，并且驱动包的名称必须为mysql-connector-java.jar。</p>
<p><strong>注意，所有节点都需要MySQL驱动包</strong></p>
<h3 id="3-5-在MySQL中创建数据库"><a href="#3-5-在MySQL中创建数据库" class="headerlink" title="3.5 在MySQL中创建数据库"></a>3.5 在MySQL中创建数据库</h3><pre><code>create database hive DEFAULT CHARSET utf8 COLLATE utf8_general_ci;
create database hue DEFAULT CHARSET utf8 COLLATE utf8_general_ci;
create database monitor DEFAULT CHARSET 
utf8 COLLATE utf8_general_ci;
create database oozie DEFAULT CHARSET utf8 COLLATE utf8_general_ci;
create database cloudera DEFAULT CHARSET utf8 COLLATE utf8_general_ci;</code></pre><h3 id="3-6-解压Cloudera-Manager安装包"><a href="#3-6-解压Cloudera-Manager安装包" class="headerlink" title="3.6 解压Cloudera Manager安装包"></a>3.6 解压Cloudera Manager安装包</h3><p>Cloudera Manager Server服务安装在Manager1服务器上，因此需要将Cloudera Manager的压缩包以及所有Parcel文件上传至服务器，并将Cloudera Manager压缩包解压至/opt/cloudera-manager目录下</p>
<h3 id="3-7-创建用户"><a href="#3-7-创建用户" class="headerlink" title="3.7 创建用户"></a>3.7 创建用户</h3><p>在所有节点上创建cloudera-scm用户：<br>​<br>​    useradd –system –home=/opt/cloudera-manager/cm-5.7.0/run/cloudera-scm-server –no-create-home –shell=/bin/false –comment “Cloudera SCM User” cloudera-scm</p>
<h3 id="3-8-创建Cloudera-Manager-Server元数据目录"><a href="#3-8-创建Cloudera-Manager-Server元数据目录" class="headerlink" title="3.8 创建Cloudera Manager Server元数据目录"></a>3.8 创建Cloudera Manager Server元数据目录</h3><p>在主节点上需要创建Cloudera Manager Server的元数据目录：</p>
<pre><code>mkdir /var/cloudera-scm-server
chown cloudera-scm:cloudera-scm /var/cloudera-scm-server
chown cloudera-scm:cloudera-scm /opt/cloudera-manager</code></pre><h3 id="3-9-复制cloudera-manager目录到其他节点"><a href="#3-9-复制cloudera-manager目录到其他节点" class="headerlink" title="3.9 复制cloudera-manager目录到其他节点"></a>3.9 复制cloudera-manager目录到其他节点</h3><p>首先将/opt/cloudera-manager/cm-5.7.0/etc/cloudera-scm-agent/config.ini文件中server_host配置项的地址更改为主节点的地址</p>
<p>将主节点上/opt/cloudera-manager目录复制至其他集群节点下，命令如下：</p>
<pre><code>scp -r /opt/cloudera-manager 主机:/opt/</code></pre><h3 id="3-10-创建Parcel目录"><a href="#3-10-创建Parcel目录" class="headerlink" title="3.10 创建Parcel目录"></a>3.10 创建Parcel目录</h3><p>在主节点上创建Parcel包的存储目录，命令如下：</p>
<pre><code>mkdir -p /opt/cloudera/parcel-repo
chown cloudera-scm:cloudera-scm /opt/cloudera/parcel-repo</code></pre><p>将以下文件复制到该目录下</p>
<ul>
<li>CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel</li>
<li>CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel.sha1</li>
<li>manifest.json</li>
</ul>
<p>将<strong>CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel.sha1</strong>文件的名称修改为<strong>CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel.sha</strong></p>
<h3 id="3-11-创建Parcel包分发目录"><a href="#3-11-创建Parcel包分发目录" class="headerlink" title="3.11 创建Parcel包分发目录"></a>3.11 创建Parcel包分发目录</h3><p>Cloudera Manager在安装的过程中，需要将安装包复制到集群的各个节点上，因此需要在集群各个节点上事先创建Parcel包的分发目录。</p>
<p>在所有节点上：</p>
<pre><code>mkdir -p /opt/cloudera/parcels
chown cloudera-scm:cloudera-scm /opt/cloudera/parcels</code></pre><h3 id="3-12-初始化CSM数据库脚本"><a href="#3-12-初始化CSM数据库脚本" class="headerlink" title="3.12 初始化CSM数据库脚本"></a>3.12 初始化CSM数据库脚本</h3><p>在主节点上，执行初始化脚本：</p>
<pre><code>/opt/cloudera-manager/cm-5.7.0/share/cmf/schema/scm_prepare_database.sh mysql -hmanager1 -uroot -p123456 --scm-host manager1 scmdbn scmdbu scmdbp</code></pre><p>说明：这个脚本就是用来创建和配置CMS需要的数据库的脚本。</p>
<p>各参数是指：</p>
<p>mysql：数据库用的是mysql，如果安装过程中用的oracle，那么该参数就应该改为oracle。</p>
<p>-hmanager1：数据库建立在manager1主机上面。也就是主节点上面。</p>
<p>-uroot：root身份运行mysql。</p>
<p>-123456：mysql的root密码是123456。</p>
<p>–scm-host manager1：CMS的主机，一般是和mysql安装的主机是在同一个主机上。</p>
<p>最后三个参数是：数据库名，数据库用户名，数据库密码。</p>
<p><strong>我的实际环境中采用如下命令</strong></p>
<pre><code>/opt/cloudera-manager/cm-5.7.0/share/cmf/schema/scm_prepare_database.sh mysql -hlocalhost -uroot -p -P13066 --scm-host localhost cloudera root BIM@123%$#qwe </code></pre><h3 id="3-13-配置与启动Cloudera-Manager-Server"><a href="#3-13-配置与启动Cloudera-Manager-Server" class="headerlink" title="3.13 配置与启动Cloudera Manager Server"></a>3.13 配置与启动Cloudera Manager Server</h3><p>首先将Cloudera Manager Server的启动脚本复制到/etc/init.d/目录下：<br>​<br>​    cp <br>​    /opt/cloudera-manager/cm-5.7.0/etc/init.d/cloudera-scm-server <br>​    /etc/init.d/cloudera-scm-server</p>
<p>配置/etc/init.d/cloudera-scm-server：</p>
<pre><code>vi /etc/init.d/cloudera-scm-server
找到CMF_DEFAULTS配置项，进行修改。
CMF_DEFAULTS=${CMF_DEFAULTS:-/opt/cloudera-manager/cm-5.7.0/etc/default}</code></pre><p>启动Cloudera Manager Server：</p>
<pre><code>service cloudera-scm-server start
chkconfig cloudera-scm-server on</code></pre><h3 id="3-14-配置与启动Cloudera-Manager-Agent"><a href="#3-14-配置与启动Cloudera-Manager-Agent" class="headerlink" title="3.14 配置与启动Cloudera Manager Agent"></a>3.14 配置与启动Cloudera Manager Agent</h3><p>在所有节点上创建agent的运行时目录：</p>
<pre><code>mkdir /opt/cloudera-manager/cm-5.7.0/run/cloudera-scm-agent</code></pre><p>将Cloudera Manager Agent的启动脚本复制到/etc/init.d/目录下：</p>
<pre><code>cp \
/opt/cloudera-manager/cm-5.7.0/etc/init.d/cloudera-scm-agent \
/etc/init.d/cloudera-scm-agent</code></pre><p>配置Cloudera Manager Agent：</p>
<pre><code>vi /etc/init.d/cloudera-scm-agent 
找到CMF_DEFAULTS配置项，进行修改。
CMF_DEFAULTS=${CMF_DEFAULTS:-/opt/cloudera-manager/cm-5.7.0/etc/default}</code></pre><p>启动Cloudera Manager Agent：</p>
<pre><code>service cloudera-scm-agent start
chkconfig cloudera-scm-agent on</code></pre><h3 id="3-15-日志文件路径"><a href="#3-15-日志文件路径" class="headerlink" title="3.15 日志文件路径"></a>3.15 日志文件路径</h3><p>启动Server或Agent由于各种原因可能会导致启动失败，因此需要查看日志文件定位错误信息，进行修复。</p>
<p>Server的日志文件位于：</p>
<pre><code>/opt/cloudera-manager/cm-5.7.0/log/cloudera-scm-server</code></pre><p>Agent的日志文件位于：</p>
<pre><code>/opt/cloudera-manager/cm-5.7.0/log/cloudera-scm-agent</code></pre><h3 id="3-16-进入Cloudera-Manager-Server管理页面"><a href="#3-16-进入Cloudera-Manager-Server管理页面" class="headerlink" title="3.16 进入Cloudera Manager Server管理页面"></a>3.16 进入Cloudera Manager Server管理页面</h3><p>当Server与Agent全部启动完成后，可以访问CMS的WEB管理页面<a href="http://localhost:7180" title="例子" target="_blank" rel="noopener">example link</a>，如图所示。</p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182pm79yij30lz08k0su.jpg" alt></p>
<p><em>账户密码均为admin</em></p>
<h2 id="4-安装CDH"><a href="#4-安装CDH" class="headerlink" title="4 安装CDH"></a>4 安装CDH</h2><p><em>在Cloudera Manager Server的WEB管理页面中，可以批量进行组件的安装、配置等，下面开始安装CDH各种组件。</em></p>
<h3 id="4-1-接受协议"><a href="#4-1-接受协议" class="headerlink" title="4.1 接受协议"></a>4.1 接受协议</h3><p>首次登陆时，会自动弹出“接受协议”页面，接受即可。</p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182pmcti9j30m00b2wh3.jpg" alt></p>
<h3 id="4-2-选择版本"><a href="#4-2-选择版本" class="headerlink" title="4.2 选择版本"></a>4.2 选择版本</h3><p>选择版本时，选择免费版本即可。</p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182pmgi4bj30m409n401.jpg" alt></p>
<h3 id="4-3-查看当前已管理主机"><a href="#4-3-查看当前已管理主机" class="headerlink" title="4.3 查看当前已管理主机"></a>4.3 查看当前已管理主机</h3><p>如果Agent正产启动，在“当前管理的主机”页面会显示所有管理主机，否则请检查Agent是否正常启动。</p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182pmkbq7j30m30awta9.jpg" alt></p>
<p>选择所有主机，点击“继续”按钮。</p>
<h3 id="4-4-等待系统分发Parcel包"><a href="#4-4-等待系统分发Parcel包" class="headerlink" title="4.4 等待系统分发Parcel包"></a>4.4 等待系统分发Parcel包</h3><p>Cloudera Manager会将Parcel包分发至各个节点，等待几分钟即可。</p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182pm7kulj30m108ojro.jpg" alt></p>
<p><strong>注意，在分发Parcel包的过程中，可以会出现分发失败的问题，查看相应的Agent日志，定位错误，进行修复。</strong></p>
<p><strong>比较常见的一个错误是Python脚本出现问题，需要进行一些修改，参见链接：</strong><br><a href="http://www.jianshu.com/p/0d70a67b66b2" target="_blank" rel="noopener">http://www.jianshu.com/p/0d70a67b66b2</a></p>
<h4 id="4-5-等待检查主机正确性"><a href="#4-5-等待检查主机正确性" class="headerlink" title="4.5 等待检查主机正确性"></a>4.5 等待检查主机正确性</h4><p>Parcel包分发完成后，Cloudera Manager会检查主机的的正确性，包括一些优化的配置、要关闭的属性等，该步骤非常重要，一定要根据检查结果对主机进行配置修复，否则在以后的过程中会出现各种不可预料问题。</p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182pm7fgtj30m00aqaab.jpg" alt></p>
<h3 id="4-6-选择要安装的组件"><a href="#4-6-选择要安装的组件" class="headerlink" title="4.6 选择要安装的组件"></a>4.6 选择要安装的组件</h3><p>主机正确性检查完成后，就可以进入安装环节了，Cloudera Manager会要求你选择要安装的组件。</p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182pmiziwj30m30auwgm.jpg" alt></p>
<p><strong>选择“自定义服务”，选择集群中要安装的组件。</strong></p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182pmmg99j30m20bhdjk.jpg" alt></p>
<h3 id="4-7-设置数据库"><a href="#4-7-设置数据库" class="headerlink" title="4.7 设置数据库"></a>4.7 设置数据库</h3><p>选择完成要安装的组件后，需要为Cloudera Manager配置运行时数据库环境，如图所示。</p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182pmbbqkj30m60bn75o.jpg" alt></p>
<p>配置的数据库在前面的步骤中已经提前创建完成。</p>
<h3 id="4-8-设置组件的基本运行环境"><a href="#4-8-设置组件的基本运行环境" class="headerlink" title="4.8 设置组件的基本运行环境"></a>4.8 设置组件的基本运行环境</h3><p>该步骤主要用于设置组件的基本运行环境，例如NameNode的节点、DataNode的节点、数据存放的目录等，该步骤根据实际的物理环境进行设置即可。</p>
<h3 id="4-9-等待启动集群"><a href="#4-9-等待启动集群" class="headerlink" title="4.9 等待启动集群"></a>4.9 等待启动集群</h3><p>在集群的启动过程中，可能会因为权限或其他问题导致某些服务启动失败，只需要根据错误信息进行修复，即可启动完成。</p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182pma4kyj30ly0b2dgq.jpg" alt></p>
<h3 id="4-10-启动成功"><a href="#4-10-启动成功" class="headerlink" title="4.10 启动成功"></a>4.10 启动成功</h3><p>集群启动成功后，可在首页查看集群的总览。</p>
<p><img src="http://ww1.sinaimg.cn/large/0066vfZIgy1g182pmklf3j30m00a70ut.jpg" alt></p>
<h3 id="4-11-其他"><a href="#4-11-其他" class="headerlink" title="4.11 其他"></a>4.11 其他</h3><p>后续可以启动HDFS的HA、YARN的HA以及优化各个组件的配置等。</p>
<p>感谢张帅分享。</p>

            
        </section>
        <footer class="blog-post-page-tags">
        
			
		
        </footer>
    </article>
    <article class="blog-post-page-readmore">
    	
    	
		
			<a href="/2019/03/21/2019-03-21-2017IDEA-无法创建-scala/" class="blog-post-page-readmore-prev" data-toggle="tooltip" data-placement="top" title="IDEA 无法创建 scala">上一篇</a>
		

		
		
			<a href="/2019/03/15/2019-03-15-用户行为指分析/" class="blog-post-page-readmore-next" data-toggle="tooltip" data-placement="top" title="用户行为指分析">下一篇</a>
		

        <div style="clear: both;"></div>
    </article>

    <article class="blog-post-block blog-post-page-content">
            <div class="row">
            
                <div class="col-md-4 col-sm-4 post-page-more-btn">
                    <span class="post-comments-btn btn btn-info btn-block" data-toggle="tooltip" data-placement="top" title="本站采用Disqus评论组件，若您没有科学上网可能会无法查看并评论">加载评论</span>
                </div>
            
                <div class="col-md-4 col-sm-4 post-page-more-btn">
                    <span data-toggle="modal" data-target="#post-donate-content">
                        <span id="post-donate-btn" class="btn btn-danger btn-block" data-toggle="tooltip" data-placement="top" title="如果您觉得本文还不错或者对您有帮助，可以考虑打赏一下作者哦">打赏本文</span>
                    </span>
                </div>
                <div class="col-md-4 col-sm-4 post-page-more-btn">
                    <span data-toggle="modal" data-target="#post-qrcode-content">
                        <span><span id="post-qrcode-btn" class="btn btn-success btn-block" data-toggle="tooltip" data-placement="top" title="微信扫描二维码手机端查看本文及分享本文">二维码</span></span>
                    </span>
                </div>
            </div>
        <div class="post-more-function-br"></div>

        <div class="modal fade" id="post-donate-content" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">打赏本文</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row post-donate-content">
                            <div class="col-md-4">
                                <p>支付宝</p>
                                <img class="post-donate-content-img no-lightbox" src="http://dl.weic96.cn/logo.png">
                            </div>
                            <div class="col-md-4">
                                <p>微信</p>
                                <img class="post-donate-content-img no-lightbox" src="http://dl.weic96.cn/logo.png">
                            </div>
                            <div class="col-md-4">
                                <p>财付通</p>
                                <img class="post-donate-content-img no-lightbox" src="http://dl.weic96.cn/logo.png">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="post-qrcode-content" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">文章二维码</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row post-qrcode-content">
                            <span class="post-qrcode-content-canvas"></span>
                            <img class="post-qrcode-content-img no-lightbox" src>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                    </div>
                </div>
            </div>
        </div>
        
        <script>
            // post QRcode
            // 中文转码
            function toUtf8(str) {
                var out, i, len, c;
                out = "";
                len = str.length;
                for (i = 0; i < len; i++) {
                    c = str.charCodeAt(i);
                    if ((c >= 0x0001) && (c <= 0x007F)) {
                        out += str.charAt(i);
                    } else if (c > 0x07FF) {
                        out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));
                        out += String.fromCharCode(0x80 | ((c >> 6) & 0x3F));
                        out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));
                    } else {
                        out += String.fromCharCode(0xC0 | ((c >> 6) & 0x1F));
                        out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));
                    }
                }
                return out;
            }
            // 生成
            var qrcode= $('.post-qrcode-content-canvas').qrcode({width: 150,height: 150,text: toUtf8("yihao.ml/2019/03/19/2019-03-19-ClouderaManager手册/")}).hide();
            var canvas=qrcode.find('canvas').get(0);
            $('.post-qrcode-content-img').attr('src',canvas.toDataURL('image/jpg'));
        </script>

        
    </article>
    
</div>

                
            <footer class="blog-footer">
                <p class="blog-footer-left">Copyright ©  2019 <a href="yihao.ml">YIHAO'S BLOG</a></p>
                <p class="blog-footer-right">Powered by <a href="https://hexo.io" target="_blank">Hexo</a>,Theme <a href="https://note.isweic.com/themes-life/" target="_blank">Life</a></p>
            </footer>
        </div><!--博客主栏结束-->
        <!--博客侧边栏开始-->
        <div class="col-xl-3 blog-sidebar">
            <div class="blog-sidebar-title">
                <a href>YIHAO'S BLOG</a>
            </div>
            <div class="blog-sidebar-logo">
                <img src="https://i.loli.net/2019/06/30/5d186da8d94aa29517.jpeg">
            </div>
            <div class="blog-sidebar-count blog-sidebar-padding">
                <div class="blog-sidebar-count-left">
                    <p class="blog-sidebar-count-p">131</p>
                    <span class="blog-sidebar-count-span">文章</span>
                </div>
                <div class="blog-sidebar-count-right">
                    <p class="blog-sidebar-count-p">47</p>
                    <span class="blog-sidebar-count-span">标签</span>
                </div>
                <div style="clear: both;"></div>
            </div>
            <div class="blog-sidebar-icon blog-sidebar-padding">
                <ul>
                    <li><a href class="icon-github" target="_blank" data-toggle="tooltip" data-placement="top" title="Github"><i class="fa fa-github"></i></a></li>
                    <li><a href class="icon-weibo" target="_blank" data-toggle="tooltip" data-placement="top" title="新浪微博"><i class="fa fa-weibo"></i></a></li>
                    <li><a href class="icon-twitter" target="_blank" data-toggle="tooltip" data-placement="top" title="Twitter"><i class="fa fa-twitter"></i></a></li>
                    <!--<li><a href="" class="icon-facebook" target="_blank" data-toggle="tooltip" data-placement="top" title="FaceBook"><i class="fa fa-facebook"></i></a></li>-->
                    <li><a href="mailto:" class="icon-email" data-toggle="tooltip" data-placement="top" title="E-Mail"><i class="fa fa-envelope"></i></a></li>
                    <li><a href class="icon-rss" data-toggle="tooltip" target="_blank" data-placement="top" title="RSS"><i class="fa fa-rss"></i></a></li>
                </ul>
            </div>
            <div class="blog-sidebar-categories">
                <h4 class="blog-sidebar-h4"><i class="fa fa-folder-open"></i>&nbsp;文章分类</h4>
                <ul class="list-group blog-sidebar-padding">
                  
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/大数据/">大数据</a>
                          <span class="badge badge-default badge-pill">39</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/博客/">博客</a>
                          <span class="badge badge-default badge-pill">4</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/ubuntu/">ubuntu</a>
                          <span class="badge badge-default badge-pill">12</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/前端/">前端</a>
                          <span class="badge badge-default badge-pill">5</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/后端/">后端</a>
                          <span class="badge badge-default badge-pill">30</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/软件/">软件</a>
                          <span class="badge badge-default badge-pill">4</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/自动化测试/">自动化测试</a>
                          <span class="badge badge-default badge-pill">1</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/编程语言/">编程语言</a>
                          <span class="badge badge-default badge-pill">8</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/其他/">其他</a>
                          <span class="badge badge-default badge-pill">5</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/Autodesk/">Autodesk</a>
                          <span class="badge badge-default badge-pill">1</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/物联网/">物联网</a>
                          <span class="badge badge-default badge-pill">3</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/云计算/">云计算</a>
                          <span class="badge badge-default badge-pill">3</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/算法与数据结构/">算法与数据结构</a>
                          <span class="badge badge-default badge-pill">7</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/分布式/">分布式</a>
                          <span class="badge badge-default badge-pill">1</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/游戏开发/">游戏开发</a>
                          <span class="badge badge-default badge-pill">1</span>
                      </li>
                    
                      <li class="list-group-item justify-content-between">
                          <a href="/categories/转载/">转载</a>
                          <span class="badge badge-default badge-pill">1</span>
                      </li>
                    
                  
                </ul>
            </div>
            <div class="blog-sidebar-tags">
                <h4 class="blog-sidebar-h4"><i class="fa fa-tag"></i>&nbsp;标签云</h4>
                <ul class="blog-sidebar-tags-ul blog-sidebar-padding">
                  
                    
                      <li><a href="/tags/ffmpeg/" class="tag-could" data-toggle="tooltip" data-placement="top" title="ffmpeg">ffmpeg</a></li>
                    
                      <li><a href="/tags/redis/" class="tag-could" data-toggle="tooltip" data-placement="top" title="redis">redis</a></li>
                    
                      <li><a href="/tags/nodejs/" class="tag-could" data-toggle="tooltip" data-placement="top" title="nodejs">nodejs</a></li>
                    
                      <li><a href="/tags/hibernate/" class="tag-could" data-toggle="tooltip" data-placement="top" title="hibernate">hibernate</a></li>
                    
                      <li><a href="/tags/Hadoop/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Hadoop">Hadoop</a></li>
                    
                      <li><a href="/tags/Spring/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Spring">Spring</a></li>
                    
                      <li><a href="/tags/struts/" class="tag-could" data-toggle="tooltip" data-placement="top" title="struts">struts</a></li>
                    
                      <li><a href="/tags/FFmpeg/" class="tag-could" data-toggle="tooltip" data-placement="top" title="FFmpeg">FFmpeg</a></li>
                    
                      <li><a href="/tags/selenium/" class="tag-could" data-toggle="tooltip" data-placement="top" title="selenium">selenium</a></li>
                    
                      <li><a href="/tags/python/" class="tag-could" data-toggle="tooltip" data-placement="top" title="python">python</a></li>
                    
                      <li><a href="/tags/问题总结/" class="tag-could" data-toggle="tooltip" data-placement="top" title="问题总结">问题总结</a></li>
                    
                      <li><a href="/tags/shiro/" class="tag-could" data-toggle="tooltip" data-placement="top" title="shiro">shiro</a></li>
                    
                      <li><a href="/tags/无聊/" class="tag-could" data-toggle="tooltip" data-placement="top" title="无聊">无聊</a></li>
                    
                      <li><a href="/tags/问题记录/" class="tag-could" data-toggle="tooltip" data-placement="top" title="问题记录">问题记录</a></li>
                    
                      <li><a href="/tags/ActiveMQ/" class="tag-could" data-toggle="tooltip" data-placement="top" title="ActiveMQ">ActiveMQ</a></li>
                    
                      <li><a href="/tags/Mybatis/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Mybatis">Mybatis</a></li>
                    
                      <li><a href="/tags/Zookeeper/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Zookeeper">Zookeeper</a></li>
                    
                      <li><a href="/tags/RPC/" class="tag-could" data-toggle="tooltip" data-placement="top" title="RPC">RPC</a></li>
                    
                      <li><a href="/tags/MapReduce/" class="tag-could" data-toggle="tooltip" data-placement="top" title="MapReduce">MapReduce</a></li>
                    
                      <li><a href="/tags/FTP/" class="tag-could" data-toggle="tooltip" data-placement="top" title="FTP">FTP</a></li>
                    
                      <li><a href="/tags/HDFS/" class="tag-could" data-toggle="tooltip" data-placement="top" title="HDFS">HDFS</a></li>
                    
                      <li><a href="/tags/Hive/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Hive">Hive</a></li>
                    
                      <li><a href="/tags/Flume/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Flume">Flume</a></li>
                    
                      <li><a href="/tags/Teamviewer/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Teamviewer">Teamviewer</a></li>
                    
                      <li><a href="/tags/forge/" class="tag-could" data-toggle="tooltip" data-placement="top" title="forge">forge</a></li>
                    
                      <li><a href="/tags/vue/" class="tag-could" data-toggle="tooltip" data-placement="top" title="vue">vue</a></li>
                    
                      <li><a href="/tags/Scala/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Scala">Scala</a></li>
                    
                      <li><a href="/tags/Hbase/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Hbase">Hbase</a></li>
                    
                      <li><a href="/tags/Raspberry-Pi/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Raspberry Pi">Raspberry Pi</a></li>
                    
                      <li><a href="/tags/git/" class="tag-could" data-toggle="tooltip" data-placement="top" title="git">git</a></li>
                    
                      <li><a href="/tags/Maven/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Maven">Maven</a></li>
                    
                      <li><a href="/tags/Python/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Python">Python</a></li>
                    
                      <li><a href="/tags/Spark/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Spark">Spark</a></li>
                    
                      <li><a href="/tags/InfluxDB/" class="tag-could" data-toggle="tooltip" data-placement="top" title="InfluxDB">InfluxDB</a></li>
                    
                      <li><a href="/tags/Java/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Java">Java</a></li>
                    
                      <li><a href="/tags/Redis/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Redis">Redis</a></li>
                    
                      <li><a href="/tags/JVM/" class="tag-could" data-toggle="tooltip" data-placement="top" title="JVM">JVM</a></li>
                    
                      <li><a href="/tags/MatLab/" class="tag-could" data-toggle="tooltip" data-placement="top" title="MatLab">MatLab</a></li>
                    
                      <li><a href="/tags/Kafka/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Kafka">Kafka</a></li>
                    
                      <li><a href="/tags/WebSocket/" class="tag-could" data-toggle="tooltip" data-placement="top" title="WebSocket">WebSocket</a></li>
                    
                      <li><a href="/tags/Storm/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Storm">Storm</a></li>
                    
                      <li><a href="/tags/CDH/" class="tag-could" data-toggle="tooltip" data-placement="top" title="CDH">CDH</a></li>
                    
                      <li><a href="/tags/hue/" class="tag-could" data-toggle="tooltip" data-placement="top" title="hue">hue</a></li>
                    
                      <li><a href="/tags/HBase/" class="tag-could" data-toggle="tooltip" data-placement="top" title="HBase">HBase</a></li>
                    
                      <li><a href="/tags/Minecraft/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Minecraft">Minecraft</a></li>
                    
                      <li><a href="/tags/Azkaban/" class="tag-could" data-toggle="tooltip" data-placement="top" title="Azkaban">Azkaban</a></li>
                    
                      <li><a href="/tags/生活/" class="tag-could" data-toggle="tooltip" data-placement="top" title="生活">生活</a></li>
                    
                  
                </ul>
            </div>
            <script>
              // 博客侧栏标签云随机色
              var tag_cloud = $('.tag-could');
              tag_cloud.each(function () {
                  var Cnum = 9;
                  var Crand = parseInt(Math.random() * Cnum);
                  $(this).addClass("tag-could" + Crand);
              })
            </script>
            <!--返回顶部按钮-->
            <div class="retop">
                <i class="fa fa-angle-up"></i>
            </div>
        </div><!--博客侧边栏结束-->
    </div>
</div>
<script src="/js/LeanStatistics.min.js"></script>
<script src="/js/Life.js"></script>
<script type="text/javascript">
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
    otherF();
    LeanStatistics();
    $(document).pjax('a', '#pjax-box', {fragment:'#pjax-box', timeout:8000}).on('pjax:complete', function() {
      $('pre code').each(function(i, block){
        hljs.highlightBlock(block);
      })
      $('code.hljs').each(function(i, block) {
        hljs.lineNumbersBlock(block);
      });
      LeanStatistics();
    }).on('pjax:start', function() { NProgress.start(); }).on('pjax:end',   function() {
      NProgress.done();
      otherF();
    });
</script>
</body>
</html>
